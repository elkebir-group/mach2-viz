{"version":3,"sources":["assets/clonal.jpeg","assets/migration.jpeg","assets/map.jpeg","assets/download.png","assets/logo.png","components/About.js","components/ClonalTree.js","components/Migration.js","components/Legend.js","components/MigrationMap.js","components/RightColumn.js","utils/DefaultDict.js","components/Viz.js","components/Home.js","components/DualViz.js","components/MigrationSummary.js","components/Loading.js","components/FilterMenu.js","components/SumViz.js","components/ClonalSummary.js","components/TriViz.js","App.js","reportWebVitals.js","index.js","assets/settings-gear.svg"],"names":["module","exports","__webpack_require__","p","About","React","createElement","className","Link","to","style","textDecoration","color","columns","href","class","src","clonal","alt","migration","id","Cytoscape","use","COSEBilkent","dagre","ClonalTree","props","hexColorRegex","colorPalette","ncolors","length","getColor","label","coloring","map","value","index","filter","item","undefined","test","parseInt","_useState","useState","_useState2","_slicedToArray","width","_useState3","_useState4","height","onlyUnique","array","indexOf","findLabel","node","labeling","nodes","tree","_","flat","data","type","edges","source","target","concat","_useState5","_useState6","graphData","setGraphData","useEffect","myCyRef","styleSheet","selector","backgroundColor","overlay-padding","z-index","text-outline-width","fontSize","border-width","border-color","border-opacity","background-color","text-outline-color","line-color","target-arrow-color","target-arrow-shape","curve-style","push","line-fill","line-gradient-stop-colors","line-gradient-stop-positions","layout","name","fit","directed","padding","animate","animationDuration","avoidOverlap","nodeDimensionsIncludeLabels","ready","evtbus","addListener","eventName","eventData","getElementById","nodeId","$","css","trigger","useMemo","CytoscapeComponent","elements","normalizeElements","zoomingEnabled","maxZoom","minZoom","autounselectify","boxSelectionEnabled","stylesheet","cy","on","evt","event","div","document","setAttribute","innerHTML","canvas","getElementsByTagName","position","top","renderedPosition","left","rightcol","body","appendChild","labeltag","querySelector","opacity","zIndex","fontWeight","fireEvent","contains","removeChild","sink","abc","console","log","Migration","_step","clsource","cltarget","_iterator","_createForOfIteratorHelper","entries","s","n","done","_ref","_ref2","i","err","e","f","_step2","_iterator2","_ref3","_ref4","rotated","shape","text-valign","text-halign","queryParameters","URLSearchParams","window","location","hash","split","get","circle","transform","x","y","edge","mu","gamma","sessionStorage","setItem","Legend","ret","forEach","l","fetchColor","coord_map","Fragment","cyCanvas","require","MigrationMap","canvheight","setCanvHeight","disp","setDisp","count","findCoords","found","coord","_useState7","_useState8","edges_t","_step4","flag","_iterator4","_ref7","_ref8","j","edge2","_useState9","_useState10","Math","floor","_step3","_iterator3","_ref5","_ref6","addEventListener","canv","offsetHeight","userZoomingEnabled","userPanningEnabled","ungrabify","pos","positions","slice","getBoundingClientRect","leftPos","RightColumn","DefaultDict","defaultVal","_classCallCheck","this","Proxy","insertParam","key","URL","urlParams","set","toString","reload","handleKeyPress","alert","Viz","useHistory","setMu","setGamma","jsonContents","getItem","wholeData","JSON","parse","labelName","setLabeling","rotate","setRotate","stringify","setData","_useState11","_useState12","setTree","_useState13","_useState14","tree_labeling","setTreeLabeling","_useState15","_useState16","setMigration","self","labelnames","eventBus","listeners","callback","removeListener","listener","onClick","protocol","host","for","onChange","selected","Home","windowWidth","innerWidth","windowHeight","innerHeight","json_dict","A7","A10","A22","A29","A31","A32","patient1","patient2","patient3","patient4","patient7","patient9","patient10","tracerx_res","tracerx_res_old","tracerx_res_new","default_patients","default_dirs","div_elements","which_color","_loop","current_directory","current_color","link","URLs","current_patient","download","url","filename","axios","responseType","then","res","fileDownload","getElementsByClassName","parentNode","elem","accept","json_contents","reader","FileReader","file","files","onload","readerEvt","jsonString","result","readAsText","DualViz","mu2","setMu2","gamma2","setGamma2","rotate2","setRotate2","labelName2","labeling2","setLabeling2","_useState17","_useState18","_useState19","_useState20","data2","setData2","_useState21","_useState22","_useState23","_useState24","_useState25","_useState26","_useState27","_useState28","tree2","setTree2","_useState29","_useState30","tree_labeling2","setTreeLabeling2","_useState31","_useState32","migration2","setMigration2","eventBus2","MigrationSummary","filterOut","filterJson","title","_toConsumableArray","Set","_i","_filterOut","search","Loading","circumference","PI","strokeDashoffset","progress","icon","cx","r","stroke","strokeWidth","fill","strokeDasharray","FilterMenu","show","numSolns","text","defaultChecked","toggleSelected","sum","currentUrl","SumViz","isLoading","setIsLoading","muSum","setMuSum","gammaSum","setGammaSum","showPanel","setShowPanel","selectedStorage","violations","violationsStorage","migrationSummary","handleLabelChange","handleOutsideClick","closest","removeEventListener","solutionsOut","solution","InlineSVG","gear","name_parts","includes","TriViz","_useState33","_useState34","_useState35","_useState36","_useState37","_useState38","_useState39","_useState40","_useState41","_useState42","App","createBrowserHistory","basename","Switch","Route","path","exact","reportWebVitals","onPerfEntry","Function","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","render","StrictMode","Router"],"mappings":"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","file":"static/js/main.231f4db6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/clonal.34a92a85.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/migration.11b02e60.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/map.0c0c2213.jpeg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAj0lEQVR4nO2USwrEIBAF6xJp5kg5dyQM+aySRfa5iMNAC0ISBE0v8nnQKCpVoI3wtLSAsxQ4oLEUXD8d8LUUeK1XcKMraoARkB2B6F5RV/UKnBUYBKJrXs9kRyJQGON5EBelAqYIHmoBPqXwI0kWPPUNCDBoSeLHdZYt6I845oJ15yF9Zv1Zm9QnSVZl3SQ/PmdfIXJmioIAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/logo.97812ed6.png\";","import React, { useState, useEffect } from 'react';\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\n\nimport clonal from \"../assets/clonal.jpeg\";\nimport migration from \"../assets/migration.jpeg\";\n\nfunction About() {\n    return (\n        <div className='about'>\n            <div className='panel about'>\n                <div className='aboutcontainer'>\n                    <p className='backarrow'><b><Link to=\"\" style={{ textDecoration: 'none', color: 'black'}}>&#8592; home</Link></b></p>\n                    <h1 className='abouttitle'>Enter MACH2</h1>\n                </div>\n                <p><b>MACH2</b> is a personalized tool to visualize cancer metastasis. It is a sequel to MACHINA, an algorithm designed to solve the Parsimonious Migration History Problem.</p>\n                <p><b>The Parsimonious Migration History Problem:</b> Given current oncological mutations at their respective anatomical sites, how can we infer their mutation tree as well as a network of anatomical sites inferring metastases?</p>\n                <p><b>Visualization Format:</b> All structures have directed edges.</p>\n                <ul style={{columns: 1}}>\n                    <li><p><b>Clonal Tree (Left):</b> This is a tree of oncological mutations. Each node in this tree is a variant allele in the cancer patient. Each edge is a mutation from one variant to another.</p></li>\n                    <li><p><b>Migration Graph (Right):</b> Each node in the clonal tree has a tag with an anatomical location inferred using <a href='https://en.wikipedia.org/wiki/Maximum_parsimony_(phylogenetics)'>Maximum Parsimony</a>. The clonal tree is compressed into a migration graph where each node represents an anatomical location, and each edge is a metastasis (e.g. a migration) between two anatomical locations.</p></li>\n                    <li><p><b>Summary:</b> You can also view a summary migration graph that is computed by unioning edges across migration graphs in each solution. Edges are weighted by the number of solutions they appear in.</p></li>\n                </ul>\n                <div class=\"image-container\">\n                    <img className=\"aboutimg\" src={clonal} alt=\"Image 1\"/>\n                    <img className=\"aboutimg\" src={migration} alt=\"Image 2\"/>\n                </div>\n                <p><b>Generating inputs: </b>We have provided a <a href=\"https://github.com/vikramr2/json_compression\">json compression</a> program that takes an output directory from MACHINA that contains <b>.tree</b> files and their corresponding <b>.labeling</b> files, and returns a <b>.json</b> file that can be used as input for this visualizer. For more information, see this <a href='https://github.com/vikramr2/json_compression/blob/main/README.md'>README</a>. Output from any algorithm that solves the PMH problem will be accepted provided that it is in a JSON format as shown in the README.</p>\n                <p><b>Questions? Contact</b></p>\n                <ul id=\"singlecol\">\n                    <li><p>Akul Joshi (<a href=\"mailto:akulj2@illinois.edu\">akulj2@illinois.edu</a>)</p></li>\n                    <li><p>Vikram Ramavarapu (<a href=\"mailto:vikramr2@illinois.edu\">vikramr2@illinois.edu</a>)</p></li>\n                    <li><p>Mohammed El-Kebir (<a href=\"mailto:melkebir@illinois.edu\">melkebir@illinois.edu</a>)</p></li>\n                </ul>\n            </div>\n        </div>\n    );\n}\n\nexport default About;","import React, { useEffect, useMemo } from 'react'\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(COSEBilkent);\nCytoscape.use(dagre);\n\nfunction ClonalTree(props) {\n  var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n  const colorPalette = [\n    \"#a6cee3\",\n    \"#1f78b4\",\n    \"#b2df8a\",\n    \"#33a02c\",\n    \"#fb9a99\",\n    \"#e31a1c\",\n    \"#fdbf6f\",\n    \"#ff7f00\",\n    \"#cab2d6\",\n    \"#6a3d9a\",\n    \"#ffff99\",\n    \"#b15928\"\n  ]\n  const ncolors = colorPalette.length;\n\n  function getColor(label) {\n    if (!label) return '#000';\n    let color = props.coloring.map((value, index) => {\n      if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n    return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n  }\n\n  const [width, setWith] = useState(\"100%\");\n  const [height, setHeight] = useState(\"100%\");\n\n  function onlyUnique(value, index, array) {\n    return array.indexOf(value) === index;\n  }\n\n  function findLabel(node) {\n    return props.labeling.map((value, index) => {\n      if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n  }\n\n  let nodes = props.tree.map(array => {\n    // Create a new array excluding the third element\n    return array.filter((_, index) => index !== 2);\n  }).flat().filter(onlyUnique).map((value, index) => {\n    return { data: { id: value, label: findLabel(value), type: \"ip\"} };\n  });\n  let edges = props.tree.map((value, index) => {\n    return { data: { source: value[0], target: value[1], label: `${value[0]}->${value[1]}`, migration: `${findLabel(value[0])}->${findLabel(value[1])}`} }\n  })\n\n  const [graphData, setGraphData] = useState({\n    nodes: nodes,\n    edges: edges\n  });\n\n  useEffect(() => {\n    nodes = props.tree.map(array => {\n      // Create a new array excluding the third element\n      return array.filter((_, index) => index !== 2);\n    }).flat().filter(onlyUnique).map((value, index) => {\n      return { data: { id: value, label: findLabel(value), type: \"ip\"} }\n    });\n\n    edges = props.tree.map((value, index) => {\n      return { data: { source: value[0], target: value[1], label: `${value[0]}->${value[1]}`, migration: `${findLabel(value[0])}->${findLabel(value[1])}`} }\n    })\n\n    setGraphData({\n      nodes: nodes,\n      edges: edges\n    })\n  }, [props.tree, props.labeling])\n\n  let styleSheet = [\n    {\n      selector: \"node\",\n      style: {\n        backgroundColor: \"#4a56a6\",\n        width: 15,\n        height: 15,\n        label: \"data(id)\",\n\n        // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n        // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n        // \"text-valign\": \"center\",\n        // \"text-halign\": \"center\",\n        \"overlay-padding\": \"6px\",\n        \"z-index\": \"10\",\n        //text props\n        //\"text-outline-color\": \"#4a56a6\",\n        \"text-outline-width\": \"2px\",\n        color: \"white\",\n        fontSize: 15\n      }\n    },\n    {\n      selector: \"node:selected\",\n      style: {\n        \"border-width\": \"6px\",\n        \"border-color\": \"#AAD8FF\",\n        \"border-opacity\": \"0.5\",\n        \"background-color\": \"#77828C\",\n        width: 50,\n        height: 50,\n        //text props\n        \"text-outline-color\": \"#77828C\",\n        \"text-outline-width\": 8\n      }\n    },\n    {\n      selector: \"edge\",\n      style: {\n        width: 3,\n        // \"line-color\": \"#6774cb\",\n        \"line-color\": \"#AAD8FF\",\n        \"target-arrow-color\": \"#6774cb\",\n        \"target-arrow-shape\": \"triangle\",\n        \"curve-style\": \"bezier\"\n      }\n    }\n  ];\n\n  props.coloring.map((value, index) => {\n    styleSheet.push({\n      selector: `node[label='${value[0]}']`,\n      style: {\n        backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n      }\n    })\n  })\n\n  edges.map((value, index) => {\n    let source = value.data.source;\n    let target = value.data.target;\n    styleSheet.push({\n      selector: `edge[label='${source}->${target}']`,\n      style: {\n        'line-fill': 'linear-gradient',\n        'line-gradient-stop-colors': `${getColor(findLabel(source))} ${getColor(findLabel(target))}`,\n        'line-gradient-stop-positions': '33% 66%',\n        \"target-arrow-color\": `${getColor(findLabel(target))}`\n      }\n    })\n  })\n\n  let myCyRef;\n  const layout = {\n    name: \"dagre\",\n    fit: true,\n    // circle: true,\n    directed: true,\n    padding: 10,\n    // spacingFactor: 1.5,\n    animate: true,\n    animationDuration: 1000,\n    avoidOverlap: true,\n    nodeDimensionsIncludeLabels: false,\n    ready: function() {\n      const listener = (eventName, eventData) => {\n        // Respond to event from other graph here\n        // For example:\n        if (eventName === 'selectNodeCl') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n            width: 10\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'deselectNodeCl') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n            width: 3\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'hoverNodeCl') {\n          myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n            width: 10\n          })\n        }\n        if (eventName === 'dehoverNodeCl') {\n          myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n            width: 3\n          })\n        }\n        if (eventName === 'selectNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let label = eventData.label;\n\n          myCyRef.$(`edge[label='${label}']`).css({\n            width: 10\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'deselectNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let label = eventData.label;\n\n          myCyRef.$(`edge[label='${label}']`).css({\n            width: 3\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'hoverNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let source = eventData.nodeId;\n\n          myCyRef.$(`node[id='${source}']`).css({\n            width: 25,\n            height: 25\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'dehoverNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let source = eventData.nodeId;\n\n          myCyRef.$(`node[id='${source}']`).css({\n            width: 15,\n            height: 15\n          })\n          node.trigger('select');\n        }\n      };\n      props.evtbus.addListener(listener);\n    }\n  };\n  const memoizedGraphComponent = useMemo(() => ( <CytoscapeComponent\n    elements={CytoscapeComponent.normalizeElements(graphData)}\n    // pan={{ x: 200, y: 200 }}\n    style={{ width: width, height: height }}\n    zoomingEnabled={true}\n    maxZoom={3}\n    minZoom={0.1}\n    autounselectify={false}\n    boxSelectionEnabled={true}\n    layout={layout}\n    stylesheet={styleSheet}\n    cy={cy => {\n      myCyRef = cy;\n\n\n      cy.on(\"tap\", \"node\", evt => {\n        var node = evt.target;\n      });\n\n      cy.on('mouseover', 'node', function(event) {\n        // Get the node information\n        var node = event.target;\n        var label = node.data('label');\n        \n        // Create the div element\n        var div = document.createElement(\"div\");\n        div.setAttribute(\"class\", \"panel popup\");\n\n        div.innerHTML = `<p>${label}&nbsp;</p>`;\n      \n        // Position the div element near the node\n        const canvas = document.getElementsByTagName('canvas')[0];\n        div.style.position = \"absolute\";\n        div.style.top = (node.renderedPosition('y') + canvas.height*0.5 + 30) + 'px';\n        div.style.left = node.renderedPosition('x') + 'px';\n        if (props.rightcol) {\n          div.style.left = 'calc(50% + ' + node.renderedPosition('x') + 'px)';\n        }\n      \n        // Add the div element to the page\n        document.body.appendChild(div);\n\n        const nodeId = event.target.id();\n\n        var labeltag = document.querySelector(`#${label}`);\n        if (labeltag !== null) {\n          labeltag.style.opacity = 1;\n          labeltag.style.zIndex = 100;\n          labeltag.style.fontWeight = 'bold';\n        }\n\n        props.evtbus.fireEvent('hoverNodeSC', { nodeId });\n      });\n\n      cy.on('mouseout', 'node', function(event){\n        // Remove the div element on mouseout\n        var div = document.querySelector('.panel.popup');\n        if (document.body.contains(div)) {\n          document.body.removeChild(div);\n        }\n\n        const nodeId = event.target.id();\n\n        var node = event.target;\n        var label = node.data('label');\n\n        var labeltag = document.querySelector(`#${label}`);\n        if (labeltag !== null) {\n          labeltag.style.opacity = 0.7;\n          labeltag.style.zIndex = 1;\n          labeltag.style.fontWeight = 'normal';\n        }\n\n        props.evtbus.fireEvent('dehoverNodeSC', { nodeId });\n      });\n\n      cy.on('mouseover', 'edge', function(event) {\n        const { target } = event;\n        target.css({\n          width: 10\n        })\n        const nodeId = event.target.id();\n        let source = findLabel(target.data().source);\n        let sink = findLabel(target.data().target);\n        let label = target.data().label;\n        props.evtbus.fireEvent('selectNode', { nodeId, source, sink, target});\n        props.evtbus.fireEvent('selectNodeSC', { nodeId, source, sink, target, label});\n      });\n\n      cy.on('mouseout', 'edge', function(event) {\n        const { target } = event;\n        target.css({\n          width: 3\n        })\n        const nodeId = event.target.id();\n        let source = findLabel(target.data().source);\n        let sink = findLabel(target.data().target);\n        let label = target.data().label;\n        props.evtbus.fireEvent('deselectNode', { nodeId, source, sink, target});\n        props.evtbus.fireEvent('deselectNodeSC', { nodeId, source, sink, target, label});\n      });\n    }}\n    abc={console.log(\"myCyRef\", myCyRef)}\n    />), [graphData] )\n    return memoizedGraphComponent;\n}\n\nexport default ClonalTree;","import React, { useEffect, useMemo } from 'react'\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\nfunction Migration(props) {\n      var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n      const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n      ]\n      const ncolors = colorPalette.length;\n    \n      const [width, setWith] = useState(\"100%\");\n      const [height, setHeight] = useState(\"100%\");\n    \n      function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n      }\n    \n      function findLabel(node) {\n        return props.labeling.map((value, index) => {\n          if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n      }\n\n      function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n          if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n      }\n    \n      let nodes = props.tree.map(array => {\n        // Create a new array excluding the third element\n        return array.filter((_, index) => index !== 2);\n      }).flat().filter(onlyUnique).map((value, index) => {\n        return { data: { id:  findLabel(value), label: findLabel(value), type: \"ip\"} };\n      });\n      let edges = props.migration.map((value, index) => {\n        return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n      })\n      for (const [i, edge] of edges.entries()) {\n        if (edge.data.label == 1) {\n          edges[i].data.label = \"\";\n        }\n      }\n    \n      const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n      });\n\n      useEffect(() => {\n        let nodes = props.tree.map(array => {\n          // Create a new array excluding the third element\n          return array.filter((_, index) => index !== 2);\n        }).flat().filter(onlyUnique).map((value, index) => {\n          return { data: { id:  findLabel(value), label: findLabel(value), type: \"ip\"} };\n        });\n        let edges = props.migration.map((value, index) => {\n          return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n        })\n        for (const [i, edge] of edges.entries()) {\n          if (edge.data.label == 1) {\n            edges[i].data.label = \"\";\n          }\n        }\n        setGraphData({\n          nodes: nodes,\n          edges: edges\n        })\n      }, [props.tree, props.labeling, props.migration, props.rotated])\n\n      let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#fff\",\n            'border-width': 10,\n            shape: \"rectangle\",\n            width: 100,\n            height: 50,\n            label: \"data(label)\",\n    \n            // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"text-valign\": \"center\",\n            // \"text-halign\": \"center\",\n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            //text props\n            //\"text-outline-color\": \"#4a56a6\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15,\n            'text-valign': 'center',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        }\n      ];\n\n      props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            'border-color': hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n      })\n\n      edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        styleSheet.push({\n          selector: `edge[id='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(target)}`\n          }\n        })\n      })\n    \n      let myCyRef;\n\n      const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n      let rotated = props.rightcol ? queryParameters.get(\"rotated2\") === \"true\" : queryParameters.get(\"rotated\") === \"true\";\n      if (rotated === null) {\n        rotated = false;\n      }\n\n      const layout = {\n        name: \"dagre\",\n        fit: true,\n        circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        transform: (node, position) => {\n          return {\n            x: props.rotated ? -2*position.y : position.x,\n            y: props.rotated ? position.x : position.y\n          }\n        },\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'selectNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[id='${eventData.nodeId}']`).css({\n                width: 10\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'deselectNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[id='${eventData.nodeId}']`).css({\n                width: 3\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'hoverNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`node[id='${eventData.nodeId}']`).css({\n                'border-width': 20,\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'dehoverNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`node[id='${eventData.nodeId}']`).css({\n                'border-width': 10,\n              })\n              edge.trigger('select');\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n      };\n\n      // let mu = edges.length;\n      // let gamma = edges.filter((item) => { return item.data.label !== '' }).length\n      let mu = 0;\n      let gamma = edges.length;\n      edges.map((edge) => {\n        if (edge.data.label == '') {\n          mu += 1;\n        } else {\n          mu += parseInt(edge.data.label);\n          //gamma += parseInt(edge.data.label) - 1;\n        }\n      })\n\n      if (!props.rightcol) {\n        sessionStorage.setItem(\"mu\", mu);\n        sessionStorage.setItem(\"gamma\", gamma);\n      } else {\n        sessionStorage.setItem(\"mu2\", mu);\n        sessionStorage.setItem(\"gamma2\", gamma);\n      }\n    \n      const memoizedGraphComponent = useMemo(() => ( <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n          });\n\n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 20,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 10,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n        />), [graphData] )\n        return memoizedGraphComponent;\n}\n\nexport default Migration;","import React from 'react';\nimport { useState, useEffect, useRef } from \"react\";\nimport map from '../assets/map.jpeg';\n\nfunction Legend(props) {\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n    let fetchColor = (label) => {\n        let ret = 0;\n        props.coloring.forEach(l => {\n            if (l[0] === label) {\n                ret = l[1];\n            }\n        })\n        return ret;\n    }\n\n    const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    console.log(colorPalette[parseInt(fetchColor('breast')) % ncolors]);\n\n    if (props.coord_map === undefined) {\n        return <></>/*ul className=\"legendlist\">\n            {props.coloring.map((l) => \n                <li className=\"legendtext\" style={{color: hexColorRegex.test(l[1]) ? l[1] : colorPalette[parseInt(l[1]) % ncolors], liststyle: \"circle\"}}>\n                    <span><p style={{color: \"black\"}}>{l[0]}</p></span>\n                </li>)}\n        </ul>*/\n    } else {\n        return <div style={{ position: 'relative', height: 0 }}>\n            <img \n                src={map}\n                className='paneltitle bodymap'\n            />\n        </div>\n    }\n}\n\nexport default Legend;","import React from 'react';\nimport { useState, useEffect, useRef } from 'react'\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nvar cyCanvas = require('cytoscape-canvas');\n\nCytoscape.use(cyCanvas);\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\nfunction MigrationMap(props) {\n    const [canvheight, setCanvHeight] = useState(0)\n    const [disp, setDisp] = useState(false);\n    let count = 0;\n\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n    var findCoords = (nodeId) => {\n        let found = props.coord_map.filter(coord => coord[0] == findLabel(nodeId))[0];\n        return {x: found[1][1]+15, y: found[1][0]+30}\n    }\n\n    const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n    }\n\n    function findLabel(node) {\n        return props.labeling.map((value, index) => {\n            if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n    }\n\n    function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n            if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        if (color === undefined) {\n            return '#ffffff'\n        }\n        return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n    }\n\n    let nodes = props.tree.flat().filter(onlyUnique).map((value, index) => {\n    return { data: { id:  findLabel(value), label: findLabel(value), type: \"ip\" }, position: findCoords(value) };\n    });\n    //nodes.push({data: {id: 'dummy', label: 'dummy', type: \"dummy\"}, position: {x: 0, y:0}})\n    let edges_t = props.tree.map((value, index) => {\n        return { data: { source: findLabel(value[0]), target: findLabel(value[1]), label: 1, id: `${findLabel(value[0])}->${findLabel(value[1])}`, type:\"actual\"} }\n    })\n\n    let edges = [];\n\n    for (const [i, edge] of edges_t.entries()) {\n        let flag = false;\n        for (const [j, edge2] of edges.entries()) {\n            if (edge.data.source == edge2.data.source && edge.data.target == edge2.data.target) {\n                edges[j].data.label++;\n                flag = true;\n                break;\n            }\n        }\n        if (!flag && edge.data.source !== edge.data.target) edges.push(edges_t[i]);\n    }\n\n    for (const [i, edge] of edges.entries()) {\n        if (edge.data.label == 1) {\n            edges[i].data.label = \"\";\n        }\n    }\n\n    console.log(edges);\n\n    const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n    });\n\n    let styleSheet = [\n        {\n            selector: \"node\",\n            style: {\n                backgroundColor: \"#ffffff\",\n                width: 10,\n                height: 10,\n                // label: \"data(id)\",\n                // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n                // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n                // \"text-valign\": \"center\",\n                // \"text-halign\": \"center\",\n                \"overlay-padding\": \"6px\",\n                \"z-index\": \"10\",\n                //text props\n                //\"text-outline-color\": \"#4a56a6\",\n                //\"text-outline-width\": \"2px\",\n                color: \"white\",\n                fontSize: 15\n            }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"1\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 7,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        },\n        {\n            selector: \"edge[type='label']\",\n            style: {\n                width: 2,\n                \"curve-style\": \"haystack\"\n            }\n        },\n        {\n            selector: \"node[type='label']\",\n            style: {\n                width: 2,\n                height: 2\n            }\n        },\n        {\n            selector: \"edge[type='label']\",\n            style: {\n                \"line-color\": '#bbb'\n            }\n        }\n    ];\n\n    props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n    })\n\n    edges.map((value, index) => {\n        if (value.data.type === \"actual\") {\n            let source = value.data.source;\n            let target = value.data.target;\n            console.log(value.data.id);\n            console.log(source);\n            styleSheet.push({\n            selector: `edge[id='${source}->${target}']`,\n            style: {\n                'line-fill': 'linear-gradient',\n                'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n                'line-gradient-stop-positions': '33% 66%',\n                \"target-arrow-color\": `${getColor(target)}`\n            }\n            })\n        }\n    })\n\n    let myCyRef;\n    const layout = {\n        name: \"preset\",\n        fit: false,\n        // circle: true,\n        // directed: true,\n        // padding: 50,\n        // spacingFactor: 1.5,\n           animate: true,\n           animationDuration: 1000,\n        // avoidOverlap: true,\n        // nodeDimensionsIncludeLabels: false\n    };\n\n    useEffect(() => {\n        props.coord_map.map((l, index) => {\n            console.log((index + 1)*(100/(2*props.coord_map)))\n            nodes.push({\n                data: {\n                    id: `labelnode${index}`,\n                    label: `labelnode${index}`,\n                    type: \"label\"\n                },\n                position: {\n                    x: index % 2 == 0 ? 5 : 310,\n                    y: (index + 1)*Math.floor(canvheight/(props.coord_map.length)/1.75)\n                }\n            })\n            edges.push({\n                data: {\n                    source: `labelnode${index}`,\n                    target: l[0],\n                    label: 1,\n                    id: `labelnode${index}->${l[0]}`,\n                    type: \"label\"\n                }\n            })\n        })\n\n        for (const [i, edge] of edges.entries()) {\n            if (edge.data.label == 1) {\n                edges[i].data.label = \"\";\n            }\n        }\n\n        setGraphData({\n            nodes: nodes,\n            edges: edges\n        })\n\n        setDisp(true);\n    }, [canvheight])\n\n    document.addEventListener(\"DOMContentLoaded\", function(event) { \n        let canv = document.querySelector('.migrationmap')\n        setCanvHeight(canv.offsetHeight);\n    });\n\n    return <CytoscapeComponent\n        className='migrationmap'\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n\n          //var layer = cy.cyCanvas();\n          //var canvas = layer.getCanvas();\n          //var ctx = canvas.getContext('2d');\n    \n          console.log(\"EVT\", cy);\n\n          cy.userZoomingEnabled( false );\n          cy.userPanningEnabled( false );\n          cy.nodes().ungrabify();\n\n          cy.nodes().forEach(function(node) {\n            var pos = node.position();\n            if (node.data().type === 'label') {\n                pos.y /= 75\n                //pos.y *= canvheight/(props.coord_map.length*2)\n                console.log(Math.floor(canvheight/(props.coord_map.length)))\n                pos.y *= Math.floor(canvheight/(props.coord_map.length))\n            }\n            console.log(node.position())\n          });\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n            console.log(\"EVT\", evt);\n            console.log(\"TARGET\", node.data());\n            console.log(\"TARGET TYPE\", typeof node[0]);\n          });\n\n          cy.on('mouseover', \"edge[type='actual']\", function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', \"node[type='ip']\", function(event) {\n            const { target } = event;\n            target.css({\n                width: 15,\n                height: 15,\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', \"node[type='ip']\", function(event) {\n            const { target } = event;\n            target.css({\n                width: 10,\n                height: 10,\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', \"edge[type='actual']\", function(event) {\n            const { target } = event;\n            target.css({\n              width: 7\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n\n          const positions = {};\n            cy.nodes().forEach((node) => {\n                positions[node.data().id] = node.position();\n          });\n          console.log(positions);\n\n          if (disp) {\n            cy.nodes().forEach((node) => {\n                count++;\n                console.log(count);\n                if (node.data().type === 'label' && node.renderedPosition('y') > 0) {\n                    let index = parseInt(node.data().id.slice(-1));\n                    let label = props.coord_map[index][0]\n\n                    var div = document.createElement(\"div\");\n                    div.setAttribute(\"class\", \"panel label\");\n\n                    div.innerHTML = `<ul className=\"legendlist\"><li><span><p>${label}</p></span></li></ul>`;\n                \n                    // Position the div element near the node\n                    const canvas = document.querySelector('.rightcolumn');\n                    console.log(canvas.getBoundingClientRect());\n                    div.style.position = \"absolute\";\n                    \n                    let leftPos = `calc(${node.renderedPosition('x') + 'px'} + 70% + 20px `\n                    if (index % 2 == 1) {\n                        leftPos += \"- 100px\";\n                    }\n                    leftPos += \")\";\n\n                    div.id = label;\n\n                    div.style.top = (node.renderedPosition('y') + canvas.getBoundingClientRect().top/2 - 15) + 'px';\n                    div.style.left = leftPos; \n                    div.style.opacity = 0.7;\n\n                    document.body.appendChild(div);\n                }\n            })\n          }\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n    />\n}\n\nexport default MigrationMap;","import React, { useState, useEffect } from \"react\"\nimport Legend from \"./Legend.js\";\nimport MigrationMap from \"./MigrationMap.js\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nfunction RightColumn(props) {\n    if (props.coord_map === undefined) {\n        return <></>\n    } else {\n        return <div className=\"rightcolumn\">\n            <div className={props.coord_map === undefined ? \"panel migration legend top\" : \"panel migration legend top map\"}>\n                <Legend coloring={props.coloring} coord_map={props.coord_map}/>\n                <MigrationMap tree={props.tree} labeling={props.labeling} coloring={props.coloring} coord_map={props.coord_map}/>\n            </div>\n        </div>\n    }\n    \n}\n\nexport default RightColumn;","class DefaultDict {\n    constructor(defaultVal) {\n        return new Proxy({}, {\n        get: (target, name) => name in target ? target[name] : defaultVal\n        })\n    }\n}\n\nexport default DefaultDict;","import React, { useState, useEffect, useContext } from \"react\"\nimport ClonalTree from \"./ClonalTree.js\";\nimport Migration from \"./Migration.js\";\nimport { useHistory } from 'react-router-dom';\nimport Legend from \"./Legend.js\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport RightColumn from \"./RightColumn.js\";\n\nimport DefaultDict from \"../utils/DefaultDict.js\";\n\nfunction insertParam(key, value) {\n  // Get the current url\n  let currentUrl = new URL(window.location.href);\n\n  // Change a url parameter using URLSearchParams\n  let urlParams = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n  urlParams.set(key, value);\n\n  // Replace the URL\n  //currentUrl.search = urlParams.toString();\n  window.location.href = '#/viz?' + urlParams.toString();\n\n  if (key === \"labeling\" || key === \"rotated\") {\n\n  } else {\n    // Reload the page\n    window.location.reload();\n  }\n}\n\nfunction handleKeyPress(event) {\n  if (event.key === '/') {\n    alert('Instructions:\\n\\nToggle and move around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponding anatomical location for the node.\\n\\nSelect different solutions from the dropdown on the top left of the panel.\\n\\nTo compare with another solution, click the [+] on the right. To view the solution space summary, click the [+] on the left.\\n\\nYou can return home by clicking the [X].');\n  }\n}\n\nfunction Viz(props) {\n    const history = useHistory();\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const jsonContents=sessionStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n\n    let labelName = queryParameters.get(\"labeling\");\n\n    const [labeling, setLabeling] = useState(labelName)\n\n    const [rotate, setRotate] = useState(queryParameters.get(\"rotated\") === \"true\");\n\n    if (labelName == \"undefined\") {\n      insertParam(\"labeling\", wholeData[\"solutions\"][0][\"name\"]);\n    }\n\n    sessionStorage.setItem(\"selected\", JSON.stringify(new DefaultDict(0)));\n    sessionStorage.setItem(\"violations\", JSON.stringify(new DefaultDict(0)));\n    \n    // const coloring = data[\"coloring\"]\n\n    \n\n    // console.log(data[\"labeling\"])\n    let coloring = wholeData[\"coloring\"];\n\n    const [data, setData] = useState(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labeling})[0]);\n    const [tree, setTree] = useState(data[\"tree\"])\n    const [tree_labeling, setTreeLabeling] = useState(data[\"labeling\"])\n    const [migration, setMigration] = useState(data[\"migration\"])\n\n    if (coloring === undefined || coloring.length === 0) {\n      coloring = data[\"labeling\"]\n        .map((item) => item[1])\n        .filter((value, index, self) => {\n          return self.indexOf(value) === index;\n        })\n        .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n    }\n\n    useEffect(() => {\n      setTree(data[\"tree\"])\n      setTreeLabeling(data[\"labeling\"])\n      setMigration(data[\"migration\"])\n      setMu(sessionStorage.getItem(\"mu\"));\n      setGamma(sessionStorage.getItem(\"gamma\"));\n    }, [labeling])\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    let coord_map = wholeData[\"map\"]; \n\n    let getParam = (key) => {\n      const url = new URL(window.location.href);\n      const searchParams = new URLSearchParams(`?${url.hash.slice(1).split('?')[1]}`);\n\n      return searchParams.get(key);\n    }\n\n    let handleLabelChange = (event) => {\n      insertParam(\"labeling\", event.target.value);\n      setLabeling(event.target.value)\n      setData(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === event.target.value})[0]);\n    }\n\n    let addTab = (event) => {\n      window.location = `${window.location.protocol}//${window.location.host}/mach2-viz/#/dualviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling\")}`;\n    }\n\n    let gotoSummary = (event) => {\n      window.location = `${window.location.protocol}//${window.location.host}/mach2-viz/#/sumviz?labeling=${queryParameters.get(\"labeling\")}`;\n    }\n\n    let rotateFn = (event) => {\n      let rotated = queryParameters.get(\"rotated\") === \"true\";\n      insertParam(\"rotated\", !rotated);\n      setRotate(!rotated)\n    }\n\n    useEffect(() => {\n      document.addEventListener(\"keydown\", handleKeyPress);\n      setMu(sessionStorage.getItem(\"mu\"));\n      setGamma(sessionStorage.getItem(\"gamma\"));\n    });\n\n    const eventBus = {\n      listeners: [],\n      addListener(callback) {\n        this.listeners.push(callback);\n      },\n      removeListener(callback) {\n        this.listeners = this.listeners.filter(listener => listener !== callback);\n      },\n      fireEvent(eventName, eventData) {\n        this.listeners.forEach((listener) => {\n          listener(eventName, eventData);\n        });\n      },\n    };\n\n    return (\n      <div className=\"viz\">\n        <div className=\"panel tab_add2\" onClick={gotoSummary}><p className='addpanelp'><b>+</b></p></div>\n        <div className=\"panel info\">\n          <div className=\"titlewrapper\">\n            <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n              <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                {labelnames.map(l => \n                  {return (l === labeling) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                )}\n              </select>\n            </b></p></label>\n            <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n            <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n            <Link to=\"\" style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></Link>\n          </div>\n          <div className=\"columnwrapper\">\n            <div className={coord_map === undefined ? \"leftcolumn nolegend\" : \"leftcolumn\"}>\n              <div className=\"panel migration top\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n                <Migration tree={tree} labeling={tree_labeling} coloring={coloring} migration={migration} evtbus={eventBus} rotated={rotate}/>\n              </div>\n              <div className=\"panel migration\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus}/>\n              </div>\n            </div>\n            <RightColumn coord_map={coord_map} coloring={coloring} tree={tree} labeling={tree_labeling} evtbus={eventBus}/>\n          </div>\n        </div>\n        <div className=\"panel tab_add\" onClick={addTab}><p className='addpanelp'><b>+</b></p></div>\n      </div>\n    )\n}\n\nexport default Viz;","import React, { useState, useEffect, useContext } from 'react';\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\n\nimport URLs from \"../utils/default_url.json\";\nimport download from \"../assets/download.png\";\n\nimport axios from 'axios'\nimport fileDownload from 'js-file-download'\n\nimport DefaultDict from \"../utils/DefaultDict.js\";\n\nimport A7 from \"../samples/A7/A7.json\";\nimport A10 from \"../samples/A10/A10.json\";\nimport A22 from \"../samples/A22/A22.json\";\nimport A29 from \"../samples/A29/A29.json\";\nimport A31 from \"../samples/A31/A31.json\";\nimport A32 from \"../samples/A32/A32.json\";\nimport patient1 from \"../samples/patient1/patient1.json\";\nimport patient2 from \"../samples/patient2/patient2.json\";\nimport patient3 from \"../samples/patient3/patient3.json\";\nimport patient4 from \"../samples/patient4/patient4.json\";\nimport patient7 from \"../samples/patient7/patient7.json\";\nimport patient9 from \"../samples/patient9/patient9.json\";\nimport patient10 from \"../samples/patient10/patient10.json\";\nimport tracerx_res from \"../samples/tracerx_res/tracerx_res.json\";\nimport tracerx_res_old from \"../samples/tracerx_res_old/tracerx_old_all.json\";\nimport tracerx_res_new from \"../samples/tracerx_res_new/tracerx_new_all.json\";\n\nfunction Home(props) {\n  var windowWidth = window.innerWidth;\nvar windowHeight = window.innerHeight;\n\nconsole.log(\"Window width: \" + windowWidth);\nconsole.log(\"Window height: \" + windowHeight);\n    let handleDownload = (url, filename) => {\n      axios.get(url, {\n        responseType: 'blob',\n      })\n      .then((res) => {\n        fileDownload(res.data, filename)\n      })\n    }\n\n    var json_dict = {\n      \"A7\": A7,\n      \"A10\": A10,\n      \"A22\": A22,\n      \"A29\": A29,\n      \"A31\": A31,\n      \"A32\": A32,\n      \"patient1\": patient1,\n      \"patient2\": patient2,\n      \"patient3\": patient3,\n      \"patient4\": patient4,\n      \"patient7\": patient7,\n      \"patient9\": patient9,\n      \"patient10\": patient10,\n      \"tracerx_res\": tracerx_res,\n      \"tracerx_res_old\": tracerx_res_old,\n      \"tracerx_res_new\": tracerx_res_new\n    }\n\n    var default_patients = [\"A7\", \"A10\", \"A22\", \"A29\", \"A31\", \"A32\", \"patient1\", \"patient2\", \"patient3\", \"patient4\", \"patient7\", \"patient9\", \"patient10\", \"tracerx_res\", \"tracerx_res_old\", \"tracerx_res_new\"]\n    var default_dirs = [\"hoadley_2016\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"tracerx\", \"tracerx\", \"tracerx\"]\n    var div_elements = []\n    var which_color = true;\n    const color1 = \"#EBEBEB\";\n    const color2 = \"#A3A3A3\";\n\n    sessionStorage.setItem(\"selected\", JSON.stringify(new DefaultDict(0)));\n    sessionStorage.setItem(\"violations\", JSON.stringify(new DefaultDict(0)));\n    \n    for (let i = 0; i < default_patients.length; i++) {\n        var current_patient = default_patients[i];\n        var current_directory = default_dirs[i];\n        var current_color = (which_color ? color1 : color2)\n\n        var link = URLs[current_patient];\n\n        div_elements.push(<div className=\"patient-container\">\n          <div className=\"patientitem\" style={{ backgroundColor: current_color }}>\n              <p><b>{current_directory}</b></p>\n          </div>\n          <div className=\"patientitem\" style={{ backgroundColor: current_color }}>\n            <Link to={link} style={{ textDecoration: 'none', color: 'black'}} onClick={() => {sessionStorage.setItem(\"json_data\", JSON.stringify(json_dict[default_patients[i]]))}}>\n                  <p className='leftli'><b>{current_patient}</b></p>\n            </Link>\n            <img \n              className='rightli' \n              src={download}\n              onClick={() => handleDownload(`https://raw.githubusercontent.com/vikramr2/machina-viz/main/src/samples/${default_patients[i]}/${default_patients[i]}.json`, `${default_patients[i]}.json`)}\n            >\n            </img>\n          </div>\n        </div>)\n        which_color = !which_color;\n    }\n\n    if (document.getElementsByClassName('label').length > 1) {\n      const elements = document.getElementsByClassName('label');\n      while(elements.length > 0){\n        elements[0].parentNode.removeChild(elements[0]);\n      }\n    }\n\n    let handleChange = (e) => {\n      const reader = new FileReader();\n      const file = e.target.files[0];\n      let json_contents;\n  \n      reader.onload = function(readerEvt) {\n        let jsonString = readerEvt.target.result;\n        json_contents = jsonString;\n\n        const data = JSON.parse(json_contents);\n        let labelnames = data[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n        // let stateObj = {json_contents: json_contents};\n        // history.pushState(stateObj, window.location.href);\n        sessionStorage.setItem(\"json_data\", json_contents);\n  \n        window.location = window.location + `viz?labeling=${labelnames[0]}`;\n        // history.push(`viz?labeling=${labelnames[0]}`);\n      }\n      // Read the file as a text\n      reader.readAsText(file);\n    }\n\n    return (\n        <div className='home'>\n            <div className='panel home'>\n                <h1><b>Welcome to MACH2!</b></h1>\n                <div className=\"aboutdir\"><Link to=\"about\" style={{ textDecoration: 'none', color: 'black'}}><h4 className='abouttext'>About</h4></Link></div>\n                <p><b>A lightweight visualizer for MACH2, <a href=\"https://www.nature.com/articles/s41588-018-0106-z\">MACHINA's</a> sequel.</b> Use this visualizer to examine a solution space for the parsimonious migration history problem and its respective summary for a given patient. Examples are provided below. You can also upload a JSON file to view a custom input. See the about page for more information.</p>\n                \n                <h3>Examples</h3>\n                <div className=\"patient-container\">\n                  <div className=\"patientitem\" style={{ backgroundColor: \"#A3A3A3\" }}>\n                      <p className='datasettitle'><b>Dataset</b></p>\n                  </div>\n                  <div className=\"patientitem\" style={{ backgroundColor: \"#A3A3A3\" }}>\n                    <Link to={link} style={{ textDecoration: 'none', color: 'black'}}>\n                      <p className='datasettitle'><b>Patient</b></p>\n                    </Link>\n                  </div>\n                </div>\n\n                <div className=\"panel example\">\n                      { \n                        div_elements.map(elem => (\n                          elem\n                        ))\n                      }\n              </div>\n            </div>\n            \n            <input \n              type=\"file\"\n              id=\"json_upload\" \n              name=\"json_upload\"\n              accept=\"application/JSON\"\n              onChange={handleChange}/>\n            <label for=\"json_upload\"><div id=\"addnew\" className=\"dot\"><h1 className=\"plus\">+</h1><span class=\"tooltiptext\"><b>Upload Patient JSON</b></span></div></label>\n        </div>\n    );\n}\n\nexport default Home;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport Migration from \"./Migration.js\";\nimport ClonalTree from \"./ClonalTree.js\";\n\nimport DefaultDict from \"../utils/DefaultDict.js\";\n\nfunction insertParam(key, value) {\n    // Get the current url\n    let currentUrl = new URL(window.location.href);\n  \n    // Change a url parameter using URLSearchParams\n    let urlParams = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    urlParams.set(key, value);\n  \n    // Replace the URL\n    //currentUrl.search = urlParams.toString();\n    window.location.href = '#/dualviz?' + urlParams.toString();\n  \n    // Reload the page\n    //window.location.reload();\n}\n\nfunction handleKeyPress(event) {\n    if (event.key === '/') {\n      alert('Instructions:\\n\\nThe dual visualization window allows you to compare different solutions side by side!\\n\\nToggle and move around the migration graphs and clonal trees. Hover over nodes in the clonal trees to find the corresponding anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panel.\\n\\nClick the [+] to compare these solutions with the solution space summary.\\n\\nYou can close out panels by clicking the [X].');\n    }\n  }\n\nfunction DualViz() {\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [mu2, setMu2] = useState(0);\n    const [gamma2, setGamma2] = useState(0);\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    const jsonContents=sessionStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n\n    const [rotate, setRotate] = useState(queryParameters.get(\"rotated\") === \"true\");\n    const [rotate2, setRotate2] = useState(queryParameters.get(\"rotated2\") === \"true\");\n\n    let labelName = queryParameters.get(\"labeling\");\n    let labelName2 = queryParameters.get(\"labeling2\");\n\n    const [labeling, setLabeling] = useState(labelName)\n    const [labeling2, setLabeling2] = useState(labelName2)\n\n    console.log(wholeData);\n    console.log(labelName, labelName2);\n\n    if (labelName == \"undefined\") {\n      insertParam(\"labeling\", wholeData[\"solutions\"][0][\"name\"]);\n    }\n    if (labelName2 == \"undefined\") {\n      insertParam(\"labeling2\", wholeData[\"solutions\"][0][\"name\"]);\n    }\n\n    console.log(labelName, labelName2);\n\n    //const data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n    //const data2 = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName2})[0];\n\n    const [data, setData] = useState(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labeling})[0]);\n    const [data2, setData2] = useState(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labeling2})[0]);\n\n    sessionStorage.setItem(\"selected\", JSON.stringify(new DefaultDict(0)));\n    sessionStorage.setItem(\"violations\", JSON.stringify(new DefaultDict(0)));\n\n    let coloring = wholeData[\"coloring\"];\n    console.log(coloring)\n\n    if (coloring === undefined || coloring.length === 0) {\n      coloring = data[\"labeling\"]\n        .map((item) => item[1])\n        .filter((value, index, self) => {\n          return self.indexOf(value) === index;\n        })\n        .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n    }\n\n    const [tree, setTree] = useState(data[\"tree\"])\n    const [tree_labeling, setTreeLabeling] = useState(data[\"labeling\"])\n    const [migration, setMigration] = useState(data[\"migration\"])\n\n    const [tree2, setTree2] = useState(data[\"tree\"])\n    const [tree_labeling2, setTreeLabeling2] = useState(data[\"labeling\"])\n    const [migration2, setMigration2] = useState(data[\"migration\"])\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    useEffect(() => {\n      setTree(data[\"tree\"])\n      setTreeLabeling(data[\"labeling\"])\n      setMigration(data[\"migration\"])\n      setMu(sessionStorage.getItem(\"mu\"));\n      setGamma(sessionStorage.getItem(\"gamma\"));\n    }, [labeling])\n\n    useEffect(() => {\n      setTree2(data2[\"tree\"])\n      setTreeLabeling2(data2[\"labeling\"])\n      setMigration2(data2[\"migration\"])\n      setMu2(sessionStorage.getItem(\"mu2\"));\n      setGamma2(sessionStorage.getItem(\"gamma2\"));\n    }, [labeling2])\n\n    let handleLabelChange = (event) => {\n        insertParam(\"labeling\", event.target.value);\n        setLabeling(event.target.value)\n        setData(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === event.target.value})[0]);\n    }\n\n    let handleLabelChange2 = (event) => {\n        insertParam(\"labeling2\", event.target.value);\n        setLabeling2(event.target.value)\n        setData2(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === event.target.value})[0]);\n    }\n\n    let rotateFn = (event) => {\n        let rotated = queryParameters.get(\"rotated\") === \"true\";\n        insertParam(\"rotated\", !rotated);\n        setRotate(!rotated)\n    }\n\n    let rotateFn2 = (event) => {\n        let rotated = queryParameters.get(\"rotated2\") === \"true\";\n        insertParam(\"rotated2\", !rotated);\n        setRotate2(!rotated)\n    }\n\n    let gotoSummary = (event) => {\n      window.location = `${window.location.protocol}//${window.location.host}/mach2-viz/#/triviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling2\")}`;\n    }\n\n    const eventBus = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    const eventBus2 = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", handleKeyPress);\n        setMu(sessionStorage.getItem(\"mu\"));\n        setGamma(sessionStorage.getItem(\"gamma\"));\n        setMu2(sessionStorage.getItem(\"mu2\"));\n        setGamma2(sessionStorage.getItem(\"gamma2\"));\n    });\n\n    return <div className=\"viz\">\n        <div className=\"panel tab_add2\" onClick={gotoSummary}><p className='addpanelp'><b>+</b></p></div>\n        <div className=\"panel info one\">\n            <div className=\"titlewrapper\">\n                <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                    {labelnames.map(l => \n                    {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                    )}\n                </select>\n                </b></p></label>\n                <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n                <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                <a onClick={() => {window.location.href=`/mach2-viz/#/viz?labeling=${queryParameters.get(\"labeling2\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n                <Migration tree={tree} labeling={tree_labeling} migration={migration} coloring={coloring} evtbus={eventBus} rotated={rotate}/>\n            </div>\n            <div className=\"panel migration left\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus}/>\n            </div>\n        </div>\n        <div className=\"panel info one two\">\n            <div className=\"titlewrapper\">\n                <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange2}>\n                    {labelnames.map(l => \n                    {return (l === queryParameters.get(\"labeling2\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                    )}\n                </select>\n                </b></p></label>\n                <h3 className=\"viztitle\"><b>{data2[\"name\"]}</b></h3>\n                <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                <a onClick={() => {window.location.href=`/mach2-viz/#/viz?labeling=${queryParameters.get(\"labeling\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu2}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma2}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn2}>Rotate</button>\n                <Migration tree={tree2} labeling={tree_labeling2} migration={migration2} coloring={coloring} evtbus={eventBus2} rightcol={true} rotated={rotate2}/>\n            </div>\n            <div className=\"panel migration left\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree2} labeling={tree_labeling2} coloring={coloring} evtbus={eventBus2} rightcol={true}/>\n            </div>\n        </div>\n    </div>\n}\n\nexport default DualViz;\n","import React, { useMemo } from 'react'\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\nfunction MigrationSummary(props) {\n    var filterOut = [];\n    var filterJson = JSON.parse(sessionStorage.getItem(\"selected\"))\n\n    if (props.title === filterJson['title']) {\n      for (let key in filterJson) {\n        if (key !== 'title' && !filterJson[key]) {\n          filterOut.push(key.split(''));\n        }\n      }\n    }\n\n    console.log(filterOut);\n\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n    const colorPalette = [\n      \"#a6cee3\",\n      \"#1f78b4\",\n      \"#b2df8a\",\n      \"#33a02c\",\n      \"#fb9a99\",\n      \"#e31a1c\",\n      \"#fdbf6f\",\n      \"#ff7f00\",\n      \"#cab2d6\",\n      \"#6a3d9a\",\n      \"#ffff99\",\n      \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    function onlyUnique(array) {\n      return [...new Set(array)];\n    }\n\n    function getColor(label) {\n      let color = props.coloring.map((value, index) => {\n        if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n      return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n    }\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    let nodeSet = onlyUnique(props.data.map((value, index) => [value[0], value[1]]).flat())\n\n    let nodes = nodeSet.map((value, index) => {\n        return { data: { id:  value, label: value, type: \"ip\"} };\n    });\n\n    let edges = props.data.filter(e => {\n      for (let f of filterOut) {\n        if (f[0] == e[0] && f[1] == e[1]) {\n          return false;\n        }\n      }\n      return true;\n    }).map((value, index) => {\n      return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n    })\n\n    for (const [i, edge] of edges.entries()) {\n      if (edge.data.label == 1) {\n        edges[i].data.label = \"\";\n      }\n    }\n\n    const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n    });\n\n    let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#fff\",\n            'border-width': 10,\n            shape: \"rectangle\",\n            width: 100,\n            height: 50,\n            label: \"data(label)\",\n    \n            // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"text-valign\": \"center\",\n            // \"text-halign\": \"center\",\n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            //text props\n            //\"text-outline-color\": \"#4a56a6\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15,\n            'text-valign': 'center',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        }\n    ];\n    \n    props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            'border-color': hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n    })\n\n    edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        styleSheet.push({\n          selector: `edge[id='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(target)}`\n          }\n        })\n    })\n\n    let myCyRef;\n\n    const queryParameters = new URLSearchParams(window.location.search);\n    let rotated = queryParameters.get(\"rotatedsum\") === \"true\";\n    if (rotated === null) {\n        rotated = false;\n    }\n\n    const layout = {\n        name: \"dagre\",\n        fit: true,\n        circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n    };\n\n    let mu = 0;\n    let gamma = edges.length;\n    edges.map((edge) => {\n      if (edge.data.label == '') {\n        mu += 1;\n      } else {\n        mu += parseInt(edge.data.label);\n        //gamma += parseInt(edge.data.label) - 1;\n      }\n    })\n\n    sessionStorage.setItem(\"musum\", mu);\n    sessionStorage.setItem(\"gammasum\", gamma);\n\n    const memoizedGraphComponent = useMemo(() => ( <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n          });\n\n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('selectNodeSum', { nodeId, target});\n            props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 20,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('hoverNodeSum', { nodeId });\n            props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 10,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('dehoverNodeSum', { nodeId });\n            props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('deselectNodeSum', { nodeId, target});\n            props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n      />), [graphData] )\n      return memoizedGraphComponent;\n}\n\nexport default MigrationSummary;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport icon from \"../assets/logo.png\";\n\nfunction Loading(props) {\n    const radius = 40;\n    const circumference = 2 * Math.PI * radius;\n    const strokeDashoffset = circumference - (props.progress / 100) * circumference;\n\n    return <div className=\"loading\">\n        <img src={icon} alt=\"Icon\" width=\"500px\"/>\n        <h1>Loading...</h1>\n        <svg>\n            <circle\n            cx=\"50\"\n            cy=\"50\"\n            r={radius}\n            stroke=\"#006699\"\n            strokeWidth=\"6\"\n            fill=\"transparent\"\n            strokeDasharray={`${circumference} ${circumference}`}\n            style={{ strokeDashoffset }}\n            />\n        </svg>\n    </div>\n}\n\nexport default Loading;","import React from \"react\"\n\nfunction FilterMenu(props) {\n    if (props.show) { \n        const edges = props.data.filter(e => e[2] < props.numSolns).map((text, index) => {\n            return (\n                <div>\n                    <input type=\"checkbox\" \n                            className=\"checkbox\" \n                            id={`${text[0]}\\u2192${text[1]}`} \n                            name={`${text[0]}\\u2192${text[1]}`} \n                            defaultChecked={props.selected[`${text[0]}\\u2192${text[1]}`]} \n                            onClick={() => props.toggleSelected(`${text[0]}\\u2192${text[1]}`)}\n                            />\n                    <label for={`${text[0]}\\u2192${text[1]}`}>{`${text[0]} \\u2192 ${text[1]}`}</label>\n                </div>\n            );\n        });\n\n        return (\n            <div className={`filtermenu ${props.sum} panel`}>\n                {edges}\n            </div>\n        )\n    } else {\n        return <></>\n    }\n}\n\nexport default FilterMenu;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\nimport InlineSVG from 'react-inlinesvg';\n\nimport Migration from \"./Migration.js\";\nimport ClonalTree from \"./ClonalTree.js\";\nimport MigrationSummary from \"./MigrationSummary.js\";\nimport Loading from \"./Loading.js\";\nimport FilterMenu from \"./FilterMenu.js\";\n\nimport DefaultDict from \"../utils/DefaultDict.js\";\n\n\nimport gear from '../assets/settings-gear.svg';\n\nfunction insertParam(key, value) {\n    // Get the current url\n    let currentUrl = new URL(window.location.href);\n  \n    // Change a url parameter using URLSearchParams\n    console.log(currentUrl.hash);\n    let urlParams = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    urlParams.set(key, value);\n  \n    // Replace the URL\n    //currentUrl.search = urlParams.toString();\n    window.location.href = '#/sumviz?' + urlParams.toString();\n  \n    // Reload the page\n    //window.location.reload();\n}\n\nfunction handleKeyPress(event) {\n    if (event.key === '/') {\n      alert('Instructions:\\n\\nIn this view you can compare the summary with a single solution. In the summary graph, corresponding migration and clonal tree components with bold on hover.\\n\\nToggle and move around the migration graphs and the clonal tree. Hover over nodes in the clonal tree to find the corresponding anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panel.\\n\\nTo add another solution into view, click the [+] on the right.\\n\\nYou can close out panels by clicking the [X].');\n    }\n}\n\nfunction SumViz() {\n    const [isLoading, setIsLoading] = useState(true);\n    const [progress, setProgress] = useState(0);\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [muSum, setMuSum] = useState(0);\n    const [gammaSum, setGammaSum] = useState(0);\n    const [showPanel, setShowPanel] = useState(false);\n\n    let selected = new DefaultDict(true);\n    let selectedStorage = JSON.parse(sessionStorage.getItem(\"selected\"));\n    \n    for (let key in selectedStorage) {\n        selected[key] = selectedStorage[key];\n    }\n\n    let violations = new DefaultDict(0);\n    let violationsStorage = JSON.parse(sessionStorage.getItem(\"violations\"));\n\n    for (let key in violationsStorage) {\n        violations[key] = violationsStorage[key];\n    }\n\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    const jsonContents=sessionStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n\n    const [rotate, setRotate] = useState(queryParameters.get(\"rotated\") === \"true\");\n\n    const labelName = queryParameters.get(\"labeling\");\n    const [labeling, setLabeling] = useState(labelName)\n\n    //let data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n\n    const numSolns = wholeData[\"solutions\"].length;\n\n    const migrationSummary = wholeData[\"summary\"][\"migration\"]\n\n    let coloring = wholeData[\"coloring\"];\n    console.log(coloring)\n\n    //let tree = null;\n    //let tree_labeling = null;\n    //let migration = null;\n\n    /*if (data != null) {\n        tree = data[\"tree\"]\n        tree_labeling = data[\"labeling\"];\n        migration = data[\"migration\"];\n    }*/\n\n    const [data, setData] = useState(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labeling})[0]);\n    const [tree, setTree] = useState(data[\"tree\"])\n    const [tree_labeling, setTreeLabeling] = useState(data[\"labeling\"])\n    const [migration, setMigration] = useState(data[\"migration\"])\n\n    if ((coloring === undefined || coloring.length === 0) && data != null) {\n        coloring = data[\"labeling\"]\n          .map((item) => item[1])\n          .filter((value, index, self) => {\n            return self.indexOf(value) === index;\n          })\n          .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n    }\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    useEffect(() => {\n        setTree(data[\"tree\"])\n        setTreeLabeling(data[\"labeling\"])\n        setMigration(data[\"migration\"])\n        setMu(sessionStorage.getItem(\"mu\"));\n        setGamma(sessionStorage.getItem(\"gamma\"));\n        console.log(migration)\n    }, [labeling])\n\n    let handleLabelChange = (event) => {\n        insertParam(\"labeling\", event.target.value);\n        setLabeling(event.target.value);\n        setData(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === event.target.value})[0]);\n    }\n\n    let rotateFn = (event) => {\n        let rotated = queryParameters.get(\"rotated\") === \"true\";\n        insertParam(\"rotated\", !rotated);\n        setRotate(!rotated)\n    }\n\n    let addTab = (event) => {\n        window.location = `${window.location.protocol}//${window.location.host}/mach2-viz/#/triviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling\")}`;\n    }\n\n    const eventBus = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    const eventBus2 = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    useEffect(() => {\n        const handleOutsideClick = (event) => {\n          if (!event.target.closest('.outside-click-container')) {\n            setShowPanel(false);\n          }\n        };\n  \n        document.addEventListener('mousedown', handleOutsideClick);\n        return () => {\n          document.removeEventListener('mousedown', handleOutsideClick);\n        };\n    }, []);\n\n    useEffect(() => {\n        //let intervalId = setInterval(() => {\n        //    setProgress(prevProgress => prevProgress + 10);\n        //}, 1000);\n\n        \n        // clearInterval(intervalId);\n        document.addEventListener(\"keydown\", handleKeyPress);\n        setMu(sessionStorage.getItem(\"mu\"));\n        setGamma(sessionStorage.getItem(\"gamma\"));\n        setMuSum(sessionStorage.getItem(\"musum\"));\n        setGammaSum(sessionStorage.getItem(\"gammasum\"));\n        setIsLoading(false)\n\n        //return () => clearInterval(intervalId);\n    }, []);\n\n    useEffect(() => {\n        setMuSum(sessionStorage.getItem(\"musum\"));\n        setGammaSum(sessionStorage.getItem(\"gammasum\"));\n    }, [isLoading])\n\n    let toggleSelected = (name) => {\n        selected['title'] = wholeData['name'];\n        selected[name] = !selected[name];\n        let name_parts = name.split('\\u2192');\n        \n        for (let i = 0; i < migrationSummary.length; i++) {\n            if (migrationSummary[i][0] == name_parts[0] && migrationSummary[i][1] == name_parts[1]) {\n                for (let j = 0; j < migrationSummary[i][2].length; j++) {\n                    (selected[name] ? (violations[migrationSummary[i][2][j]] -= 1) : (violations[migrationSummary[i][2][j]] += 1))\n                }\n            }\n        }\n\n        sessionStorage.setItem(\"violations\", JSON.stringify(violations));\n        sessionStorage.setItem(\"selected\", JSON.stringify(selected));        \n\n        window.location.reload()\n    }\n\n    var filterOut = [];\n    var filterJson = selected;\n\n    if (wholeData['name'] === filterJson['title']) {\n      for (let key in filterJson) {\n        if (key !== 'title' && !filterJson[key]) {\n          filterOut.push(key.split(''));\n        }\n      }\n    }\n\n    var solutionsOut = [];\n    for (let solution of wholeData['solutions']) {\n        for (let e of solution['migration']) {\n            for (let f of filterOut) {\n                if (f[0] == e[0] && f[1] == e[1]) {\n                    solutionsOut.push(solution['name']);\n                }\n            }\n        }\n    }\n    console.log(solutionsOut);\n\n    return (\n        <div className=\"viz\">\n            {!isLoading ? (\n                <>\n                    <div className=\"panel info one sum\">\n                        <div className=\"titlewrapper\">\n                            <InlineSVG src={gear} className=\"settingsgear\" onClick={() => { setShowPanel(!showPanel); }} />\n                            <div className=\"outside-click-container\">\n                                <FilterMenu show={showPanel} numSolns={numSolns} data={migrationSummary} selected={selected} toggleSelected={toggleSelected} sum='sum'/>\n                            </div>\n                            <h3 className=\"viztitle\"><b>Summary</b></h3>\n                            <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                            <a onClick={() => {window.location.href=`/mach2-viz/#/viz?labeling=${queryParameters.get(\"labeling\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n                        </div>\n                        <div className=\"panel migration top left sum\">\n                            <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                            <p className=\"paneltitle mu\">{`\\u03BC: ${muSum}`}</p>\n                            <p className=\"paneltitle gamma\">{`\\u03B3: ${gammaSum}`}</p>\n                            {data != null && <MigrationSummary data={migrationSummary} coloring={coloring} selected={selected} evtbus={eventBus} title={wholeData['name']}/>}\n                            {data == null && <h1 className=\"graphfail\">--No Graphs Possible--</h1>}\n                        </div>\n                    </div>\n                    <div className=\"panel info one two sum\">\n                        <div className=\"titlewrapper\">\n                            <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                            {data != null &&\n                            <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                                {labelnames.filter(name => !(solutionsOut.includes(name))).map(l => \n                                {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                                )}\n                            </select>\n                            }\n                            {data == null &&\n                            <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                                <option value={null} selected>-- No Graphs --</option>\n                            </select>\n                            }\n                            </b></p></label>\n                            {data != null && <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>}\n                            <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                        </div>\n                        <div className=\"panel migration top left\">\n                            <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                            <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                            <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                            <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n                            {data != null && <Migration tree={tree} labeling={tree_labeling} migration={migration} coloring={coloring} evtbus={eventBus} rotated={rotate}/>}\n                            {data == null && <h1 className=\"graphfail\">--No Graphs Possible--</h1>}\n                        </div>\n                        <div className=\"panel migration left\">\n                            <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                            {data != null && <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus} rightcol={true}/>}\n                            {data == null && <h1 className=\"graphfail\">--No Graphs Possible--</h1>}\n                        </div>\n                    </div>\n                    <div className=\"panel tab_add\" onClick={addTab}><p className='addpanelp'><b>+</b></p></div>\n                </>\n            ) : (\n                <Loading progress={progress}/>\n            )}\n        </div>\n    )\n}\n\nexport default SumViz;\n","import React from 'react';\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(COSEBilkent);\nCytoscape.use(dagre);\n\nfunction ClonalSummary(props) {\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n    const colorPalette = [\n    \"#a6cee3\",\n    \"#1f78b4\",\n    \"#b2df8a\",\n    \"#33a02c\",\n    \"#fb9a99\",\n    \"#e31a1c\",\n    \"#fdbf6f\",\n    \"#ff7f00\",\n    \"#cab2d6\",\n    \"#6a3d9a\",\n    \"#ffff99\",\n    \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n    }\n\n    function intersectArrays(...arrays) {\n        return arrays.reduce((accumulator, current) => {\n          return accumulator.filter(element => current.includes(element));\n        });\n    }\n\n    function removeDuplicates(array) {\n        return array.filter((element, index) => array.indexOf(element) === index);\n    }\n\n    function removeDuplicateArrays(array) {\n        return array.filter(\n          (element, index, self) =>\n            index === self.findIndex((t) => JSON.stringify(t) === JSON.stringify(element))\n        );\n    }\n\n    function findLabel(node) {\n        return labeling.map((value, index) => {\n          if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n    }\n\n    function getNumberOfLabels(value) {\n        return labeling.filter(item => item[0] === value).length\n    }\n\n    function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n            if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        let retval = hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n        return retval === undefined ? '#000' : retval;\n    }\n\n    function strictConsensus(edgelists) {\n        const edges = {};\n        for (const edgelist of edgelists) {\n            for (const edge of edgelist) {\n                const key = edge.join(\"->\");\n                edges[key] = (edges[key] || 0) + 1;\n            }\n        }\n\n        const strictConsensus = [];\n        for (const key in edges) {\n            if (edges[key] === edgelists.length) {\n                const [source, target] = key.split(\"->\");\n                strictConsensus.push([source, target]);\n            }\n        }\n\n        return strictConsensus;\n    }\n\n    let trees = props.data[\"solutions\"].map(item => item[\"tree\"]);\n    let nodeLists = trees.map(item => removeDuplicates(item.flat()));\n    let nodeIds = removeDuplicates(intersectArrays(...nodeLists));\n    const tree = strictConsensus(trees);\n    \n    const labels = props.data[\"solutions\"].map(item => item[\"labeling\"]);\n    let labeling = removeDuplicateArrays([].concat(...labels));\n    labeling = labeling.filter(item => getNumberOfLabels(item[0]) === 1 && nodeIds.includes(item[0]))\n\n    let nodes = tree.flat().filter(onlyUnique).map((value, index) => {\n        return { data: { id: value, label: findLabel(value), type: \"ip\"} };\n      });\n      let edges = tree.map((value, index) => {\n        return { data: { source: value[0], target: value[1], label: `${value[0]}->${value[1]}`, migration: `${findLabel(value[0])}->${findLabel(value[1])}`} }\n      })\n    \n      const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n      });\n    \n      let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#4a56a6\",\n            width: 15,\n            height: 15,\n            label: \"data(id)\",\n    \n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            \"line-color\": \"#AAD8FF\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\"\n          }\n        }\n      ];\n    \n      props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n      })\n    \n      edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        console.log(source);\n        styleSheet.push({\n          selector: `edge[label='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(findLabel(source))} ${getColor(findLabel(target))}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(findLabel(target))}`\n          }\n        })\n      })\n    \n      let myCyRef;\n      const layout = {\n        name: \"dagre\",\n        fit: true,\n        // circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNodeCl') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNodeCl') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'hoverNodeCl') {\n              myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n                width: 10\n              })\n            }\n            if (eventName === 'dehoverNodeCl') {\n              myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n                width: 3\n              })\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n      };\n    \n      return <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n            console.log(\"EVT\", evt);\n            console.log(\"TARGET\", node.data());\n            console.log(\"TARGET TYPE\", typeof node[0]);\n          });\n    \n          cy.on('mouseover', 'node', function(event) {\n            // Get the node information\n            var node = event.target;\n            var label = node.data('label');\n            \n            // Create the div element\n            var div = document.createElement(\"div\");\n            div.setAttribute(\"class\", \"panel popup\");\n    \n            div.innerHTML = `<p>${label}&nbsp;</p>`;\n          \n            // Position the div element near the node\n            const canvas = document.getElementsByTagName('canvas')[0];\n            div.style.position = \"absolute\";\n            div.style.top = (node.renderedPosition('y') + canvas.height*0.5 + 30) + 'px';\n            div.style.left = node.renderedPosition('x') + 'px';\n          \n            // Add the div element to the page\n            document.body.appendChild(div);\n            const nodeId = event.target.id();\n    \n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n            props.evtbus.fireEvent('hoverNodeSC', { nodeId });\n          });\n    \n          cy.on('mouseout', 'node', function(event){\n            // Remove the div element on mouseout\n            var div = document.querySelector('.panel.popup');\n            if (document.body.contains(div)) {\n                document.body.removeChild(div);\n            }\n    \n            var node = event.target;\n            var label = node.data('label');\n            const nodeId = event.target.id();\n    \n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n            props.evtbus.fireEvent('dehoverNodeSC', { nodeId });\n          });\n    \n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            let source = target.data().source;\n            let sink = target.data().target;\n            props.evtbus.fireEvent('selectNode', { nodeId, source, sink, target});\n            props.evtbus.fireEvent('selectNodeSC', { nodeId, source, sink, target});\n          });\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            let source = target.data().source;\n            let sink = target.data().target;\n            props.evtbus.fireEvent('deselectNode', { nodeId, source, sink, target});\n            props.evtbus.fireEvent('deselectNodeSC', { nodeId, source, sink, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n      />\n}\n\nexport default ClonalSummary;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport Migration from \"./Migration.js\";\nimport ClonalTree from \"./ClonalTree.js\";\nimport MigrationSummary from \"./MigrationSummary.js\";\nimport Loading from \"./Loading.js\";\nimport ClonalSummary from \"./ClonalSummary.js\";\nimport FilterMenu from \"./FilterMenu.js\";\n\nimport InlineSVG from 'react-inlinesvg';\nimport gear from '../assets/settings-gear.svg';\n\nimport DefaultDict from '../utils/DefaultDict.js';\n\nfunction insertParam(key, value) {\n    // Get the current url\n    let currentUrl = new URL(window.location.href);\n  \n    // Change a url parameter using URLSearchParams\n    let urlParams = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    urlParams.set(key, value);\n    console.log(urlParams.toString());\n  \n    // Replace the URL\n    //currentUrl.search = urlParams.toString();\n    window.location.href = '#/triviz?' + urlParams.toString();\n  \n    // Reload the page\n    //console.log(window.location);\n    //window.location.reload();\n}\n\nfunction handleKeyPress(event) {\n    if (event.key === '/') {\n      alert('Instructions:\\n\\nIn this view, you can compare the summary and two different solutions. In the summary graph, corresponding migration and clonal tree components with bold on hover.\\n\\nToggle and move around the migration graphs and clonal trees. Hover over nodes in the clonal trees to find the corresponding anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panels.\\n\\nYou can close out panels by clicking the [X].');\n    }\n}\n\nfunction TriViz(props) {\n    const [isLoading, setIsLoading] = useState(true);\n    const [progress, setProgress] = useState(0);\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [mu2, setMu2] = useState(0);\n    const [gamma2, setGamma2] = useState(0);\n    const [muSum, setMuSum] = useState(0);\n    const [gammaSum, setGammaSum] = useState(0);\n    const [showPanel, setShowPanel] = useState(false);\n\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    const jsonContents=sessionStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n\n    const [rotate, setRotate] = useState(queryParameters.get(\"rotated\") === \"true\");\n    const [rotate2, setRotate2] = useState(queryParameters.get(\"rotated2\") === \"true\");\n\n    const labelName = queryParameters.get(\"labeling\");\n    const labelName2 = queryParameters.get(\"labeling2\");\n\n    const [labeling, setLabeling] = useState(labelName)\n    const [labeling2, setLabeling2] = useState(labelName2)\n\n    const [data, setData] = useState(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labeling})[0]);\n    const [data2, setData2] = useState(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labeling2})[0]);\n\n    const migrationSummary = wholeData[\"summary\"][\"migration\"];\n\n    let selected = new DefaultDict(true);\n    let selectedStorage = JSON.parse(sessionStorage.getItem(\"selected\"));\n    \n    for (let key in selectedStorage) {\n        selected[key] = selectedStorage[key];\n    }\n\n    let violations = new DefaultDict(0);\n    let violationsStorage = JSON.parse(sessionStorage.getItem(\"violations\"));\n\n    for (let key in violationsStorage) {\n        violations[key] = violationsStorage[key];\n    }\n\n    let coloring = wholeData[\"coloring\"];\n    console.log(coloring)\n\n    if ((coloring === undefined || coloring.length === 0) && data != null) {\n      coloring = data[\"labeling\"]\n        .map((item) => item[1])\n        .filter((value, index, self) => {\n          return self.indexOf(value) === index;\n        })\n        .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n    }\n\n    const [tree, setTree] = useState(data[\"tree\"])\n    const [tree_labeling, setTreeLabeling] = useState(data[\"labeling\"])\n    const [migration, setMigration] = useState(data[\"migration\"])\n\n    const [tree2, setTree2] = useState(data[\"tree\"])\n    const [tree_labeling2, setTreeLabeling2] = useState(data[\"labeling\"])\n    const [migration2, setMigration2] = useState(data[\"migration\"])\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    const numSolns = wholeData[\"solutions\"].length;\n\n    useEffect(() => {\n        setTree(data[\"tree\"])\n        setTreeLabeling(data[\"labeling\"])\n        setMigration(data[\"migration\"])\n        setMu(sessionStorage.getItem(\"mu\"));\n        setGamma(sessionStorage.getItem(\"gamma\"));\n    }, [labeling])\n\n    useEffect(() => {\n        setTree2(data2[\"tree\"])\n        setTreeLabeling2(data2[\"labeling\"])\n        setMigration2(data2[\"migration\"])\n        setMu2(sessionStorage.getItem(\"mu2\"));\n        setGamma2(sessionStorage.getItem(\"gamma2\"));\n    }, [labeling2])\n\n    let handleLabelChange = (event) => {\n        insertParam(\"labeling\", event.target.value);\n        setLabeling(event.target.value)\n        setData(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === event.target.value})[0]);\n    }\n\n    let handleLabelChange2 = (event) => {\n        insertParam(\"labeling2\", event.target.value);\n        setLabeling2(event.target.value)\n        setData2(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === event.target.value})[0]);\n    }\n\n    const eventBus = {\n        listeners: [],\n        addListener(callback) {\n        this.listeners.push(callback);\n        },\n        removeListener(callback) {\n        this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n        this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n        });\n        },\n    };\n\n    useEffect(() => {\n        const handleOutsideClick = (event) => {\n          if (!event.target.closest('.outside-click-container')) {\n            setShowPanel(false);\n          }\n        };\n  \n        document.addEventListener('mousedown', handleOutsideClick);\n        return () => {\n          document.removeEventListener('mousedown', handleOutsideClick);\n        };\n    }, []);\n\n    useEffect(() => {\n    //let intervalId = setInterval(() => {\n    //    setProgress(prevProgress => prevProgress + 10);\n    //}, 1000);\n\n    //setTimeout(() => {\n    //    clearInterval(intervalId);\n        document.addEventListener(\"keydown\", handleKeyPress);\n        setMu(sessionStorage.getItem(\"mu\"));\n        setGamma(sessionStorage.getItem(\"gamma\"));\n        setMu2(sessionStorage.getItem(\"mu2\"));\n        setGamma2(sessionStorage.getItem(\"gamma2\"));\n        setMuSum(sessionStorage.getItem(\"musum\"));\n        setGammaSum(sessionStorage.getItem(\"gammasum\"));\n        setIsLoading(false)\n    //}, 10000);\n\n    //return () => clearInterval(intervalId);\n    }, []);\n\n    let toggleSelected = (name) => {\n    selected[name] = !selected[name];\n    let name_parts = name.split('\\u2192');\n    \n    for (let i = 0; i < migrationSummary.length; i++) {\n        if (migrationSummary[i][0] == name_parts[0] && migrationSummary[i][1] == name_parts[1]) {\n            for (let j = 0; j < migrationSummary[i][2].length; j++) {\n                (selected[name] ? (violations[migrationSummary[i][2][j]] -= 1) : (violations[migrationSummary[i][2][j]] += 1))\n            }\n        }\n    }\n\n    sessionStorage.setItem(\"violations\", JSON.stringify(violations));\n    sessionStorage.setItem(\"selected\", JSON.stringify(selected));\n\n    window.location.reload()\n}\n\nvar filterOut = [];\nvar filterJson = selected;\n\nif (wholeData['name'] === filterJson['title']) {\n  for (let key in filterJson) {\n    if (key !== 'title' && !filterJson[key]) {\n      filterOut.push(key.split(''));\n    }\n  }\n}\n\nvar solutionsOut = [];\nfor (let solution of wholeData['solutions']) {\n    for (let e of solution['migration']) {\n        for (let f of filterOut) {\n            if (f[0] == e[0] && f[1] == e[1]) {\n                solutionsOut.push(solution['name']);\n            }\n        }\n    }\n}\n\n    return <div className=\"viz\">\n    {!isLoading ? (\n            <>\n        <div className=\"panel info tri\">\n            <div className=\"titlewrapper\">\n                <InlineSVG src={gear} className=\"settingsgear\" onClick={() => \n                    { \n                        setShowPanel(!showPanel); \n                        if (showPanel) { \n                            if (labelnames.filter(name => (violations[name] == 0)).filter(name => (name == labelName)).length == 0) {\n                                insertParam(\"labeling\", labelnames.filter(name => (violations[name] == 0))[0]); \n                            }\n                            if (labelnames.filter(name => (violations[name] == 0)).filter(name => (name == labelName2)).length == 0) {\n                                insertParam(\"labeling2\", labelnames.filter(name => (violations[name] == 0))[0]); \n                            }\n                        }\n                    }\n                } />\n                <div className=\"outside-click-container\">\n                    <FilterMenu show={showPanel} numSolns={numSolns} data={migrationSummary} selected={selected} toggleSelected={toggleSelected} />\n                </div>\n                <h3 className=\"viztitle\"><b>Summary</b></h3>\n                <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                <a onClick={() => {window.location.href=`/mach2-viz/#/dualviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling2\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left sum\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${muSum}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gammaSum}`}</p>\n                {data != null && <MigrationSummary data={migrationSummary} coloring={coloring} evtbus={eventBus} title={wholeData['name']}/>}\n                {data == null && <h1 className=\"graphfail\">--No Graphs Possible--</h1>}\n            </div>\n        </div>\n        <div className=\"panel info tri two\">\n            <div className=\"titlewrapper\">\n                <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                {data != null && \n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                    {labelnames.filter(name => !(solutionsOut.includes(name))).map(l => \n                    {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                    )}\n                </select>\n                }  \n                {data == null &&\n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                    <option value={null} selected>-- No Graphs --</option>\n                </select>\n                }\n                </b></p></label>\n                {data != null && <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>}\n                <a onClick={() => {window.location.href=`/mach2-viz/#/sumviz?labeling=${queryParameters.get(\"labeling2\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                {data != null && <Migration tree={tree} labeling={tree_labeling} migration={migration} coloring={coloring} evtbus={eventBus} rotated={rotate}/>}\n                {data == null && <h1 className=\"graphfail\">--No Graphs Possible--</h1>}\n            </div>\n            <div className=\"panel migration left\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                {data != null && <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus}/>}\n                {data == null && <h1 className=\"graphfail\">--No Graphs Possible--</h1>}\n            </div>\n        </div>\n        <div className=\"panel info tri three\">\n            <div className=\"titlewrapper\">\n                <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                {data != null && \n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange2}>\n                    {labelnames.filter(name => !(solutionsOut.includes(name))).map(l => \n                    {return (l === queryParameters.get(\"labeling2\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                    )}\n                </select>\n                }\n                {data == null &&\n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                    <option value={null} selected>-- No Graphs --</option>\n                </select>\n                }\n                </b></p></label>\n                {data != null && <h3 className=\"viztitle\"><b>{data2[\"name\"]}</b></h3>}\n                <a onClick={() => {window.location.href=`/mach2-viz/#/sumviz?labeling=${queryParameters.get(\"labeling\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu2}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma2}`}</p>\n                {data != null && <Migration tree={tree2} labeling={tree_labeling2} migration={migration2} coloring={coloring} evtbus={eventBus} rightcol={true} rotated={rotate2}/>}\n                {data == null && <h1 className=\"graphfail\">--No Graphs Possible--</h1>}\n            </div>\n            <div className=\"panel migration left\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                {data != null && <ClonalTree tree={tree2} labeling={tree_labeling2} coloring={coloring} evtbus={eventBus} rightcol={true}/>}\n                {data == null && <h1 className=\"graphfail\">--No Graphs Possible--</h1>}\n            </div>\n        </div>\n        </>\n        ) : (\n        <Loading progress={progress}/>\n        )\n    }\n    </div>\n} \n\nexport default TriViz;","import React, { useState, useEffect } from \"react\"\nimport './App.css';\n\nimport About from './components/About.js'\nimport Viz from './components/Viz.js'\nimport Home from './components/Home.js'\nimport DualViz from \"./components/DualViz\";\nimport SumViz from \"./components/SumViz\";\nimport TriViz from \"./components/TriViz\";\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport { createBrowserHistory } from 'history';\n\n\nfunction App() {\n  const history = createBrowserHistory({\n    basename: '/mach2-viz/#' // Replace with your repository name\n  });\n\n  return (\n    <div className=\"App\">\n        <Switch>\n          <Route path=\"/about\">\n            <About/>\n          </Route>\n          <Route path=\"/viz\">\n            <Viz/>\n          </Route>\n          <Route path=\"/dualviz\">\n            <DualViz/>\n          </Route>\n          <Route path=\"/sumviz\">\n            <SumViz/>\n          </Route>\n          <Route path=\"/triviz\">\n            <TriViz/>\n          </Route>\n          <Route path=\"/mach2-viz/about\">\n            <About/>\n          </Route>\n          <Route path=\"/mach2-viz/viz\">\n            <Viz/>\n          </Route>\n          <Route path=\"/mach2-viz/dualviz\">\n            <DualViz/>\n          </Route>\n          <Route path=\"/mach2-viz/sumviz\">\n            <SumViz/>\n          </Route>\n          <Route path=\"/mach2-viz/triviz\">\n            <TriViz/>\n          </Route>\n          <Route path=\"/mach2-viz\">\n            <Home/>\n          </Route>\n          <Route exact path=\"/\">\n            <Home/>\n          </Route>\n        </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { HashRouter as Router } from \"react-router-dom\";\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <Router basename=\"/mach2-viz\">\n      <App />\n    </Router>\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","module.exports = __webpack_public_path__ + \"static/media/settings-gear.80b88740.svg\";"],"sourceRoot":""}