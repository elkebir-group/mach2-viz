(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{151:function(e,t,n){e.exports=n.p+"static/media/sample_page.17167d94.png"},153:function(e){e.exports={osteosarcoma_9:"viz?labeling=\\#0",ovarian_7_ROv:"viz?labeling=\\#0",ovarian_1_LOv:"viz?labeling=\\#0",prostate_34:"viz?labeling=\\#0",prostate_22:"viz?labeling=\\#0",prostate_29:"viz?labeling=\\#0",osteosarcoma_3:"viz?labeling=\\#0",ovarian_7_LOv:"viz?labeling=\\#0",ovarian_1_ROv:"viz?labeling=\\#0",prostate_32:"viz?labeling=\\#0",lung_CRUK0063:"viz?labeling=\\#0",prostate_24:"viz?labeling=\\#0",prostate_12:"viz?labeling=\\#0",osteosarcoma_2:"viz?labeling=\\#0",ovarian_3_LOv:"viz?labeling=\\#0",ovarian_9_LOv:"viz?labeling=\\#0",prostate_31:"viz?labeling=\\#0",ovarian_10_ROv:"viz?labeling=\\#0",ovarian_4_ROv:"viz?labeling=\\#0",prostate_10:"viz?labeling=\\#0",ovarian_9_ROv:"viz?labeling=\\#0",prostate_21:"viz?labeling=\\#0",ovarian_2_ROv:"viz?labeling=\\#0",ovarian_3_ROv:"viz?labeling=\\#0",prostate_17:"viz?labeling=\\#0",ovarian_4_LOv:"viz?labeling=\\#0"}},154:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAj0lEQVR4nO2USwrEIBAF6xJp5kg5dyQM+aySRfa5iMNAC0ISBE0v8nnQKCpVoI3wtLSAsxQ4oLEUXD8d8LUUeK1XcKMraoARkB2B6F5RV/UKnBUYBKJrXs9kRyJQGON5EBelAqYIHmoBPqXwI0kWPPUNCDBoSeLHdZYt6I845oJ15yF9Zv1Zm9QnSVZl3SQ/PmdfIXJmioIAAAAASUVORK5CYII="},182:function(e,t,n){e.exports=n(381)},189:function(e,t,n){},191:function(e,t,n){},376:function(e,t,n){var a={"./lung_CRUK0063":[156,0],"./lung_CRUK0063.json":[156,0],"./mapping":[45],"./mapping.json":[45],"./osteosarcoma_2":[157,1],"./osteosarcoma_2.json":[157,1],"./osteosarcoma_3":[158,2],"./osteosarcoma_3.json":[158,2],"./osteosarcoma_9":[159,3],"./osteosarcoma_9.json":[159,3],"./ovarian_10_ROv":[160,4],"./ovarian_10_ROv.json":[160,4],"./ovarian_1_LOv":[161,5],"./ovarian_1_LOv.json":[161,5],"./ovarian_1_ROv":[162,6],"./ovarian_1_ROv.json":[162,6],"./ovarian_2_ROv":[163,7],"./ovarian_2_ROv.json":[163,7],"./ovarian_3_LOv":[164,8],"./ovarian_3_LOv.json":[164,8],"./ovarian_3_ROv":[165,9],"./ovarian_3_ROv.json":[165,9],"./ovarian_4_LOv":[166,10],"./ovarian_4_LOv.json":[166,10],"./ovarian_4_ROv":[167,11],"./ovarian_4_ROv.json":[167,11],"./ovarian_7_LOv":[168,12],"./ovarian_7_LOv.json":[168,12],"./ovarian_7_ROv":[169,13],"./ovarian_7_ROv.json":[169,13],"./ovarian_9_LOv":[170,14],"./ovarian_9_LOv.json":[170,14],"./ovarian_9_ROv":[171,15],"./ovarian_9_ROv.json":[171,15],"./prostate_10":[172,16],"./prostate_10.json":[172,16],"./prostate_12":[173,17],"./prostate_12.json":[173,17],"./prostate_17":[174,18],"./prostate_17.json":[174,18],"./prostate_21":[175,19],"./prostate_21.json":[175,19],"./prostate_22":[176,20],"./prostate_22.json":[176,20],"./prostate_24":[177,21],"./prostate_24.json":[177,21],"./prostate_29":[178,22],"./prostate_29.json":[178,22],"./prostate_31":[179,23],"./prostate_31.json":[179,23],"./prostate_32":[180,24],"./prostate_32.json":[180,24],"./prostate_34":[181,25],"./prostate_34.json":[181,25]};function r(e){var t=a[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n.t(e,3)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(a)},r.id=376,e.exports=r},381:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(150),i=n.n(o),c=(n(189),n(191),n(23)),s=n(151),l=n.n(s);var u=function(){return r.a.createElement("div",{className:"about"},r.a.createElement("div",{className:"panel about"},r.a.createElement("div",{className:"aboutcontainer"},r.a.createElement("p",{className:"backarrow"},r.a.createElement("b",null,r.a.createElement(c.b,{to:"",style:{textDecoration:"none",color:"black"}},"\u2190 home"))),r.a.createElement("h1",{className:"abouttitle"},"Instructions")),r.a.createElement("p",null,r.a.createElement("b",null,"For full documentation on both MACH2 and MACH2-Viz, please see the following ",r.a.createElement("a",{href:"https://elkebir-group.github.io/mach2-docs/"},"link"))),r.a.createElement("p",{id:"mach2"},r.a.createElement("b",null,"MACH2")," is a personalized tool to visualize cancer metastasis. It is a sequel to MACHINA, an algorithm designed to solve the Parsimonious Migration History Problem (PMH problem)."),r.a.createElement("p",{id:"ii"},r.a.createElement("b",null,"The Parsimonious Migration History Problem:")," Given current oncological mutations at their respective anatomical sites, how can we infer their mutation tree as well as a network of anatomical sites inferring metastases?"),r.a.createElement("p",{id:"iii"},r.a.createElement("b",null,"Visualization Format:")),r.a.createElement("p",null,"Upon selecting one of the examples on the home page, you will be redirected to the visualization page. The page showcases multiple panels. The descriptions along with an image of the panels are shown below:"),r.a.createElement("ul",{style:{columns:1}},r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"MACH2 Solutions (middle and right):"),"The solutions computed by MACH2 are displayed here. Change between possible solutions by selecting the drop down menu at the top of the panel. Each graph in this panel is described below:")),r.a.createElement("ul",{style:{columns:1}},r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Clonal Tree (bottom right and bottom middle):"),' This is a tree of oncological mutations. Each node in this tree is a variant allele in the cancer patient. Each edge is a mutation from one variant to another. In the case of multiple clonal tree solutions, you can click the drop-down on the main panel (labeled "jsons/hoadley16_A7-1" below) to select between them. Additionally, you can see that there are buttons that say "Clonal Tree" and "Input Tree". The clonal tree displays the tree of mutations after polytomy refinement done by MACH2. The input tree is simply the original tree before these refinements are applied.')),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Migration Graph (top right and top middle):")," Each node in the clonal tree has a tag with an anatomical location inferred using ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Maximum_parsimony_(phylogenetics)"},"Maximum Parsimony"),". The clonal tree is compressed into a migration graph where each node represents an anatomical location, and each edge is a metastasis (e.g. a migration) between two anatomical locations."))),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Summary (left):")," You can also view a summary migration graph that is computed by unioning edges across migration graphs in each solution. Edges are weighted by the number of solutions they appear in."))),r.a.createElement("p",null,'You can click on the long gray bars on the sides of the visualization page to add extra panels. You can also click the "[X]" buttons on the top right corners of panels to delete them.'),r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"aboutimg",src:l.a,alt:"Sample Page"})),r.a.createElement("p",{id:"iv"},r.a.createElement("b",null,"Filtering Solutions:")),r.a.createElement("p",null,"The user has an option to delete or require edges displayed on the Summary Panel. Their functions are described below:"),r.a.createElement("ul",{style:{columns:1}},r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Delete edges: "),"Shift+Click on an edge in the summary panel to delete it. By deleting it, the MACH2 solution panels will only show solutions that do not have the edge in their solution.")),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Require edges: "),"Click on an edge in the summary panel to require it. By requiring it, the MACH2 solution panels will only show solutions that have that edge in their solution."))),r.a.createElement("p",null,"To undo actions, you can click the undo arrow that will appear on the top right corner of the summary panel after editing the summary panel edges."),r.a.createElement("p",{id:"v"},r.a.createElement("b",null,"Generating inputs:")),r.a.createElement("p",null,"MACH2 should already output a JSON format that is fully compatible with MACH2-Viz. However, if you are interested in using MACHINA, we have provided a ",r.a.createElement("a",{href:"https://github.com/vikramr2/json_compression"},"json compression")," program that takes an output directory from MACHINA that contains ",r.a.createElement("b",null,".tree")," files and their corresponding ",r.a.createElement("b",null,".labeling")," files, and returns a ",r.a.createElement("b",null,".json"),' file that can be used as input for this visualizer. Click the "+" icon in the home page to use this feature. For more information, see this ',r.a.createElement("a",{href:"https://github.com/vikramr2/json_compression/blob/main/README.md"},"README"),". Output from any algorithm that solves the PMH problem will be accepted provided that it is in a JSON format as shown in the README."),r.a.createElement("p",{id:"vi"},r.a.createElement("b",null,"Questions? Contact")),r.a.createElement("ul",{id:"singlecol"},r.a.createElement("li",null,r.a.createElement("p",null,"Vikram Ramavarapu (",r.a.createElement("a",{href:"mailto:vikramr2@illinois.edu"},"vikramr2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Roman Mineyev (",r.a.createElement("a",{href:"mailto:mineyev2@illinois.edu"},"mineyev2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Akul Joshi (",r.a.createElement("a",{href:"mailto:akulj2@illinois.edu"},"akulj2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Mrinmoy Roddur (",r.a.createElement("a",{href:"mailto:mroddur2@illinois.edu"},"mroddur2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Mohammed El-Kebir (",r.a.createElement("a",{href:"mailto:melkebir@illinois.edu"},"melkebir@illinois.edu"),")")))))},d=n(7),m=n(2),f=n(24),p=n(20),_=n.n(p),h=n(39),v=n.n(h);function g(e,t,n){if(n){var a=[];return e.forEach(function(e){e[1]===t&&a.push(e[0])}),a}e.forEach(function(e){if(e[0]===t)return[e[1]]})}function b(e,t){var n=[];return e.forEach(function(e){t.includes(e[0])&&t.includes(e[1])&&n.push(e)}),n}_.a.use(v.a);var E=function(e){var t=/^#(?:[0-9a-fA-F]{3}){1,2}$/,n=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],o=n.length;function i(a){if(!a)return"#000";var r=e.coloring.find(function(e){return e[0]===a}),i=r?r[1]:void 0;return t.test(i)?i:n[parseInt(i)%o]}function c(e,t,n){return n.indexOf(e)===t}function s(t){var n=e.labeling.find(function(e){return e[0]===t});return n?n[1]:void 0}var l=e.tree.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(c).map(function(e,t){return{data:{id:e,label:s(e),type:"ip"}}}),u=e.tree.map(function(e,t){return{data:{source:e[0],target:e[1],label:"".concat(e[0],"->").concat(e[1]),migration:"".concat(s(e[0]),"->").concat(s(e[1]))}}}),p=Object(a.useState)({nodes:l,edges:u}),_=Object(m.a)(p,2),h=_[0],v=_[1];Object(a.useEffect)(function(){l=e.tree.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(c).map(function(e,t){return{data:{id:e,label:s(e),type:"ip"}}}),u=e.tree.map(function(e,t){return{data:{source:e[0],target:e[1],label:"".concat(e[0],"->").concat(e[1]),migration:"".concat(s(e[0]),"->").concat(s(e[1]))}}}),v({nodes:l,edges:u})},[e.tree,e.labeling]);var E,y=[{selector:"node",style:{backgroundColor:"#4a56a6",width:15,height:15,label:"data(id)","overlay-padding":"6px","z-index":"10","text-outline-width":"2px",color:"white",fontSize:15}},{selector:"node:selected",style:{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C",width:50,height:50,"text-outline-color":"#77828C","text-outline-width":8}},{selector:"edge",style:{width:3,"line-color":"#AAD8FF","target-arrow-color":"#6774cb","target-arrow-shape":"triangle","curve-style":"bezier"}}];e.coloring.forEach(function(e,a){y.push({selector:"node[label='".concat(e[0],"']"),style:{backgroundColor:t.test(e[1])?e[1]:n[parseInt(e[1])%o]}})}),u.forEach(function(e,t){var n=e.data.source,a=e.data.target;y.push({selector:"edge[label='".concat(n,"->").concat(a,"']"),style:{"line-fill":"linear-gradient","line-gradient-stop-colors":"".concat(i(s(n))," ").concat(i(s(a))),"line-gradient-stop-positions":"33% 66%","target-arrow-color":"".concat(i(s(a)))}})});var w={name:"dagre",fit:!0,directed:!0,padding:10,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,ready:function(){e.evtbus.addListener(function(t,n){if("selectNodeCl"===t){var a=E.getElementById(n.nodeId);E.$("edge[migration='".concat(n.nodeId,"']")).css({width:10}),a.trigger("select")}if("deselectNodeCl"===t){var r=E.getElementById(n.nodeId);E.$("edge[migration='".concat(n.nodeId,"']")).css({width:3}),r.trigger("select")}if("hoverNodeCl"===t&&E.$("edge[migration='".concat(n.nodeId,"->").concat(n.nodeId,"']")).css({width:10}),"dehoverNodeCl"===t&&E.$("edge[migration='".concat(n.nodeId,"->").concat(n.nodeId,"']")).css({width:3}),"selectNodeSC"===t){var o=E.getElementById(n.nodeId),i=n.label;E.$("edge[label='".concat(i,"']")).css({width:10}),o.trigger("select")}if("deselectNodeSC"===t){var c=E.getElementById(n.nodeId),s=n.label;E.$("edge[label='".concat(s,"']")).css({width:3}),c.trigger("select")}if("hoverNodeSC"===t){var m=E.getElementById(n.nodeId),f=n.nodeId;E.$("node[id='".concat(f,"']")).css({width:25,height:25}),m.trigger("select")}if("dehoverNodeSC"===t){var p=E.getElementById(n.nodeId),_=n.nodeId;E.$("node[id='".concat(_,"']")).css({width:15,height:15}),p.trigger("select")}if("resetClonal"===t&&n.index===e.index&&v({nodes:l,edges:u}),"clonalHover"===t){var h=n.eventParams;void 0!==h&&(h.forEach(function(e){var t=E.getElementById(n.nodeId);E.$("node[id='".concat(e,"']")).css({width:25,height:25}),t.trigger("select")}),b(e.tree,h).forEach(function(e){E.$("edge[label='".concat(e[0],"->").concat(e[1],"']")).css({width:10})}))}if("clonalDehover"===t){var g=n.eventParams;void 0!==g&&(g.forEach(function(e){var t=E.getElementById(n.nodeId);E.$("node[id='".concat(e,"']")).css({width:15,height:15}),t.trigger("select")}),b(e.tree,g).forEach(function(e){E.$("edge[label='".concat(e[0],"->").concat(e[1],"']")).css({width:3})}))}if("zoomClonal"===t){var y=n.node,w=function(e,t){var n=Object(d.a)(new Set([].concat.apply([],e)));return t.filter(function(e){return n.includes(e)})}(e.tree,n.corr)[0],S=E.$("node[id='".concat(w,"']"));try{E.fit(S)}catch(P){E.fit(y)}}})}};return Object(a.useMemo)(function(){return r.a.createElement(f.a,{elements:f.a.normalizeElements(h),style:{width:"100%",height:"100%"},zoomingEnabled:!0,maxZoom:3,minZoom:.1,autounselectify:!0,boxSelectionEnabled:!0,layout:w,stylesheet:y,cy:function(t){E=t,t.on("mouseover","node",function(n){var a=n.target,r=a.data("label"),o=a.data("id"),i=e.unobserved&&e.unobserved.includes(o)?"(unobserved)":"";if(void 0!==r){var c=document.createElement("div");c.setAttribute("class","panel popup"),c.innerHTML="<p>".concat(r,'&nbsp;<span class="red-text">').concat(i,"</span>&nbsp;</p>");var s=a.position(),l=t.container(),u=t.zoom(),d=l.getBoundingClientRect();c.style.position="absolute";var m=d.left+s.x*u+t.pan().x+15,f=d.top+s.y*u+t.pan().y-15;c.style.top=f+"px",c.style.left=m+"px",document.body.appendChild(c);var p=document.querySelector("#".concat(r));null!==p&&(p.style.opacity=1,p.style.zIndex=100,p.style.fontWeight="bold")}var _=n.target.id();if(e.evtbus.fireEvent("hoverNodeSC",{nodeId:_}),e.clonalMap.length>0){var h=g(e.clonalMap,_,e.clonal);e.evtbus.fireEvent("clonalHover",{eventParams:h})}}),t.on("mouseout","node",function(t){var n=document.querySelector(".panel.popup");document.body.contains(n)&&document.body.removeChild(n);var a=t.target.id(),r=t.target.data("label"),o=document.querySelector("#".concat(r));if(null!==o&&(o.style.opacity=.7,o.style.zIndex=1,o.style.fontWeight="normal"),e.evtbus.fireEvent("dehoverNodeSC",{nodeId:a}),e.clonalMap.length>0){var i=g(e.clonalMap,a,e.clonal);e.evtbus.fireEvent("clonalDehover",{eventParams:i})}}),t.on("mouseover","edge",function(t){var n=t.target;n.css({width:10});var a=t.target.id(),r=s(n.data().source),o=s(n.data().target),i=n.data().label;e.evtbus.fireEvent("selectNode",{nodeId:a,source:r,sink:o,target:n}),e.evtbus.fireEvent("selectNodeSC",{nodeId:a,source:r,sink:o,target:n,label:i})}),t.on("mouseout","edge",function(t){var n=t.target;n.css({width:3});var a=t.target.id(),r=s(n.data().source),o=s(n.data().target),i=n.data().label;e.evtbus.fireEvent("deselectNode",{nodeId:a,source:r,sink:o,target:n}),e.evtbus.fireEvent("deselectNodeSC",{nodeId:a,source:r,sink:o,target:n,label:i})}),t.on("tap","node",function(n){var a=n.target,r=Object(d.a)(new Set(function(e,t){var n=[];return e.forEach(function(e){e[0]===t&&(n.push(e[1]),n.push(e[0])),e[1]===t&&(n.push(e[0]),n.push(e[1]))}),0===n.length&&n.push(t),n}(e.clonalMap,a.id())));e.evtbus.fireEvent("zoomClonal",{node:a,corr:r}),t.fit(a)})}})},[h])},y=n(64),w=n.n(y);function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}_.a.use(v.a),_.a.use(w.a);var O=function(e){var t=e.tree,n=e.labeling,o=e.coloring,i=e.migration,c=e.evtbus,s=e.rightcol,l=e.rotated,u=(e.setLoadingAction,/^#(?:[0-9a-fA-F]{3}){1,2}$/),d=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],p=d.length;function _(e,t,n){return n.indexOf(e)===t}function h(e){var t=n.find(function(t){return t[0]===e});return t?t[1]:void 0}function v(e){var t=o.find(function(t){return t[0]===e});return t&&(t=t[1]),u.test(t)?t:d[parseInt(t)%p]}var g,b=t.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(_).map(function(e,t){return{data:{id:h(e),label:h(e),type:"ip"}}}),E=i.map(function(e,t){return{data:{source:e[0],target:e[1],label:e[2],id:"".concat(e[0],"->").concat(e[1]),clsource:e[0],cltarget:e[1]}}}),y=S(E.entries());try{for(y.s();!(g=y.n()).done;){var w=g.value,P=Object(m.a)(w,2),O=P[0];1==P[1].data.label&&(E[O].data.label="")}}catch(D){y.e(D)}finally{y.f()}var k,j=Object(a.useState)({nodes:b,edges:E}),B=Object(m.a)(j,2),C=B[0],R=B[1];Object(a.useEffect)(function(){var e,n=t.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(_).map(function(e,t){return{data:{id:h(e),label:h(e),type:"ip"}}}),a=i.map(function(e,t){return{data:{source:e[0],target:e[1],label:e[2],id:"".concat(e[0],"->").concat(e[1]),clsource:e[0],cltarget:e[1]}}}),r=S(a.entries());try{for(r.s();!(e=r.n()).done;){var o=e.value,c=Object(m.a)(o,2),s=c[0];1==c[1].data.label&&(a[s].data.label="")}}catch(D){r.e(D)}finally{r.f()}R({nodes:n,edges:a})},[t,n,i,l]);var N=[{selector:"node",style:{backgroundColor:"#fff","border-width":10,shape:"rectangle",width:100,height:50,label:"data(label)","overlay-padding":"6px","z-index":"10","text-outline-width":"2px",color:"white",fontSize:15,"text-valign":"center","text-halign":"center"}},{selector:"node:selected",style:{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C",width:50,height:50,"text-outline-color":"#77828C","text-outline-width":8}},{selector:"node[type='device']",style:{shape:"rectangle"}},{selector:"edge",style:{width:3,label:"data(label)","target-arrow-color":"#6774cb","target-arrow-shape":"triangle","curve-style":"bezier","text-outline-width":"2px",color:"white",fontSize:15}}];o.forEach(function(e,t){N.push({selector:"node[label='".concat(e[0],"']"),style:{"border-color":u.test(e[1])?e[1]:d[parseInt(e[1])%p]}})}),E.forEach(function(e,t){var n=e.data.source,a=e.data.target;N.push({selector:"edge[id='".concat(n,"->").concat(a,"']"),style:{"line-fill":"linear-gradient","line-gradient-stop-colors":"".concat(v(n)," ").concat(v(a)),"line-gradient-stop-positions":"33% 66%","target-arrow-color":"".concat(v(a))}})});var z=new URLSearchParams(window.location.hash.split("?")[1]),I=s?"true"===z.get("rotated2"):"true"===z.get("rotated");null===I&&(I=!1);var M={name:"dagre",fit:!0,circle:!0,directed:!0,padding:10,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,transform:function(e,t){return{x:l?-2*t.y:t.x,y:l?t.x:t.y}},ready:function(){c.addListener(function(e,t){if("selectNode"===e){var n=k.getElementById(t.nodeId),a=t.source,r=t.sink;k.$("edge[id='".concat(a,"->").concat(r,"']")).css({width:10}),n.trigger("select")}if("deselectNode"===e){var o=k.getElementById(t.nodeId),i=t.source,c=t.sink;k.$("edge[id='".concat(i,"->").concat(c,"']")).css({width:3}),o.trigger("select")}if("selectNodeSum"===e){var l=k.getElementById(t.nodeId);k.$("edge[id='".concat(t.nodeId,"']")).css({width:10}),l.trigger("select")}if("deselectNodeSum"===e){var u=k.getElementById(t.nodeId);k.$("edge[id='".concat(t.nodeId,"']")).css({width:3}),u.trigger("select")}if("hoverNodeSum"===e){var d=k.getElementById(t.nodeId);k.$("node[id='".concat(t.nodeId,"']")).css({"border-width":20}),d.trigger("select")}if("dehoverNodeSum"===e){var m=k.getElementById(t.nodeId);k.$("node[id='".concat(t.nodeId,"']")).css({"border-width":10}),m.trigger("select")}"resetMigration"===e&&(1===t.index&&!s||2===t.index&&s)&&R({nodes:b,edges:E})})}},x=0,L=function(e){var t,n=new Set,a=S(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;-1!==r[2]&&n.add(r[2])}}catch(D){a.e(D)}finally{a.f()}return n.size}(t);return E.forEach(function(e){""==e.data.label?x+=1:x+=parseInt(e.data.label)}),s?(sessionStorage.setItem("mu2",x),sessionStorage.setItem("gamma2",L)):(sessionStorage.setItem("mu",x),sessionStorage.setItem("gamma",L)),Object(a.useMemo)(function(){return r.a.createElement(f.a,{elements:f.a.normalizeElements(C),style:{width:"100%",height:"100%"},zoomingEnabled:!0,maxZoom:3,minZoom:.1,autounselectify:!0,boxSelectionEnabled:!0,layout:M,stylesheet:N,cy:function(e){k=e,e.on("mouseover","edge",function(e){var t=e.target;t.css({width:10});var n=e.target.id();c.fireEvent("selectNodeSum",{nodeId:n,target:t}),c.fireEvent("selectNodeCl",{nodeId:n,target:t})}),e.on("mouseover","node",function(e){e.target.css({"border-width":20});var t=e.target.id();c.fireEvent("hoverNodeSum",{nodeId:t}),c.fireEvent("hoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=1,a.style.zIndex=100,a.style.fontWeight="bold")}),e.on("mouseout","node",function(e){e.target.css({"border-width":10});var t=e.target.id();c.fireEvent("dehoverNodeSum",{nodeId:t}),c.fireEvent("dehoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=.7,a.style.zIndex=1,a.style.fontWeight="normal")}),e.on("mouseout","edge",function(e){var t=e.target;t.css({width:3});var n=e.target.id();c.fireEvent("deselectNodeSum",{nodeId:n,target:t}),c.fireEvent("deselectNodeCl",{nodeId:n,target:t})})}})},[C])},k=n(19),j=function e(t){return Object(k.a)(this,e),new Proxy({},{get:function(e,n){return n in e?e[n]:t}})};function B(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function C(e){return encodeURIComponent(function(e){for(var t,n=(3-e.length%3)%3,a="",r=e.length,o=0,i=0;i<r;i++)t=i%3,o|=e[i]<<(16>>>t&24),2!==t&&e.length-i!==1||(a+=String.fromCharCode(B(o>>>18&63),B(o>>>12&63),B(o>>>6&63),B(63&o)),o=0);return 0===n?a:a.substring(0,a.length-n)+(1===n?"=":"==")}(e).replace(/\+/g,"-").replace(/\//g,"_"))}function R(e){return function(e,t){for(var n,a,r,o=e.replace(/[^A-Za-z0-9\+\/]/g,""),i=o.length,c=t?Math.ceil((3*i+1>>>2)/t)*t:3*i+1>>>2,s=new Uint8Array(c),l=0,u=0,d=0;d<i;d++)if(a=3&d,l|=((r=o.charCodeAt(d))>64&&r<91?r-65:r>96&&r<123?r-71:r>47&&r<58?r+4:43===r?62:47===r?63:0)<<18-6*a,3===a||i-d===1){for(n=0;n<3&&u<c;n++,u++)s[u]=l>>>(16>>>n&24)&255;l=0}return s}(decodeURIComponent(e).replace(/-/g,"+").replace(/_/g,"/"))}var N=4294967296,z=[4294967295,-N],I=[0,-0x8000000000000000],M=[0,0],x=[1,0];function L(e,t){return T(e[0]+t[0],e[1]+t[1])}function D(e){var t=[];return t[e-1]=void 0,t}function A(e,t){return function(e,t){var n;n=t,t<0&&(n+=N);return[n,e*N]}(~~Math.max(Math.min(e[1]/N,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/N,2147483647),-2147483648),q(e)&q(t))}function F(e,t){var n,a;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,a=t[1]<0,n&&!a?-1:!n&&a?1:J(e,t)[1]<0?-1:1)}function T(e,t){var n,a;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%N)+(a=Math.floor(e/N)*N),e=e-a+n;e<0;)e+=N,t-=N;for(;e>4294967295;)e-=N,t+=N;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function H(e,t){return e[0]==t[0]&&e[1]==t[1]}function G(e){return e>=0?[e,0]:[e+N,-N]}function q(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-N,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function W(e){return e<=30?1<<e:W(30)*W(e-30)}function U(e,t){var n,a,r,o;if(t&=63,H(e,I))return t?M:e;if(e[1]<0)throw new Error("Neg");return o=W(t),a=e[1]*o%0x10000000000000000,(a+=n=(r=e[0]*o)-r%N)>=0x8000000000000000&&(a-=0x10000000000000000),[r-=n,a]}function $(e,t){var n;return n=W(t&=63),T(Math.floor(e[0]/n),e[1]/n)}function J(e,t){return T(e[0]-t[0],e[1]-t[1])}function Y(e,t){return e.buf=t,e.pos=0,e.count=t.length,e}function K(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function V(e,t,n,a){return e.pos>=e.count?-1:(a=Math.min(a,e.count-e.pos),te(e.buf,e.pos,t,n,a),e.pos+=a,a)}function X(e){return e.buf=D(32),e.count=0,e}function Z(e){var t=e.buf;return t.length=e.count,t}function Q(e,t){e.buf[e.count++]=t<<24>>24}function ee(e,t,n,a){te(t,n,e.buf,e.count,a),e.count+=a}function te(e,t,n,a,r){for(var o=0;o<r;++o)n[a+o]=e[t+o]}function ne(e,t,n,a,r,o){var i,c;if(F(a,z)<0)throw new Error("invalid length "+a);for(e.length_0=a,function(e,t){!function(e,t){e._dictionarySize=t;for(var n=0;t>1<<n;++n);e._distTableSize=2*n}(t,1<<e.s),t._numFastBytes=e.f,function(e,t){var n=e._matchFinderType;e._matchFinderType=t,e._matchFinder&&n!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null)}(t,e.m),t._numLiteralPosStateBits=0,t._numLiteralContextBits=3,t._posStateBits=2,t._posStateMask=3}(r,i=function(e){var t;for(e._repDistances=D(4),e._optimum=[],e._rangeEncoder={},e._isMatch=D(192),e._isRep=D(12),e._isRepG0=D(12),e._isRepG1=D(12),e._isRepG2=D(12),e._isRep0Long=D(192),e._posSlotEncoder=[],e._posEncoders=D(114),e._posAlignEncoder=Ke({},4),e._lenEncoder=Ae({}),e._repMatchLenEncoder=Ae({}),e._literalEncoder={},e._matchDistances=[],e._posSlotPrices=[],e._distancesPrices=[],e._alignPrices=D(16),e.reps=D(4),e.repLens=D(4),e.processedInSize=[M],e.processedOutSize=[M],e.finished=[0],e.properties=D(5),e.tempPrices=D(128),e._longestMatchLength=0,e._matchFinderType=1,e._numDistancePairs=0,e._numFastBytesPrev=-1,e.backRes=0,t=0;t<4096;++t)e._optimum[t]={};for(t=0;t<4;++t)e._posSlotEncoder[t]=Ke({},6);return e}({})),i._writeEndMark=o,function(e,t){e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24;for(var n=0;n<4;++n)e.properties[1+n]=e._dictionarySize>>8*n<<24>>24;ee(t,e.properties,0,5)}(i,n),c=0;c<64;c+=8)Q(n,255&q($(a,c)));e.chunker=(i._needReleaseMFStream=0,i._inStream=t,i._finished=0,function(e){var t,n;e._matchFinder||(t={},n=4,e._matchFinderType||(n=2),function(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}(t,n),e._matchFinder=t);if(function(e,t,n){var a,r;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,r=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=D(r),a=0;a<r;++a)e.m_Coders[a]=We({})}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),e._dictionarySize==e._dictionarySizePrev&&e._numFastBytesPrev==e._numFastBytes)return;(function(e,t,n,a,r){var o,i;t<1073741567&&(e._cutValue=16+(a>>1),function(e,t,n,a){var r;e._keepSizeBefore=t,e._keepSizeAfter=n,r=t+n+a,(null==e._bufferBase||e._blockSize!=r)&&(e._bufferBase=null,e._blockSize=r,e._bufferBase=D(e._blockSize));e._pointerToLastSafePosition=e._blockSize-n}(e,t+n,a+r,256+~~((t+n+a+r)/2)),e._matchMaxLen=a,o=t+1,e._cyclicBufferSize!=o&&(e._son=D(2*(e._cyclicBufferSize=o))),i=65536,e.HASH_ARRAY&&(i=t-1,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i>>=1,(i|=65535)>16777216&&(i>>=1),e._hashMask=i,++i,i+=e.kFixHashSize),i!=e._hashSizeSum&&(e._hash=D(e._hashSizeSum=i)))})(e._matchFinder,e._dictionarySize,4096,e._numFastBytes,274),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes}(i),i._rangeEncoder.Stream=n,function(e){(function(e){e._state=0,e._previousByte=0;for(var t=0;t<4;++t)e._repDistances[t]=0})(e),function(e){e._position=M,e.Low=M,e.Range=-1,e._cacheSize=1,e._cache=0}(e._rangeEncoder),at(e._isMatch),at(e._isRep0Long),at(e._isRep),at(e._isRepG0),at(e._isRepG1),at(e._isRepG2),at(e._posEncoders),function(e){var t,n=1<<e.m_NumPrevBits+e.m_NumPosBits;for(t=0;t<n;++t)at(e.m_Coders[t].m_Encoders)}(e._literalEncoder);for(var t=0;t<4;++t)at(e._posSlotEncoder[t].Models);xe(e._lenEncoder,1<<e._posStateBits),xe(e._repMatchLenEncoder,1<<e._posStateBits),at(e._posAlignEncoder.Models),e._longestMatchWasFound=0,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(i),ke(i),Oe(i),i._lenEncoder._tableSize=i._numFastBytes+1-2,Te(i._lenEncoder,1<<i._posStateBits),i._repMatchLenEncoder._tableSize=i._numFastBytes+1-2,Te(i._repMatchLenEncoder,1<<i._posStateBits),i.nowPos64=M,function(e,t){return e.encoder=t,e.decoder=null,e.alive=1,e}({},i))}function ae(e,t,n){var a,r,o,i,c="",s=[];for(r=0;r<5;++r){if(-1==(o=K(t)))throw new Error("truncated input");s[r]=o<<24>>24}if(!function(e,t){var n,a,r,o,i,c,s;if(t.length<5)return 0;for(s=255&t[0],r=s%9,o=(c=~~(s/9))%5,i=~~(c/5),n=0,a=0;a<4;++a)n+=(255&t[1+a])<<8*a;if(n>99999999||!function(e,t,n,a){if(t>8||n>4||a>4)return 0;!function(e,t,n){var a,r;if(null!=e.m_Coders&&e.m_NumPrevBits==n&&e.m_NumPosBits==t)return;for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,r=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=D(r),a=0;a<r;++a)e.m_Coders[a]=we({})}(e.m_LiteralDecoder,n,t);var r=1<<a;return ge(e.m_LenDecoder,r),ge(e.m_RepLenDecoder,r),e.m_PosStateMask=r-1,1}(e,r,o,i))return 0;return function(e,t){if(t<0)return 0;e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=Math.max(e.m_DictionarySize,1),function(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=D(t));e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,Math.max(e.m_DictionarySizeCheck,4096)));return 1}(e,n)}(a=function(e){e.m_OutWindow={},e.m_RangeDecoder={},e.m_IsMatchDecoders=D(192),e.m_IsRepDecoders=D(12),e.m_IsRepG0Decoders=D(12),e.m_IsRepG1Decoders=D(12),e.m_IsRepG2Decoders=D(12),e.m_IsRep0LongDecoders=D(192),e.m_PosSlotDecoder=D(4),e.m_PosDecoders=D(114),e.m_PosAlignDecoder=Je({},4),e.m_LenDecoder=Ee({}),e.m_RepLenDecoder=Ee({}),e.m_LiteralDecoder={};for(var t=0;t<4;++t)e.m_PosSlotDecoder[t]=Je({},6);return e}({}),s))throw new Error("corrupted input");for(r=0;r<64;r+=8){if(-1==(o=K(t)))throw new Error("truncated input");1==(o=o.toString(16)).length&&(o="0"+o),c=o+""+c}/^0+$|^f+$/i.test(c)?e.length_0=z:(i=parseInt(c,16),e.length_0=i>4294967295?z:G(i)),e.chunker=function(e,t,n,a){return e.m_RangeDecoder.Stream=t,pe(e.m_OutWindow),e.m_OutWindow._stream=n,function(e){e.m_OutWindow._streamPos=0,e.m_OutWindow._pos=0,at(e.m_IsMatchDecoders),at(e.m_IsRep0LongDecoders),at(e.m_IsRepDecoders),at(e.m_IsRepG0Decoders),at(e.m_IsRepG1Decoders),at(e.m_IsRepG2Decoders),at(e.m_PosDecoders),function(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)at(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder);for(var t=0;t<4;++t)at(e.m_PosSlotDecoder[t].Models);ye(e.m_LenDecoder),ye(e.m_RepLenDecoder),at(e.m_PosAlignDecoder.Models),function(e){e.Code=0,e.Range=-1;for(var t=0;t<5;++t)e.Code=e.Code<<8|K(e.Stream)}(e.m_RangeDecoder)}(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=a,e.nowPos64=M,e.prevByte=0,function(e,t){return e.decoder=t,e.encoder=null,e.alive=1,e}({},e)}(a,t,n,e.length_0)}function re(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function oe(e,t,n,a){var r,o;for(e._streamEndWasReached&&e._pos+t+a>e._streamPos&&(a=e._streamPos-(e._pos+t)),++n,o=e._bufferOffset+e._pos+t,r=0;r<a&&e._bufferBase[o+r]==e._bufferBase[o+r-n];++r);return r}function ie(e){return e._streamPos-e._pos}function ce(e){var t,n;if(!e._streamEndWasReached)for(;;){if(!(n=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=V(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,n)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=1);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function se(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}var le=function(){var e,t,n,a=[];for(e=0;e<256;++e){for(n=e,t=0;t<8;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;a[e]=n}return a}();function ue(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),function(e){++e._pos,e._pos>e._posLimit&&(e._bufferOffset+e._pos>e._pointerToLastSafePosition&&function(e){var t,n,a;for((a=e._bufferOffset+e._pos-e._keepSizeBefore)>0&&--a,n=e._bufferOffset+e._streamPos-a,t=0;t<n;++t)e._bufferBase[t]=e._bufferBase[a+t];e._bufferOffset-=a}(e),ce(e))}(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,de(e._son,2*e._cyclicBufferSize,t),de(e._hash,e._hashSizeSum,t),se(e,t))}function de(e,t,n){var a,r;for(a=0;a<t;++a)(r=e[a]||0)<=n?r=0:r-=n,e[a]=r}function me(e){var t=e._pos-e._streamPos;t&&(ee(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function fe(e,t){var n=e._pos-t-1;return n<0&&(n+=e._windowSize),e._buffer[n]}function pe(e){me(e),e._stream=null}function _e(e){return(e-=2)<4?e:3}function he(e){return e<4?0:e<10?e-3:e-6}function ve(e){if(!e.alive)throw new Error("bad state");return e.encoder?function(e){(function(e,t,n,a){var r,o,i,c,s,l,u,d,m,f,p,_,h,v,g;if(t[0]=M,n[0]=M,a[0]=1,e._inStream&&(e._matchFinder._stream=e._inStream,function(e){e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=0,ce(e),e._cyclicBufferPos=0,se(e,-1)}(e._matchFinder),e._needReleaseMFStream=1,e._inStream=null),!e._finished){if(e._finished=1,v=e.nowPos64,H(e.nowPos64,M)){if(!ie(e._matchFinder))return void je(e,q(e.nowPos64));ze(e),h=q(e.nowPos64)&e._posStateMask,ot(e._rangeEncoder,e._isMatch,(e._state<<4)+h,0),e._state=he(e._state),i=re(e._matchFinder,-e._additionalOffset),Ge(He(e._literalEncoder,q(e.nowPos64),e._previousByte),e._rangeEncoder,i),e._previousByte=i,--e._additionalOffset,e.nowPos64=L(e.nowPos64,x)}if(ie(e._matchFinder))for(;;){if(u=Be(e,q(e.nowPos64)),f=e.backRes,h=q(e.nowPos64)&e._posStateMask,o=(e._state<<4)+h,1==u&&-1==f)ot(e._rangeEncoder,e._isMatch,o,0),i=re(e._matchFinder,-e._additionalOffset),g=He(e._literalEncoder,q(e.nowPos64),e._previousByte),e._state<7?Ge(g,e._rangeEncoder,i):(m=re(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),qe(g,e._rangeEncoder,m,i)),e._previousByte=i,e._state=he(e._state);else{if(ot(e._rangeEncoder,e._isMatch,o,1),f<4){if(ot(e._rangeEncoder,e._isRep,e._state,1),f?(ot(e._rangeEncoder,e._isRepG0,e._state,1),1==f?ot(e._rangeEncoder,e._isRepG1,e._state,0):(ot(e._rangeEncoder,e._isRepG1,e._state,1),ot(e._rangeEncoder,e._isRepG2,e._state,f-2))):(ot(e._rangeEncoder,e._isRepG0,e._state,0),ot(e._rangeEncoder,e._isRep0Long,o,1==u?0:1)),1==u?e._state=e._state<7?9:11:(De(e._repMatchLenEncoder,e._rangeEncoder,u-2,h),e._state=e._state<7?8:11),c=e._repDistances[f],0!=f){for(l=f;l>=1;--l)e._repDistances[l]=e._repDistances[l-1];e._repDistances[0]=c}}else{for(ot(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,De(e._lenEncoder,e._rangeEncoder,u-2,h),_=Me(f-=4),d=_e(u),Ve(e._posSlotEncoder[d],e._rangeEncoder,_),_>=4&&(p=f-(r=(2|1&_)<<(s=(_>>1)-1)),_<14?et(e._posEncoders,r-_-1,e._rangeEncoder,s,p):(it(e._rangeEncoder,p>>4,s-4),Ze(e._posAlignEncoder,e._rangeEncoder,15&p),++e._alignPriceCount)),c=f,l=3;l>=1;--l)e._repDistances[l]=e._repDistances[l-1];e._repDistances[0]=c,++e._matchPriceCount}e._previousByte=re(e._matchFinder,u-1-e._additionalOffset)}if(e._additionalOffset-=u,e.nowPos64=L(e.nowPos64,G(u)),!e._additionalOffset){if(e._matchPriceCount>=128&&ke(e),e._alignPriceCount>=16&&Oe(e),t[0]=e.nowPos64,n[0]=ct(e._rangeEncoder),!ie(e._matchFinder))return void je(e,q(e.nowPos64));if(F(J(e.nowPos64,v),[4096,0])>=0)return e._finished=0,void(a[0]=0)}}else je(e,q(e.nowPos64))}})(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(!function(e){Ie(e),e._rangeEncoder.Stream=null}(e.encoder),e.alive=0)}(e):function(e){var t=function(e){var t,n,a,r,o,i;if(i=q(e.nowPos64)&e.m_PosStateMask,nt(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+i)){if(nt(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))a=0,nt(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?(nt(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?(nt(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?(n=e.rep3,e.rep3=e.rep2):n=e.rep2,e.rep2=e.rep1):n=e.rep1,e.rep1=e.rep0,e.rep0=n):nt(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+i)||(e.state=e.state<7?9:11,a=1),a||(a=be(e.m_RepLenDecoder,e.m_RangeDecoder,i)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,a=2+be(e.m_LenDecoder,e.m_RangeDecoder,i),e.state=e.state<7?7:10,(o=Ye(e.m_PosSlotDecoder[_e(a)],e.m_RangeDecoder))>=4){if(r=(o>>1)-1,e.rep0=(2|1&o)<<r,o<14)e.rep0+=function(e,t,n,a){var r,o,i=1,c=0;for(o=0;o<a;++o)r=nt(n,e,t+i),i<<=1,i+=r,c|=r<<o;return c}(e.m_PosDecoders,e.rep0-o-1,e.m_RangeDecoder,r);else if(e.rep0+=function(e,t){var n,a,r=0;for(n=t;0!=n;--n)e.Range>>>=1,a=e.Code-e.Range>>>31,e.Code-=e.Range&a-1,r=r<<1|1-a,-16777216&e.Range||(e.Code=e.Code<<8|K(e.Stream),e.Range<<=8);return r}(e.m_RangeDecoder,r-4)<<4,e.rep0+=function(e,t){var n,a,r=1,o=0;for(a=0;a<e.NumBitLevels;++a)n=nt(t,e.Models,r),r<<=1,r+=n,o|=n<<a;return o}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=o;if(F(G(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;!function(e,t,n){var a=e._pos-t-1;for(a<0&&(a+=e._windowSize);0!=n;--n)a>=e._windowSize&&(a=0),e._buffer[e._pos++]=e._buffer[a++],e._pos>=e._windowSize&&me(e)}(e.m_OutWindow,e.rep0,a),e.nowPos64=L(e.nowPos64,G(a)),e.prevByte=fe(e.m_OutWindow,0)}else t=function(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}(e.m_LiteralDecoder,q(e.nowPos64),e.prevByte),e.state<7?e.prevByte=function(e,t){var n=1;do{n=n<<1|nt(t,e.m_Decoders,n)}while(n<256);return n<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function(e,t,n){var a,r,o=1;do{if(r=n>>7&1,n<<=1,a=nt(t,e.m_Decoders,(1+r<<8)+o),o=o<<1|a,r!=a){for(;o<256;)o=o<<1|nt(t,e.m_Decoders,o);break}}while(o<256);return o<<24>>24}(t,e.m_RangeDecoder,fe(e.m_OutWindow,e.rep0)),function(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&me(e)}(e.m_OutWindow,e.prevByte),e.state=he(e.state),e.nowPos64=L(e.nowPos64,x);return 0}(e.decoder);if(-1==t)throw new Error("corrupted input");e.inBytesProcessed=z,e.outBytesProcessed=e.decoder.nowPos64,(t||F(e.decoder.outSize,M)>=0&&F(e.decoder.nowPos64,e.decoder.outSize)>=0)&&(me(e.decoder.m_OutWindow),pe(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}(e),e.alive}function ge(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=Je({},3),e.m_MidCoder[e.m_NumPosStates]=Je({},3)}function be(e,t,n){if(!nt(t,e.m_Choice,0))return Ye(e.m_LowCoder[n],t);var a=8;return nt(t,e.m_Choice,1)?a+=8+Ye(e.m_HighCoder,t):a+=Ye(e.m_MidCoder[n],t),a}function Ee(e){return e.m_Choice=D(2),e.m_LowCoder=D(16),e.m_MidCoder=D(16),e.m_HighCoder=Je({},8),e.m_NumPosStates=0,e}function ye(e){at(e.m_Choice);for(var t=0;t<e.m_NumPosStates;++t)at(e.m_LowCoder[t].Models),at(e.m_MidCoder[t].Models);at(e.m_HighCoder.Models)}function we(e){return e.m_Decoders=D(768),e}var Se=function(){var e,t,n,a=2,r=[0,1];for(n=2;n<22;++n)for(t=1<<(n>>1)-1,e=0;e<t;++e,++a)r[a]=n<<24>>24;return r}();function Pe(e,t){var n,a,r,o;e._optimumEndIndex=t,r=e._optimum[t].PosPrev,a=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&($e(e._optimum[r]),e._optimum[r].PosPrev=r-1,e._optimum[t].Prev2&&(e._optimum[r-1].Prev1IsChar=0,e._optimum[r-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[r-1].BackPrev=e._optimum[t].BackPrev2)),o=r,n=a,a=e._optimum[o].BackPrev,r=e._optimum[o].PosPrev,e._optimum[o].BackPrev=n,e._optimum[o].PosPrev=t,t=o}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function Oe(e){for(var t=0;t<16;++t)e._alignPrices[t]=Qe(e._posAlignEncoder,t);e._alignPriceCount=0}function ke(e){var t,n,a,r,o,i,c,s;for(r=4;r<128;++r)t=(2|1&(i=Me(r)))<<(a=(i>>1)-1),e.tempPrices[r]=tt(e._posEncoders,t-i-1,a,r-t);for(o=0;o<4;++o){for(n=e._posSlotEncoder[o],c=o<<6,i=0;i<e._distTableSize;++i)e._posSlotPrices[c+i]=Xe(n,i);for(i=14;i<e._distTableSize;++i)e._posSlotPrices[c+i]+=(i>>1)-1-4<<6;for(s=128*o,r=0;r<4;++r)e._distancesPrices[s+r]=e._posSlotPrices[c+r];for(;r<128;++r)e._distancesPrices[s+r]=e._posSlotPrices[c+Me(r)]+e.tempPrices[r]}e._matchPriceCount=0}function je(e,t){Ie(e),function(e,t){if(!e._writeEndMark)return;ot(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),ot(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,De(e._lenEncoder,e._rangeEncoder,0,t);var n=_e(2);Ve(e._posSlotEncoder[n],e._rangeEncoder,63),it(e._rangeEncoder,67108863,26),Ze(e._posAlignEncoder,e._rangeEncoder,15)}(e,t&e._posStateMask);for(var n=0;n<5;++n)st(e._rangeEncoder)}function Be(e,t){var n,a,r,o,i,c,s,l,u,d,m,f,p,_,h,v,g,b,E,y,w,S,P,O,k,j,B,C,R,N,z,I,M,x,L,D,A,F,T,H,G,q,W,U;if(e._optimumEndIndex!=e._optimumCurrentIndex)return p=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,p;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(f=e._longestMatchLength,e._longestMatchWasFound=0):f=ze(e),j=e._numDistancePairs,(O=ie(e._matchFinder)+1)<2)return e.backRes=-1,1;for(O>273&&(O=273),T=0,u=0;u<4;++u)e.reps[u]=e._repDistances[u],e.repLens[u]=oe(e._matchFinder,-1,e.reps[u],273),e.repLens[u]>e.repLens[T]&&(T=u);if(e.repLens[T]>=e._numFastBytes)return e.backRes=T,Ne(e,(p=e.repLens[T])-1),p;if(f>=e._numFastBytes)return e.backRes=e._matchDistances[j-1]+4,Ne(e,f-1),f;if(s=re(e._matchFinder,-1),g=re(e._matchFinder,-e._repDistances[0]-1-1),f<2&&s!=g&&e.repLens[T]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,M=t&e._posStateMask,e._optimum[1].Price=rt[e._isMatch[(e._state<<4)+M]>>>2]+Ue(He(e._literalEncoder,t,e._previousByte),e._state>=7,g,s),$e(e._optimum[1]),F=(b=rt[2048-e._isMatch[(e._state<<4)+M]>>>2])+rt[2048-e._isRep[e._state]>>>2],g==s&&(H=F+function(e,t,n){return rt[e._isRepG0[t]>>>2]+rt[e._isRep0Long[(t<<4)+n]>>>2]}(e,e._state,M))<e._optimum[1].Price&&(e._optimum[1].Price=H,function(e){e.BackPrev=0,e.Prev1IsChar=0}(e._optimum[1])),(m=f>=e.repLens[T]?f:e.repLens[T])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],d=m;do{e._optimum[d--].Price=268435455}while(d>=2);for(u=0;u<4;++u)if(!((A=e.repLens[u])<2)){L=F+Re(e,u,e._state,M);do{(o=L+Fe(e._repMatchLenEncoder,A-2,M))<(N=e._optimum[A]).Price&&(N.Price=o,N.PosPrev=0,N.BackPrev=u,N.Prev1IsChar=0)}while(--A>=2)}if(P=b+rt[e._isRep[e._state]>>>2],(d=e.repLens[0]>=2?e.repLens[0]+1:2)<=f){for(B=0;d>e._matchDistances[B];)B+=2;for(;(o=P+Ce(e,l=e._matchDistances[B+1],d,M))<(N=e._optimum[d]).Price&&(N.Price=o,N.PosPrev=0,N.BackPrev=l+4,N.Prev1IsChar=0),d!=e._matchDistances[B]||(B+=2)!=j;++d);}for(n=0;;){if(++n==m)return Pe(e,n);if(E=ze(e),j=e._numDistancePairs,E>=e._numFastBytes)return e._longestMatchLength=E,e._longestMatchWasFound=1,Pe(e,n);if(++t,I=e._optimum[n].PosPrev,e._optimum[n].Prev1IsChar?(--I,e._optimum[n].Prev2?(q=e._optimum[e._optimum[n].PosPrev2].State,q=e._optimum[n].BackPrev2<4?q<7?8:11:q<7?7:10):q=e._optimum[I].State,q=he(q)):q=e._optimum[I].State,I==n-1?q=e._optimum[n].BackPrev?he(q):q<7?9:11:(e._optimum[n].Prev1IsChar&&e._optimum[n].Prev2?(I=e._optimum[n].PosPrev2,z=e._optimum[n].BackPrev2,q=q<7?8:11):q=(z=e._optimum[n].BackPrev)<4?q<7?8:11:q<7?7:10,R=e._optimum[I],z<4?z?1==z?(e.reps[0]=R.Backs1,e.reps[1]=R.Backs0,e.reps[2]=R.Backs2,e.reps[3]=R.Backs3):2==z?(e.reps[0]=R.Backs2,e.reps[1]=R.Backs0,e.reps[2]=R.Backs1,e.reps[3]=R.Backs3):(e.reps[0]=R.Backs3,e.reps[1]=R.Backs0,e.reps[2]=R.Backs1,e.reps[3]=R.Backs2):(e.reps[0]=R.Backs0,e.reps[1]=R.Backs1,e.reps[2]=R.Backs2,e.reps[3]=R.Backs3):(e.reps[0]=z-4,e.reps[1]=R.Backs0,e.reps[2]=R.Backs1,e.reps[3]=R.Backs2)),e._optimum[n].State=q,e._optimum[n].Backs0=e.reps[0],e._optimum[n].Backs1=e.reps[1],e._optimum[n].Backs2=e.reps[2],e._optimum[n].Backs3=e.reps[3],c=e._optimum[n].Price,s=re(e._matchFinder,-1),g=re(e._matchFinder,-e.reps[0]-1-1),M=t&e._posStateMask,y=0,(a=c+rt[e._isMatch[(q<<4)+M]>>>2]+Ue(He(e._literalEncoder,t,re(e._matchFinder,-2)),q>=7,g,s))<(w=e._optimum[n+1]).Price&&(w.Price=a,w.PosPrev=n,w.BackPrev=-1,w.Prev1IsChar=0,y=1),F=(b=c+rt[2048-e._isMatch[(q<<4)+M]>>>2])+rt[2048-e._isRep[q]>>>2],g!=s||w.PosPrev<n&&!w.BackPrev||(H=F+(rt[e._isRepG0[q]>>>2]+rt[e._isRep0Long[(q<<4)+M]>>>2]))<=w.Price&&(w.Price=H,w.PosPrev=n,w.BackPrev=0,w.Prev1IsChar=0,y=1),!((O=k=4095-n<(k=ie(e._matchFinder)+1)?4095-n:k)<2)){if(O>e._numFastBytes&&(O=e._numFastBytes),!y&&g!=s&&(U=Math.min(k-1,e._numFastBytes),(h=oe(e._matchFinder,0,e.reps[0],U))>=2)){for(W=he(q),x=t+1&e._posStateMask,S=a+rt[2048-e._isMatch[(W<<4)+x]>>>2]+rt[2048-e._isRep[W]>>>2],C=n+1+h;m<C;)e._optimum[++m].Price=268435455;(o=S+(Fe(e._repMatchLenEncoder,h-2,x)+Re(e,0,W,x)))<(N=e._optimum[C]).Price&&(N.Price=o,N.PosPrev=n+1,N.BackPrev=0,N.Prev1IsChar=1,N.Prev2=0)}for(G=2,D=0;D<4;++D)if(!((_=oe(e._matchFinder,-1,e.reps[D],O))<2)){v=_;do{for(;m<n+_;)e._optimum[++m].Price=268435455;(o=F+(Fe(e._repMatchLenEncoder,_-2,M)+Re(e,D,q,M)))<(N=e._optimum[n+_]).Price&&(N.Price=o,N.PosPrev=n,N.BackPrev=D,N.Prev1IsChar=0)}while(--_>=2);if(_=v,D||(G=_+1),_<k&&(U=Math.min(k-1-_,e._numFastBytes),(h=oe(e._matchFinder,_,e.reps[D],U))>=2)){for(W=q<7?8:11,x=t+_&e._posStateMask,r=F+(Fe(e._repMatchLenEncoder,_-2,M)+Re(e,D,q,M))+rt[e._isMatch[(W<<4)+x]>>>2]+Ue(He(e._literalEncoder,t+_,re(e._matchFinder,_-1-1)),1,re(e._matchFinder,_-1-(e.reps[D]+1)),re(e._matchFinder,_-1)),W=he(W),x=t+_+1&e._posStateMask,S=r+rt[2048-e._isMatch[(W<<4)+x]>>>2]+rt[2048-e._isRep[W]>>>2],C=_+1+h;m<n+C;)e._optimum[++m].Price=268435455;(o=S+(Fe(e._repMatchLenEncoder,h-2,x)+Re(e,0,W,x)))<(N=e._optimum[n+C]).Price&&(N.Price=o,N.PosPrev=n+_+1,N.BackPrev=0,N.Prev1IsChar=1,N.Prev2=1,N.PosPrev2=n,N.BackPrev2=D)}}if(E>O){for(E=O,j=0;E>e._matchDistances[j];j+=2);e._matchDistances[j]=E,j+=2}if(E>=G){for(P=b+rt[e._isRep[q]>>>2];m<n+E;)e._optimum[++m].Price=268435455;for(B=0;G>e._matchDistances[B];)B+=2;for(_=G;;++_)if((o=P+Ce(e,i=e._matchDistances[B+1],_,M))<(N=e._optimum[n+_]).Price&&(N.Price=o,N.PosPrev=n,N.BackPrev=i+4,N.Prev1IsChar=0),_==e._matchDistances[B]){if(_<k&&(U=Math.min(k-1-_,e._numFastBytes),(h=oe(e._matchFinder,_,i,U))>=2)){for(W=q<7?7:10,x=t+_&e._posStateMask,r=o+rt[e._isMatch[(W<<4)+x]>>>2]+Ue(He(e._literalEncoder,t+_,re(e._matchFinder,_-1-1)),1,re(e._matchFinder,_-(i+1)-1),re(e._matchFinder,_-1)),W=he(W),x=t+_+1&e._posStateMask,S=r+rt[2048-e._isMatch[(W<<4)+x]>>>2]+rt[2048-e._isRep[W]>>>2],C=_+1+h;m<n+C;)e._optimum[++m].Price=268435455;(o=S+(Fe(e._repMatchLenEncoder,h-2,x)+Re(e,0,W,x)))<(N=e._optimum[n+C]).Price&&(N.Price=o,N.PosPrev=n+_+1,N.BackPrev=0,N.Prev1IsChar=1,N.Prev2=1,N.PosPrev2=n,N.BackPrev2=i+4)}if((B+=2)==j)break}}}}}function Ce(e,t,n,a){var r=_e(n);return(t<128?e._distancesPrices[128*r+t]:e._posSlotPrices[(r<<6)+function(e){if(e<131072)return Se[e>>6]+12;if(e<134217728)return Se[e>>16]+32;return Se[e>>26]+52}(t)]+e._alignPrices[15&t])+Fe(e._lenEncoder,n-2,a)}function Re(e,t,n,a){var r;return t?(r=rt[2048-e._isRepG0[n]>>>2],1==t?r+=rt[e._isRepG1[n]>>>2]:(r+=rt[2048-e._isRepG1[n]>>>2],r+=lt(e._isRepG2[n],t-2))):(r=rt[e._isRepG0[n]>>>2],r+=rt[2048-e._isRep0Long[(n<<4)+a]>>>2]),r}function Ne(e,t){t>0&&(!function(e,t){var n,a,r,o,i,c,s,l,u,d,m,f,p,_,h,v,g;do{if(e._pos+e._matchMaxLen<=e._streamPos)f=e._matchMaxLen;else if((f=e._streamPos-e._pos)<e.kMinMatchCheck){ue(e);continue}for(p=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,a=e._bufferOffset+e._pos,e.HASH_ARRAY?(c=1023&(g=le[255&e._bufferBase[a]]^255&e._bufferBase[a+1]),e._hash[c]=e._pos,s=65535&(g^=(255&e._bufferBase[a+2])<<8),e._hash[1024+s]=e._pos,l=(g^le[255&e._bufferBase[a+3]]<<5)&e._hashMask):l=255&e._bufferBase[a]^(255&e._bufferBase[a+1])<<8,r=e._hash[e.kFixHashSize+l],e._hash[e.kFixHashSize+l]=e._pos,h=1+(e._cyclicBufferPos<<1),v=e._cyclicBufferPos<<1,d=m=e.kNumHashDirectBytes,n=e._cutValue;;){if(r<=p||0==n--){e._son[h]=e._son[v]=0;break}if(o=((i=e._pos-r)<=e._cyclicBufferPos?e._cyclicBufferPos-i:e._cyclicBufferPos-i+e._cyclicBufferSize)<<1,_=e._bufferOffset+r,u=d<m?d:m,e._bufferBase[_+u]==e._bufferBase[a+u]){for(;++u!=f&&e._bufferBase[_+u]==e._bufferBase[a+u];);if(u==f){e._son[v]=e._son[o],e._son[h]=e._son[o+1];break}}(255&e._bufferBase[_+u])<(255&e._bufferBase[a+u])?(e._son[v]=r,v=o+1,r=e._son[v],m=u):(e._son[h]=r,h=o,r=e._son[h],d=u)}ue(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function ze(e){var t=0;return e._numDistancePairs=function(e,t){var n,a,r,o,i,c,s,l,u,d,m,f,p,_,h,v,g,b,E,y,w;if(e._pos+e._matchMaxLen<=e._streamPos)_=e._matchMaxLen;else if((_=e._streamPos-e._pos)<e.kMinMatchCheck)return ue(e),0;for(g=0,h=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,a=e._bufferOffset+e._pos,v=1,l=0,u=0,e.HASH_ARRAY?(l=1023&(w=le[255&e._bufferBase[a]]^255&e._bufferBase[a+1]),u=65535&(w^=(255&e._bufferBase[a+2])<<8),d=(w^le[255&e._bufferBase[a+3]]<<5)&e._hashMask):d=255&e._bufferBase[a]^(255&e._bufferBase[a+1])<<8,r=e._hash[e.kFixHashSize+d]||0,e.HASH_ARRAY&&(o=e._hash[l]||0,i=e._hash[1024+u]||0,e._hash[l]=e._pos,e._hash[1024+u]=e._pos,o>h&&e._bufferBase[e._bufferOffset+o]==e._bufferBase[a]&&(t[g++]=v=2,t[g++]=e._pos-o-1),i>h&&e._bufferBase[e._bufferOffset+i]==e._bufferBase[a]&&(i==o&&(g-=2),t[g++]=v=3,t[g++]=e._pos-i-1,o=i),0!=g&&o==r&&(g-=2,v=1)),e._hash[e.kFixHashSize+d]=e._pos,E=1+(e._cyclicBufferPos<<1),y=e._cyclicBufferPos<<1,f=p=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&r>h&&e._bufferBase[e._bufferOffset+r+e.kNumHashDirectBytes]!=e._bufferBase[a+e.kNumHashDirectBytes]&&(t[g++]=v=e.kNumHashDirectBytes,t[g++]=e._pos-r-1),n=e._cutValue;;){if(r<=h||0==n--){e._son[E]=e._son[y]=0;break}if(c=((s=e._pos-r)<=e._cyclicBufferPos?e._cyclicBufferPos-s:e._cyclicBufferPos-s+e._cyclicBufferSize)<<1,b=e._bufferOffset+r,m=f<p?f:p,e._bufferBase[b+m]==e._bufferBase[a+m]){for(;++m!=_&&e._bufferBase[b+m]==e._bufferBase[a+m];);if(v<m&&(t[g++]=v=m,t[g++]=s-1,m==_)){e._son[y]=e._son[c],e._son[E]=e._son[c+1];break}}(255&e._bufferBase[b+m])<(255&e._bufferBase[a+m])?(e._son[y]=r,y=c+1,r=e._son[y],p=m):(e._son[E]=r,E=c,r=e._son[E],f=m)}return ue(e),g}(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=oe(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function Ie(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=0)}function Me(e){return e<2048?Se[e]:e<2097152?Se[e>>10]+20:Se[e>>20]+40}function xe(e,t){at(e._choice);for(var n=0;n<t;++n)at(e._lowCoder[n].Models),at(e._midCoder[n].Models);at(e._highCoder.Models)}function Le(e,t,n,a,r){var o,i,c,s,l;for(o=rt[e._choice[0]>>>2],c=(i=rt[2048-e._choice[0]>>>2])+rt[e._choice[1]>>>2],s=i+rt[2048-e._choice[1]>>>2],l=0,l=0;l<8;++l){if(l>=n)return;a[r+l]=o+Xe(e._lowCoder[t],l)}for(;l<16;++l){if(l>=n)return;a[r+l]=c+Xe(e._midCoder[t],l-8)}for(;l<n;++l)a[r+l]=s+Xe(e._highCoder,l-8-8)}function De(e,t,n,a){!function(e,t,n,a){n<8?(ot(t,e._choice,0,0),Ve(e._lowCoder[a],t,n)):(n-=8,ot(t,e._choice,0,1),n<8?(ot(t,e._choice,1,0),Ve(e._midCoder[a],t,n)):(ot(t,e._choice,1,1),Ve(e._highCoder,t,n-8)))}(e,t,n,a),0==--e._counters[a]&&(Le(e,a,e._tableSize,e._prices,272*a),e._counters[a]=e._tableSize)}function Ae(e){return function(e){e._choice=D(2),e._lowCoder=D(16),e._midCoder=D(16),e._highCoder=Ke({},8);for(var t=0;t<16;++t)e._lowCoder[t]=Ke({},3),e._midCoder[t]=Ke({},3)}(e),e._prices=[],e._counters=[],e}function Fe(e,t,n){return e._prices[272*n+t]}function Te(e,t){for(var n=0;n<t;++n)Le(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize}function He(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}function Ge(e,t,n){var a,r,o=1;for(r=7;r>=0;--r)a=n>>r&1,ot(t,e.m_Encoders,o,a),o=o<<1|a}function qe(e,t,n,a){var r,o,i,c,s=1,l=1;for(o=7;o>=0;--o)r=a>>o&1,c=l,s&&(c+=1+(i=n>>o&1)<<8,s=i==r),ot(t,e.m_Encoders,c,r),l=l<<1|r}function We(e){return e.m_Encoders=D(768),e}function Ue(e,t,n,a){var r,o,i=1,c=7,s=0;if(t)for(;c>=0;--c)if(o=n>>c&1,r=a>>c&1,s+=lt(e.m_Encoders[(1+o<<8)+i],r),i=i<<1|r,o!=r){--c;break}for(;c>=0;--c)r=a>>c&1,s+=lt(e.m_Encoders[i],r),i=i<<1|r;return s}function $e(e){e.BackPrev=-1,e.Prev1IsChar=0}function Je(e,t){return e.NumBitLevels=t,e.Models=D(1<<t),e}function Ye(e,t){var n,a=1;for(n=e.NumBitLevels;0!=n;--n)a=(a<<1)+nt(t,e.Models,a);return a-(1<<e.NumBitLevels)}function Ke(e,t){return e.NumBitLevels=t,e.Models=D(1<<t),e}function Ve(e,t,n){var a,r,o=1;for(r=e.NumBitLevels;0!=r;)a=n>>>--r&1,ot(t,e.Models,o,a),o=o<<1|a}function Xe(e,t){var n,a,r=1,o=0;for(a=e.NumBitLevels;0!=a;)n=t>>>--a&1,o+=lt(e.Models[r],n),r=(r<<1)+n;return o}function Ze(e,t,n){var a,r,o=1;for(r=0;r<e.NumBitLevels;++r)a=1&n,ot(t,e.Models,o,a),o=o<<1|a,n>>=1}function Qe(e,t){var n,a,r=1,o=0;for(a=e.NumBitLevels;0!=a;--a)n=1&t,t>>>=1,o+=lt(e.Models[r],n),r=r<<1|n;return o}function et(e,t,n,a,r){var o,i,c=1;for(i=0;i<a;++i)ot(n,e,t+c,o=1&r),c=c<<1|o,r>>=1}function tt(e,t,n,a){var r,o,i=1,c=0;for(o=n;0!=o;--o)r=1&a,a>>>=1,c+=rt[(2047&(e[t+i]-r^-r))>>>2],i=i<<1|r;return c}function nt(e,t,n){var a,r=t[n];return a=(e.Range>>>11)*r,(-2147483648^e.Code)<(-2147483648^a)?(e.Range=a,t[n]=r+(2048-r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|K(e.Stream),e.Range<<=8),0):(e.Range-=a,e.Code-=a,t[n]=r-(r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|K(e.Stream),e.Range<<=8),1)}function at(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}var rt=function(){var e,t,n,a=[];for(t=8;t>=0;--t)for(e=1<<9-t,n=1<<9-t-1;n<e;++n)a[n]=(t<<6)+(e-n<<6>>>9-t-1);return a}();function ot(e,t,n,a){var r,o=t[n];r=(e.Range>>>11)*o,a?(e.Low=L(e.Low,A(G(r),[4294967295,0])),e.Range-=r,t[n]=o-(o>>>5)<<16>>16):(e.Range=r,t[n]=o+(2048-o>>>5)<<16>>16),-16777216&e.Range||(e.Range<<=8,st(e))}function it(e,t,n){for(var a=n-1;a>=0;--a)e.Range>>>=1,1==(t>>>a&1)&&(e.Low=L(e.Low,G(e.Range))),-16777216&e.Range||(e.Range<<=8,st(e))}function ct(e){return L(L(G(e._cacheSize),e._position),[4,0])}function st(e){var t,n=q(function(e,t){var n;return n=$(e,t&=63),e[1]<0&&(n=L(n,U([2,0],63-t))),n}(e.Low,32));if(0!=n||F(e.Low,[4278190080,0])<0){e._position=L(e._position,G(e._cacheSize)),t=e._cache;do{Q(e.Stream,t+n),t=255}while(0!=--e._cacheSize);e._cache=q(e.Low)>>>24}++e._cacheSize,e.Low=U(A(e.Low,[16777215,0]),8)}function lt(e,t){return rt[(2047&(e-t^-t))>>>2]}var ut=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,a=void 0===n?7:n,r=t.enableEndMark,o=void 0===r||r,i={};for(i.c=function(e,t,n,a){return e.output=X({}),ne(e,Y({},t),e.output,G(t.length),n,a),e}({},function(e){var t,n,a,r=[],o=0,i=e.length;if("object"==typeof e)return e;for(function(e,t,n,a,r){var o;for(o=t;o<n;++o)a[r++]=e.charCodeAt(o)}(e,0,i,r,0),a=0;a<i;++a)(t=r[a])>=1&&t<=127?++o:o+=!t||t>=128&&t<=2047?2:3;for(n=[],o=0,a=0;a<i;++a)(t=r[a])>=1&&t<=127?n[o++]=t<<24>>24:!t||t>=128&&t<=2047?(n[o++]=(192|t>>6&31)<<24>>24,n[o++]=(128|63&t)<<24>>24):(n[o++]=(224|t>>12&15)<<24>>24,n[o++]=(128|t>>6&63)<<24>>24,n[o++]=(128|63&t)<<24>>24);return n}(e),function(e){return ut[e-1]||ut[6]}(a),o);ve(i.c.chunker););return Z(i.c.output)}function mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,a=void 0===n?7:n,r=t.enableEndMark,o=dt(e,{mode:a,enableEndMark:void 0===r||r});return C(new Uint8Array(o))}function ft(e){var t={};for(t.d=function(e,t){return e.output=X({}),ae(e,Y({},t),e.output),e}({},e);ve(t.d.chunker););return function(e){for(var t,n,a,r=0,o=0,i=e.length,c=[],s=[];r<i;++r,++o){if(128&(t=255&e[r]))if(192==(224&t)){if(r+1>=i)return e;if(128!=(192&(n=255&e[++r])))return e;s[o]=(31&t)<<6|63&n}else{if(224!=(240&t))return e;if(r+2>=i)return e;if(128!=(192&(n=255&e[++r])))return e;if(128!=(192&(a=255&e[++r])))return e;s[o]=(15&t)<<12|(63&n)<<6|63&a}else{if(!t)return e;s[o]=t}16383==o&&(c.push(String.fromCharCode.apply(String,s)),o=-1)}return o>0&&(s.length=o,c.push(String.fromCharCode.apply(String,s))),c.join("")}(Z(t.d.output))}function pt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}_.a.use(v.a),_.a.use(w.a);var ht=function(e){var t=e.data,n=e.coloringDict,o=e.evtbus,i=e.title,c=e.onDeleteSummaryEdge,s=e.onRequireSummaryEdge,l=e.roots,u=e.requiredEdges;e.setLoadingAction,document.addEventListener("keydown",function(e){"Shift"===e.key&&document.body.classList.add("shift-click")}),document.addEventListener("keyup",function(e){"Shift"===e.key&&document.body.classList.remove("shift-click")});var p=[],_=JSON.parse(sessionStorage.getItem("selected"));if(i===_.title)for(var h in _)"title"===h||_[h]||p.push(h.split("\u2192"));var v,g=(v=t.map(function(e,t){return[e[0],e[1]]}).flat(),Object(d.a)(new Set(v))).map(function(e,t){return{data:{id:e,label:e,type:"ip"}}}),b=t.filter(function(e){for(var t=0,n=p;t<n.length;t++){var a=n[t];if(a[0]===e[0]&&a[1]===e[1])return!1}return!0}).map(function(e,t){return{data:{source:e[0],target:e[1],label:e[2],id:"".concat(e[0],"->").concat(e[1]),clsource:e[0],cltarget:e[1]}}});if(Object.keys(l).length>1)for(var E in g.push({data:{id:"roots",label:"roots",type:"ip",root:"true"}}),l)b.push({data:{source:"roots",target:E,label:l[E],id:"roots->".concat(E),clsource:"roots",cltarget:E,rootedge:"true"}});var y,w=pt(b.entries());try{for(w.s();!(y=w.n()).done;){var S=y.value,P=Object(m.a)(S,2),O=P[0];1==P[1].data.label&&(b[O].data.label="")}}catch(L){w.e(L)}finally{w.f()}var k,j={nodes:g,edges:b},B=[{selector:"node",style:{backgroundColor:"#fff","border-width":10,shape:"rectangle",width:100,height:50,label:"data(label)","overlay-padding":"6px","z-index":"10","text-outline-width":"2px",color:"white",fontSize:15,"text-valign":"center","text-halign":"center"}},{selector:"node:selected",style:{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C",width:50,height:50,"text-outline-color":"#77828C","text-outline-width":8}},{selector:"node[type='device']",style:{shape:"rectangle"}},{selector:"edge",style:{width:3,label:"data(label)","target-arrow-color":"#6774cb","target-arrow-shape":"triangle","arrow-scale":1,"curve-style":"bezier","edge-distances":"node-position","text-outline-width":"2px",color:"white",fontSize:15}},{selector:"node[root='true']",style:{"border-color":"#bbb"}},{selector:"edge[rootedge='true']",style:{"line-style":"dashed"}}];for(var C in n){var R=n[C];B.push({selector:"node[label='".concat(C,"']"),style:{"border-color":R}})}b.map(function(e,t){var n=e.data.source,a=e.data.target;return B.push({selector:"edge[id='".concat(n,"->").concat(a,"']"),style:{"line-fill":"linear-gradient","line-gradient-stop-colors":"".concat(x(n)," ").concat(x(a)),"line-gradient-stop-positions":"33% 66%","target-arrow-color":"".concat(x(a))}}),0});var N="true"===new URLSearchParams(window.location.search).get("rotatedsum");null===N&&(N=!1);var z={name:"circle",fit:!0,circle:!0,directed:!0,padding:10,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,ready:function(){o.addListener(function(e,t){if("selectNode"===e){var n=k.getElementById(t.nodeId),a=t.source,r=t.sink;k.$("edge[id='".concat(a,"->").concat(r,"']")).css({width:10}),n.trigger("select")}if("deselectNode"===e){var o=k.getElementById(t.nodeId),i=t.source,c=t.sink;k.$("edge[id='".concat(i,"->").concat(c,"']")).css({width:3}),o.trigger("select")}if("unrequireEdge"===e){var s=k.$("edge[id='".concat(t.object,"']"));s.css({"font-weight":"normal",width:3,arrowScale:1}),s.data("selected","false")}if("requireEdge"===e){var l=k.$("edge[id='".concat(t.object,"']"));l.css({"font-weight":"normal",width:10,arrowScale:1}),l.data("selected","true")}if("resetStack"===e){var u=k.$("edge");u.css({"font-weight":"normal",width:3,arrowScale:1}),u.data("selected","false")}})}},I=0,M=b.length;function x(e){return"roots"===e?"#bbb":n[e]}return b.map(function(e){return"roots"!==e.data.source&&(""==e.data.label?I+=1:I+=parseInt(e.data.label)),0}),sessionStorage.setItem("musum",I),sessionStorage.setItem("gammasum",M),Object(a.useMemo)(function(){return r.a.createElement(f.a,{elements:f.a.normalizeElements(j),style:{width:"100%",height:"100%"},zoomingEnabled:!0,maxZoom:3,minZoom:.1,autounselectify:!0,boxSelectionEnabled:!0,layout:z,stylesheet:B,cy:function(e){k=e,e.ready(function(){u.forEach(function(t){var n=e.getElementById(t);n.css({"font-weight":"bold",width:10,arrowScale:1}),n.data("selected","true")})}),e.off("cxttap","edge"),e.on("cxttap","edge",function(e){}),e.off("tap","edge"),e.on("tap","edge",function(e){var t="require";e.originalEvent.shiftKey&&(t="delete");var n=e.target;-1!==function(e,t){return"require"===t?s(e.id()):c(e.id())}(n,t)&&"require"===t&&(u.includes(n.id())?(n.css({"font-weight":"normal",width:3,arrowScale:1}),n.data("selected","false")):(n.css({"font-weight":"bold",width:10,arrowScale:1}),n.data("selected","true")))}),e.off("mouseover","edge"),e.on("mouseover","edge",function(e){var t=e.target;"true"!==t.data().selected?t.css({width:6,arrowScale:.5}):t.css({width:13,arrowScale:.769});var n=e.target.id();o.fireEvent("selectNodeSum",{nodeId:n,target:t}),o.fireEvent("selectNodeCl",{nodeId:n,target:t})}),e.off("mouseover","node"),e.on("mouseover","node",function(e){e.target.css({"border-width":20});var t=e.target.id();o.fireEvent("hoverNodeSum",{nodeId:t}),o.fireEvent("hoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=1,a.style.zIndex=100,a.style.fontWeight="bold")}),e.off("mouseout","node"),e.on("mouseout","node",function(e){e.target.css({"border-width":10});var t=e.target.id();o.fireEvent("dehoverNodeSum",{nodeId:t}),o.fireEvent("dehoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=.7,a.style.zIndex=1,a.style.fontWeight="normal")}),e.off("mouseout","edge"),e.on("mouseout","edge",function(e){var t=e.target;"true"!==t.data().selected?t.css({width:3,arrowScale:1}):t.css({width:10,arrowScale:1});var n=e.target.id();o.fireEvent("deselectNodeSum",{nodeId:n,target:t}),o.fireEvent("deselectNodeCl",{nodeId:n,target:t})})}})},[t])};var vt=function(e){var t=e.type,n=e.setType,o=e.insertParam,i=e.usedData,c=e.coloring,s=(e.muSum,e.evtBus),l=e.onDeleteSummaryEdge,u=e.onRequireSummaryEdge,f=e.clearData,p=e.roots,_=e.deletedEdges,h=e.requiredEdges,v=e.deletedRoots,g=e.requiredRoots,b=e.setDeletedEdges,E=e.setRequiredEdges,y=e.setDeletedRoots,w=e.setRequiredRoots,S=e.filterStack,P=e.setFilterStack,O=e.setLoadingAction,k=Object(a.useState)(!1),j=Object(m.a)(k,2),B=j[0],C=j[1];function R(e,t){var n=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],a=n.length,r=e[t];return/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)?r:n[parseInt(r)%a]}var N=i.summary.migration;void 0===N&&(N=i.summary);for(var z={},I=0;I<c.length;I++)z[c[I][0]]=c[I][1];return r.a.createElement("div",{className:"panel info ".concat("sumviz"===t?"one":"tri")},r.a.createElement("div",{className:"titlewrapper"},r.a.createElement("h3",{className:"sumviztitle"},r.a.createElement("b",null,"Summary")),r.a.createElement("p",{className:"titleelem end"},r.a.createElement("b",null,"Press [/] for help")),r.a.createElement("span",{onClick:function(e){f(),"sumviz"===t?(n("viz"),o("type","viz")):(n("dualviz"),o("type","dualviz"))},style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"panelclosebutton"},r.a.createElement("b",null,"[X]")))),r.a.createElement("div",{className:"panel migration top left sum"},r.a.createElement("p",{className:"paneltitle"},r.a.createElement("b",null,"Migration Graph")),r.a.createElement("p",{className:"paneltitle mu"},"solutions: ".concat(i.solutions.length)),S.length>0?r.a.createElement("p",{className:"rightAlign",onClick:function(){C(!1);var e=S.pop().split(" "),t=Object(m.a)(e,3),n=t[0],a=t[1],r=t[2];"required"===n&&("root"===a&&w(g.filter(function(e){return e!==r})),"edge"===a&&(E(h.filter(function(e){return e!==r})),s.fireEvent("unrequireEdge",{object:r}))),"deleted"===n&&("root"===a&&y(v.filter(function(e){return e!==r})),"edge"===a&&b(_.filter(function(e){return e!==r}))),"deletedrequired"===n&&(b(_.filter(function(e){return e!==r})),E([].concat(Object(d.a)(h),[r])),s.fireEvent("requireEdge",{object:r})),"relaxed"===n&&(E([].concat(Object(d.a)(h),[r])),s.fireEvent("requireEdge",{object:r}))},onMouseEnter:function(){return C(!0)},onMouseLeave:function(){return C(!1)}},"\u21a9"):r.a.createElement(r.a.Fragment,null),B?function(e,t){if(e.length<=0)return r.a.createElement(r.a.Fragment,null);var n=e[e.length-1].split(" "),a=n[n.length-1].split("->"),o=Object(m.a)(a,2),i=o[0],c=o[1],s=R(t,i),l=R(t,c);"deletedrequired"===n[0]&&(n[0]="deleted");var u={display:"inline-block",backgroundColor:s,padding:"5px",borderRadius:"5px",color:"white"},d={display:"inline-block",backgroundColor:l,padding:"5px",borderRadius:"5px",color:"white"};return r.a.createElement("div",{className:"panel actionwrapper"},r.a.createElement("p",null,r.a.createElement("b",null,"Undo Most Recent Action: ")),r.a.createElement("p",{className:"recentAction"},n[0]," ",n[1]),r.a.createElement("p",{className:"recentAction"},r.a.createElement("span",{style:u},i)," ",r.a.createElement("span",{style:d},c)))}(S,z):r.a.createElement(r.a.Fragment,null),r.a.createElement("button",{type:"button",className:"paneltitle button summary",onClick:function(){P([]),b([]),E([]),y([]),w([]),s.fireEvent("resetStack")}},"Reset"),r.a.createElement(ht,{data:N,coloringDict:z,evtbus:s,title:i.name,onDeleteSummaryEdge:l,onRequireSummaryEdge:u,roots:p,requiredEdges:h,setLoadingAction:O})))},gt=n(65);function bt(e){var t=e.isPopupOpen,n=e.togglePopup;return r.a.createElement(gt.a,{open:t,togglePopup:n,overlayStyle:{background:"rgba(0, 0, 0, 0.6)",zIndex:9999},animationType:"fade",modal:!0},function(e){return r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"header"},"Help"),r.a.createElement("p",{className:"popup-container-text"},"Click and drag around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponding anatomical location for the node."),r.a.createElement("p",{className:"popup-container-text"},"Select different solutions from the dropdown on the top left of the panel."),r.a.createElement("p",{className:"popup-container-text"},"To compare with another solution, click the [+] on the right. To view the solution space summary, click the [+] on the left."),r.a.createElement("p",{className:"popup-container-text"},"To filter out any solutions with a particular edge, shift+click on that edge in the summary graph. To require all solutions to have some edge, click the edge on the summary graph."),r.a.createElement("p",{className:"popup-container-text"},'For more help, please select the "Instructions" button in the home page. You can return to the home page by pressing "[X]" on all the currently opened panels.'),r.a.createElement("button",{className:"close-button",onClick:function(){n()}},"Close"))})}function Et(e){var t=e.isPopupOpen,n=e.togglePopup;return r.a.createElement(gt.a,{open:t,onClose:n,overlayStyle:{background:"rgba(0, 0, 0, 0.6)",zIndex:9999},animationType:"fade",modal:!0},function(e){return r.a.createElement("div",{className:"no-sol-popup-container"},r.a.createElement("div",{className:"header"},"ERROR"),r.a.createElement("p",{className:"popup-container-text"},"There are no solutions available for your input!"),r.a.createElement("button",{className:"close-button",onClick:e},"Close"))})}function yt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function St(e){var t,n,a=new Map,r=yt(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=Object(m.a)(o,2),c=i[0],s=i[1];a.has(c)||a.set(c,0),a.has(s)||a.set(s,0),a.set(s,a.get(s)+1)}}catch(l){r.e(l)}finally{r.f()}if(a.forEach(function(e,t){if(0===e){if(n)throw new Error("Invalid tree: multiple roots");n=t}}),void 0===n)throw new Error("Invalid tree: no root found");return n}function Pt(e,t){var n,a=St(e),r=yt(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o[0]===a)return o[1]}}catch(i){r.e(i)}finally{r.f()}return null}function Ot(e){var t=e.solutions;return function(e){var t,n={},a=yt(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r]?n[r]++:n[r]=1}}catch(o){a.e(o)}finally{a.f()}return n}(t.map(function(e){return e.tree}).map(function(e){return St(e)}).map(function(e,n){var a,r=yt(t[n].labeling);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o[0]===e)return o[1]}}catch(i){r.e(i)}finally{r.f()}return 0}))}function kt(e,t){var n=new URLSearchParams(window.location.hash.split("?")[1]);n.set(e,t),window.location.href="#/viz?"+n.toString()}var jt=function(e){var t,n=Object(a.useState)(0),o=Object(m.a)(n,2),i=o[0],c=o[1],s=Object(a.useState)(0),l=Object(m.a)(s,2),u=l[0],f=l[1],p=Object(a.useState)(0),_=Object(m.a)(p,2),h=_[0],v=_[1],g=Object(a.useState)(0),b=Object(m.a)(g,2),y=b[0],w=b[1],S=Object(a.useState)(0),P=Object(m.a)(S,2),k=P[0],B=P[1],C=Object(a.useState)(0),N=Object(m.a)(C,2),z=N[0],I=N[1],M=(t=sessionStorage.getItem("json_data"),ft(new Int8Array(R(t)))),x=JSON.parse(M),L=Object(a.useState)([]),D=Object(m.a)(L,2),A=D[0],F=D[1],T=Object(a.useState)([]),H=Object(m.a)(T,2),G=H[0],q=H[1],W=Object(a.useState)(0),U=Object(m.a)(W,2),$=U[0],J=U[1],Y=Object(a.useState)(!1),K=Object(m.a)(Y,2),V=K[0],X=K[1],Z=Object(a.useState)(!1),Q=Object(m.a)(Z,2),ee=Q[0],te=Q[1],ne=Object(a.useState)([]),ae=Object(m.a)(ne,2),re=ae[0],oe=ae[1],ie=Object(a.useState)([]),ce=Object(m.a)(ie,2),se=ce[0],le=ce[1],ue=Object(a.useState)([]),de=Object(m.a)(ue,2),me=de[0],fe=de[1],pe=Object(a.useState)([]),_e=Object(m.a)(pe,2),he=_e[0],ve=_e[1];Object(a.useEffect)(function(){we()},[A,G,me,se]);var ge=Object(a.useState)(x),be=Object(m.a)(ge,2),Ee=be[0],ye=be[1];function we(){for(var e=x,t={name:e.name,original:e.original,solutions:[],summary:{migration:[]}},n=0;n<e.solutions.length;n++){for(var a=e.solutions[n].tree,r=e.solutions[n].labeling,o=e.solutions[n].migration,i=Pt(a,r),c=!1,s=0===se.length||se.includes(i),l=0!==me.length&&me.includes(i),u=0,m=0;m<o.length;m++){for(var f=o[m][0]+"->"+e.solutions[n].migration[m][1],p=0;p<A.length;p++)f===A[p]&&(c=!0);for(var _=0;_<G.length;_++)f===G[_]&&u++}if(!l&&s&&!c&&u===G.length){var h=JSON.parse(JSON.stringify(e.solutions[n]));t.solutions.push(h)}}for(var v=0;v<t.solutions.length;v++)for(var g=0;g<t.solutions[v].migration.length;g++){for(var b=!1,E=0;E<t.summary.migration.length;E++)t.summary.migration[E][0]===t.solutions[v].migration[g][0]&&t.summary.migration[E][1]===t.solutions[v].migration[g][1]&&(b=!0,t.summary.migration[E][2]+=1);if(!b){var y=[].concat(Object(d.a)(t.solutions[v].migration[g].slice(0,-1)),[1]);t.summary.migration.push(y)}}if(0===t.summary.migration.length){var w=he[he.length-1];return ve(he.slice(0,-1)),"deleted edge"===w.slice(0,12)?F(A.slice(0,-1)):"deleted root"===w.slice(0,12)?F(me.slice(0,-1)):"required root"===w.slice(0,13)?F(se.slice(0,-1)):q(G.slice(0,-1)),qn(),-1}e.coloring&&(t.coloring=JSON.parse(JSON.stringify(e.coloring))),ye(t),oe(Ot(t));var S=t.solutions.map(function(e,t){return e.name});if(Se){var P=S.filter(function(e,t){return _n.solution_names.includes(e)}),O=S.filter(function(e,t){return bn.solution_names.includes(e)});P.includes(ot.name)||it(t.solutions.filter(function(e){return e.name===P[0]})[0]),Se&&void 0!==lt&&!O.includes(lt.name)&&ut(t.solutions.filter(function(e){return e.name===O[0]})[0])}else S.includes(ot.name)||it(t.solutions.filter(function(e){return e.name===S[0]})[0]),void 0===lt||S.includes(lt.name)||ut(t.solutions.filter(function(e){return e.name===S[0]})[0]);return 0}var Se=Array.isArray(Ee.original),Pe=Object(a.useState)(Ee.solutions.map(function(e,t){return e.name})),Oe=Object(m.a)(Pe,2),ke=Oe[0],je=Oe[1],Be=Object(a.useState)(Se?Ee.original.map(function(e,t){return e.name}):[]),Ce=Object(m.a)(Be,2),Re=Ce[0],Ne=Ce[1],ze=new URLSearchParams(window.location.hash.split("?")[1]),Ie=ze.get("labeling"),Me=ze.get("labeling2"),xe=Object(a.useState)(Ie),Le=Object(m.a)(xe,2),De=Le[0],Ae=Le[1],Fe=Object(a.useState)(Me),Te=Object(m.a)(Fe,2),He=Te[0],Ge=Te[1],qe=Object(a.useState)("true"===ze.get("rotated")),We=Object(m.a)(qe,2),Ue=We[0],$e=We[1],Je=Object(a.useState)("true"===ze.get("rotated2")),Ye=Object(m.a)(Je,2),Ke=Ye[0],Ve=Ye[1],Xe=Object(a.useState)(ze.get("type")),Ze=Object(m.a)(Xe,2),Qe=Ze[0],et=Ze[1];"undefined"===Ie&&(kt("labeling",Ee.solutions[0].name),Ae(Ee.solutions[0].name)),"undefined"===Me&&(kt("labeling2",Ee.solutions[0].name),Ge(Ee.solutions[0].name)),sessionStorage.setItem("selected",JSON.stringify(new j(0))),sessionStorage.setItem("violations",JSON.stringify(new j(0)));var tt,nt,at=Object(a.useState)(Ee.solutions.filter(function(e){return e.name===De})[0]),rt=Object(m.a)(at,2),ot=rt[0],it=rt[1],ct=Object(a.useState)(Ee.solutions.filter(function(e){return e.name===He})[0]),st=Object(m.a)(ct,2),lt=st[0],ut=st[1],dt=Object(a.useState)(ot.tree),mt=Object(m.a)(dt,2),pt=mt[0],_t=mt[1],ht=Object(a.useState)(ot.unobserved_clones),gt=Object(m.a)(ht,2),yt=gt[0],wt=gt[1],St=Object(a.useState)(ot.labeling),jt=Object(m.a)(St,2),Bt=jt[0],Ct=jt[1],Rt=Object(a.useState)(ot.migration),Nt=Object(m.a)(Rt,2),zt=Nt[0],It=Nt[1],Mt=Object(a.useState)([]),xt=Object(m.a)(Mt,2),Lt=xt[0],Dt=xt[1],At=Object(a.useState)([]),Ft=Object(m.a)(At,2),Tt=Ft[0],Ht=Ft[1],Gt=Object(a.useState)([]),qt=Object(m.a)(Gt,2),Wt=qt[0],Ut=qt[1],$t=Object(a.useState)([]),Jt=Object(m.a)($t,2),Yt=Jt[0],Kt=Jt[1],Vt=Object(a.useState)([]),Xt=Object(m.a)(Vt,2),Zt=Xt[0],Qt=Xt[1],en=Object(a.useState)([]),tn=Object(m.a)(en,2),nn=tn[0],an=tn[1],rn=Object(a.useState)(Se?x.original[0].name:""),on=Object(m.a)(rn,2),cn=on[0],sn=on[1],ln=Object(a.useState)(Se?x.original[0].name:""),un=Object(m.a)(ln,2),dn=un[0],mn=un[1],fn=Object(a.useState)(Se?x.original[0]:""),pn=Object(m.a)(fn,2),_n=pn[0],hn=pn[1],vn=Object(a.useState)(Se?x.original[0]:""),gn=Object(m.a)(vn,2),bn=gn[0],En=gn[1],yn=!0;try{tt=Ee.original.tree,nt=Ee.original.labeling}catch($n){yn=!1}var wn=Object(a.useState)(Ee.coloring),Sn=Object(m.a)(wn,2),Pn=Sn[0],On=Sn[1],kn=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"];void 0!==Pn&&0!==Pn.length||On(ot.labeling.map(function(e){return e[1]}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(e,t){return[e,"".concat(kn[t%kn.length])]}));var jn={};Object(a.useEffect)(function(){for(var e=0;e<Pn.length;e++)jn[Pn[e][0]]=Pn[e][1]},[Pn]),Object(a.useEffect)(function(){we(),_t(ot.tree),Ct(ot.labeling),wt(ot.unobserved_clones),It(ot.migration),c(sessionStorage.getItem("mu")),f(sessionStorage.getItem("gamma")),void 0!==ot.origin_node&&Qt(ot.origin_node)},[De]),Object(a.useEffect)(function(){if(je(Ee.solutions.map(function(e,t){return e.name})),Se){var e=Ee.solutions.map(function(e,t){return e.name}),t=Ee.original.filter(function(t,n){return t.solution_names.some(function(t){return e.includes(t)})}).map(function(e,t){return e.name});Ne(t)}},[Ee]),Object(a.useEffect)(function(){ke.includes(De)||(kt("labeling",ke[0]),Ae(ke[0])),ke.includes(He)||(kt("labeling2",ke[0]),Ge(ke[0]))},[ke]);var Bn=Ee.map,Cn=function(e){"dualviz"===Qe||"triviz"===Qe?(et("dualviz"===Qe?"viz":"sumviz"),1===e&&(it(lt),Ae(He),$e(Ke),_t(lt.tree),Ct(lt.labeling),wt(lt.unoberved_clones),It(lt.migration),hn(bn),sn(dn),void 0!==lt.origin_node&&Qt(ot.origin_node)),kt("type","viz")):window.location="".concat(window.location.protocol,"//").concat(window.location.host,"/mach2-viz/#/")};Object(a.useEffect)(function(){lt&&(Dt(lt.tree),Ut(lt.labeling),Ht(lt.unobserved_clones),Kt(lt.migration),void 0!==lt.origin_node&&an(ot.origin_node))},[lt]),Object(a.useEffect)(function(){v(sessionStorage.getItem("mu2")),w(sessionStorage.getItem("gamma2"))},[Lt]),Object(a.useEffect)(function(){J(function(e){return e+1})},[Qe]);var Rn=function(e){Mn.fireEvent("resetMigration",{index:e})},Nn=function(e){Mn.fireEvent("resetClonal",{index:e})};Object(a.useEffect)(function(){c(sessionStorage.getItem("mu")),f(sessionStorage.getItem("gamma")),v(sessionStorage.getItem("mu2")),w(sessionStorage.getItem("gamma2")),B(sessionStorage.getItem("musum")),I(sessionStorage.getItem("gammasum")),we(),document.addEventListener("keydown",Un);var e=document.getElementById("overlay");e&&e.parentElement.removeChild(e)},[]);var zn=Object(a.useState)({listeners:[],addListener:function(e){this.listeners.push(e)},removeListener:function(e){this.listeners=this.listeners.filter(function(t){return t!==e})},fireEvent:function(e,t){this.listeners.forEach(function(n){n(e,t)})}}),In=Object(m.a)(zn,2),Mn=In[0],xn=(In[1],Object(a.useState)(!1)),Ln=Object(m.a)(xn,2),Dn=Ln[0],An=Ln[1],Fn=Object(a.useState)(!1),Tn=Object(m.a)(Fn,2),Hn=Tn[0],Gn=Tn[1];function qn(){Gn(!Hn)}function Wn(){An(!Dn)}function Un(e){"/"===e.key&&Wn()}return r.a.createElement("div",{className:"viz"},r.a.createElement(bt,{isPopupOpen:Dn,togglePopup:Wn}),r.a.createElement(Et,{isPopupOpen:Hn,togglePopup:qn}),"sumviz"!==Qe&&"triviz"!==Qe?r.a.createElement("div",{className:"panel tab_add2",onClick:function(e){"dualviz"===Qe?(et("triviz"),kt("type","triviz")):(et("sumviz"),kt("type","sumviz"))}},r.a.createElement("p",{className:"addpanelp"},r.a.createElement("b",null,"+"))):r.a.createElement(r.a.Fragment,null),"sumviz"===Qe||"triviz"===Qe?r.a.createElement(vt,{key:$,type:Qe,setType:et,insertParam:kt,usedData:Ee,coloring:Pn,muSum:k,gammaSum:z,evtBus:Mn,onDeleteSummaryEdge:function(e){var t=e.split("->"),n=Object(m.a)(t,2),a=n[0],r=n[1];if("roots"!==a){if(G.includes(e)){var o=G.filter(function(t){return t!==e});q(o),ve([].concat(Object(d.a)(he),["deletedrequired edge ".concat(e)]))}else ve([].concat(Object(d.a)(he),["deleted edge ".concat(e)]));F([].concat(Object(d.a)(A),[e]))}else ve([].concat(Object(d.a)(he),["deleted root ".concat(r)])),fe([].concat(Object(d.a)(me),[r]))},onRequireSummaryEdge:function(e){var t=e.split("->"),n=Object(m.a)(t,2),a=n[0],r=n[1];if("roots"!==a)if(G.includes(e)){var o=G.filter(function(t){return t!==e});q(o),ve([].concat(Object(d.a)(he),["relaxed edge ".concat(e)]))}else ve([].concat(Object(d.a)(he),["required edge ".concat(e)])),q([].concat(Object(d.a)(G),[e]));else ve([].concat(Object(d.a)(he),["required root ".concat(r)])),le([].concat(Object(d.a)(se),[r]))},clearData:function(){F([]),q([]),fe([]),le([]),ve([])},roots:re,deletedEdges:A,requiredEdges:G,deletedRoots:me,requiredRoots:se,setDeletedEdges:F,setRequiredEdges:q,setDeletedRoots:fe,setRequiredRoots:le,filterStack:he,setFilterStack:ve}):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"panel info ".concat("dualviz"===Qe?"one":"sumviz"===Qe?"one two":"triviz"===Qe?"tri two":"")},r.a.createElement("div",{className:"titlewrapper"},Se?r.a.createElement("label",{className:"titleelem left",htmlFor:"inputs"},r.a.createElement("p",null,r.a.createElement("b",null,Se&&"triviz"===Qe?"":"Input Tree: ",r.a.createElement("select",{name:"inputs",id:"inputs",onChange:function(e){kt("input",e.target.value),sn(e.target.value),Ee.original.forEach(function(t){if(t.name===e.target.value){var n=t.solution_names.filter(function(e){return ke.includes(e)})[0];hn(t),Ae(n),it(Ee.solutions.filter(function(e){return e.name===n})[0])}})},value:cn},Re.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))):r.a.createElement(r.a.Fragment,null),r.a.createElement("label",{className:"titleelem end",htmlFor:"labelings"},r.a.createElement("p",null,r.a.createElement("b",null,Se&&"triviz"===Qe?"":"Full Labeling: ",r.a.createElement("select",{name:"labelings",id:"labelings",onChange:function(e){kt("labeling",e.target.value),Ae(e.target.value),it(Ee.solutions.filter(function(t){return t.name===e.target.value})[0])},value:De},ke.filter(function(e){return!Se||_n.solution_names.includes(e)}).map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),"dualviz"!==Qe&&"triviz"!==Qe&&"sumviz"!==Qe?r.a.createElement("p",{className:"titleelem end"},r.a.createElement("b",null,"Press [/] for help \xa0\xa0")):r.a.createElement(r.a.Fragment,null),"sumviz"!==Qe?r.a.createElement("span",{onClick:Cn.bind(null,1),style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"panelclosebutton"},r.a.createElement("b",null,"[X]"))):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:void 0===Bn?"leftcolumn nolegend":"leftcolumn"},r.a.createElement("div",{className:"panel migration top ".concat("dualviz"===Qe||"triviz"===Qe?"left":"")},r.a.createElement("p",{className:"paneltitle"},r.a.createElement("b",null,"Migration Graph")),r.a.createElement("p",{className:"paneltitle mu"},"migrations: ".concat(i)),r.a.createElement("p",{className:"paneltitle gamma"},"comigrations: ".concat(u)),r.a.createElement("p",{className:"paneltitle unobserved"},"unobserved clones: ".concat(Tt.length)),r.a.createElement("button",{type:"button",className:"paneltitle button",onClick:function(e){var t="true"===ze.get("rotated");kt("rotated",!t),$e(!t)}},"Rotate"),r.a.createElement("button",{type:"button",className:"paneltitle button under",onClick:function(){return Rn(1)}},"Reset"),r.a.createElement(O,{key:$,tree:pt,labeling:Bt,coloring:Pn,migration:zt,evtbus:Mn,rotated:Ue})),r.a.createElement("div",{className:"panel migration ".concat("dualviz"===Qe||"triviz"===Qe?"left":"")},r.a.createElement("p",{className:"paneltitle"},yn?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:{fontWeight:V?"normal":"bold"},onClick:function(){V&&X(!V)}},"Clonal Tree")," ","|"," ",r.a.createElement("button",{style:{fontWeight:V?"bold":"normal"},onClick:function(){V||X(!V)}},"Input Tree")):r.a.createElement("b",null,"Clonal Tree")),r.a.createElement("button",{type:"button",className:"paneltitle button clonal",onClick:function(){return Nn(1)}},"Reset"),r.a.createElement(E,{key:$,tree:V?Se?_n.tree:tt:pt,labeling:V?Se?_n.labeling:nt:Bt,coloring:Pn,evtbus:Mn,rightcol:"sumviz"===Qe||"triviz"===Qe,index:1,clonalMap:Zt,clonal:V,unobserved:yt})))),"dualviz"===Qe||"triviz"===Qe?r.a.createElement("div",{className:"panel info ".concat("dualviz"===Qe?"one two":"tri three")},r.a.createElement("div",{className:"titlewrapper"},Se?r.a.createElement("label",{className:"titleelem left",htmlFor:"inputs"},r.a.createElement("p",null,r.a.createElement("b",null,Se&&"triviz"===Qe?"":"Input Tree: ",r.a.createElement("select",{name:"inputs",id:"inputs",onChange:function(e){kt("input2",e.target.value),mn(e.target.value),Ee.original.forEach(function(t){if(t.name===e.target.value){var n=t.solution_names.filter(function(e){return ke.includes(e)})[0];En(t),Ge(n),ut(Ee.solutions.filter(function(e){return e.name===n})[0])}})},value:dn},Re.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))):r.a.createElement(r.a.Fragment,null),r.a.createElement("label",{className:"titleelem left",htmlFor:"labelings"},r.a.createElement("p",null,r.a.createElement("b",null,Se&&"triviz"===Qe?"":"Full Labeling: ",r.a.createElement("select",{name:"labelings",id:"labelings",onChange:function(e){kt("labeling2",e.target.value),Ge(e.target.value),ut(Ee.solutions.filter(function(t){return t.name===e.target.value})[0])},value:He},ke.filter(function(e){return!Se||bn.solution_names.includes(e)}).map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("span",{onClick:Cn.bind(null,2),style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"panelclosebutton"},r.a.createElement("b",null,"[X]")))),r.a.createElement("div",{className:void 0===Bn?"leftcolumn nolegend":"leftcolumn"},r.a.createElement("div",{className:"panel migration top ".concat("dualviz"===Qe||"triviz"===Qe?"left":"")},r.a.createElement("p",{className:"paneltitle"},r.a.createElement("b",null,"Migration Graph")),r.a.createElement("p",{className:"paneltitle mu"},"migrations: ".concat(h)),r.a.createElement("p",{className:"paneltitle gamma"},"comigrations: ".concat(y)),r.a.createElement("p",{className:"paneltitle unobserved"},"unobserved clones: ".concat(Tt.length)),r.a.createElement("button",{type:"button",className:"paneltitle button",onClick:function(e){var t="true"===ze.get("rotated2");kt("rotated2",!t),Ve(!t)}},"Rotate"),r.a.createElement("button",{type:"button",className:"paneltitle button under",onClick:function(){return Rn(2)}},"Reset"),r.a.createElement(O,{key:$,tree:Lt,labeling:Wt,coloring:Pn,migration:Yt,evtbus:Mn,rightcol:!0,rotated:Ke})),r.a.createElement("div",{className:"panel migration ".concat("dualviz"===Qe||"triviz"===Qe?"left":"")},r.a.createElement("p",{className:"paneltitle"},yn?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:{fontWeight:ee?"normal":"bold"},onClick:function(){ee&&te(!ee)}},"Clonal Tree")," ","|"," ",r.a.createElement("button",{style:{fontWeight:ee?"bold":"normal"},onClick:function(){ee||te(!ee)}},"Input Tree")):r.a.createElement("b",null,"Clonal Tree")),r.a.createElement("button",{type:"button",className:"paneltitle button clonal",onClick:function(){return Nn(2)}},"Reset"),r.a.createElement(E,{key:$,tree:ee?Se?bn.tree:tt:Lt,labeling:ee?Se?bn.labeling:nt:Wt,coloring:Pn,evtbus:Mn,rightcol:!0,index:2,clonalMap:nn,clonal:ee,unobserved:Tt})))):r.a.createElement(r.a.Fragment,null),"dualviz"!==Qe&&"triviz"!==Qe?r.a.createElement("div",{className:"panel tab_add",onClick:function(e){"sumviz"===Qe?(kt("type","triviz"),et("triviz")):(kt("type","dualviz"),et("dualviz")),kt("labeling2",De),Ge(De),ut(Ee.solutions.filter(function(e){return e.name===De})[0]),v(sessionStorage.getItem("mu2")),w(sessionStorage.getItem("gamma2"))}},r.a.createElement("p",{className:"addpanelp"},r.a.createElement("b",null,"+"))):r.a.createElement(r.a.Fragment,null))},Bt=n(68),Ct=n(153),Rt=n(154),Nt=n.n(Rt),zt=n(384),It=n(155),Mt=n.n(It),xt=n(45);function Lt(){Lt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(B){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),c=new O(r||[]);return a(i,"_invoke",{value:y(e,n,c)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(B){return{type:"throw",arg:B}}}e.wrap=l;var d={};function m(){}function f(){}function p(){}var _={};s(_,o,function(){return this});var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==t&&n.call(v,o)&&(_=v);var g=p.prototype=m.prototype=Object.create(_);function b(e){["next","throw","return"].forEach(function(t){s(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var r;a(this,"_invoke",{value:function(a,o){function i(){return new t(function(r,i){!function a(r,o,i,c){var s=u(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,c)},function(e){a("throw",e,i,c)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,c)})}c(s.arg)}(a,o,r,i)})}return r=r?r.then(i,i):i()}})}function y(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return j()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var c=w(i,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var s=u(e,t,n);if("normal"===s.type){if(a=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(a="completed",n.method="throw",n.arg=s.arg)}}}function w(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,a(g,"constructor",{value:p,configurable:!0}),a(p,"constructor",{value:f,configurable:!0}),f.displayName=s(p,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),s(E.prototype,i,function(){return this}),e.AsyncIterator=E,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new E(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(g),s(g,c,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var Dt=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),o=t[0],i=t[1],s=Object(a.useState)({}),l=Object(m.a)(s,2),u=l[0],d=l[1],f=Object(a.useState)([]),p=Object(m.a)(f,2),_=p[0],h=p[1],v=Object(a.useState)([]),g=Object(m.a)(v,2),b=g[0],E=g[1],y=function(){var e=Object(Bt.a)(Lt().mark(function e(t){var a;return Lt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(376)("./".concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("An error occurred while importing:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=xt.find(function(t){return t.name===e});return t?t.dataset:null};if(Object(a.useEffect)(function(){(function(){var e=Object(Bt.a)(Lt().mark(function e(){var t,n,a,r,o;return Lt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=xt.map(function(){var e=Object(Bt.a)(Lt().mark(function e(t){var n;return Lt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t.path);case 2:return n=e.sent,e.abrupt("return",{name:t.name,module:n.default});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:n=e.sent,a={},r=[],o=[],n.forEach(function(e){var t=e.name,n=e.module;a[t]=n,r.push(t),o.push(w(t))}),d(a),h(r),E(o),i(!0);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()().catch(function(e){console.error("Error loading components:",e)})},[]),!o)return r.a.createElement("div",{className:"panel"},r.a.createElement("h1",null,"Loading..."));var S=[],P=!0;sessionStorage.setItem("selected",JSON.stringify(new j(0))),sessionStorage.setItem("violations",JSON.stringify(new j(0)));for(var O=function(e){B=_[e],C=b[e],R=P?"#EBEBEB":"#A3A3A3",console.log(B),N=Ct[B],console.log(N),S.push(r.a.createElement(c.b,{className:"patient-link",onClick:function(){var t=document.createElement("div");t.id="overlay";var n=document.createElement("div");n.id="loading-container";var a=document.createElement("h1");a.textContent="Loading...",n.appendChild(a),t.appendChild(n),document.body.appendChild(t),setTimeout(function(){sessionStorage.setItem("json_data",mt(JSON.stringify(u[_[e]]))),window.location.href="#/".concat(N)},100)}},r.a.createElement("div",{className:"patient-container"},r.a.createElement("div",{className:"patientitem",style:{backgroundColor:R}},r.a.createElement("p",null,r.a.createElement("b",null,C))),r.a.createElement("div",{className:"patientitem2",style:{backgroundColor:R}},r.a.createElement("p",{className:"leftli"},r.a.createElement("b",null,B)),r.a.createElement("img",{className:"rightli",src:Nt.a,alt:"download",onClick:function(){return t="https://raw.githubusercontent.com/vikramr2/machina-viz/main/src/samples/".concat(_[e],"/").concat(_[e],".json"),n="".concat(_[e],".json"),void zt.a.get(t,{responseType:"blob"}).then(function(e){Mt()(e.data,n)});var t,n}}))))),P=!P},k=0;k<_.length;k++){var B,C,R,N;O(k)}return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"panel home-panel"},r.a.createElement("div",{className:"home-column-1"},r.a.createElement("h1",null,r.a.createElement("b",null,"Welcome to MACH2!")),r.a.createElement("div",{className:"about-text"},r.a.createElement("p",null,r.a.createElement("b",null,"A lightweight visualizer for MACH2, ",r.a.createElement("a",{href:"https://www.nature.com/articles/s41588-018-0106-z"},"MACHINA's")," sequel.")," Use this visualizer to examine a solution space for the parsimonious migration history problem and its respective summary for a given patient. Examples are provided below. You can also upload a JSON file to view a custom input. See the Instructions page for how to use this website:")),r.a.createElement(c.b,{to:"about",style:{textDecoration:"none",color:"black"}},r.a.createElement("button",{className:"about-button"},"Instructions"))),r.a.createElement("div",{className:"home-column-2"},r.a.createElement("div",{className:"patient-list-title-container"},r.a.createElement("h3",null,"Examples"),r.a.createElement("div",{className:"patient-container"},r.a.createElement("div",{className:"patientitem",style:{backgroundColor:"#717171"}},r.a.createElement("p",{className:"datasettitle",style:{color:"black"}},r.a.createElement("b",null,"Dataset"))),r.a.createElement("div",{className:"patientitem",style:{backgroundColor:"#717171"}},r.a.createElement(c.b,{to:N,style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"datasettitle",style:{color:"black"}},r.a.createElement("b",null,"Patient")))))),r.a.createElement("div",{className:"patient-list-container"},S.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e)})))),r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"json_upload",name:"json_upload",accept:"application/JSON",onChange:function(e){var t=document.createElement("div");t.id="overlay";var n=document.createElement("div");n.id="loading-container";var a=document.createElement("h1");a.textContent="Loading...",n.appendChild(a),t.appendChild(n),document.body.appendChild(t),setTimeout(function(){var t,n=new FileReader,a=e.target.files[0];n.onload=function(e){var n=e.target.result;t=n;var a=JSON.parse(t).solutions.map(function(e,t){return e.name});sessionStorage.setItem("json_data",mt(t)),window.location=window.location+"viz?labeling=".concat(a[0])},n.readAsText(a)},100)}}),r.a.createElement("label",{htmlFor:"json_upload"},r.a.createElement("div",{id:"addnew",className:"dot"},r.a.createElement("h1",{className:"plus"},"+"),r.a.createElement("span",{className:"tooltiptext"},r.a.createElement("b",null,"Upload Patient JSON"))))))},At=n(6),Ft=n(9);var Tt=function(){return Object(Ft.a)({basename:"/mach2-viz/#"}),r.a.createElement("div",{className:"App"},r.a.createElement(At.c,null,r.a.createElement(At.a,{path:"/about"},r.a.createElement(u,null)),r.a.createElement(At.a,{path:"/viz"},r.a.createElement(jt,null)),r.a.createElement(At.a,{path:"/mach2-viz/about"},r.a.createElement(u,null)),r.a.createElement(At.a,{path:"/mach2-viz/viz"},r.a.createElement(jt,null)),r.a.createElement(At.a,{path:"/mach2-viz"},r.a.createElement(Dt,null)),r.a.createElement(At.a,{exact:!0,path:"/"},r.a.createElement(Dt,null))))},Ht=function(e){e&&e instanceof Function&&n.e(27).then(n.bind(null,383)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)})};i.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{basename:"/mach2-viz"},r.a.createElement(Tt,null)))),Ht()},45:function(e){e.exports=[{name:"osteosarcoma_9",dataset:"Kinnaman_et_al_2018",path:"osteosarcoma_9.json"},{name:"ovarian_7_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_7_ROv.json"},{name:"ovarian_1_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_1_LOv.json"},{name:"prostate_34",dataset:"Gundem_et_al_2015",path:"prostate_34.json"},{name:"prostate_22",dataset:"Gundem_et_al_2015",path:"prostate_22.json"},{name:"prostate_29",dataset:"Gundem_et_al_2015",path:"prostate_29.json"},{name:"osteosarcoma_3",dataset:"Kinnaman_et_al_2018",path:"osteosarcoma_3.json"},{name:"ovarian_7_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_7_LOv.json"},{name:"ovarian_1_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_1_ROv.json"},{name:"prostate_32",dataset:"Gundem_et_al_2015",path:"prostate_32.json"},{name:"lung_CRUK0063",dataset:"TracerX",path:"lung_CRUK0063.json"},{name:"prostate_24",dataset:"Gundem_et_al_2015",path:"prostate_24.json"},{name:"prostate_12",dataset:"Gundem_et_al_2015",path:"prostate_12.json"},{name:"osteosarcoma_2",dataset:"Kinnaman_et_al_2018",path:"osteosarcoma_2.json"},{name:"ovarian_3_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_3_LOv.json"},{name:"ovarian_9_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_9_LOv.json"},{name:"prostate_31",dataset:"Gundem_et_al_2015",path:"prostate_31.json"},{name:"ovarian_10_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_10_ROv.json"},{name:"ovarian_4_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_4_ROv.json"},{name:"prostate_10",dataset:"Gundem_et_al_2015",path:"prostate_10.json"},{name:"ovarian_9_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_9_ROv.json"},{name:"prostate_21",dataset:"Gundem_et_al_2015",path:"prostate_21.json"},{name:"ovarian_2_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_2_ROv.json"},{name:"ovarian_3_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_3_ROv.json"},{name:"prostate_17",dataset:"Gundem_et_al_2015",path:"prostate_17.json"},{name:"ovarian_4_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_4_LOv.json"}]}},[[182,29,28]]]);
//# sourceMappingURL=main.8a9fe0f8.chunk.js.map