{"version":3,"sources":["assets/clonal.jpeg","assets/migration.jpeg","assets/map.jpeg","assets/download.png","assets/logo.png","assets/settings-gear.svg","components/About.js","components/ClonalTree.js","components/Migration.js","components/Legend.js","components/MigrationMap.js","components/RightColumn.js","components/Viz.js","components/Home.js","components/DualViz.js","components/MigrationSummary.js","components/Loading.js","components/FilterMenu.js","components/SumViz.js","components/ClonalSummary.js","components/TriViz.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","__webpack_require__","p","About","React","createElement","className","Link","to","style","textDecoration","color","columns","href","class","src","clonal","alt","migration","id","Cytoscape","use","COSEBilkent","dagre","ClonalTree","props","hexColorRegex","colorPalette","ncolors","length","getColor","label","coloring","map","value","index","filter","item","undefined","test","parseInt","_useState","useState","_useState2","_slicedToArray","width","_useState3","_useState4","height","findLabel","node","labeling","myCyRef","nodes","tree","flat","array","indexOf","data","type","edges","source","target","concat","_useState5","_useState6","graphData","styleSheet","selector","backgroundColor","overlay-padding","z-index","text-outline-width","fontSize","border-width","border-color","border-opacity","background-color","text-outline-color","line-color","target-arrow-color","target-arrow-shape","curve-style","push","line-fill","line-gradient-stop-colors","line-gradient-stop-positions","layout","name","fit","directed","padding","animate","animationDuration","avoidOverlap","nodeDimensionsIncludeLabels","ready","evtbus","addListener","eventName","eventData","getElementById","nodeId","$","css","trigger","CytoscapeComponent","elements","normalizeElements","zoomingEnabled","maxZoom","minZoom","autounselectify","boxSelectionEnabled","stylesheet","cy","on","evt","event","div","document","setAttribute","innerHTML","canvas","getElementsByTagName","position","top","renderedPosition","left","rightcol","body","appendChild","labeltag","querySelector","opacity","zIndex","fontWeight","fireEvent","contains","removeChild","sink","abc","console","log","Migration","_step","clsource","cltarget","_iterator","_createForOfIteratorHelper","entries","s","n","done","_ref","_ref2","i","err","e","f","shape","text-valign","text-halign","queryParameters","URLSearchParams","window","location","hash","split","rotated","get","circle","transform","x","y","edge","mu","gamma","localStorage","setItem","Legend","ret","forEach","l","fetchColor","coord_map","Fragment","cyCanvas","require","MigrationMap","canvheight","setCanvHeight","disp","setDisp","count","findCoords","found","coord","_useState7","_useState8","edges_t","_step4","flag","_iterator4","_ref7","_ref8","j","edge2","_step2","_iterator2","_ref3","_ref4","_useState9","_useState10","setGraphData","useEffect","Math","floor","_step3","_iterator3","_ref5","_ref6","addEventListener","canv","offsetHeight","userZoomingEnabled","userPanningEnabled","ungrabify","pos","positions","slice","getBoundingClientRect","leftPos","RightColumn","handleKeyPress","key","alert","Viz","useHistory","setMu","setGamma","jsonContents","getItem","wholeData","JSON","parse","labelName","size","self","tree_labeling","labelnames","insertParam","url","URL","searchParams","set","toString","reload","eventBus","listeners","callback","this","removeListener","listener","onClick","protocol","host","for","onChange","selected","Home","json_dict","A7","A10","A22","A29","A31","A32","patient1","patient2","patient3","patient4","patient7","patient9","patient10","tracerx_res","default_patients","default_dirs","div_elements","which_color","_loop","current_directory","current_color","link","URLs","current_patient","stringify","download","filename","axios","responseType","then","res","fileDownload","getElementsByClassName","parentNode","elem","accept","json_contents","reader","FileReader","file","files","onload","readerEvt","jsonString","result","readAsText","urlParams","DualViz","mu2","setMu2","gamma2","setGamma2","labelName2","data2","tree2","tree_labeling2","migration2","eventBus2","MigrationSummary","_toConsumableArray","Set","search","Loading","circumference","PI","strokeDashoffset","progress","icon","cx","r","stroke","strokeWidth","fill","strokeDasharray","FilterMenu","show","text","checked","currentUrl","SumViz","isLoading","setIsLoading","muSum","setMuSum","_useState11","_useState12","gammaSum","setGammaSum","_useState13","_useState14","showPanel","setShowPanel","numSolns","migrationSummary","InlineSVG","gear","TriViz","_useState15","_useState16","App","createBrowserHistory","basename","Switch","Route","path","exact","reportWebVitals","onPerfEntry","Function","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","render","StrictMode","Router"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,yDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,4DCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,qkBCAxCH,EAAAC,QAAA,0qgzHCAAD,EAAAC,QAAiBC,EAAAC,EAAuB,sDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,4QC4CzBC,MAhCf,WACI,OACIC,IAAAC,cAAA,OAAKC,UAAU,SACXF,IAAAC,cAAA,OAAKC,UAAU,eACXF,IAAAC,cAAA,OAAKC,UAAU,kBACXF,IAAAC,cAAA,KAAGC,UAAU,aAAYF,IAAAC,cAAA,SAAGD,IAAAC,cAACE,IAAI,CAACC,GAAG,GAAGC,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UAAU,iBAC1FP,IAAAC,cAAA,MAAIC,UAAU,cAAa,gBAE/BF,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,SAAS,iKACfD,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,+CAA+C,kLACrDD,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,yBAAyB,wCAC/BD,IAAAC,cAAA,MAAII,MAAO,CAACG,QAAS,IACjBR,IAAAC,cAAA,UAAID,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,uBAAuB,qKACjCD,IAAAC,cAAA,UAAID,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,4BAA4B,sFAAmFD,IAAAC,cAAA,KAAGQ,KAAK,mEAAkE,qBAAqB,iMACxNT,IAAAC,cAAA,UAAID,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,YAAY,6LAE1BD,IAAAC,cAAA,OAAKS,MAAM,mBACPV,IAAAC,cAAA,OAAKC,UAAU,WAAWS,IAAKC,IAAQC,IAAI,YAC3Cb,IAAAC,cAAA,OAAKC,UAAU,WAAWS,IAAKG,IAAWD,IAAI,aAElDb,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,uBAAuB,sBAAmBD,IAAAC,cAAA,KAAGQ,KAAK,gDAA+C,oBAAoB,sEAAmET,IAAAC,cAAA,SAAG,SAAS,kCAA+BD,IAAAC,cAAA,SAAG,aAAa,yBAAsBD,IAAAC,cAAA,SAAG,SAAS,uFAAoFD,IAAAC,cAAA,KAAGQ,KAAK,oEAAmE,UAAU,yIACpcT,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,uBACND,IAAAC,cAAA,MAAIc,GAAG,aACHf,IAAAC,cAAA,UAAID,IAAAC,cAAA,SAAG,eAAYD,IAAAC,cAAA,KAAGQ,KAAK,8BAA6B,uBAAuB,MAC/ET,IAAAC,cAAA,UAAID,IAAAC,cAAA,SAAG,sBAAmBD,IAAAC,cAAA,KAAGQ,KAAK,gCAA+B,yBAAyB,MAC1FT,IAAAC,cAAA,UAAID,IAAAC,cAAA,SAAG,sBAAmBD,IAAAC,cAAA,KAAGQ,KAAK,gCAA+B,yBAAyB,2EC9B9GO,IAAUC,IAAIC,KACdF,IAAUC,IAAIE,KAyTCC,MAvTf,SAAoBC,GAClB,IAAIC,EAAgB,6BAEdC,EAAe,CACnB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEIC,EAAUD,EAAaE,OAE7B,SAASC,EAASC,GAChB,IAAKA,EAAO,MAAO,OACnB,IAAIpB,EAAQc,EAAMO,SAASC,IAAI,SAACC,EAAOC,GACrC,GAAID,EAAM,KAAOH,EAAO,OAAOG,EAAM,KAAKE,OAAO,SAACC,GAAU,YAAeC,GAARD,IAAoB,GACzF,OAAOX,EAAca,KAAK5B,GAASA,EAAQgB,EAAaa,SAAS7B,GAASiB,GAC3E,IAAAa,EAEwBC,mBAAS,QAAOC,EAAAC,YAAAH,EAAA,GAAlCI,EAAKF,EAAA,GAASG,GAAAH,EAAA,GACOD,mBAAS,SAAOK,EAAAH,YAAAE,EAAA,GAArCE,EAAMD,EAAA,GAMb,SAASE,EAAUC,GACjB,OAAOzB,EAAM0B,SAASlB,IAAI,SAACC,EAAOC,GAChC,GAAID,EAAM,KAAOgB,EAAM,OAAOhB,EAAM,KAAKE,OAAO,SAACC,GAAU,YAAeC,GAARD,IAAoB,GARlEU,EAAA,GAWxB,IAoFIK,EApFEC,EAAQ5B,EAAM6B,KAAKC,OAAOnB,OAThC,SAAoBF,EAAOC,EAAOqB,GAChC,OAAOA,EAAMC,QAAQvB,KAAWC,IAQiBF,IAAI,SAACC,EAAOC,GAC7D,MAAO,CAAEuB,KAAM,CAAEvC,GAAIe,EAAOH,MAAOkB,EAAUf,GAAQyB,KAAM,SAEvDC,EAAQnC,EAAM6B,KAAKrB,IAAI,SAACC,EAAOC,GACnC,MAAO,CAAEuB,KAAM,CAAEG,OAAQ3B,EAAM,GAAI4B,OAAQ5B,EAAM,GAAIH,MAAK,GAAAgC,OAAK7B,EAAM,GAAE,MAAA6B,OAAK7B,EAAM,IAAMhB,UAAS,GAAA6C,OAAKd,EAAUf,EAAM,IAAG,MAAA6B,OAAKd,EAAUf,EAAM,SAC9I8B,EAEgCtB,mBAAS,CACzCW,MAAOA,EACPO,MAAOA,IACPK,EAAArB,YAAAoB,EAAA,GAHKE,EAASD,EAAA,GAKZE,GAL0BF,EAAA,GAKb,CACf,CACEG,SAAU,OACV3D,MAAO,CACL4D,gBAAiB,UACjBxB,MAAO,GACPG,OAAQ,GACRjB,MAAO,WAMPuC,kBAAmB,MACnBC,UAAW,KAGXC,qBAAsB,MACtB7D,MAAO,QACP8D,SAAU,KAGd,CACEL,SAAU,gBACV3D,MAAO,CACLiE,eAAgB,MAChBC,eAAgB,UAChBC,iBAAkB,MAClBC,mBAAoB,UACpBhC,MAAO,GACPG,OAAQ,GAER8B,qBAAsB,UACtBN,qBAAsB,IAG1B,CACEJ,SAAU,OACV3D,MAAO,CACLoC,MAAO,EAEPkC,aAAc,UACdC,qBAAsB,UACtBC,qBAAsB,WACtBC,cAAe,aAKrBzD,EAAMO,SAASC,IAAI,SAACC,EAAOC,GACzBgC,EAAWgB,KAAK,CACdf,SAAQ,eAAAL,OAAiB7B,EAAM,GAAE,MACjCzB,MAAO,CACL4D,gBAAiB3C,EAAca,KAAKL,EAAM,IAAMA,EAAM,GAAKP,EAAaa,SAASN,EAAM,IAAMN,QAKnGgC,EAAM3B,IAAI,SAACC,EAAOC,GAChB,IAAI0B,EAAS3B,EAAMwB,KAAKG,OACpBC,EAAS5B,EAAMwB,KAAKI,OACxBK,EAAWgB,KAAK,CACdf,SAAQ,eAAAL,OAAiBF,EAAM,MAAAE,OAAKD,EAAM,MAC1CrD,MAAO,CACL2E,YAAa,kBACbC,4BAA2B,GAAAtB,OAAKjC,EAASmB,EAAUY,IAAQ,KAAAE,OAAIjC,EAASmB,EAAUa,KAClFwB,+BAAgC,UAChCN,qBAAoB,GAAAjB,OAAKjC,EAASmB,EAAUa,UAMlD,IAAMyB,EAAS,CACbC,KAAM,QACNC,KAAK,EAELC,UAAU,EACVC,QAAS,GAETC,SAAS,EACTC,kBAAmB,IACnBC,cAAc,EACdC,6BAA6B,EAC7BC,MAAO,WAmELvE,EAAMwE,OAAOC,YAlEI,SAACC,EAAWC,GAG3B,GAAkB,iBAAdD,EAA8B,CAChC,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC9ClD,EAAQmD,EAAC,mBAAAxC,OAAoBqC,EAAUE,OAAM,OAAME,IAAI,CACrD3D,MAAO,KAETK,EAAKuD,QAAQ,UAEf,GAAkB,mBAAdN,EAAgC,CAClC,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC9ClD,EAAQmD,EAAC,mBAAAxC,OAAoBqC,EAAUE,OAAM,OAAME,IAAI,CACrD3D,MAAO,IAETK,EAAKuD,QAAQ,UAYf,GAVkB,gBAAdN,GACF/C,EAAQmD,EAAC,mBAAAxC,OAAoBqC,EAAUE,OAAM,MAAAvC,OAAKqC,EAAUE,OAAM,OAAME,IAAI,CAC1E3D,MAAO,KAGO,kBAAdsD,GACF/C,EAAQmD,EAAC,mBAAAxC,OAAoBqC,EAAUE,OAAM,MAAAvC,OAAKqC,EAAUE,OAAM,OAAME,IAAI,CAC1E3D,MAAO,IAGO,iBAAdsD,EAA8B,CAChC,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC1CvE,EAAQqE,EAAUrE,MAEtBqB,EAAQmD,EAAC,eAAAxC,OAAgBhC,EAAK,OAAMyE,IAAI,CACtC3D,MAAO,KAETK,EAAKuD,QAAQ,UAEf,GAAkB,mBAAdN,EAAgC,CAClC,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC1CvE,EAAQqE,EAAUrE,MAEtBqB,EAAQmD,EAAC,eAAAxC,OAAgBhC,EAAK,OAAMyE,IAAI,CACtC3D,MAAO,IAETK,EAAKuD,QAAQ,UAEf,GAAkB,gBAAdN,EAA6B,CAC/B,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC1CzC,EAASuC,EAAUE,OAEvBlD,EAAQmD,EAAC,YAAAxC,OAAaF,EAAM,OAAM2C,IAAI,CACpC3D,MAAO,GACPG,OAAQ,KAEVE,EAAKuD,QAAQ,UAEf,GAAkB,kBAAdN,EAA+B,CACjC,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC1CzC,EAASuC,EAAUE,OAEvBlD,EAAQmD,EAAC,YAAAxC,OAAaF,EAAM,OAAM2C,IAAI,CACpC3D,MAAO,GACPG,OAAQ,KAEVE,EAAKuD,QAAQ,eAOrB,OAAOrG,IAAAC,cAACqG,IAAkB,CACxBC,SAAUD,IAAmBE,kBAAkB1C,GAE/CzD,MAAO,CAAEoC,MAAOA,EAAOG,OAAQA,GAC/B6D,gBAAgB,EAChBC,QAAS,EACTC,QAAS,GACTC,iBAAiB,EACjBC,qBAAqB,EACrB1B,OAAQA,EACR2B,WAAY/C,EACZgD,GAAI,SAAAA,GACF/D,EAAU+D,EAGVA,EAAGC,GAAG,MAAO,OAAQ,SAAAC,GACRA,EAAIvD,SAGjBqD,EAAGC,GAAG,YAAa,OAAQ,SAASE,GAElC,IAAIpE,EAAOoE,EAAMxD,OACb/B,EAAQmB,EAAKQ,KAAK,SAGlB6D,EAAMC,SAASnH,cAAc,OACjCkH,EAAIE,aAAa,QAAS,eAE1BF,EAAIG,UAAS,MAAA3D,OAAShC,EAAK,cAG3B,IAAM4F,EAASH,SAASI,qBAAqB,UAAU,GACvDL,EAAI9G,MAAMoH,SAAW,WACrBN,EAAI9G,MAAMqH,IAAO5E,EAAK6E,iBAAiB,KAAqB,GAAdJ,EAAO3E,OAAa,GAAM,KACxEuE,EAAI9G,MAAMuH,KAAO9E,EAAK6E,iBAAiB,KAAO,KAC1CtG,EAAMwG,WACRV,EAAI9G,MAAMuH,KAAO,cAAgB9E,EAAK6E,iBAAiB,KAAO,OAIhEP,SAASU,KAAKC,YAAYZ,GAE1B,IAAMjB,EAASgB,EAAMxD,OAAO3C,KAExBiH,EAAWZ,SAASa,cAAa,IAAAtE,OAAKhC,IACzB,OAAbqG,IACFA,EAAS3H,MAAM6H,QAAU,EACzBF,EAAS3H,MAAM8H,OAAS,IACxBH,EAAS3H,MAAM+H,WAAa,QAG9B/G,EAAMwE,OAAOwC,UAAU,cAAe,CAAEnC,aAG1Ca,EAAGC,GAAG,WAAY,OAAQ,SAASE,GAEjC,IAAIC,EAAMC,SAASa,cAAc,gBAC7Bb,SAASU,KAAKQ,SAASnB,IACzBC,SAASU,KAAKS,YAAYpB,GAG5B,IAAMjB,EAASgB,EAAMxD,OAAO3C,KAGxBY,EADOuF,EAAMxD,OACAJ,KAAK,SAElB0E,EAAWZ,SAASa,cAAa,IAAAtE,OAAKhC,IACzB,OAAbqG,IACFA,EAAS3H,MAAM6H,QAAU,GACzBF,EAAS3H,MAAM8H,OAAS,EACxBH,EAAS3H,MAAM+H,WAAa,UAG9B/G,EAAMwE,OAAOwC,UAAU,gBAAiB,CAAEnC,aAG5Ca,EAAGC,GAAG,YAAa,OAAQ,SAASE,GAAO,IACjCxD,EAAWwD,EAAXxD,OACRA,EAAO0C,IAAI,CACT3D,MAAO,KAET,IAAMyD,EAASgB,EAAMxD,OAAO3C,KACxB0C,EAASZ,EAAUa,EAAOJ,OAAOG,QACjC+E,EAAO3F,EAAUa,EAAOJ,OAAOI,QAC/B/B,EAAQ+B,EAAOJ,OAAO3B,MAC1BN,EAAMwE,OAAOwC,UAAU,aAAc,CAAEnC,SAAQzC,SAAQ+E,OAAM9E,WAC7DrC,EAAMwE,OAAOwC,UAAU,eAAgB,CAAEnC,SAAQzC,SAAQ+E,OAAM9E,SAAQ/B,YAGzEoF,EAAGC,GAAG,WAAY,OAAQ,SAASE,GAAO,IAChCxD,EAAWwD,EAAXxD,OACRA,EAAO0C,IAAI,CACT3D,MAAO,IAET,IAAMyD,EAASgB,EAAMxD,OAAO3C,KACxB0C,EAASZ,EAAUa,EAAOJ,OAAOG,QACjC+E,EAAO3F,EAAUa,EAAOJ,OAAOI,QAC/B/B,EAAQ+B,EAAOJ,OAAO3B,MAC1BN,EAAMwE,OAAOwC,UAAU,eAAgB,CAAEnC,SAAQzC,SAAQ+E,OAAM9E,WAC/DrC,EAAMwE,OAAOwC,UAAU,iBAAkB,CAAEnC,SAAQzC,SAAQ+E,OAAM9E,SAAQ/B,aAG7E8G,IAAKC,QAAQC,IAAI,UAAW3F,6hCCtThChC,IAAUC,IAAIE,KACdH,IAAUC,IAAIC,KAsTC0H,MApTf,SAAmBvH,GACb,IAAIC,EAAgB,6BAEdC,EAAe,CACnB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEIC,EAAUD,EAAaE,OAAOY,EAEXC,mBAAS,QAAOC,EAAAC,YAAAH,EAAA,GAAlCI,EAAKF,EAAA,GAASG,GAAAH,EAAA,GACOD,mBAAS,SAAOK,EAAAH,YAAAE,EAAA,GAArCE,EAAMD,EAAA,GAMb,SAASE,EAAUC,GACjB,OAAOzB,EAAM0B,SAASlB,IAAI,SAACC,EAAOC,GAChC,GAAID,EAAM,KAAOgB,EAAM,OAAOhB,EAAM,KAAKE,OAAO,SAACC,GAAU,YAAeC,GAARD,IAAoB,GAG1F,SAASP,EAASC,GAChB,IAAIpB,EAAQc,EAAMO,SAASC,IAAI,SAACC,EAAOC,GACrC,GAAID,EAAM,KAAOH,EAAO,OAAOG,EAAM,KAAKE,OAAO,SAACC,GAAU,YAAeC,GAARD,IAAoB,GACzF,OAAOX,EAAca,KAAK5B,GAASA,EAAQgB,EAAaa,SAAS7B,GAASiB,GAdpDmB,EAAA,GAiBxB,IAMuCkG,EANnC5F,EAAQ5B,EAAM6B,KAAKC,OAAOnB,OAf9B,SAAoBF,EAAOC,EAAOqB,GAChC,OAAOA,EAAMC,QAAQvB,KAAWC,IAceF,IAAI,SAACC,EAAOC,GAC3D,MAAO,CAAEuB,KAAM,CAAEvC,GAAK8B,EAAUf,GAAQH,MAAOkB,EAAUf,GAAQyB,KAAM,SAErEC,EAAQnC,EAAMP,UAAUe,IAAI,SAACC,EAAOC,GACtC,MAAO,CAAEuB,KAAM,CAAEG,OAAQ3B,EAAM,GAAI4B,OAAQ5B,EAAM,GAAIH,MAAOG,EAAM,GAAIf,GAAE,GAAA4C,OAAK7B,EAAM,GAAE,MAAA6B,OAAK7B,EAAM,IAAMgH,SAAUhH,EAAM,GAAIiH,SAAUjH,EAAM,OAC1IkH,EAAAC,EACsBzF,EAAM0F,WAAS,IAAvC,IAAAF,EAAAG,MAAAN,EAAAG,EAAAI,KAAAC,MAAyC,KAAAC,EAAAT,EAAA/G,MAAAyH,EAAA/G,YAAA8G,EAAA,GAA7BE,EAACD,EAAA,GACY,GADNA,EAAA,GACRjG,KAAK3B,QACZ6B,EAAMgG,GAAGlG,KAAK3B,MAAQ,KAEzB,MAAA8H,GAAAT,EAAAU,EAAAD,GAAA,QAAAT,EAAAW,IAAA,IA4FG3G,EA5FHY,EAEiCtB,mBAAS,CACzCW,MAAOA,EACPO,MAAOA,IACPK,EAAArB,YAAAoB,EAAA,GAHKE,EAASD,EAAA,GAKZE,GAL0BF,EAAA,GAKb,CACf,CACEG,SAAU,OACV3D,MAAO,CACL4D,gBAAiB,OACjBK,eAAgB,GAChBsF,MAAO,YACPnH,MAAO,IACPG,OAAQ,GACRjB,MAAO,cAMPuC,kBAAmB,MACnBC,UAAW,KAGXC,qBAAsB,MACtB7D,MAAO,QACP8D,SAAU,GACVwF,cAAe,SACfC,cAAe,WAGnB,CACE9F,SAAU,gBACV3D,MAAO,CACLiE,eAAgB,MAChBC,eAAgB,UAChBC,iBAAkB,MAClBC,mBAAoB,UACpBhC,MAAO,GACPG,OAAQ,GAER8B,qBAAsB,UACtBN,qBAAsB,IAG1B,CACEJ,SAAU,sBACV3D,MAAO,CACLuJ,MAAO,cAGX,CACE5F,SAAU,OACV3D,MAAO,CACLoC,MAAO,EAEPd,MAAO,cACPiD,qBAAsB,UACtBC,qBAAsB,WACtBC,cAAe,SACfV,qBAAsB,MACtB7D,MAAO,QACP8D,SAAU,OAKhBhD,EAAMO,SAASC,IAAI,SAACC,EAAOC,GACzBgC,EAAWgB,KAAK,CACdf,SAAQ,eAAAL,OAAiB7B,EAAM,GAAE,MACjCzB,MAAO,CACLkE,eAAgBjD,EAAca,KAAKL,EAAM,IAAMA,EAAM,GAAKP,EAAaa,SAASN,EAAM,IAAMN,QAKlGgC,EAAM3B,IAAI,SAACC,EAAOC,GAChB,IAAI0B,EAAS3B,EAAMwB,KAAKG,OACpBC,EAAS5B,EAAMwB,KAAKI,OACxBK,EAAWgB,KAAK,CACdf,SAAQ,YAAAL,OAAcF,EAAM,MAAAE,OAAKD,EAAM,MACvCrD,MAAO,CACL2E,YAAa,kBACbC,4BAA2B,GAAAtB,OAAKjC,EAAS+B,GAAO,KAAAE,OAAIjC,EAASgC,IAC7DwB,+BAAgC,UAChCN,qBAAoB,GAAAjB,OAAKjC,EAASgC,SAOxC,IAAMqG,EAAkB,IAAIC,gBAAgBC,OAAOC,SAASC,KAAKC,MAAM,KAAK,IACxEC,EAAUhJ,EAAMwG,SAA+C,SAApCkC,EAAgBO,IAAI,YAA4D,SAAnCP,EAAgBO,IAAI,WAChF,OAAZD,IACFA,GAAU,GAGZ,IAAMlF,EAAS,CACbC,KAAM,QACNC,KAAK,EACLkF,QAAQ,EACRjF,UAAU,EACVC,QAAS,GAETC,SAAS,EACTC,kBAAmB,IACnBC,cAAc,EACdC,6BAA6B,EAC7B6E,UAAW,SAAC1H,EAAM2E,GAChB,MAAO,CACLgD,EAAGJ,GAAW,EAAE5C,EAASiD,EAAIjD,EAASgD,EACtCC,EAAGL,EAAU5C,EAASgD,EAAIhD,EAASiD,IAGvC9E,MAAO,WAmDLvE,EAAMwE,OAAOC,YAlDI,SAACC,EAAWC,GAG3B,GAAkB,eAAdD,EAA4B,CAC9B,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC1CzC,EAASuC,EAAUvC,OACnBC,EAASsC,EAAUwC,KACvBxF,EAAQmD,EAAC,YAAAxC,OAAaF,EAAM,MAAAE,OAAKD,EAAM,OAAM0C,IAAI,CAC/C3D,MAAO,KAETK,EAAKuD,QAAQ,UAEf,GAAkB,iBAAdN,EAA8B,CAChC,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC1CzC,EAASuC,EAAUvC,OACnBC,EAASsC,EAAUwC,KACvBxF,EAAQmD,EAAC,YAAAxC,OAAaF,EAAM,MAAAE,OAAKD,EAAM,OAAM0C,IAAI,CAC/C3D,MAAO,IAETK,EAAKuD,QAAQ,UAEf,GAAkB,kBAAdN,EAA+B,CACjC,IAAM4E,EAAO3H,EAAQiD,eAAeD,EAAUE,QAC9ClD,EAAQmD,EAAC,YAAAxC,OAAaqC,EAAUE,OAAM,OAAME,IAAI,CAC9C3D,MAAO,KAETkI,EAAKtE,QAAQ,UAEf,GAAkB,oBAAdN,EAAiC,CACnC,IAAM4E,EAAO3H,EAAQiD,eAAeD,EAAUE,QAC9ClD,EAAQmD,EAAC,YAAAxC,OAAaqC,EAAUE,OAAM,OAAME,IAAI,CAC9C3D,MAAO,IAETkI,EAAKtE,QAAQ,UAEf,GAAkB,iBAAdN,EAA8B,CAChC,IAAM4E,EAAO3H,EAAQiD,eAAeD,EAAUE,QAC9ClD,EAAQmD,EAAC,YAAAxC,OAAaqC,EAAUE,OAAM,OAAME,IAAI,CAC9C9B,eAAgB,KAElBqG,EAAKtE,QAAQ,UAEf,GAAkB,mBAAdN,EAAgC,CAClC,IAAM4E,EAAO3H,EAAQiD,eAAeD,EAAUE,QAC9ClD,EAAQmD,EAAC,YAAAxC,OAAaqC,EAAUE,OAAM,OAAME,IAAI,CAC9C9B,eAAgB,KAElBqG,EAAKtE,QAAQ,eAOjBuE,EAAKpH,EAAM/B,OACXoJ,EAAQrH,EAAMxB,OAAO,SAACC,GAAW,MAA2B,KAApBA,EAAKqB,KAAK3B,QAAgBF,OAUtE,OARKJ,EAAMwG,UAITiD,aAAaC,QAAQ,MAAOH,GAC5BE,aAAaC,QAAQ,SAAUF,KAJ/BC,aAAaC,QAAQ,KAAMH,GAC3BE,aAAaC,QAAQ,QAASF,IAMzB7K,IAAAC,cAACqG,IAAkB,CACxBC,SAAUD,IAAmBE,kBAAkB1C,GAE/CzD,MAAO,CAAEoC,MAAOA,EAAOG,OAAQA,GAC/B6D,gBAAgB,EAChBC,QAAS,EACTC,QAAS,GACTC,iBAAiB,EACjBC,qBAAqB,EACrB1B,OAAQA,EACR2B,WAAY/C,EACZgD,GAAI,SAAAA,GACF/D,EAAU+D,EAEVA,EAAGC,GAAG,MAAO,OAAQ,SAAAC,GACRA,EAAIvD,SAGjBqD,EAAGC,GAAG,YAAa,OAAQ,SAASE,GAAO,IACjCxD,EAAWwD,EAAXxD,OACRA,EAAO0C,IAAI,CACT3D,MAAO,KAET,IAAMyD,EAASgB,EAAMxD,OAAO3C,KAC5BM,EAAMwE,OAAOwC,UAAU,eAAgB,CAAEnC,SAAQxC,aAGnDqD,EAAGC,GAAG,YAAa,OAAQ,SAASE,GACfA,EAAXxD,OACD0C,IAAI,CACT9B,eAAgB,KAElB,IAAM4B,EAASgB,EAAMxD,OAAO3C,KAC5BM,EAAMwE,OAAOwC,UAAU,cAAe,CAAEnC,WAExC,IACIvE,EADOuF,EAAMxD,OACAJ,KAAK,SAElB0E,EAAWZ,SAASa,cAAa,IAAAtE,OAAKhC,IACzB,OAAbqG,IACFA,EAAS3H,MAAM6H,QAAU,EACzBF,EAAS3H,MAAM8H,OAAS,IACxBH,EAAS3H,MAAM+H,WAAa,UAIhCrB,EAAGC,GAAG,WAAY,OAAQ,SAASE,GACdA,EAAXxD,OACD0C,IAAI,CACT9B,eAAgB,KAElB,IAAM4B,EAASgB,EAAMxD,OAAO3C,KAC5BM,EAAMwE,OAAOwC,UAAU,gBAAiB,CAAEnC,WAE1C,IACIvE,EADOuF,EAAMxD,OACAJ,KAAK,SAElB0E,EAAWZ,SAASa,cAAa,IAAAtE,OAAKhC,IACzB,OAAbqG,IACFA,EAAS3H,MAAM6H,QAAU,GACzBF,EAAS3H,MAAM8H,OAAS,EACxBH,EAAS3H,MAAM+H,WAAa,YAIhCrB,EAAGC,GAAG,WAAY,OAAQ,SAASE,GAAO,IAChCxD,EAAWwD,EAAXxD,OACRA,EAAO0C,IAAI,CACT3D,MAAO,IAET,IAAMyD,EAASgB,EAAMxD,OAAO3C,KAC5BM,EAAMwE,OAAOwC,UAAU,iBAAkB,CAAEnC,SAAQxC,cAGvD+E,IAAKC,QAAQC,IAAI,UAAW3F,+BCtQrBgI,MAhDf,SAAgB3J,GACZ,IAYME,EAAe,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEEC,EAAUD,EAAaE,OAI7B,OAFAiH,QAAQC,IAAIpH,EAAaa,SA1BR,SAACT,GACd,IAAIsJ,EAAM,EAMV,OALA5J,EAAMO,SAASsJ,QAAQ,SAAAC,GACfA,EAAE,KAAOxJ,IACTsJ,EAAME,EAAE,MAGTF,EAmBuBG,CAAW,WAAa5J,SAElCU,IAApBb,EAAMgK,UACCrL,IAAAC,cAAAD,IAAAsL,SAAA,MAOAtL,IAAAC,cAAA,OAAKI,MAAO,CAAEoH,SAAU,WAAY7E,OAAQ,IAC/C5C,IAAAC,cAAA,OACIU,IAAKkB,IACL3B,UAAU,gjCCvC1B,IAAIqL,EAAWC,EAAQ,KAEvBxK,IAAUC,IAAIsK,GACdvK,IAAUC,IAAIE,KACdH,IAAUC,IAAIC,KA0YCuK,MAxYf,SAAsBpK,GAAO,IAAAgB,EACWC,mBAAS,GAAEC,EAAAC,YAAAH,EAAA,GAAxCqJ,EAAUnJ,EAAA,GAAEoJ,EAAapJ,EAAA,GAAAG,EACRJ,oBAAS,GAAMK,EAAAH,YAAAE,EAAA,GAAhCkJ,EAAIjJ,EAAA,GAAEkJ,EAAOlJ,EAAA,GAChBmJ,EAAQ,EAERxK,EAAgB,6BAEhByK,EAAa,SAAC7F,GACd,IAAI8F,EAAQ3K,EAAMgK,UAAUrJ,OAAO,SAAAiK,GAAK,OAAIA,EAAM,IAAMpJ,EAAUqD,KAAS,GAC3E,MAAO,CAACuE,EAAGuB,EAAM,GAAG,GAAG,GAAItB,EAAGsB,EAAM,GAAG,GAAG,KAGxCzK,EAAe,CACjB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEEC,EAAUD,EAAaE,OAAOmC,EAEXtB,mBAAS,QAAOuB,EAAArB,YAAAoB,EAAA,GAAlCnB,EAAKoB,EAAA,GAASqI,GAAArI,EAAA,GACOvB,mBAAS,SAAO6J,EAAA3J,YAAA0J,EAAA,GAArCtJ,EAAMuJ,EAAA,GAMb,SAAStJ,EAAUC,GACf,OAAOzB,EAAM0B,SAASlB,IAAI,SAACC,EAAOC,GAC9B,GAAID,EAAM,KAAOgB,EAAM,OAAOhB,EAAM,KAAKE,OAAO,SAACC,GAAU,YAAeC,GAARD,IAAoB,GAG9F,SAASP,EAASC,GACd,IAAIpB,EAAQc,EAAMO,SAASC,IAAI,SAACC,EAAOC,GACnC,GAAID,EAAM,KAAOH,EAAO,OAAOG,EAAM,KAAKE,OAAO,SAACC,GAAU,YAAeC,GAARD,IAAoB,GAC3F,YAAcC,IAAV3B,EACO,UAEJe,EAAca,KAAK5B,GAASA,EAAQgB,EAAaa,SAAS7B,GAASiB,GAjBtD2K,EAAA,GAoBxB,IAUyCtD,EAVrC5F,EAAQ5B,EAAM6B,KAAKC,OAAOnB,OAlB9B,SAAoBF,EAAOC,EAAOqB,GAC9B,OAAOA,EAAMC,QAAQvB,KAAWC,IAiBaF,IAAI,SAACC,EAAOC,GAC7D,MAAO,CAAEuB,KAAM,CAAEvC,GAAK8B,EAAUf,GAAQH,MAAOkB,EAAUf,GAAQyB,KAAM,MAAQkE,SAAUsE,EAAWjK,MAGhGsK,EAAU/K,EAAM6B,KAAKrB,IAAI,SAACC,EAAOC,GACjC,MAAO,CAAEuB,KAAM,CAAEG,OAAQZ,EAAUf,EAAM,IAAK4B,OAAQb,EAAUf,EAAM,IAAKH,MAAO,EAAGZ,GAAE,GAAA4C,OAAKd,EAAUf,EAAM,IAAG,MAAA6B,OAAKd,EAAUf,EAAM,KAAOyB,KAAK,aAGhJC,EAAQ,GAAGwF,EAAAC,EAESmD,EAAQlD,WAAS,IAAzC,IAAAF,EAAAG,MAAAN,EAAAG,EAAAI,KAAAC,MAA2C,KAECgD,EAFD/C,EAAAT,EAAA/G,MAAAyH,EAAA/G,YAAA8G,EAAA,GAA/BE,EAACD,EAAA,GAAEoB,EAAIpB,EAAA,GACX+C,GAAO,EAAMC,EAAAtD,EACQzF,EAAM0F,WAAS,IAAxC,IAAAqD,EAAApD,MAAAkD,EAAAE,EAAAnD,KAAAC,MAA0C,KAAAmD,EAAAH,EAAAvK,MAAA2K,EAAAjK,YAAAgK,EAAA,GAA9BE,EAACD,EAAA,GAAEE,EAAKF,EAAA,GAChB,GAAI9B,EAAKrH,KAAKG,QAAUkJ,EAAMrJ,KAAKG,QAAUkH,EAAKrH,KAAKI,QAAUiJ,EAAMrJ,KAAKI,OAAQ,CAChFF,EAAMkJ,GAAGpJ,KAAK3B,QACd2K,GAAO,EACP,QAEP,MAAA7C,IAAA8C,EAAA7C,EAAAD,IAAA,QAAA8C,EAAA5C,IACI2C,GAAQ3B,EAAKrH,KAAKG,SAAWkH,EAAKrH,KAAKI,QAAQF,EAAMuB,KAAKqH,EAAQ5C,KAC1E,MAAAC,IAAAT,EAAAU,EAAAD,IAAA,QAAAT,EAAAW,IAAA,IAEsCiD,EAFtCC,EAAA5D,EAEuBzF,EAAM0F,WAAS,IAAvC,IAAA2D,EAAA1D,MAAAyD,EAAAC,EAAAzD,KAAAC,MAAyC,KAAAyD,EAAAF,EAAA9K,MAAAiL,EAAAvK,YAAAsK,EAAA,GAA7BtD,EAACuD,EAAA,GACc,GADRA,EAAA,GACNzJ,KAAK3B,QACV6B,EAAMgG,GAAGlG,KAAK3B,MAAQ,KAE7B,MAAA8H,IAAAoD,EAAAnD,EAAAD,IAAA,QAAAoD,EAAAlD,IAEDjB,QAAQC,IAAInF,GAAO,IA+GfR,EA/GegK,EAEe1K,mBAAS,CACvCW,MAAOA,EACPO,MAAOA,IACTyJ,EAAAzK,YAAAwK,EAAA,GAHKlJ,EAASmJ,EAAA,GAAEC,EAAYD,EAAA,GAK1BlJ,EAAa,CACb,CACIC,SAAU,OACV3D,MAAO,CACH4D,gBAAiB,UACjBxB,MAAO,GACPG,OAAQ,GAMRsB,kBAAmB,MACnBC,UAAW,KAIX5D,MAAO,QACP8D,SAAU,KAGlB,CACEL,SAAU,gBACV3D,MAAO,CACLiE,eAAgB,MAChBC,eAAgB,UAChBC,iBAAkB,IAClBC,mBAAoB,UACpBhC,MAAO,GACPG,OAAQ,GAER8B,qBAAsB,UACtBN,qBAAsB,IAG1B,CACEJ,SAAU,sBACV3D,MAAO,CACLuJ,MAAO,cAGX,CACE5F,SAAU,OACV3D,MAAO,CACLoC,MAAO,EAEPd,MAAO,cACPiD,qBAAsB,UACtBC,qBAAsB,WACtBC,cAAe,SACfV,qBAAsB,MACtB7D,MAAO,QACP8D,SAAU,KAGd,CACIL,SAAU,qBACV3D,MAAO,CACHoC,MAAO,EACPqC,cAAe,aAGvB,CACId,SAAU,qBACV3D,MAAO,CACHoC,MAAO,EACPG,OAAQ,IAGhB,CACIoB,SAAU,qBACV3D,MAAO,CACHsE,aAAc,UA0F1B,OArFAtD,EAAMO,SAASC,IAAI,SAACC,EAAOC,GACvBgC,EAAWgB,KAAK,CACdf,SAAQ,eAAAL,OAAiB7B,EAAM,GAAE,MACjCzB,MAAO,CACL4D,gBAAiB3C,EAAca,KAAKL,EAAM,IAAMA,EAAM,GAAKP,EAAaa,SAASN,EAAM,IAAMN,QAKrGgC,EAAM3B,IAAI,SAACC,EAAOC,GACd,GAAwB,WAApBD,EAAMwB,KAAKC,KAAmB,CAC9B,IAAIE,EAAS3B,EAAMwB,KAAKG,OACpBC,EAAS5B,EAAMwB,KAAKI,OACxBgF,QAAQC,IAAI7G,EAAMwB,KAAKvC,IACvB2H,QAAQC,IAAIlF,GACZM,EAAWgB,KAAK,CAChBf,SAAQ,YAAAL,OAAcF,EAAM,MAAAE,OAAKD,EAAM,MACvCrD,MAAO,CACH2E,YAAa,kBACbC,4BAA2B,GAAAtB,OAAKjC,EAAS+B,GAAO,KAAAE,OAAIjC,EAASgC,IAC7DwB,+BAAgC,UAChCN,qBAAoB,GAAAjB,OAAKjC,EAASgC,UAoB9CyJ,oBAAU,WACN9L,EAAMgK,UAAUxJ,IAAI,SAACsJ,EAAGpJ,GACpB2G,QAAQC,KAAK5G,EAAQ,IAAI,KAAK,EAAEV,EAAMgK,aACtCpI,EAAM8B,KAAK,CACPzB,KAAM,CACFvC,GAAE,YAAA4C,OAAc5B,GAChBJ,MAAK,YAAAgC,OAAc5B,GACnBwB,KAAM,SAEVkE,SAAU,CACNgD,EAAG1I,EAAQ,GAAK,EAAI,EAAI,IACxB2I,GAAI3I,EAAQ,GAAGqL,KAAKC,MAAM3B,EAAYrK,EAAMgK,UAAU5J,OAAQ,SAGtE+B,EAAMuB,KAAK,CACPzB,KAAM,CACFG,OAAM,YAAAE,OAAc5B,GACpB2B,OAAQyH,EAAE,GACVxJ,MAAO,EACPZ,GAAE,YAAA4C,OAAc5B,EAAK,MAAA4B,OAAKwH,EAAE,IAC5B5H,KAAM,aAGhB,IAEqC+J,EAFrCC,EAAAtE,EAEsBzF,EAAM0F,WAAS,IAAvC,IAAAqE,EAAApE,MAAAmE,EAAAC,EAAAnE,KAAAC,MAAyC,KAAAmE,EAAAF,EAAAxL,MAAA2L,EAAAjL,YAAAgL,EAAA,GAA7BhE,EAACiE,EAAA,GACc,GADRA,EAAA,GACNnK,KAAK3B,QACV6B,EAAMgG,GAAGlG,KAAK3B,MAAQ,KAE7B,MAAA8H,IAAA8D,EAAA7D,EAAAD,IAAA,QAAA8D,EAAA5D,IAEDuD,EAAa,CACTjK,MAAOA,EACPO,MAAOA,IAGXqI,GAAQ,IACT,CAACH,IAEJtE,SAASsG,iBAAiB,mBAAoB,SAASxG,GACnD,IAAIyG,EAAOvG,SAASa,cAAc,iBAClC0D,EAAcgC,EAAKC,gBAGhB5N,IAAAC,cAACqG,IAAkB,CACtBpG,UAAU,eACVqG,SAAUD,IAAmBE,kBAAkB1C,GAE/CzD,MAAO,CAAEoC,MAAOA,EAAOG,OAAQA,GAC/B6D,gBAAgB,EAChBC,QAAS,EACTC,QAAS,GACTC,iBAAiB,EACjBC,qBAAqB,EACrB1B,OAnEW,CACXC,KAAM,SACNC,KAAK,EAKFG,SAAS,EACTC,kBAAmB,KA4DtBqB,WAAY/C,EACZgD,GAAI,SAAAA,GACF/D,EAAU+D,EAMV2B,QAAQC,IAAI,MAAO5B,GAEnBA,EAAG8G,oBAAoB,GACvB9G,EAAG+G,oBAAoB,GACvB/G,EAAG9D,QAAQ8K,YAEXhH,EAAG9D,QAAQiI,QAAQ,SAASpI,GAC1B,IAAIkL,EAAMlL,EAAK2E,WACU,UAArB3E,EAAKQ,OAAOC,OACZyK,EAAItD,GAAK,GAEThC,QAAQC,IAAIyE,KAAKC,MAAM3B,EAAYrK,EAAMgK,UAAU5J,SACnDuM,EAAItD,GAAK0C,KAAKC,MAAM3B,EAAYrK,EAAMgK,UAAU5J,SAEpDiH,QAAQC,IAAI7F,EAAK2E,cAGnBV,EAAGC,GAAG,MAAO,OAAQ,SAAAC,GACnB,IAAInE,EAAOmE,EAAIvD,OACfgF,QAAQC,IAAI,MAAO1B,GACnByB,QAAQC,IAAI,SAAU7F,EAAKQ,QAC3BoF,QAAQC,IAAI,qBAAsB7F,EAAK,MAGzCiE,EAAGC,GAAG,YAAa,sBAAuB,SAASE,GAC9BA,EAAXxD,OACD0C,IAAI,CACT3D,MAAO,KAEMyE,EAAMxD,OAAO3C,OAI9BgG,EAAGC,GAAG,YAAa,kBAAmB,SAASE,GAC1BA,EAAXxD,OACD0C,IAAI,CACP3D,MAAO,GACPG,OAAQ,KAEGsE,EAAMxD,OAAO3C,KAA5B,IAIIY,EADOuF,EAAMxD,OACAJ,KAAK,SAElB0E,EAAWZ,SAASa,cAAa,IAAAtE,OAAKhC,IACzB,OAAbqG,IACFA,EAAS3H,MAAM6H,QAAU,EACzBF,EAAS3H,MAAM8H,OAAS,IACxBH,EAAS3H,MAAM+H,WAAa,UAIhCrB,EAAGC,GAAG,WAAY,kBAAmB,SAASE,GACzBA,EAAXxD,OACD0C,IAAI,CACP3D,MAAO,GACPG,OAAQ,KAEGsE,EAAMxD,OAAO3C,KAA5B,IAIIY,EADOuF,EAAMxD,OACAJ,KAAK,SAElB0E,EAAWZ,SAASa,cAAa,IAAAtE,OAAKhC,IACzB,OAAbqG,IACFA,EAAS3H,MAAM6H,QAAU,GACzBF,EAAS3H,MAAM8H,OAAS,EACxBH,EAAS3H,MAAM+H,WAAa,YAIhCrB,EAAGC,GAAG,WAAY,sBAAuB,SAASE,GAC7BA,EAAXxD,OACD0C,IAAI,CACT3D,MAAO,IAEMyE,EAAMxD,OAAO3C,OAI9B,IAAMkN,EAAY,GAChBlH,EAAG9D,QAAQiI,QAAQ,SAACpI,GAChBmL,EAAUnL,EAAKQ,OAAOvC,IAAM+B,EAAK2E,aAEvCiB,QAAQC,IAAIsF,GAERrC,GACF7E,EAAG9D,QAAQiI,QAAQ,SAACpI,GAGhB,GAFAgJ,IACApD,QAAQC,IAAImD,GACa,UAArBhJ,EAAKQ,OAAOC,MAAoBT,EAAK6E,iBAAiB,KAAO,EAAG,CAChE,IAAI5F,EAAQK,SAASU,EAAKQ,OAAOvC,GAAGmN,OAAO,IACvCvM,EAAQN,EAAMgK,UAAUtJ,GAAO,GAE/BoF,EAAMC,SAASnH,cAAc,OACjCkH,EAAIE,aAAa,QAAS,eAE1BF,EAAIG,UAAS,2CAAA3D,OAA8ChC,EAAK,yBAGhE,IAAM4F,EAASH,SAASa,cAAc,gBACtCS,QAAQC,IAAIpB,EAAO4G,yBACnBhH,EAAI9G,MAAMoH,SAAW,WAErB,IAAI2G,EAAO,QAAAzK,OAAWb,EAAK6E,iBAAiB,KAAO,KAAI,kBACnD5F,EAAQ,GAAK,IACbqM,GAAW,WAEfA,GAAW,IAEXjH,EAAIpG,GAAKY,EAETwF,EAAI9G,MAAMqH,IAAO5E,EAAK6E,iBAAiB,KAAOJ,EAAO4G,wBAAwBzG,IAAI,EAAI,GAAM,KAC3FP,EAAI9G,MAAMuH,KAAOwG,EACjBjH,EAAI9G,MAAM6H,QAAU,GAEpBd,SAASU,KAAKC,YAAYZ,OAKtCsB,IAAKC,QAAQC,IAAI,UAAW3F,MCzXrBqL,MAdf,SAAqBhN,GACjB,YAAwBa,IAApBb,EAAMgK,UACCrL,IAAAC,cAAAD,IAAAsL,SAAA,MAEAtL,IAAAC,cAAA,OAAKC,UAAU,eAClBF,IAAAC,cAAA,OAAKC,eAA+BgC,IAApBb,EAAMgK,UAA0B,6BAA+B,kCAC3ErL,IAAAC,cAAC+K,EAAM,CAACpJ,SAAUP,EAAMO,SAAUyJ,UAAWhK,EAAMgK,YACnDrL,IAAAC,cAACwL,EAAY,CAACvI,KAAM7B,EAAM6B,KAAMH,SAAU1B,EAAM0B,SAAUnB,SAAUP,EAAMO,SAAUyJ,UAAWhK,EAAMgK,eCJrH,SAASiD,EAAepH,GACJ,MAAdA,EAAMqH,KACRC,MAAM,0aAwIKC,MApIf,SAAapN,GACOqN,cAAhB,IAA6BrM,EACTC,mBAAS,GAAEC,EAAAC,YAAAH,EAAA,GAAxBuI,EAAErI,EAAA,GAAEoM,EAAKpM,EAAA,GAAAG,EACUJ,mBAAS,GAAEK,EAAAH,YAAAE,EAAA,GAA9BmI,EAAKlI,EAAA,GAAEiM,EAAQjM,EAAA,GAChBkM,EAAa/D,aAAagE,QAAQ,aAClCC,EAAYC,KAAKC,MAAMJ,GACvB9E,EAAkB,IAAIC,gBAAgBC,OAAOC,SAASC,KAAKC,MAAM,KAAK,IAEtE8E,EAAYnF,EAAgBO,IAAI,YACtC5B,QAAQC,IAAI,iBAAkBsB,OAAOC,SAASC,MAC9CzB,QAAQC,IAAI,mBAAoBoB,EAAgBoF,MAChDzG,QAAQC,IAAI,aAAcuG,GAI1B,IAAM5L,EAAOyL,EAAqB,UAAE/M,OAAO,SAACC,GAAU,OAAOA,EAAW,OAAMiN,IAAY,GAGtFtN,EAAW0B,EAAe,SAC3BzB,IAAI,SAACI,GAAI,OAAKA,EAAK,KACnBD,OAAO,SAACF,EAAOC,EAAOqN,GACrB,OAAOA,EAAK/L,QAAQvB,KAAWC,IAEhCF,IAAI,SAACI,EAAMF,EAAOqN,GAAI,MAAK,CAACnN,EAAI,GAAA0B,OAAKyL,EAAK/L,QAAQpB,OAE/CiB,EAAOI,EAAW,KAClB+L,EAAgB/L,EAAe,SAC/BxC,EAAYwC,EAAgB,UAE9BgM,EAAaP,EAAqB,UAAElN,IAAI,SAACC,EAAOC,GAAW,OAAOD,EAAY,OAE9EuJ,EAAY0D,EAAe,IAE3BQ,EAAc,SAAChB,EAAKzM,GACtB,IAAM0N,EAAM,IAAIC,IAAIxF,OAAOC,SAASzJ,MAC9BiP,EAAe,IAAI1F,gBAAe,IAAArG,OAAK6L,EAAIrF,KAAK+D,MAAM,GAAG9D,MAAM,KAAK,KAG1EsF,EAAaC,IAAIpB,EAAKzM,GAGtB0N,EAAIrF,KAAO,OAASuF,EAAaE,WACjC3F,OAAOC,SAASzJ,KAAO+O,EAAII,WAE3B3F,OAAOC,SAAS2F,UA2BlB1C,oBAAU,WACR/F,SAASsG,iBAAiB,UAAWY,GACrCK,EAAM7D,aAAagE,QAAQ,OAC3BF,EAAS9D,aAAagE,QAAQ,YAGhC,IAAMgB,EAAW,CACfC,UAAW,GACXjK,YAAW,SAACkK,GACVC,KAAKF,UAAUhL,KAAKiL,IAEtBE,eAAc,SAACF,GACbC,KAAKF,UAAYE,KAAKF,UAAU/N,OAAO,SAAAmO,GAAQ,OAAIA,IAAaH,KAElE3H,UAAS,SAACtC,EAAWC,GACnBiK,KAAKF,UAAU7E,QAAQ,SAACiF,GACtBA,EAASpK,EAAWC,OAO1B,OACEhG,IAAAC,cAAA,OAAKC,UAAU,OACbF,IAAAC,cAAA,OAAKC,UAAU,iBAAiBkQ,QAlClB,SAAClJ,GACjB+C,OAAOC,SAAQ,GAAAvG,OAAMsG,OAAOC,SAASmG,SAAQ,MAAA1M,OAAKsG,OAAOC,SAASoG,KAAI,mCAAA3M,OAAkCoG,EAAgBO,IAAI,eAiCpEtK,IAAAC,cAAA,KAAGC,UAAU,aAAYF,IAAAC,cAAA,SAAG,OAClFD,IAAAC,cAAA,OAAKC,UAAU,cACbF,IAAAC,cAAA,OAAKC,UAAU,gBACbF,IAAAC,cAAA,SAAOC,UAAU,iBAAiBqQ,IAAI,aAAYvQ,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,iBACtDD,IAAAC,cAAA,UAAQmF,KAAK,YAAYrE,GAAG,YAAYyP,SA9C1B,SAACtJ,GACvBqI,EAAY,WAAYrI,EAAMxD,OAAO5B,SA8C1BwN,EAAWzN,IAAI,SAAAsJ,GACb,OAAQA,IAAMpB,EAAgBO,IAAI,YAAetK,IAAAC,cAAA,UAAQ6B,MAAOqJ,EAAGsF,UAAQ,GAAEtF,GAAcnL,IAAAC,cAAA,UAAQ6B,MAAOqJ,GAAIA,SAIrHnL,IAAAC,cAAA,MAAIC,UAAU,YAAWF,IAAAC,cAAA,SAAIqD,EAAW,OACxCtD,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,gCAChCD,IAAAC,cAACE,IAAI,CAACC,GAAG,GAAGC,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UAAUP,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,UAEhGD,IAAAC,cAAA,OAAKC,UAAU,iBACbF,IAAAC,cAAA,OAAKC,eAAyBgC,IAAdmJ,EAA0B,sBAAwB,cAChErL,IAAAC,cAAA,OAAKC,UAAU,uBACbF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,oBAC7BD,IAAAC,cAAA,KAAGC,UAAU,iBAAe,WAAAyD,OAAaiH,IACzC5K,IAAAC,cAAA,KAAGC,UAAU,oBAAkB,WAAAyD,OAAakH,IAC5C7K,IAAAC,cAAA,UAAQsD,KAAK,SAASrD,UAAU,oBAAoBkQ,QAlDjD,SAAClJ,GACd,IAAImD,EAA6C,SAAnCN,EAAgBO,IAAI,WAClCiF,EAAY,WAAYlF,KAgDyD,UACvErK,IAAAC,cAAC2I,EAAS,CAAC1F,KAAMA,EAAMH,SAAUsM,EAAezN,SAAUA,EAAUd,UAAWA,EAAW+E,OAAQiK,KAEpG9P,IAAAC,cAAA,OAAKC,UAAU,mBACbF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,gBAC7BD,IAAAC,cAACmB,EAAU,CAAC8B,KAAMA,EAAMH,SAAUsM,EAAezN,SAAUA,EAAUiE,OAAQiK,MAGjF9P,IAAAC,cAACoO,EAAW,CAAChD,UAAWA,EAAWzJ,SAAUA,EAAUsB,KAAMA,EAAMH,SAAUsM,EAAexJ,OAAQiK,MAGxG9P,IAAAC,cAAA,OAAKC,UAAU,gBAAgBkQ,QArEtB,SAAClJ,GACZ+C,OAAOC,SAAQ,GAAAvG,OAAMsG,OAAOC,SAASmG,SAAQ,MAAA1M,OAAKsG,OAAOC,SAASoG,KAAI,oCAAA3M,OAAmCoG,EAAgBO,IAAI,YAAW,eAAA3G,OAAcoG,EAAgBO,IAAI,eAoExHtK,IAAAC,cAAA,KAAGC,UAAU,aAAYF,IAAAC,cAAA,SAAG,+LC8BrEyQ,OAlJf,SAAcrP,GAkCV,IAjCA,IASIsP,EAAY,CACdC,GAAMA,EACNC,IAAOA,EACPC,IAAOA,EACPC,IAAOA,EACPC,IAAOA,EACPC,IAAOA,EACPC,SAAYA,EACZC,SAAYA,EACZC,SAAYA,EACZC,SAAYA,EACZC,SAAYA,EACZC,SAAYA,EACZC,UAAaA,GACbC,YAAeA,IAGbC,EAAmB,CAAC,KAAM,MAAO,MAAO,MAAO,MAAO,MAAO,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,YAAa,eAClJC,EAAe,CAAC,eAAgB,cAAe,cAAe,cAAe,cAAe,cAAe,iBAAkB,iBAAkB,iBAAkB,iBAAkB,iBAAkB,iBAAkB,iBAAkB,WACzOC,EAAe,GACfC,GAAc,EAEOC,EAAA,SAAAtI,GAIjBuI,EAAoBJ,EAAanI,GACjCwI,EAAiBH,EANV,UACA,UAOPI,EAAOC,EAJPC,EAAkBT,EAAiBlI,IAMvCoI,EAAa7M,KAAK/E,IAAAC,cAAA,OAAKC,UAAU,qBAC/BF,IAAAC,cAAA,OAAKC,UAAU,cAAcG,MAAO,CAAE4D,gBAAiB+N,IACrDhS,IAAAC,cAAA,MAAIC,UAAU,WACZF,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAI8R,MAGX/R,IAAAC,cAAA,OAAKC,UAAU,cAAcG,MAAO,CAAE4D,gBAAiB+N,IACrDhS,IAAAC,cAACE,IAAI,CAACC,GAAI6R,EAAM5R,MAAO,CAAEC,eAAgB,OAAQC,MAAO,SAAU6P,QAAS,WAAOtF,aAAaC,QAAQ,YAAaiE,KAAKoD,UAAUzB,EAAUe,EAAiBlI,QAC5JxJ,IAAAC,cAAA,MAAIC,UAAU,aACZF,IAAAC,cAAA,OAAKC,UAAU,aACbF,IAAAC,cAAA,KAAGC,UAAU,UAASF,IAAAC,cAAA,SAAIkS,OAIhCnS,IAAAC,cAAA,OACEC,UAAU,UACVS,IAAK0R,IACLjC,QAAS,kBAzDGZ,EAyDiB,2EAAA7L,OAA4E+N,EAAiBlI,GAAE,KAAA7F,OAAI+N,EAAiBlI,GAAE,SAzDlI8I,EAyDkI,GAAA3O,OAAY+N,EAAiBlI,GAAE,cAxD1L+I,IAAMjI,IAAIkF,EAAK,CACbgD,aAAc,SAEfC,KAAK,SAACC,GACLC,IAAaD,EAAIpP,KAAMgP,KALN,IAAC9C,EAAK8C,QA8DvBT,GAAeA,GA7BVrI,EAAI,EAAGA,EAAIkI,EAAiBjQ,OAAQ+H,IAAG,KAAA2I,EAAAJ,EAAAC,EAAAC,EAAAH,EAAAtI,GAgChD,GAAIpC,SAASwL,uBAAuB,SAASnR,OAAS,EAEpD,IADA,IAAM8E,EAAWa,SAASwL,uBAAuB,SAC3CrM,EAAS9E,OAAS,GACtB8E,EAAS,GAAGsM,WAAWtK,YAAYhC,EAAS,IA2BhD,OACIvG,IAAAC,cAAA,OAAKC,UAAU,QACXF,IAAAC,cAAA,OAAKC,UAAU,cACXF,IAAAC,cAAA,UAAID,IAAAC,cAAA,SAAG,sBACPD,IAAAC,cAAA,OAAKC,UAAU,YAAWF,IAAAC,cAACE,IAAI,CAACC,GAAG,QAAQC,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UAAUP,IAAAC,cAAA,MAAIC,UAAU,aAAY,WACvHF,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,uCAAoCD,IAAAC,cAAA,KAAGQ,KAAK,qDAAoD,aAAa,YAAY,iRAE/HT,IAAAC,cAAA,UAAI,YAEJD,IAAAC,cAAA,OAAKC,UAAU,eACbF,IAAAC,cAAA,MAAIC,UAAU,eACZF,IAAAC,cAAA,OAAKC,UAAU,qBACbF,IAAAC,cAAA,OAAKC,UAAU,cAAcG,MAAO,CAAE4D,gBAAiB,YACrDjE,IAAAC,cAAA,MAAIC,UAAU,iBACZF,IAAAC,cAAA,KAAGC,UAAU,gBAAeF,IAAAC,cAAA,SAAG,cAGnCD,IAAAC,cAAA,OAAKC,UAAU,cAAcG,MAAO,CAAE4D,gBAAiB,YACrDjE,IAAAC,cAACE,IAAI,CAACC,GAAI6R,EAAM5R,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UACtDP,IAAAC,cAAA,MAAIC,UAAU,mBACdF,IAAAC,cAAA,KAAGC,UAAU,gBAAeF,IAAAC,cAAA,SAAG,kBAQzCD,IAAAC,cAAA,OAAKC,UAAU,iBACXF,IAAAC,cAAA,MAAIC,UAAU,eAEV0R,EAAa/P,IAAI,SAAAiR,GAAI,OACnBA,OAOd9S,IAAAC,cAAA,SACEsD,KAAK,OACLxC,GAAG,cACHqE,KAAK,cACL2N,OAAO,mBACPvC,SAnES,SAAC9G,GAClB,IAEIsJ,EAFEC,EAAS,IAAIC,WACbC,EAAOzJ,EAAEhG,OAAO0P,MAAM,GAG5BH,EAAOI,OAAS,SAASC,GACvB,IAAIC,EAAaD,EAAU5P,OAAO8P,OAClCR,EAAgBO,EAEhB,IACIjE,EADSN,KAAKC,MAAM+D,GACS,UAAEnR,IAAI,SAACC,EAAOC,GAAW,OAAOD,EAAY,OAI7EgJ,aAAaC,QAAQ,YAAaiI,GAElC/I,OAAOC,SAAWD,OAAOC,SAAQ,gBAAAvG,OAAmB2L,EAAW,KAIjE2D,EAAOQ,WAAWN,MAgDZnT,IAAAC,cAAA,SAAOsQ,IAAI,eAAcvQ,IAAAC,cAAA,OAAKc,GAAG,SAASb,UAAU,OAAMF,IAAAC,cAAA,MAAIC,UAAU,QAAO,KAAMF,IAAAC,cAAA,QAAMS,MAAM,eAAcV,IAAAC,cAAA,SAAG,4BChK9H,SAASsP,GAAYhB,EAAKzM,GAEL,IAAI2N,IAAIxF,OAAOC,SAASzJ,MAAzC,IAGIiT,EAAY,IAAI1J,gBAAgBC,OAAOC,SAASC,KAAKC,MAAM,KAAK,IACpEsJ,EAAU/D,IAAIpB,EAAKzM,GAInBmI,OAAOC,SAASzJ,KAAO,aAAeiT,EAAU9D,WAGhD3F,OAAOC,SAAS2F,SAGpB,SAASvB,GAAepH,GACF,MAAdA,EAAMqH,KACRC,MAAM,wdAsJGmF,OAlJf,WAAmB,IAAAtR,EACKC,mBAAS,GAAEC,EAAAC,YAAAH,EAAA,GAAxBuI,EAAErI,EAAA,GAAEoM,EAAKpM,EAAA,GAAAG,EACUJ,mBAAS,GAAEK,EAAAH,YAAAE,EAAA,GAA9BmI,EAAKlI,EAAA,GAAEiM,EAAQjM,EAAA,GAAAiB,EACAtB,mBAAS,GAAEuB,EAAArB,YAAAoB,EAAA,GAA1BgQ,EAAG/P,EAAA,GAAEgQ,EAAMhQ,EAAA,GAAAqI,EACU5J,mBAAS,GAAE6J,EAAA3J,YAAA0J,EAAA,GAAhC4H,EAAM3H,EAAA,GAAE4H,EAAS5H,EAAA,GAClBpC,EAAkB,IAAIC,gBAAgBC,OAAOC,SAASC,KAAKC,MAAM,KAAK,IACtEyE,EAAa/D,aAAagE,QAAQ,aAClCC,EAAYC,KAAKC,MAAMJ,GAEvBK,EAAYnF,EAAgBO,IAAI,YAChC0J,EAAajK,EAAgBO,IAAI,aAEjChH,EAAOyL,EAAqB,UAAE/M,OAAO,SAACC,GAAU,OAAOA,EAAW,OAAMiN,IAAY,GACpF+E,EAAQlF,EAAqB,UAAE/M,OAAO,SAACC,GAAU,OAAOA,EAAW,OAAM+R,IAAa,GAExFpS,EAAW0B,EAAe,SAC3BzB,IAAI,SAACI,GAAI,OAAKA,EAAK,KACnBD,OAAO,SAACF,EAAOC,EAAOqN,GACrB,OAAOA,EAAK/L,QAAQvB,KAAWC,IAEhCF,IAAI,SAACI,EAAMF,EAAOqN,GAAI,MAAK,CAACnN,EAAI,GAAA0B,OAAKyL,EAAK/L,QAAQpB,OAE/CiB,EAAOI,EAAW,KAClB4Q,EAAQD,EAAY,KACpB5E,EAAgB/L,EAAe,SAC/B6Q,EAAiBF,EAAgB,SACjCnT,EAAYwC,EAAgB,UAC5B8Q,EAAaH,EAAiB,UAEhC3E,EAAaP,EAAqB,UAAElN,IAAI,SAACC,EAAOC,GAAW,OAAOD,EAAY,OAwB5EgO,EAAW,CACbC,UAAW,GACXjK,YAAW,SAACkK,GACVC,KAAKF,UAAUhL,KAAKiL,IAEtBE,eAAc,SAACF,GACbC,KAAKF,UAAYE,KAAKF,UAAU/N,OAAO,SAAAmO,GAAQ,OAAIA,IAAaH,KAElE3H,UAAS,SAACtC,EAAWC,GACnBiK,KAAKF,UAAU7E,QAAQ,SAACiF,GACtBA,EAASpK,EAAWC,OAKtBqO,EAAY,CACdtE,UAAW,GACXjK,YAAW,SAACkK,GACVC,KAAKF,UAAUhL,KAAKiL,IAEtBE,eAAc,SAACF,GACbC,KAAKF,UAAYE,KAAKF,UAAU/N,OAAO,SAAAmO,GAAQ,OAAIA,IAAaH,KAElE3H,UAAS,SAACtC,EAAWC,GACnBiK,KAAKF,UAAU7E,QAAQ,SAACiF,GACtBA,EAASpK,EAAWC,OAa5B,OARAmH,oBAAU,WACN/F,SAASsG,iBAAiB,UAAWY,IACrCK,EAAM7D,aAAagE,QAAQ,OAC3BF,EAAS9D,aAAagE,QAAQ,UAC9B+E,EAAO/I,aAAagE,QAAQ,QAC5BiF,EAAUjJ,aAAagE,QAAQ,aAG5B9O,IAAAC,cAAA,OAAKC,UAAU,OAClBF,IAAAC,cAAA,OAAKC,UAAU,iBAAiBkQ,QA3ClB,SAAClJ,GACjB+C,OAAOC,SAAQ,GAAAvG,OAAMsG,OAAOC,SAASmG,SAAQ,MAAA1M,OAAKsG,OAAOC,SAASoG,KAAI,mCAAA3M,OAAkCoG,EAAgBO,IAAI,YAAW,eAAA3G,OAAcoG,EAAgBO,IAAI,gBA0CjHtK,IAAAC,cAAA,KAAGC,UAAU,aAAYF,IAAAC,cAAA,SAAG,OAClFD,IAAAC,cAAA,OAAKC,UAAU,kBACXF,IAAAC,cAAA,OAAKC,UAAU,gBACXF,IAAAC,cAAA,SAAOC,UAAU,iBAAiBqQ,IAAI,aAAYvQ,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,iBACxDD,IAAAC,cAAA,UAAQmF,KAAK,YAAYrE,GAAG,YAAYyP,SAjE5B,SAACtJ,GACrBqI,GAAY,WAAYrI,EAAMxD,OAAO5B,SAiExBwN,EAAWzN,IAAI,SAAAsJ,GACf,OAAQA,IAAMpB,EAAgBO,IAAI,YAAetK,IAAAC,cAAA,UAAQ6B,MAAOqJ,EAAGsF,UAAQ,GAAEtF,GAAcnL,IAAAC,cAAA,UAAQ6B,MAAOqJ,GAAIA,SAInHnL,IAAAC,cAAA,MAAIC,UAAU,YAAWF,IAAAC,cAAA,SAAIqD,EAAW,OACxCtD,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,gCAChCD,IAAAC,cAAA,KAAGmQ,QAAS,WAAOnG,OAAOC,SAASzJ,KAAI,+BAAAkD,OAAgCoG,EAAgBO,IAAI,eAAiBjK,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UAAUP,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,UAElMD,IAAAC,cAAA,OAAKC,UAAU,4BACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,oBAC7BD,IAAAC,cAAA,KAAGC,UAAU,iBAAe,WAAAyD,OAAaiH,IACzC5K,IAAAC,cAAA,KAAGC,UAAU,oBAAkB,WAAAyD,OAAakH,IAC5C7K,IAAAC,cAAA,UAAQsD,KAAK,SAASrD,UAAU,oBAAoBkQ,QAvEjD,SAAClJ,GAEZqI,GAAY,YADqC,SAAnCxF,EAAgBO,IAAI,eAsE6C,UACvEtK,IAAAC,cAAC2I,EAAS,CAAC1F,KAAMA,EAAMH,SAAUsM,EAAevO,UAAWA,EAAWc,SAAUA,EAAUiE,OAAQiK,KAEtG9P,IAAAC,cAAA,OAAKC,UAAU,wBACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,gBAC7BD,IAAAC,cAACmB,EAAU,CAAC8B,KAAMA,EAAMH,SAAUsM,EAAezN,SAAUA,EAAUiE,OAAQiK,MAGrF9P,IAAAC,cAAA,OAAKC,UAAU,sBACXF,IAAAC,cAAA,OAAKC,UAAU,gBACXF,IAAAC,cAAA,SAAOC,UAAU,iBAAiBqQ,IAAI,aAAYvQ,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,iBACxDD,IAAAC,cAAA,UAAQmF,KAAK,YAAYrE,GAAG,YAAYyP,SAtF3B,SAACtJ,GACtBqI,GAAY,YAAarI,EAAMxD,OAAO5B,SAsFzBwN,EAAWzN,IAAI,SAAAsJ,GACf,OAAQA,IAAMpB,EAAgBO,IAAI,aAAgBtK,IAAAC,cAAA,UAAQ6B,MAAOqJ,EAAGsF,UAAQ,GAAEtF,GAAcnL,IAAAC,cAAA,UAAQ6B,MAAOqJ,GAAIA,SAIpHnL,IAAAC,cAAA,MAAIC,UAAU,YAAWF,IAAAC,cAAA,SAAIgU,EAAY,OACzCjU,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,gCAChCD,IAAAC,cAAA,KAAGmQ,QAAS,WAAOnG,OAAOC,SAASzJ,KAAI,+BAAAkD,OAAgCoG,EAAgBO,IAAI,cAAgBjK,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UAAUP,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,UAEjMD,IAAAC,cAAA,OAAKC,UAAU,4BACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,oBAC7BD,IAAAC,cAAA,KAAGC,UAAU,iBAAe,WAAAyD,OAAaiQ,IACzC5T,IAAAC,cAAA,KAAGC,UAAU,oBAAkB,WAAAyD,OAAamQ,IAC5C9T,IAAAC,cAAA,UAAQsD,KAAK,SAASrD,UAAU,oBAAoBkQ,QA3FhD,SAAClJ,GAEbqI,GAAY,aADsC,SAApCxF,EAAgBO,IAAI,gBA0F8C,UACxEtK,IAAAC,cAAC2I,EAAS,CAAC1F,KAAMgR,EAAOnR,SAAUoR,EAAgBrT,UAAWsT,EAAYxS,SAAUA,EAAUiE,OAAQwO,EAAWxM,UAAU,KAE9H7H,IAAAC,cAAA,OAAKC,UAAU,wBACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,gBAC7BD,IAAAC,cAACmB,EAAU,CAAC8B,KAAMgR,EAAOnR,SAAUoR,EAAgBvS,SAAUA,EAAUiE,OAAQwO,EAAWxM,UAAU,sjCCtKpH7G,IAAUC,IAAIE,KACdH,IAAUC,IAAIC,KAiRCoT,OA/Qf,SAA0BjT,GACtB,IAAIC,EAAgB,6BACdC,EAAe,CACnB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAEIC,EAAUD,EAAaE,OAM7B,SAASC,EAASC,GAChB,IAAIpB,EAAQc,EAAMO,SAASC,IAAI,SAACC,EAAOC,GACrC,GAAID,EAAM,KAAOH,EAAO,OAAOG,EAAM,KAAKE,OAAO,SAACC,GAAU,YAAeC,GAARD,IAAoB,GACzF,OAAOX,EAAca,KAAK5B,GAASA,EAAQgB,EAAaa,SAAS7B,GAASiB,GAC3E,IARmB4B,EAuBmByF,EAftCxG,EAEwBC,mBAAS,QAAOC,EAAAC,YAAAH,EAAA,GAAlCI,EAAKF,EAAA,GAASG,GAAAH,EAAA,GACOD,mBAAS,SAAOK,EAAAH,YAAAE,EAAA,GAArCE,EAAMD,EAAA,GAITM,GAJoBN,EAAA,IAXJS,EAaK/B,EAAMiC,KAAKzB,IAAI,SAACC,EAAOC,GAAK,MAAK,CAACD,EAAM,GAAIA,EAAM,MAAKqB,OAZ9EoR,aAAW,IAAIC,IAAIpR,KAcDvB,IAAI,SAACC,EAAOC,GAC5B,MAAO,CAAEuB,KAAM,CAAEvC,GAAKe,EAAOH,MAAOG,EAAOyB,KAAM,UAGjDC,EAAQnC,EAAMiC,KAAKzB,IAAI,SAACC,EAAOC,GACjC,MAAO,CAAEuB,KAAM,CAAEG,OAAQ3B,EAAM,GAAI4B,OAAQ5B,EAAM,GAAIH,MAAOG,EAAM,GAAIf,GAAE,GAAA4C,OAAK7B,EAAM,GAAE,MAAA6B,OAAK7B,EAAM,IAAMgH,SAAUhH,EAAM,GAAIiH,SAAUjH,EAAM,OAC1IkH,EAAAC,GAEsBzF,EAAM0F,WAAS,IAAvC,IAAAF,EAAAG,MAAAN,EAAAG,EAAAI,KAAAC,MAAyC,KAAAC,EAAAT,EAAA/G,MAAAyH,EAAA/G,YAAA8G,EAAA,GAA7BE,EAACD,EAAA,GACY,GADNA,EAAA,GACRjG,KAAK3B,QACZ6B,EAAMgG,GAAGlG,KAAK3B,MAAQ,KAEzB,MAAA8H,GAAAT,EAAAU,EAAAD,GAAA,QAAAT,EAAAW,IAAA,IA4FG3G,EA5FHY,EAEiCtB,mBAAS,CACvCW,MAAOA,EACPO,MAAOA,IACTK,EAAArB,YAAAoB,EAAA,GAHKE,EAASD,EAAA,GAKZE,GAL0BF,EAAA,GAKb,CACb,CACEG,SAAU,OACV3D,MAAO,CACL4D,gBAAiB,OACjBK,eAAgB,GAChBsF,MAAO,YACPnH,MAAO,IACPG,OAAQ,GACRjB,MAAO,cAMPuC,kBAAmB,MACnBC,UAAW,KAGXC,qBAAsB,MACtB7D,MAAO,QACP8D,SAAU,GACVwF,cAAe,SACfC,cAAe,WAGnB,CACE9F,SAAU,gBACV3D,MAAO,CACLiE,eAAgB,MAChBC,eAAgB,UAChBC,iBAAkB,MAClBC,mBAAoB,UACpBhC,MAAO,GACPG,OAAQ,GAER8B,qBAAsB,UACtBN,qBAAsB,IAG1B,CACEJ,SAAU,sBACV3D,MAAO,CACLuJ,MAAO,cAGX,CACE5F,SAAU,OACV3D,MAAO,CACLoC,MAAO,EAEPd,MAAO,cACPiD,qBAAsB,UACtBC,qBAAsB,WACtBC,cAAe,SACfV,qBAAsB,MACtB7D,MAAO,QACP8D,SAAU,OAKlBhD,EAAMO,SAASC,IAAI,SAACC,EAAOC,GACvBgC,EAAWgB,KAAK,CACdf,SAAQ,eAAAL,OAAiB7B,EAAM,GAAE,MACjCzB,MAAO,CACLkE,eAAgBjD,EAAca,KAAKL,EAAM,IAAMA,EAAM,GAAKP,EAAaa,SAASN,EAAM,IAAMN,QAKpGgC,EAAM3B,IAAI,SAACC,EAAOC,GACd,IAAI0B,EAAS3B,EAAMwB,KAAKG,OACpBC,EAAS5B,EAAMwB,KAAKI,OACxBK,EAAWgB,KAAK,CACdf,SAAQ,YAAAL,OAAcF,EAAM,MAAAE,OAAKD,EAAM,MACvCrD,MAAO,CACL2E,YAAa,kBACbC,4BAA2B,GAAAtB,OAAKjC,EAAS+B,GAAO,KAAAE,OAAIjC,EAASgC,IAC7DwB,+BAAgC,UAChCN,qBAAoB,GAAAjB,OAAKjC,EAASgC,SAO1C,IACI2G,EAAgD,SAD5B,IAAIL,gBAAgBC,OAAOC,SAASuK,QAC9BnK,IAAI,cAClB,OAAZD,IACAA,GAAU,GAGd,IAAMlF,EAAS,CACXC,KAAM,QACNC,KAAK,EACLkF,QAAQ,EACRjF,UAAU,EACVC,QAAS,GAETC,SAAS,EACTC,kBAAmB,IACnBC,cAAc,EACdC,6BAA6B,EAC7BC,MAAO,WAuBLvE,EAAMwE,OAAOC,YAtBI,SAACC,EAAWC,GAG3B,GAAkB,eAAdD,EAA4B,CAC9B,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC1CzC,EAASuC,EAAUvC,OACnBC,EAASsC,EAAUwC,KACvBxF,EAAQmD,EAAC,YAAAxC,OAAaF,EAAM,MAAAE,OAAKD,EAAM,OAAM0C,IAAI,CAC/C3D,MAAO,KAETK,EAAKuD,QAAQ,UAEf,GAAkB,iBAAdN,EAA8B,CAChC,IAAMjD,EAAOE,EAAQiD,eAAeD,EAAUE,QAC1CzC,EAASuC,EAAUvC,OACnBC,EAASsC,EAAUwC,KACvBxF,EAAQmD,EAAC,YAAAxC,OAAaF,EAAM,MAAAE,OAAKD,EAAM,OAAM0C,IAAI,CAC/C3D,MAAO,IAETK,EAAKuD,QAAQ,eAOnBuE,EAAKpH,EAAM/B,OACXoJ,EAAQrH,EAAMxB,OAAO,SAACC,GAAW,MAA2B,KAApBA,EAAKqB,KAAK3B,QAAgBF,OAKtE,OAHAqJ,aAAaC,QAAQ,QAASH,GAC9BE,aAAaC,QAAQ,WAAYF,GAE1B7K,IAAAC,cAACqG,IAAkB,CACtBC,SAAUD,IAAmBE,kBAAkB1C,GAE/CzD,MAAO,CAAEoC,MAAOA,EAAOG,OAAQA,GAC/B6D,gBAAgB,EAChBC,QAAS,EACTC,QAAS,GACTC,iBAAiB,EACjBC,qBAAqB,EACrB1B,OAAQA,EACR2B,WAAY/C,EACZgD,GAAI,SAAAA,GACF/D,EAAU+D,EAEVA,EAAGC,GAAG,MAAO,OAAQ,SAAAC,GACRA,EAAIvD,SAGjBqD,EAAGC,GAAG,YAAa,OAAQ,SAASE,GAAO,IACjCxD,EAAWwD,EAAXxD,OACRA,EAAO0C,IAAI,CACT3D,MAAO,KAET,IAAMyD,EAASgB,EAAMxD,OAAO3C,KAC5BM,EAAMwE,OAAOwC,UAAU,gBAAiB,CAAEnC,SAAQxC,WAClDrC,EAAMwE,OAAOwC,UAAU,eAAgB,CAAEnC,SAAQxC,aAGnDqD,EAAGC,GAAG,YAAa,OAAQ,SAASE,GACfA,EAAXxD,OACD0C,IAAI,CACT9B,eAAgB,KAElB,IAAM4B,EAASgB,EAAMxD,OAAO3C,KAC5BM,EAAMwE,OAAOwC,UAAU,eAAgB,CAAEnC,WACzC7E,EAAMwE,OAAOwC,UAAU,cAAe,CAAEnC,WAExC,IACIvE,EADOuF,EAAMxD,OACAJ,KAAK,SAElB0E,EAAWZ,SAASa,cAAa,IAAAtE,OAAKhC,IACzB,OAAbqG,IACFA,EAAS3H,MAAM6H,QAAU,EACzBF,EAAS3H,MAAM8H,OAAS,IACxBH,EAAS3H,MAAM+H,WAAa,UAIhCrB,EAAGC,GAAG,WAAY,OAAQ,SAASE,GACdA,EAAXxD,OACD0C,IAAI,CACT9B,eAAgB,KAElB,IAAM4B,EAASgB,EAAMxD,OAAO3C,KAC5BM,EAAMwE,OAAOwC,UAAU,iBAAkB,CAAEnC,WAC3C7E,EAAMwE,OAAOwC,UAAU,gBAAiB,CAAEnC,WAE1C,IACIvE,EADOuF,EAAMxD,OACAJ,KAAK,SAElB0E,EAAWZ,SAASa,cAAa,IAAAtE,OAAKhC,IACzB,OAAbqG,IACFA,EAAS3H,MAAM6H,QAAU,GACzBF,EAAS3H,MAAM8H,OAAS,EACxBH,EAAS3H,MAAM+H,WAAa,YAIhCrB,EAAGC,GAAG,WAAY,OAAQ,SAASE,GAAO,IAChCxD,EAAWwD,EAAXxD,OACRA,EAAO0C,IAAI,CACT3D,MAAO,IAET,IAAMyD,EAASgB,EAAMxD,OAAO3C,KAC5BM,EAAMwE,OAAOwC,UAAU,kBAAmB,CAAEnC,SAAQxC,WACpDrC,EAAMwE,OAAOwC,UAAU,iBAAkB,CAAEnC,SAAQxC,cAGvD+E,IAAKC,QAAQC,IAAI,UAAW3F,2BCpPrB0R,OAvBf,SAAiBrT,GACb,IACMsT,EAAgB,EAAIvH,KAAKwH,GADhB,GAETC,EAAmBF,EAAiBtT,EAAMyT,SAAW,IAAOH,EAElE,OAAO3U,IAAAC,cAAA,OAAKC,UAAU,WAClBF,IAAAC,cAAA,OAAKU,IAAKoU,KAAMlU,IAAI,OAAO4B,MAAM,UACjCzC,IAAAC,cAAA,UAAI,cACJD,IAAAC,cAAA,WACID,IAAAC,cAAA,UACA+U,GAAG,KACHjO,GAAG,KACHkO,EAXO,GAYPC,OAAO,UACPC,YAAY,IACZC,KAAK,cACLC,gBAAe,GAAA1R,OAAKgR,EAAa,KAAAhR,OAAIgR,GACrCtU,MAAO,CAAEwU,yBCJNS,OArBf,SAAoBjU,GAChB,GAAIA,EAAMkU,KAAM,CACZ,IAAM/R,EAAQnC,EAAMiC,KAAKzB,IAAI,SAAC2T,EAAMzT,GAChC,OACI/B,IAAAC,cAAA,WACID,IAAAC,cAAA,SAAOsD,KAAK,WAAWrD,UAAU,WAAWa,GAAE,GAAA4C,OAAK6R,EAAK,GAAE,UAAA7R,OAAS6R,EAAK,IAAMpQ,KAAI,GAAAzB,OAAK6R,EAAK,GAAE,UAAA7R,OAAS6R,EAAK,IAAMC,SAAO,IACzHzV,IAAAC,cAAA,SAAOsQ,IAAG,GAAA5M,OAAK6R,EAAK,GAAE,UAAA7R,OAAS6R,EAAK,KAAK,GAAA7R,OAAK6R,EAAK,GAAE,UAAA7R,OAAS6R,EAAK,QAK/E,OACIxV,IAAAC,cAAA,OAAKC,UAAU,oBACVsD,GAIT,OAAOxD,IAAAC,cAAAD,IAAAsL,SAAA,4BCDf,SAASiE,GAAYhB,EAAKzM,GAEtB,IAAI4T,EAAa,IAAIjG,IAAIxF,OAAOC,SAASzJ,MAGzCiI,QAAQC,IAAI+M,EAAWvL,MACvB,IAAIuJ,EAAY,IAAI1J,gBAAgBC,OAAOC,SAASC,KAAKC,MAAM,KAAK,IACpEsJ,EAAU/D,IAAIpB,EAAKzM,GAInBmI,OAAOC,SAASzJ,KAAO,YAAciT,EAAU9D,WAG/C3F,OAAOC,SAAS2F,SAGpB,SAASvB,GAAepH,GACF,MAAdA,EAAMqH,KACRC,MAAM,uhBA2JGmH,OAvJf,WAAkB,IAAAtT,EACoBC,oBAAS,GAAKC,EAAAC,YAAAH,EAAA,GAAzCuT,EAASrT,EAAA,GAAEsT,EAAYtT,EAAA,GAAAG,EACEJ,mBAAS,GAAEK,EAAAH,YAAAE,EAAA,GAApCoS,EAAQnS,EAAA,GAAaiB,GAAAjB,EAAA,GACRL,mBAAS,IAAEuB,EAAArB,YAAAoB,EAAA,GAAxBgH,EAAE/G,EAAA,GAAE8K,EAAK9K,EAAA,GAAAqI,EACU5J,mBAAS,GAAE6J,EAAA3J,YAAA0J,EAAA,GAA9BrB,EAAKsB,EAAA,GAAEyC,EAAQzC,EAAA,GAAAa,EACI1K,mBAAS,GAAE2K,EAAAzK,YAAAwK,EAAA,GAA9B8I,EAAK7I,EAAA,GAAE8I,EAAQ9I,EAAA,GAAA+I,EACU1T,mBAAS,GAAE2T,EAAAzT,YAAAwT,EAAA,GAApCE,EAAQD,EAAA,GAAEE,EAAWF,EAAA,GAAAG,EACM9T,oBAAS,GAAM+T,EAAA7T,YAAA4T,EAAA,GAA1CE,EAASD,EAAA,GAAEE,EAAYF,EAAA,GAExBtM,EAAkB,IAAIC,gBAAgBC,OAAOC,SAASC,KAAKC,MAAM,KAAK,IACtEyE,EAAa/D,aAAagE,QAAQ,aAClCC,EAAYC,KAAKC,MAAMJ,GAEvBK,EAAYnF,EAAgBO,IAAI,YAEhChH,EAAOyL,EAAqB,UAAE/M,OAAO,SAACC,GAAU,OAAOA,EAAW,OAAMiN,IAAY,GAEpFsH,EAAWzH,EAAqB,UAAEtN,OAElCgV,EAAmB1H,EAAmB,QAAa,UAErDnN,EAAW0B,EAAe,SAC3BzB,IAAI,SAACI,GAAI,OAAKA,EAAK,KACnBD,OAAO,SAACF,EAAOC,EAAOqN,GACrB,OAAOA,EAAK/L,QAAQvB,KAAWC,IAEhCF,IAAI,SAACI,EAAMF,EAAOqN,GAAI,MAAK,CAACnN,EAAI,GAAA0B,OAAKyL,EAAK/L,QAAQpB,OAE/CiB,EAAOI,EAAW,KAClB+L,EAAgB/L,EAAe,SAC/BxC,EAAYwC,EAAgB,UAE9BgM,EAAaP,EAAqB,UAAElN,IAAI,SAACC,EAAOC,GAAW,OAAOD,EAAY,OAe5EgO,EAAW,CACbC,UAAW,GACXjK,YAAW,SAACkK,GACVC,KAAKF,UAAUhL,KAAKiL,IAEtBE,eAAc,SAACF,GACbC,KAAKF,UAAYE,KAAKF,UAAU/N,OAAO,SAAAmO,GAAQ,OAAIA,IAAaH,KAElE3H,UAAS,SAACtC,EAAWC,GACnBiK,KAAKF,UAAU7E,QAAQ,SAACiF,GACtBA,EAASpK,EAAWC,OA0C5B,OAtBAmH,oBAAU,WAON/F,SAASsG,iBAAiB,UAAWY,IACrCK,EAAM7D,aAAagE,QAAQ,OAC3BF,EAAS9D,aAAagE,QAAQ,UAC9BiH,EAASjL,aAAagE,QAAQ,UAC9BqH,EAAYrL,aAAagE,QAAQ,aACjC+G,GAAa,IAGd,IAEH1I,oBAAU,WACN4I,EAASjL,aAAagE,QAAQ,UAC9BqH,EAAYrL,aAAagE,QAAQ,cAClC,CAAC8G,IAGA5V,IAAAC,cAAA,OAAKC,UAAU,OACT0V,EA4CE5V,IAAAC,cAACyU,GAAO,CAACI,SAAUA,IA3CnB9U,IAAAC,cAAAD,IAAAsL,SAAA,KACItL,IAAAC,cAAA,OAAKC,UAAU,sBACXF,IAAAC,cAAA,OAAKC,UAAU,gBACXF,IAAAC,cAACyW,KAAS,CAAC/V,IAAKgW,KAAMzW,UAAU,eAAekQ,QAAS,kBAAMmG,GAAcD,MAC5EtW,IAAAC,cAACqV,GAAU,CAACC,KAAMe,EAAWE,SAAUA,EAAUlT,KAAMmT,IACvDzW,IAAAC,cAAA,MAAIC,UAAU,YAAWF,IAAAC,cAAA,SAAG,YAC5BD,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,gCAChCD,IAAAC,cAAA,KAAGmQ,QAAS,WAAOnG,OAAOC,SAASzJ,KAAI,+BAAAkD,OAAgCoG,EAAgBO,IAAI,cAAgBjK,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UAAUP,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,UAEjMD,IAAAC,cAAA,OAAKC,UAAU,gCACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,oBAC7BD,IAAAC,cAAA,KAAGC,UAAU,iBAAe,WAAAyD,OAAamS,IACzC9V,IAAAC,cAAA,KAAGC,UAAU,oBAAkB,WAAAyD,OAAauS,IAC5ClW,IAAAC,cAACqU,GAAgB,CAAChR,KAAMmT,EAAkB7U,SAAUA,EAAUiE,OAAQiK,MAG9E9P,IAAAC,cAAA,OAAKC,UAAU,0BACXF,IAAAC,cAAA,OAAKC,UAAU,gBACXF,IAAAC,cAAA,SAAOC,UAAU,iBAAiBqQ,IAAI,aAAYvQ,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,iBACxDD,IAAAC,cAAA,UAAQmF,KAAK,YAAYrE,GAAG,YAAYyP,SAvFxC,SAACtJ,GACrBqI,GAAY,WAAYrI,EAAMxD,OAAO5B,SAuFZwN,EAAWzN,IAAI,SAAAsJ,GACf,OAAQA,IAAMpB,EAAgBO,IAAI,YAAetK,IAAAC,cAAA,UAAQ6B,MAAOqJ,EAAGsF,UAAQ,GAAEtF,GAAcnL,IAAAC,cAAA,UAAQ6B,MAAOqJ,GAAIA,SAInHnL,IAAAC,cAAA,MAAIC,UAAU,YAAWF,IAAAC,cAAA,SAAIqD,EAAW,OACxCtD,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,iCAEpCD,IAAAC,cAAA,OAAKC,UAAU,4BACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,oBAC7BD,IAAAC,cAAA,KAAGC,UAAU,iBAAe,WAAAyD,OAAaiH,IACzC5K,IAAAC,cAAA,KAAGC,UAAU,oBAAkB,WAAAyD,OAAakH,IAC5C7K,IAAAC,cAAA,UAAQsD,KAAK,SAASrD,UAAU,oBAAoBkQ,QAhG7D,SAAClJ,GAEZqI,GAAY,YADqC,SAAnCxF,EAAgBO,IAAI,eA+FyD,UACvEtK,IAAAC,cAAC2I,EAAS,CAAC1F,KAAMA,EAAMH,SAAUsM,EAAevO,UAAWA,EAAWc,SAAUA,EAAUiE,OAAQiK,KAEtG9P,IAAAC,cAAA,OAAKC,UAAU,wBACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,gBAC7BD,IAAAC,cAACmB,EAAU,CAAC8B,KAAMA,EAAMH,SAAUsM,EAAezN,SAAUA,EAAUiE,OAAQiK,EAAUjI,UAAU,MAGzG7H,IAAAC,cAAA,OAAKC,UAAU,gBAAgBkQ,QAnGlC,SAAClJ,GACV+C,OAAOC,SAAQ,GAAAvG,OAAMsG,OAAOC,SAASmG,SAAQ,MAAA1M,OAAKsG,OAAOC,SAASoG,KAAI,mCAAA3M,OAAkCoG,EAAgBO,IAAI,YAAW,eAAA3G,OAAcoG,EAAgBO,IAAI,eAkG7GtK,IAAAC,cAAA,KAAGC,UAAU,aAAYF,IAAAC,cAAA,SAAG,UChLhGe,IAAUC,IAAIC,KACdF,IAAUC,IAAIE,KCMd,SAASoO,GAAYhB,EAAKzM,GAEL,IAAI2N,IAAIxF,OAAOC,SAASzJ,MAAzC,IAGIiT,EAAY,IAAI1J,gBAAgBC,OAAOC,SAASC,KAAKC,MAAM,KAAK,IACpEsJ,EAAU/D,IAAIpB,EAAKzM,GACnB4G,QAAQC,IAAI+K,EAAU9D,YAItB3F,OAAOC,SAASzJ,KAAO,YAAciT,EAAU9D,WAG/ClH,QAAQC,IAAIsB,OAAOC,UACnBD,OAAOC,SAAS2F,SAGpB,SAASvB,GAAepH,GACF,MAAdA,EAAMqH,KACRC,MAAM,0dA0JGoI,OAtJf,SAAgBvV,GAAO,IAAAgB,EACeC,oBAAS,GAAKC,EAAAC,YAAAH,EAAA,GAAzCuT,EAASrT,EAAA,GAAEsT,EAAYtT,EAAA,GAAAG,EACEJ,mBAAS,GAAEK,EAAAH,YAAAE,EAAA,GAApCoS,EAAQnS,EAAA,GAAaiB,GAAAjB,EAAA,GACRL,mBAAS,IAAEuB,EAAArB,YAAAoB,EAAA,GAAxBgH,EAAE/G,EAAA,GAAE8K,EAAK9K,EAAA,GAAAqI,EACU5J,mBAAS,GAAE6J,EAAA3J,YAAA0J,EAAA,GAA9BrB,EAAKsB,EAAA,GAAEyC,EAAQzC,EAAA,GAAAa,EACA1K,mBAAS,GAAE2K,EAAAzK,YAAAwK,EAAA,GAA1B4G,EAAG3G,EAAA,GAAE4G,EAAM5G,EAAA,GAAA+I,EACU1T,mBAAS,GAAE2T,EAAAzT,YAAAwT,EAAA,GAAhClC,EAAMmC,EAAA,GAAElC,EAASkC,EAAA,GAAAG,EACE9T,mBAAS,GAAE+T,EAAA7T,YAAA4T,EAAA,GAA9BN,EAAKO,EAAA,GAAEN,EAAQM,EAAA,GAAAQ,EACUvU,mBAAS,GAAEwU,EAAAtU,YAAAqU,EAAA,GAApCX,EAAQY,EAAA,GAAEX,EAAWW,EAAA,GAEtB/M,EAAkB,IAAIC,gBAAgBC,OAAOC,SAASC,KAAKC,MAAM,KAAK,IACtEyE,EAAa/D,aAAagE,QAAQ,aAClCC,EAAYC,KAAKC,MAAMJ,GAEvBK,EAAYnF,EAAgBO,IAAI,YAChC0J,EAAajK,EAAgBO,IAAI,aAEjChH,EAAOyL,EAAqB,UAAE/M,OAAO,SAACC,GAAU,OAAOA,EAAW,OAAMiN,IAAY,GACpF+E,EAAQlF,EAAqB,UAAE/M,OAAO,SAACC,GAAU,OAAOA,EAAW,OAAM+R,IAAa,GAEtFyC,EAAmB1H,EAAmB,QAAa,UAErDnN,EAAW0B,EAAe,SAC3BzB,IAAI,SAACI,GAAI,OAAKA,EAAK,KACnBD,OAAO,SAACF,EAAOC,EAAOqN,GACrB,OAAOA,EAAK/L,QAAQvB,KAAWC,IAEhCF,IAAI,SAACI,EAAMF,GAAK,MAAK,CAACE,EAAI,GAAA0B,OAAK5B,MAE1BmB,EAAOI,EAAW,KAClB4Q,EAAQD,EAAY,KACpB5E,EAAgB/L,EAAe,SAC/B6Q,EAAiBF,EAAgB,SACjCnT,EAAYwC,EAAgB,UAC5B8Q,EAAaH,EAAiB,UAEhC3E,EAAaP,EAAqB,UAAElN,IAAI,SAACC,EAAOC,GAAW,OAAOD,EAAY,OAU5EgO,EAAW,CACbC,UAAW,GACXjK,YAAW,SAACkK,GACVC,KAAKF,UAAUhL,KAAKiL,IAEtBE,eAAc,SAACF,GACbC,KAAKF,UAAYE,KAAKF,UAAU/N,OAAO,SAAAmO,GAAQ,OAAIA,IAAaH,KAElE3H,UAAS,SAACtC,EAAWC,GACnBiK,KAAKF,UAAU7E,QAAQ,SAACiF,GACtBA,EAASpK,EAAWC,OAyB5B,OApBAmH,oBAAU,WAON/F,SAASsG,iBAAiB,UAAWY,IACrCK,EAAM7D,aAAagE,QAAQ,OAC3BF,EAAS9D,aAAagE,QAAQ,UAC9B+E,EAAO/I,aAAagE,QAAQ,QAC5BiF,EAAUjJ,aAAagE,QAAQ,WAC/BiH,EAASjL,aAAagE,QAAQ,UAC9BqH,EAAYrL,aAAagE,QAAQ,aACjC+G,GAAa,IAId,IAEI7V,IAAAC,cAAA,OAAKC,UAAU,OAClB0V,EA+DE5V,IAAAC,cAACyU,GAAO,CAACI,SAAUA,IA9Df9U,IAAAC,cAAAD,IAAAsL,SAAA,KACJtL,IAAAC,cAAA,OAAKC,UAAU,kBACXF,IAAAC,cAAA,OAAKC,UAAU,gBACXF,IAAAC,cAAA,MAAIC,UAAU,YAAWF,IAAAC,cAAA,SAAG,YAC5BD,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,gCAChCD,IAAAC,cAAA,KAAGmQ,QAAS,WAAOnG,OAAOC,SAASzJ,KAAI,mCAAAkD,OAAoCoG,EAAgBO,IAAI,YAAW,eAAA3G,OAAcoG,EAAgBO,IAAI,eAAiBjK,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UAAUP,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,UAEnPD,IAAAC,cAAA,OAAKC,UAAU,gCACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,oBAC7BD,IAAAC,cAAA,KAAGC,UAAU,iBAAe,WAAAyD,OAAamS,IACzC9V,IAAAC,cAAA,KAAGC,UAAU,oBAAkB,WAAAyD,OAAauS,IAC5ClW,IAAAC,cAACqU,GAAgB,CAAChR,KAAMmT,EAAkB7U,SAAUA,EAAUiE,OAAQiK,MAGhF9P,IAAAC,cAAA,OAAKC,UAAU,sBACXF,IAAAC,cAAA,OAAKC,UAAU,gBACXF,IAAAC,cAAA,SAAOC,UAAU,iBAAiBqQ,IAAI,aAAYvQ,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,iBACxDD,IAAAC,cAAA,UAAQmF,KAAK,YAAYrE,GAAG,YAAYyP,SA9D5B,SAACtJ,GACrBqI,GAAY,WAAYrI,EAAMxD,OAAO5B,SA8DxBwN,EAAWzN,IAAI,SAAAsJ,GACf,OAAQA,IAAMpB,EAAgBO,IAAI,YAAetK,IAAAC,cAAA,UAAQ6B,MAAOqJ,EAAGsF,UAAQ,GAAEtF,GAAcnL,IAAAC,cAAA,UAAQ6B,MAAOqJ,GAAIA,SAInHnL,IAAAC,cAAA,MAAIC,UAAU,YAAWF,IAAAC,cAAA,SAAIqD,EAAW,OACxCtD,IAAAC,cAAA,KAAGmQ,QAAS,WAAOnG,OAAOC,SAASzJ,KAAI,kCAAAkD,OAAmCoG,EAAgBO,IAAI,eAAiBjK,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UAAUP,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,UAErMD,IAAAC,cAAA,OAAKC,UAAU,4BACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,oBAC7BD,IAAAC,cAAA,KAAGC,UAAU,iBAAe,WAAAyD,OAAaiH,IACzC5K,IAAAC,cAAA,KAAGC,UAAU,oBAAkB,WAAAyD,OAAakH,IAC5C7K,IAAAC,cAAC2I,EAAS,CAAC1F,KAAMA,EAAMH,SAAUsM,EAAevO,UAAWA,EAAWc,SAAUA,EAAUiE,OAAQiK,KAEtG9P,IAAAC,cAAA,OAAKC,UAAU,wBACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,gBAC7BD,IAAAC,cAACmB,EAAU,CAAC8B,KAAMA,EAAMH,SAAUsM,EAAezN,SAAUA,EAAUiE,OAAQiK,MAGrF9P,IAAAC,cAAA,OAAKC,UAAU,wBACXF,IAAAC,cAAA,OAAKC,UAAU,gBACXF,IAAAC,cAAA,SAAOC,UAAU,iBAAiBqQ,IAAI,aAAYvQ,IAAAC,cAAA,SAAGD,IAAAC,cAAA,SAAG,iBACxDD,IAAAC,cAAA,UAAQmF,KAAK,YAAYrE,GAAG,YAAYyP,SAjF3B,SAACtJ,GACtBqI,GAAY,YAAarI,EAAMxD,OAAO5B,SAiFzBwN,EAAWzN,IAAI,SAAAsJ,GACf,OAAQA,IAAMpB,EAAgBO,IAAI,aAAgBtK,IAAAC,cAAA,UAAQ6B,MAAOqJ,EAAGsF,UAAQ,GAAEtF,GAAcnL,IAAAC,cAAA,UAAQ6B,MAAOqJ,GAAIA,SAIpHnL,IAAAC,cAAA,MAAIC,UAAU,YAAWF,IAAAC,cAAA,SAAIgU,EAAY,OACzCjU,IAAAC,cAAA,KAAGmQ,QAAS,WAAOnG,OAAOC,SAASzJ,KAAI,kCAAAkD,OAAmCoG,EAAgBO,IAAI,cAAgBjK,MAAO,CAAEC,eAAgB,OAAQC,MAAO,UAAUP,IAAAC,cAAA,KAAGC,UAAU,iBAAgBF,IAAAC,cAAA,SAAG,UAEpMD,IAAAC,cAAA,OAAKC,UAAU,4BACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,oBAC7BD,IAAAC,cAAA,KAAGC,UAAU,iBAAe,WAAAyD,OAAaiQ,IACzC5T,IAAAC,cAAA,KAAGC,UAAU,oBAAkB,WAAAyD,OAAamQ,IAC5C9T,IAAAC,cAAC2I,EAAS,CAAC1F,KAAMgR,EAAOnR,SAAUoR,EAAgBrT,UAAWsT,EAAYxS,SAAUA,EAAUiE,OAAQiK,EAAUjI,UAAU,KAE7H7H,IAAAC,cAAA,OAAKC,UAAU,wBACXF,IAAAC,cAAA,KAAGC,UAAU,cAAaF,IAAAC,cAAA,SAAG,gBAC7BD,IAAAC,cAACmB,EAAU,CAAC8B,KAAMgR,EAAOnR,SAAUoR,EAAgBvS,SAAUA,EAAUiE,OAAQiK,EAAUjI,UAAU,kBC7GtGkP,OAjDf,WAKE,OAJgBC,aAAqB,CACnCC,SAAU,mBAIVjX,IAAAC,cAAA,OAAKC,UAAU,OACXF,IAAAC,cAACiX,IAAM,KACLlX,IAAAC,cAACkX,IAAK,CAACC,KAAK,UACVpX,IAAAC,cAACF,EAAK,OAERC,IAAAC,cAACkX,IAAK,CAACC,KAAK,QACVpX,IAAAC,cAACwO,EAAG,OAENzO,IAAAC,cAACkX,IAAK,CAACC,KAAK,YACVpX,IAAAC,cAAC0T,GAAO,OAEV3T,IAAAC,cAACkX,IAAK,CAACC,KAAK,WACVpX,IAAAC,cAAC0V,GAAM,OAET3V,IAAAC,cAACkX,IAAK,CAACC,KAAK,WACVpX,IAAAC,cAAC2W,GAAM,OAET5W,IAAAC,cAACkX,IAAK,CAACC,KAAK,sBACVpX,IAAAC,cAACF,EAAK,OAERC,IAAAC,cAACkX,IAAK,CAACC,KAAK,oBACVpX,IAAAC,cAACwO,EAAG,OAENzO,IAAAC,cAACkX,IAAK,CAACC,KAAK,wBACVpX,IAAAC,cAAC0T,GAAO,OAEV3T,IAAAC,cAACkX,IAAK,CAACC,KAAK,uBACVpX,IAAAC,cAAC0V,GAAM,OAET3V,IAAAC,cAACkX,IAAK,CAACC,KAAK,uBACVpX,IAAAC,cAAC2W,GAAM,OAET5W,IAAAC,cAACkX,IAAK,CAACC,KAAK,gBACVpX,IAAAC,cAACyQ,GAAI,OAEP1Q,IAAAC,cAACkX,IAAK,CAACE,OAAK,EAACD,KAAK,KAChBpX,IAAAC,cAACyQ,GAAI,UClDF4G,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC3X,EAAA6J,EAAA,GAAA+I,KAAA5S,EAAA4X,KAAA,WAAqBhF,KAAK,SAAAnJ,GAAiD,IAA9CoO,EAAMpO,EAANoO,OAAQC,EAAMrO,EAANqO,OAAQC,EAAMtO,EAANsO,OAAQC,EAAMvO,EAANuO,OAAQC,EAAOxO,EAAPwO,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,MCCDQ,IAASC,WAAW5Q,SAASnB,eAAe,SACpDgS,OACHjY,IAAAC,cAACD,IAAMkY,WAAU,KACflY,IAAAC,cAACkY,IAAM,CAAClB,SAAS,gBACfjX,IAAAC,cAAC8W,GAAG,SAQVO","file":"static/js/main.3de52aef.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/clonal.34a92a85.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/migration.11b02e60.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/map.0c0c2213.jpeg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAj0lEQVR4nO2USwrEIBAF6xJp5kg5dyQM+aySRfa5iMNAC0ISBE0v8nnQKCpVoI3wtLSAsxQ4oLEUXD8d8LUUeK1XcKMraoARkB2B6F5RV/UKnBUYBKJrXs9kRyJQGON5EBelAqYIHmoBPqXwI0kWPPUNCDBoSeLHdZYt6I845oJ15yF9Zv1Zm9QnSVZl3SQ/PmdfIXJmioIAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/logo.97812ed6.png\";","module.exports = __webpack_public_path__ + \"static/media/settings-gear.80b88740.svg\";","import React, { useState, useEffect } from 'react';\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\n\nimport clonal from \"../assets/clonal.jpeg\";\nimport migration from \"../assets/migration.jpeg\";\n\nfunction About() {\n    return (\n        <div className='about'>\n            <div className='panel about'>\n                <div className='aboutcontainer'>\n                    <p className='backarrow'><b><Link to=\"\" style={{ textDecoration: 'none', color: 'black'}}>&#8592; home</Link></b></p>\n                    <h1 className='abouttitle'>Enter MACH2</h1>\n                </div>\n                <p><b>MACH2</b> is a personalized tool to visualize cancer metastasis. It is a sequel to MACHINA, an algorithm designed to solve the Parsimonious Migration History Problem.</p>\n                <p><b>The Parsimonious Migration History Problem:</b> Given current oncological mutations at their respective anatomical sites, how can we infer their mutation tree as well as a network of anatomical sites inferring metastases?</p>\n                <p><b>Visualization Format:</b> All structures have directed edges.</p>\n                <ul style={{columns: 1}}>\n                    <li><p><b>Clonal Tree (Left):</b> This is a tree of oncological mutations. Each node in this tree is a variant allele in the cancer patient. Each edge is a mutation from one variant to another.</p></li>\n                    <li><p><b>Migration Graph (Right):</b> Each node in the clonal tree has a tag with an anatomical location inferred using <a href='https://en.wikipedia.org/wiki/Maximum_parsimony_(phylogenetics)'>Maximum Parsimony</a>. The clonal tree is compressed into a migration graph where each node represents an anatomical location, and each edge is a metastasis (e.g. a migration) between two anatomical locations.</p></li>\n                    <li><p><b>Summary:</b> You can also view a summary migration graph that is computed by unioning edges across migration graphs in each solution. Edges are weighted by the number of solutions they appear in.</p></li>\n                </ul>\n                <div class=\"image-container\">\n                    <img className=\"aboutimg\" src={clonal} alt=\"Image 1\"/>\n                    <img className=\"aboutimg\" src={migration} alt=\"Image 2\"/>\n                </div>\n                <p><b>Generating inputs: </b>We have provided a <a href=\"https://github.com/vikramr2/json_compression\">json compression</a> program that takes an output directory from MACHINA that contains <b>.tree</b> files and their corresponding <b>.labeling</b> files, and returns a <b>.json</b> file that can be used as input for this visualizer. For more information, see this <a href='https://github.com/vikramr2/json_compression/blob/main/README.md'>README</a>. Output from any algorithm that solves the PMH problem will be accepted provided that it is in a JSON format as shown in the README.</p>\n                <p><b>Questions? Contact</b></p>\n                <ul id=\"singlecol\">\n                    <li><p>Akul Joshi (<a href=\"mailto:akulj2@illinois.edu\">akulj2@illinois.edu</a>)</p></li>\n                    <li><p>Vikram Ramavarapu (<a href=\"mailto:vikramr2@illinois.edu\">vikramr2@illinois.edu</a>)</p></li>\n                    <li><p>Mohammed El-Kebir (<a href=\"mailto:melkebir@illinois.edu\">melkebir@illinois.edu</a>)</p></li>\n                </ul>\n            </div>\n        </div>\n    );\n}\n\nexport default About;","import React from 'react';\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(COSEBilkent);\nCytoscape.use(dagre);\n\nfunction ClonalTree(props) {\n  var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n  const colorPalette = [\n    \"#a6cee3\",\n    \"#1f78b4\",\n    \"#b2df8a\",\n    \"#33a02c\",\n    \"#fb9a99\",\n    \"#e31a1c\",\n    \"#fdbf6f\",\n    \"#ff7f00\",\n    \"#cab2d6\",\n    \"#6a3d9a\",\n    \"#ffff99\",\n    \"#b15928\"\n  ]\n  const ncolors = colorPalette.length;\n\n  function getColor(label) {\n    if (!label) return '#000';\n    let color = props.coloring.map((value, index) => {\n      if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n    return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n  }\n\n  const [width, setWith] = useState(\"100%\");\n  const [height, setHeight] = useState(\"100%\");\n\n  function onlyUnique(value, index, array) {\n    return array.indexOf(value) === index;\n  }\n\n  function findLabel(node) {\n    return props.labeling.map((value, index) => {\n      if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n  }\n\n  const nodes = props.tree.flat().filter(onlyUnique).map((value, index) => {\n    return { data: { id: value, label: findLabel(value), type: \"ip\"} };\n  });\n  const edges = props.tree.map((value, index) => {\n    return { data: { source: value[0], target: value[1], label: `${value[0]}->${value[1]}`, migration: `${findLabel(value[0])}->${findLabel(value[1])}`} }\n  })\n\n  const [graphData, setGraphData] = useState({\n    nodes: nodes,\n    edges: edges\n  });\n\n  let styleSheet = [\n    {\n      selector: \"node\",\n      style: {\n        backgroundColor: \"#4a56a6\",\n        width: 15,\n        height: 15,\n        label: \"data(id)\",\n\n        // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n        // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n        // \"text-valign\": \"center\",\n        // \"text-halign\": \"center\",\n        \"overlay-padding\": \"6px\",\n        \"z-index\": \"10\",\n        //text props\n        //\"text-outline-color\": \"#4a56a6\",\n        \"text-outline-width\": \"2px\",\n        color: \"white\",\n        fontSize: 15\n      }\n    },\n    {\n      selector: \"node:selected\",\n      style: {\n        \"border-width\": \"6px\",\n        \"border-color\": \"#AAD8FF\",\n        \"border-opacity\": \"0.5\",\n        \"background-color\": \"#77828C\",\n        width: 50,\n        height: 50,\n        //text props\n        \"text-outline-color\": \"#77828C\",\n        \"text-outline-width\": 8\n      }\n    },\n    {\n      selector: \"edge\",\n      style: {\n        width: 3,\n        // \"line-color\": \"#6774cb\",\n        \"line-color\": \"#AAD8FF\",\n        \"target-arrow-color\": \"#6774cb\",\n        \"target-arrow-shape\": \"triangle\",\n        \"curve-style\": \"bezier\"\n      }\n    }\n  ];\n\n  props.coloring.map((value, index) => {\n    styleSheet.push({\n      selector: `node[label='${value[0]}']`,\n      style: {\n        backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n      }\n    })\n  })\n\n  edges.map((value, index) => {\n    let source = value.data.source;\n    let target = value.data.target;\n    styleSheet.push({\n      selector: `edge[label='${source}->${target}']`,\n      style: {\n        'line-fill': 'linear-gradient',\n        'line-gradient-stop-colors': `${getColor(findLabel(source))} ${getColor(findLabel(target))}`,\n        'line-gradient-stop-positions': '33% 66%',\n        \"target-arrow-color\": `${getColor(findLabel(target))}`\n      }\n    })\n  })\n\n  let myCyRef;\n  const layout = {\n    name: \"dagre\",\n    fit: true,\n    // circle: true,\n    directed: true,\n    padding: 10,\n    // spacingFactor: 1.5,\n    animate: true,\n    animationDuration: 1000,\n    avoidOverlap: true,\n    nodeDimensionsIncludeLabels: false,\n    ready: function() {\n      const listener = (eventName, eventData) => {\n        // Respond to event from other graph here\n        // For example:\n        if (eventName === 'selectNodeCl') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n            width: 10\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'deselectNodeCl') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n            width: 3\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'hoverNodeCl') {\n          myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n            width: 10\n          })\n        }\n        if (eventName === 'dehoverNodeCl') {\n          myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n            width: 3\n          })\n        }\n        if (eventName === 'selectNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let label = eventData.label;\n\n          myCyRef.$(`edge[label='${label}']`).css({\n            width: 10\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'deselectNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let label = eventData.label;\n\n          myCyRef.$(`edge[label='${label}']`).css({\n            width: 3\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'hoverNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let source = eventData.nodeId;\n\n          myCyRef.$(`node[id='${source}']`).css({\n            width: 25,\n            height: 25\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'dehoverNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let source = eventData.nodeId;\n\n          myCyRef.$(`node[id='${source}']`).css({\n            width: 15,\n            height: 15\n          })\n          node.trigger('select');\n        }\n      };\n      props.evtbus.addListener(listener);\n    }\n  };\n\n  return <CytoscapeComponent\n    elements={CytoscapeComponent.normalizeElements(graphData)}\n    // pan={{ x: 200, y: 200 }}\n    style={{ width: width, height: height }}\n    zoomingEnabled={true}\n    maxZoom={3}\n    minZoom={0.1}\n    autounselectify={false}\n    boxSelectionEnabled={true}\n    layout={layout}\n    stylesheet={styleSheet}\n    cy={cy => {\n      myCyRef = cy;\n\n\n      cy.on(\"tap\", \"node\", evt => {\n        var node = evt.target;\n      });\n\n      cy.on('mouseover', 'node', function(event) {\n        // Get the node information\n        var node = event.target;\n        var label = node.data('label');\n        \n        // Create the div element\n        var div = document.createElement(\"div\");\n        div.setAttribute(\"class\", \"panel popup\");\n\n        div.innerHTML = `<p>${label}&nbsp;</p>`;\n      \n        // Position the div element near the node\n        const canvas = document.getElementsByTagName('canvas')[0];\n        div.style.position = \"absolute\";\n        div.style.top = (node.renderedPosition('y') + canvas.height*0.5 + 30) + 'px';\n        div.style.left = node.renderedPosition('x') + 'px';\n        if (props.rightcol) {\n          div.style.left = 'calc(50% + ' + node.renderedPosition('x') + 'px)';\n        }\n      \n        // Add the div element to the page\n        document.body.appendChild(div);\n\n        const nodeId = event.target.id();\n\n        var labeltag = document.querySelector(`#${label}`);\n        if (labeltag !== null) {\n          labeltag.style.opacity = 1;\n          labeltag.style.zIndex = 100;\n          labeltag.style.fontWeight = 'bold';\n        }\n\n        props.evtbus.fireEvent('hoverNodeSC', { nodeId });\n      });\n\n      cy.on('mouseout', 'node', function(event){\n        // Remove the div element on mouseout\n        var div = document.querySelector('.panel.popup');\n        if (document.body.contains(div)) {\n          document.body.removeChild(div);\n        }\n\n        const nodeId = event.target.id();\n\n        var node = event.target;\n        var label = node.data('label');\n\n        var labeltag = document.querySelector(`#${label}`);\n        if (labeltag !== null) {\n          labeltag.style.opacity = 0.7;\n          labeltag.style.zIndex = 1;\n          labeltag.style.fontWeight = 'normal';\n        }\n\n        props.evtbus.fireEvent('dehoverNodeSC', { nodeId });\n      });\n\n      cy.on('mouseover', 'edge', function(event) {\n        const { target } = event;\n        target.css({\n          width: 10\n        })\n        const nodeId = event.target.id();\n        let source = findLabel(target.data().source);\n        let sink = findLabel(target.data().target);\n        let label = target.data().label;\n        props.evtbus.fireEvent('selectNode', { nodeId, source, sink, target});\n        props.evtbus.fireEvent('selectNodeSC', { nodeId, source, sink, target, label});\n      });\n\n      cy.on('mouseout', 'edge', function(event) {\n        const { target } = event;\n        target.css({\n          width: 3\n        })\n        const nodeId = event.target.id();\n        let source = findLabel(target.data().source);\n        let sink = findLabel(target.data().target);\n        let label = target.data().label;\n        props.evtbus.fireEvent('deselectNode', { nodeId, source, sink, target});\n        props.evtbus.fireEvent('deselectNodeSC', { nodeId, source, sink, target, label});\n      });\n    }}\n    abc={console.log(\"myCyRef\", myCyRef)}\n  />\n}\n\nexport default ClonalTree;","import React from 'react';\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\nfunction Migration(props) {\n      var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n      const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n      ]\n      const ncolors = colorPalette.length;\n    \n      const [width, setWith] = useState(\"100%\");\n      const [height, setHeight] = useState(\"100%\");\n    \n      function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n      }\n    \n      function findLabel(node) {\n        return props.labeling.map((value, index) => {\n          if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n      }\n\n      function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n          if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n      }\n    \n      let nodes = props.tree.flat().filter(onlyUnique).map((value, index) => {\n        return { data: { id:  findLabel(value), label: findLabel(value), type: \"ip\"} };\n      });\n      let edges = props.migration.map((value, index) => {\n        return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n      })\n      for (const [i, edge] of edges.entries()) {\n        if (edge.data.label == 1) {\n          edges[i].data.label = \"\";\n        }\n      }\n    \n      const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n      });\n\n      let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#fff\",\n            'border-width': 10,\n            shape: \"rectangle\",\n            width: 100,\n            height: 50,\n            label: \"data(label)\",\n    \n            // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"text-valign\": \"center\",\n            // \"text-halign\": \"center\",\n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            //text props\n            //\"text-outline-color\": \"#4a56a6\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15,\n            'text-valign': 'center',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        }\n      ];\n\n      props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            'border-color': hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n      })\n\n      edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        styleSheet.push({\n          selector: `edge[id='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(target)}`\n          }\n        })\n      })\n    \n      let myCyRef;\n\n      const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n      let rotated = props.rightcol ? queryParameters.get(\"rotated2\") === \"true\" : queryParameters.get(\"rotated\") === \"true\";\n      if (rotated === null) {\n        rotated = false;\n      }\n\n      const layout = {\n        name: \"dagre\",\n        fit: true,\n        circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        transform: (node, position) => {\n          return {\n            x: rotated ? -2*position.y : position.x,\n            y: rotated ? position.x : position.y\n          }\n        },\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'selectNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[id='${eventData.nodeId}']`).css({\n                width: 10\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'deselectNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[id='${eventData.nodeId}']`).css({\n                width: 3\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'hoverNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`node[id='${eventData.nodeId}']`).css({\n                'border-width': 20,\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'dehoverNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`node[id='${eventData.nodeId}']`).css({\n                'border-width': 10,\n              })\n              edge.trigger('select');\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n      };\n\n      let mu = edges.length;\n      let gamma = edges.filter((item) => { return item.data.label !== '' }).length\n\n      if (!props.rightcol) {\n        localStorage.setItem(\"mu\", mu);\n        localStorage.setItem(\"gamma\", gamma);\n      } else {\n        localStorage.setItem(\"mu2\", mu);\n        localStorage.setItem(\"gamma2\", gamma);\n      }\n    \n      return <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n          });\n\n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 20,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 10,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n      />\n}\n\nexport default Migration;","import React from 'react';\nimport { useState, useEffect, useRef } from \"react\";\nimport map from '../assets/map.jpeg';\n\nfunction Legend(props) {\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n    let fetchColor = (label) => {\n        let ret = 0;\n        props.coloring.forEach(l => {\n            if (l[0] === label) {\n                ret = l[1];\n            }\n        })\n        return ret;\n    }\n\n    const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    console.log(colorPalette[parseInt(fetchColor('breast')) % ncolors]);\n\n    if (props.coord_map === undefined) {\n        return <></>/*ul className=\"legendlist\">\n            {props.coloring.map((l) => \n                <li className=\"legendtext\" style={{color: hexColorRegex.test(l[1]) ? l[1] : colorPalette[parseInt(l[1]) % ncolors], liststyle: \"circle\"}}>\n                    <span><p style={{color: \"black\"}}>{l[0]}</p></span>\n                </li>)}\n        </ul>*/\n    } else {\n        return <div style={{ position: 'relative', height: 0 }}>\n            <img \n                src={map}\n                className='paneltitle bodymap'\n            />\n        </div>\n    }\n}\n\nexport default Legend;","import React from 'react';\nimport { useState, useEffect, useRef } from 'react'\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nvar cyCanvas = require('cytoscape-canvas');\n\nCytoscape.use(cyCanvas);\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\nfunction MigrationMap(props) {\n    const [canvheight, setCanvHeight] = useState(0)\n    const [disp, setDisp] = useState(false);\n    let count = 0;\n\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n    var findCoords = (nodeId) => {\n        let found = props.coord_map.filter(coord => coord[0] == findLabel(nodeId))[0];\n        return {x: found[1][1]+15, y: found[1][0]+30}\n    }\n\n    const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n    }\n\n    function findLabel(node) {\n        return props.labeling.map((value, index) => {\n            if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n    }\n\n    function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n            if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        if (color === undefined) {\n            return '#ffffff'\n        }\n        return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n    }\n\n    let nodes = props.tree.flat().filter(onlyUnique).map((value, index) => {\n    return { data: { id:  findLabel(value), label: findLabel(value), type: \"ip\" }, position: findCoords(value) };\n    });\n    //nodes.push({data: {id: 'dummy', label: 'dummy', type: \"dummy\"}, position: {x: 0, y:0}})\n    let edges_t = props.tree.map((value, index) => {\n        return { data: { source: findLabel(value[0]), target: findLabel(value[1]), label: 1, id: `${findLabel(value[0])}->${findLabel(value[1])}`, type:\"actual\"} }\n    })\n\n    let edges = [];\n\n    for (const [i, edge] of edges_t.entries()) {\n        let flag = false;\n        for (const [j, edge2] of edges.entries()) {\n            if (edge.data.source == edge2.data.source && edge.data.target == edge2.data.target) {\n                edges[j].data.label++;\n                flag = true;\n                break;\n            }\n        }\n        if (!flag && edge.data.source !== edge.data.target) edges.push(edges_t[i]);\n    }\n\n    for (const [i, edge] of edges.entries()) {\n        if (edge.data.label == 1) {\n            edges[i].data.label = \"\";\n        }\n    }\n\n    console.log(edges);\n\n    const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n    });\n\n    let styleSheet = [\n        {\n            selector: \"node\",\n            style: {\n                backgroundColor: \"#ffffff\",\n                width: 10,\n                height: 10,\n                // label: \"data(id)\",\n                // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n                // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n                // \"text-valign\": \"center\",\n                // \"text-halign\": \"center\",\n                \"overlay-padding\": \"6px\",\n                \"z-index\": \"10\",\n                //text props\n                //\"text-outline-color\": \"#4a56a6\",\n                //\"text-outline-width\": \"2px\",\n                color: \"white\",\n                fontSize: 15\n            }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"1\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 7,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        },\n        {\n            selector: \"edge[type='label']\",\n            style: {\n                width: 2,\n                \"curve-style\": \"haystack\"\n            }\n        },\n        {\n            selector: \"node[type='label']\",\n            style: {\n                width: 2,\n                height: 2\n            }\n        },\n        {\n            selector: \"edge[type='label']\",\n            style: {\n                \"line-color\": '#bbb'\n            }\n        }\n    ];\n\n    props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n    })\n\n    edges.map((value, index) => {\n        if (value.data.type === \"actual\") {\n            let source = value.data.source;\n            let target = value.data.target;\n            console.log(value.data.id);\n            console.log(source);\n            styleSheet.push({\n            selector: `edge[id='${source}->${target}']`,\n            style: {\n                'line-fill': 'linear-gradient',\n                'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n                'line-gradient-stop-positions': '33% 66%',\n                \"target-arrow-color\": `${getColor(target)}`\n            }\n            })\n        }\n    })\n\n    let myCyRef;\n    const layout = {\n        name: \"preset\",\n        fit: false,\n        // circle: true,\n        // directed: true,\n        // padding: 50,\n        // spacingFactor: 1.5,\n           animate: true,\n           animationDuration: 1000,\n        // avoidOverlap: true,\n        // nodeDimensionsIncludeLabels: false\n    };\n\n    useEffect(() => {\n        props.coord_map.map((l, index) => {\n            console.log((index + 1)*(100/(2*props.coord_map)))\n            nodes.push({\n                data: {\n                    id: `labelnode${index}`,\n                    label: `labelnode${index}`,\n                    type: \"label\"\n                },\n                position: {\n                    x: index % 2 == 0 ? 5 : 310,\n                    y: (index + 1)*Math.floor(canvheight/(props.coord_map.length)/1.75)\n                }\n            })\n            edges.push({\n                data: {\n                    source: `labelnode${index}`,\n                    target: l[0],\n                    label: 1,\n                    id: `labelnode${index}->${l[0]}`,\n                    type: \"label\"\n                }\n            })\n        })\n\n        for (const [i, edge] of edges.entries()) {\n            if (edge.data.label == 1) {\n                edges[i].data.label = \"\";\n            }\n        }\n\n        setGraphData({\n            nodes: nodes,\n            edges: edges\n        })\n\n        setDisp(true);\n    }, [canvheight])\n\n    document.addEventListener(\"DOMContentLoaded\", function(event) { \n        let canv = document.querySelector('.migrationmap')\n        setCanvHeight(canv.offsetHeight);\n    });\n\n    return <CytoscapeComponent\n        className='migrationmap'\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n\n          //var layer = cy.cyCanvas();\n          //var canvas = layer.getCanvas();\n          //var ctx = canvas.getContext('2d');\n    \n          console.log(\"EVT\", cy);\n\n          cy.userZoomingEnabled( false );\n          cy.userPanningEnabled( false );\n          cy.nodes().ungrabify();\n\n          cy.nodes().forEach(function(node) {\n            var pos = node.position();\n            if (node.data().type === 'label') {\n                pos.y /= 75\n                //pos.y *= canvheight/(props.coord_map.length*2)\n                console.log(Math.floor(canvheight/(props.coord_map.length)))\n                pos.y *= Math.floor(canvheight/(props.coord_map.length))\n            }\n            console.log(node.position())\n          });\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n            console.log(\"EVT\", evt);\n            console.log(\"TARGET\", node.data());\n            console.log(\"TARGET TYPE\", typeof node[0]);\n          });\n\n          cy.on('mouseover', \"edge[type='actual']\", function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', \"node[type='ip']\", function(event) {\n            const { target } = event;\n            target.css({\n                width: 15,\n                height: 15,\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', \"node[type='ip']\", function(event) {\n            const { target } = event;\n            target.css({\n                width: 10,\n                height: 10,\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', \"edge[type='actual']\", function(event) {\n            const { target } = event;\n            target.css({\n              width: 7\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n\n          const positions = {};\n            cy.nodes().forEach((node) => {\n                positions[node.data().id] = node.position();\n          });\n          console.log(positions);\n\n          if (disp) {\n            cy.nodes().forEach((node) => {\n                count++;\n                console.log(count);\n                if (node.data().type === 'label' && node.renderedPosition('y') > 0) {\n                    let index = parseInt(node.data().id.slice(-1));\n                    let label = props.coord_map[index][0]\n\n                    var div = document.createElement(\"div\");\n                    div.setAttribute(\"class\", \"panel label\");\n\n                    div.innerHTML = `<ul className=\"legendlist\"><li><span><p>${label}</p></span></li></ul>`;\n                \n                    // Position the div element near the node\n                    const canvas = document.querySelector('.rightcolumn');\n                    console.log(canvas.getBoundingClientRect());\n                    div.style.position = \"absolute\";\n                    \n                    let leftPos = `calc(${node.renderedPosition('x') + 'px'} + 70% + 20px `\n                    if (index % 2 == 1) {\n                        leftPos += \"- 100px\";\n                    }\n                    leftPos += \")\";\n\n                    div.id = label;\n\n                    div.style.top = (node.renderedPosition('y') + canvas.getBoundingClientRect().top/2 - 15) + 'px';\n                    div.style.left = leftPos; \n                    div.style.opacity = 0.7;\n\n                    document.body.appendChild(div);\n                }\n            })\n          }\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n    />\n}\n\nexport default MigrationMap;","import React, { useState, useEffect } from \"react\"\nimport Legend from \"./Legend.js\";\nimport MigrationMap from \"./MigrationMap.js\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nfunction RightColumn(props) {\n    if (props.coord_map === undefined) {\n        return <></>\n    } else {\n        return <div className=\"rightcolumn\">\n            <div className={props.coord_map === undefined ? \"panel migration legend top\" : \"panel migration legend top map\"}>\n                <Legend coloring={props.coloring} coord_map={props.coord_map}/>\n                <MigrationMap tree={props.tree} labeling={props.labeling} coloring={props.coloring} coord_map={props.coord_map}/>\n            </div>\n        </div>\n    }\n    \n}\n\nexport default RightColumn;","import React, { useState, useEffect, useContext } from \"react\"\nimport ClonalTree from \"./ClonalTree.js\";\nimport Migration from \"./Migration.js\";\nimport { useHistory } from 'react-router-dom';\nimport Legend from \"./Legend.js\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport RightColumn from \"./RightColumn.js\";\n\nfunction handleKeyPress(event) {\n  if (event.key === '/') {\n    alert('Instructions:\\n\\nToggle and move around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponding anatomical location for the node.\\n\\nSelect different solutions from the dropdown on the top left of the panel.\\n\\nTo compare with another solution, click the [+] on the right. To view the solution space summary, click the [+] on the left.\\n\\nYou can return home by clicking the [X].');\n  }\n}\n\nfunction Viz(props) {\n    const history = useHistory();\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const jsonContents=localStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n\n    const labelName = queryParameters.get(\"labeling\");\n    console.log(\"window thingy:\", window.location.hash)\n    console.log(\"queryParameters:\", queryParameters.size)\n    console.log(\"labelName:\", labelName);\n    \n    // const coloring = data[\"coloring\"]\n\n    const data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n\n    // console.log(data[\"labeling\"])\n    let coloring = data[\"labeling\"]\n      .map((item) => item[1])\n      .filter((value, index, self) => {\n        return self.indexOf(value) === index;\n      })\n      .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n\n    const tree = data[\"tree\"]\n    const tree_labeling = data[\"labeling\"]\n    const migration = data[\"migration\"]\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    let coord_map = wholeData[\"map\"]; \n\n    let insertParam = (key, value) => {\n      const url = new URL(window.location.href);\n      const searchParams = new URLSearchParams(`?${url.hash.slice(1).split('?')[1]}`);\n\n      // Modify or insert the parameter\n      searchParams.set(key, value);\n\n      // Update the hash portion of the URL\n      url.hash = 'viz?' + searchParams.toString();\n      window.location.href = url.toString();      \n\n      window.location.reload();\n    }\n\n    let getParam = (key) => {\n      const url = new URL(window.location.href);\n      const searchParams = new URLSearchParams(`?${url.hash.slice(1).split('?')[1]}`);\n\n      return searchParams.get(key);\n    }\n\n    let handleLabelChange = (event) => {\n      insertParam(\"labeling\", event.target.value);\n    }\n\n    let addTab = (event) => {\n      window.location = `${window.location.protocol}//${window.location.host}/machina-viz/#/dualviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling\")}`;\n    }\n\n    let gotoSummary = (event) => {\n      window.location = `${window.location.protocol}//${window.location.host}/machina-viz/#/sumviz?labeling=${queryParameters.get(\"labeling\")}`;\n    }\n\n    let rotateFn = (event) => {\n      let rotated = queryParameters.get(\"rotated\") === \"true\";\n      insertParam(\"rotated\", !rotated);\n    }\n\n    useEffect(() => {\n      document.addEventListener(\"keydown\", handleKeyPress);\n      setMu(localStorage.getItem(\"mu\"));\n      setGamma(localStorage.getItem(\"gamma\"));\n    });\n\n    const eventBus = {\n      listeners: [],\n      addListener(callback) {\n        this.listeners.push(callback);\n      },\n      removeListener(callback) {\n        this.listeners = this.listeners.filter(listener => listener !== callback);\n      },\n      fireEvent(eventName, eventData) {\n        this.listeners.forEach((listener) => {\n          listener(eventName, eventData);\n        });\n      },\n    };\n\n\n\n    return (\n      <div className=\"viz\">\n        <div className=\"panel tab_add2\" onClick={gotoSummary}><p className='addpanelp'><b>+</b></p></div>\n        <div className=\"panel info\">\n          <div className=\"titlewrapper\">\n            <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n              <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                {labelnames.map(l => \n                  {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                )}\n              </select>\n            </b></p></label>\n            <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n            <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n            <Link to=\"\" style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></Link>\n          </div>\n          <div className=\"columnwrapper\">\n            <div className={coord_map === undefined ? \"leftcolumn nolegend\" : \"leftcolumn\"}>\n              <div className=\"panel migration top\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n                <Migration tree={tree} labeling={tree_labeling} coloring={coloring} migration={migration} evtbus={eventBus}/>\n              </div>\n              <div className=\"panel migration\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus}/>\n              </div>\n            </div>\n            <RightColumn coord_map={coord_map} coloring={coloring} tree={tree} labeling={tree_labeling} evtbus={eventBus}/>\n          </div>\n        </div>\n        <div className=\"panel tab_add\" onClick={addTab}><p className='addpanelp'><b>+</b></p></div>\n      </div>\n    )\n}\n\nexport default Viz;","import React, { useState, useEffect, useContext } from 'react';\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\n\nimport URLs from \"../utils/default_url.json\";\nimport download from \"../assets/download.png\";\n\nimport axios from 'axios'\nimport fileDownload from 'js-file-download'\n\nimport A7 from \"../samples/A7/A7.json\";\nimport A10 from \"../samples/A10/A10.json\";\nimport A22 from \"../samples/A22/A22.json\";\nimport A29 from \"../samples/A29/A29.json\";\nimport A31 from \"../samples/A31/A31.json\";\nimport A32 from \"../samples/A32/A32.json\";\nimport patient1 from \"../samples/patient1/patient1.json\";\nimport patient2 from \"../samples/patient2/patient2.json\";\nimport patient3 from \"../samples/patient3/patient3.json\";\nimport patient4 from \"../samples/patient4/patient4.json\";\nimport patient7 from \"../samples/patient7/patient7.json\";\nimport patient9 from \"../samples/patient9/patient9.json\";\nimport patient10 from \"../samples/patient10/patient10.json\";\nimport tracerx_res from \"../samples/tracerx_res/tracerx_res.json\";\n\nfunction Home(props) {\n    let handleDownload = (url, filename) => {\n      axios.get(url, {\n        responseType: 'blob',\n      })\n      .then((res) => {\n        fileDownload(res.data, filename)\n      })\n    }\n\n    var json_dict = {\n      \"A7\": A7,\n      \"A10\": A10,\n      \"A22\": A22,\n      \"A29\": A29,\n      \"A31\": A31,\n      \"A32\": A32,\n      \"patient1\": patient1,\n      \"patient2\": patient2,\n      \"patient3\": patient3,\n      \"patient4\": patient4,\n      \"patient7\": patient7,\n      \"patient9\": patient9,\n      \"patient10\": patient10,\n      \"tracerx_res\": tracerx_res\n    }\n\n    var default_patients = [\"A7\", \"A10\", \"A22\", \"A29\", \"A31\", \"A32\", \"patient1\", \"patient2\", \"patient3\", \"patient4\", \"patient7\", \"patient9\", \"patient10\", \"tracerx_res\"]\n    var default_dirs = [\"hoadley_2016\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"tracerx\"]\n    var div_elements = []\n    var which_color = true;\n    const color1 = \"#EBEBEB\";\n    const color2 = \"#A3A3A3\";\n    \n    for (let i = 0; i < default_patients.length; i++) {\n        var current_patient = default_patients[i];\n        var current_directory = default_dirs[i];\n        var current_color = (which_color ? color1 : color2)\n\n        var link = URLs[current_patient];\n\n        div_elements.push(<div className=\"patient-container\">\n          <div className=\"patientitem\" style={{ backgroundColor: current_color }}>\n            <li className=\"dirtext\">\n              <p><b>{current_directory}</b></p>\n            </li>\n          </div>\n          <div className=\"patientitem\" style={{ backgroundColor: current_color }}>\n            <Link to={link} style={{ textDecoration: 'none', color: 'black'}} onClick={() => {localStorage.setItem(\"json_data\", JSON.stringify(json_dict[default_patients[i]]))}}>\n              <li className=\"abouttext\">\n                <div className='liwrapper'>\n                  <p className='leftli'><b>{current_patient}</b></p>\n                </div>\n              </li>\n            </Link>\n            <img \n              className='rightli' \n              src={download}\n              onClick={() => handleDownload(`https://raw.githubusercontent.com/vikramr2/machina-viz/main/src/samples/${default_patients[i]}/${default_patients[i]}.json`, `${default_patients[i]}.json`)}\n            >\n            </img>\n          </div>\n        </div>)\n        which_color = !which_color;\n    }\n\n    if (document.getElementsByClassName('label').length > 1) {\n      const elements = document.getElementsByClassName('label');\n      while(elements.length > 0){\n        elements[0].parentNode.removeChild(elements[0]);\n      }\n    }\n\n    let handleChange = (e) => {\n      const reader = new FileReader();\n      const file = e.target.files[0];\n      let json_contents;\n  \n      reader.onload = function(readerEvt) {\n        let jsonString = readerEvt.target.result;\n        json_contents = jsonString;\n\n        const data = JSON.parse(json_contents);\n        let labelnames = data[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n        // let stateObj = {json_contents: json_contents};\n        // history.pushState(stateObj, window.location.href);\n        localStorage.setItem(\"json_data\", json_contents);\n  \n        window.location = window.location + `viz?labeling=${labelnames[0]}`;\n        // history.push(`viz?labeling=${labelnames[0]}`);\n      }\n      // Read the file as a text\n      reader.readAsText(file);\n    }\n\n    return (\n        <div className='home'>\n            <div className='panel home'>\n                <h1><b>Welcome to MACH2!</b></h1>\n                <div className=\"aboutdir\"><Link to=\"about\" style={{ textDecoration: 'none', color: 'black'}}><h4 className='abouttext'>About</h4></Link></div>\n                <p><b>A lightweight visualizer for MACH2, <a href=\"https://www.nature.com/articles/s41588-018-0106-z\">MACHINA's</a> sequel.</b> Use this visualizer to examine a solution space for the parsimonious migration history problem and its respective summary for a given patient. Examples are provided below. You can also upload a JSON file to view a custom input. See the about page for more information.</p>\n                \n                <h3>Examples</h3>\n\n                <div className=\"panel title\">\n                  <ol className=\"patientlist\">\n                    <div className=\"patient-container\">\n                      <div className=\"patientitem\" style={{ backgroundColor: \"#A3A3A3\" }}>\n                        <li className=\"dirtext title\">\n                          <p className='datasettitle'><b>Dataset</b></p>\n                        </li>\n                      </div>\n                      <div className=\"patientitem\" style={{ backgroundColor: \"#A3A3A3\" }}>\n                        <Link to={link} style={{ textDecoration: 'none', color: 'black'}}>\n                          <li className=\"abouttext title\">\n                          <p className='datasettitle'><b>Patient</b></p>\n                          </li>\n                        </Link>\n                      </div>\n                    </div>\n                  </ol>\n                </div>\n\n                <div className=\"panel example\">\n                    <ol className=\"patientlist\">\n                      { \n                        div_elements.map(elem => (\n                          elem\n                        ))\n                      }\n                    </ol>\n              </div>\n            </div>\n            \n            <input \n              type=\"file\"\n              id=\"json_upload\" \n              name=\"json_upload\"\n              accept=\"application/JSON\"\n              onChange={handleChange}/>\n            <label for=\"json_upload\"><div id=\"addnew\" className=\"dot\"><h1 className=\"plus\">+</h1><span class=\"tooltiptext\"><b>Upload Patient JSON</b></span></div></label>\n        </div>\n    );\n}\n\nexport default Home;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport Migration from \"./Migration.js\";\nimport ClonalTree from \"./ClonalTree.js\";\n\nfunction insertParam(key, value) {\n    // Get the current url\n    let currentUrl = new URL(window.location.href);\n  \n    // Change a url parameter using URLSearchParams\n    let urlParams = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    urlParams.set(key, value);\n  \n    // Replace the URL\n    //currentUrl.search = urlParams.toString();\n    window.location.href = '#/dualviz?' + urlParams.toString();\n  \n    // Reload the page\n    window.location.reload();\n}\n\nfunction handleKeyPress(event) {\n    if (event.key === '/') {\n      alert('Instructions:\\n\\nThe dual visualization window allows you to compare different solutions side by side!\\n\\nToggle and move around the migration graphs and clonal trees. Hover over nodes in the clonal trees to find the corresponding anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panel.\\n\\nClick the [+] to compare these solutions with the solution space summary.\\n\\nYou can close out panels by clicking the [X].');\n    }\n  }\n\nfunction DualViz() {\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [mu2, setMu2] = useState(0);\n    const [gamma2, setGamma2] = useState(0);\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    const jsonContents=localStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n\n    const labelName = queryParameters.get(\"labeling\");\n    const labelName2 = queryParameters.get(\"labeling2\");\n\n    const data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n    const data2 = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName2})[0];\n\n    let coloring = data[\"labeling\"]\n      .map((item) => item[1])\n      .filter((value, index, self) => {\n        return self.indexOf(value) === index;\n      })\n      .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n\n    const tree = data[\"tree\"]\n    const tree2 = data2[\"tree\"]\n    const tree_labeling = data[\"labeling\"];\n    const tree_labeling2 = data2[\"labeling\"];\n    const migration = data[\"migration\"];\n    const migration2 = data2[\"migration\"];\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    let handleLabelChange = (event) => {\n        insertParam(\"labeling\", event.target.value);\n    }\n\n    let handleLabelChange2 = (event) => {\n        insertParam(\"labeling2\", event.target.value);\n    }\n\n    let rotateFn = (event) => {\n        let rotated = queryParameters.get(\"rotated\") === \"true\";\n        insertParam(\"rotated\", !rotated);\n    }\n\n    let rotateFn2 = (event) => {\n        let rotated = queryParameters.get(\"rotated2\") === \"true\";\n        insertParam(\"rotated2\", !rotated);\n    }\n\n    let gotoSummary = (event) => {\n      window.location = `${window.location.protocol}//${window.location.host}/machina-viz/#/triviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling2\")}`;\n    }\n\n    const eventBus = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    const eventBus2 = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", handleKeyPress);\n        setMu(localStorage.getItem(\"mu\"));\n        setGamma(localStorage.getItem(\"gamma\"));\n        setMu2(localStorage.getItem(\"mu2\"));\n        setGamma2(localStorage.getItem(\"gamma2\"));\n    });\n\n    return <div className=\"viz\">\n        <div className=\"panel tab_add2\" onClick={gotoSummary}><p className='addpanelp'><b>+</b></p></div>\n        <div className=\"panel info one\">\n            <div className=\"titlewrapper\">\n                <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                    {labelnames.map(l => \n                    {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                    )}\n                </select>\n                </b></p></label>\n                <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n                <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                <a onClick={() => {window.location.href=`/machina-viz/#/viz?labeling=${queryParameters.get(\"labeling2\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n                <Migration tree={tree} labeling={tree_labeling} migration={migration} coloring={coloring} evtbus={eventBus}/>\n            </div>\n            <div className=\"panel migration left\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus}/>\n            </div>\n        </div>\n        <div className=\"panel info one two\">\n            <div className=\"titlewrapper\">\n                <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange2}>\n                    {labelnames.map(l => \n                    {return (l === queryParameters.get(\"labeling2\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                    )}\n                </select>\n                </b></p></label>\n                <h3 className=\"viztitle\"><b>{data2[\"name\"]}</b></h3>\n                <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                <a onClick={() => {window.location.href=`/machina-viz/#/viz?labeling=${queryParameters.get(\"labeling\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu2}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma2}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn2}>Rotate</button>\n                <Migration tree={tree2} labeling={tree_labeling2} migration={migration2} coloring={coloring} evtbus={eventBus2} rightcol={true}/>\n            </div>\n            <div className=\"panel migration left\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree2} labeling={tree_labeling2} coloring={coloring} evtbus={eventBus2} rightcol={true}/>\n            </div>\n        </div>\n    </div>\n}\n\nexport default DualViz;\n","import React from 'react';\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\nfunction MigrationSummary(props) {\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n    const colorPalette = [\n      \"#a6cee3\",\n      \"#1f78b4\",\n      \"#b2df8a\",\n      \"#33a02c\",\n      \"#fb9a99\",\n      \"#e31a1c\",\n      \"#fdbf6f\",\n      \"#ff7f00\",\n      \"#cab2d6\",\n      \"#6a3d9a\",\n      \"#ffff99\",\n      \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    function onlyUnique(array) {\n      return [...new Set(array)];\n    }\n\n    function getColor(label) {\n      let color = props.coloring.map((value, index) => {\n        if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n      return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n    }\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    let nodeSet = onlyUnique(props.data.map((value, index) => [value[0], value[1]]).flat())\n\n    let nodes = nodeSet.map((value, index) => {\n        return { data: { id:  value, label: value, type: \"ip\"} };\n    });\n\n    let edges = props.data.map((value, index) => {\n      return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n    })\n\n    for (const [i, edge] of edges.entries()) {\n      if (edge.data.label == 1) {\n        edges[i].data.label = \"\";\n      }\n    }\n\n    const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n    });\n\n    let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#fff\",\n            'border-width': 10,\n            shape: \"rectangle\",\n            width: 100,\n            height: 50,\n            label: \"data(label)\",\n    \n            // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"text-valign\": \"center\",\n            // \"text-halign\": \"center\",\n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            //text props\n            //\"text-outline-color\": \"#4a56a6\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15,\n            'text-valign': 'center',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        }\n    ];\n    \n    props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            'border-color': hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n    })\n\n    edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        styleSheet.push({\n          selector: `edge[id='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(target)}`\n          }\n        })\n    })\n\n    let myCyRef;\n\n    const queryParameters = new URLSearchParams(window.location.search);\n    let rotated = queryParameters.get(\"rotatedsum\") === \"true\";\n    if (rotated === null) {\n        rotated = false;\n    }\n\n    const layout = {\n        name: \"dagre\",\n        fit: true,\n        circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n    };\n\n    let mu = edges.length;\n    let gamma = edges.filter((item) => { return item.data.label !== '' }).length;\n\n    localStorage.setItem(\"musum\", mu);\n    localStorage.setItem(\"gammasum\", gamma);\n\n    return <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n          });\n\n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('selectNodeSum', { nodeId, target});\n            props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 20,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('hoverNodeSum', { nodeId });\n            props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 10,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('dehoverNodeSum', { nodeId });\n            props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('deselectNodeSum', { nodeId, target});\n            props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n      />\n}\n\nexport default MigrationSummary;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport icon from \"../assets/logo.png\";\n\nfunction Loading(props) {\n    const radius = 40;\n    const circumference = 2 * Math.PI * radius;\n    const strokeDashoffset = circumference - (props.progress / 100) * circumference;\n\n    return <div className=\"loading\">\n        <img src={icon} alt=\"Icon\" width=\"500px\"/>\n        <h1>Loading...</h1>\n        <svg>\n            <circle\n            cx=\"50\"\n            cy=\"50\"\n            r={radius}\n            stroke=\"#006699\"\n            strokeWidth=\"6\"\n            fill=\"transparent\"\n            strokeDasharray={`${circumference} ${circumference}`}\n            style={{ strokeDashoffset }}\n            />\n        </svg>\n    </div>\n}\n\nexport default Loading;","import React, { useState, useEffect } from \"react\"\n\nfunction FilterMenu(props) {\n    if (props.show) { \n        const edges = props.data.map((text, index) => {\n            return (\n                <div>\n                    <input type=\"checkbox\" className=\"checkbox\" id={`${text[0]}\\u2192${text[1]}`} name={`${text[0]}\\u2192${text[1]}`} checked/>\n                    <label for={`${text[0]}\\u2192${text[1]}`}>{`${text[0]}\\u2192${text[1]}`}</label>\n                </div>\n            );\n        });\n\n        return (\n            <div className=\"filtermenu panel\">\n                {edges}\n            </div>\n        )\n    } else {\n        return <></>\n    }\n}\n\nexport default FilterMenu;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\nimport InlineSVG from 'react-inlinesvg';\n\nimport Migration from \"./Migration.js\";\nimport ClonalTree from \"./ClonalTree.js\";\nimport MigrationSummary from \"./MigrationSummary.js\";\nimport Loading from \"./Loading.js\";\nimport FilterMenu from \"./FilterMenu.js\";\n\n\nimport gear from '../assets/settings-gear.svg'\n\nfunction insertParam(key, value) {\n    // Get the current url\n    let currentUrl = new URL(window.location.href);\n  \n    // Change a url parameter using URLSearchParams\n    console.log(currentUrl.hash);\n    let urlParams = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    urlParams.set(key, value);\n  \n    // Replace the URL\n    //currentUrl.search = urlParams.toString();\n    window.location.href = '#/sumviz?' + urlParams.toString();\n  \n    // Reload the page\n    window.location.reload();\n}\n\nfunction handleKeyPress(event) {\n    if (event.key === '/') {\n      alert('Instructions:\\n\\nIn this view you can compare the summary with a single solution. In the summary graph, corresponding migration and clonal tree components with bold on hover.\\n\\nToggle and move around the migration graphs and the clonal tree. Hover over nodes in the clonal tree to find the corresponding anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panel.\\n\\nTo add another solution into view, click the [+] on the right.\\n\\nYou can close out panels by clicking the [X].');\n    }\n}\n\nfunction SumViz() {\n    const [isLoading, setIsLoading] = useState(true);\n    const [progress, setProgress] = useState(0);\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [muSum, setMuSum] = useState(0);\n    const [gammaSum, setGammaSum] = useState(0);\n    const [showPanel, setShowPanel] = useState(false);\n\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    const jsonContents=localStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n\n    const labelName = queryParameters.get(\"labeling\");\n\n    const data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n\n    const numSolns = wholeData[\"solutions\"].length;\n\n    const migrationSummary = wholeData[\"summary\"][\"migration\"]\n\n    let coloring = data[\"labeling\"]\n      .map((item) => item[1])\n      .filter((value, index, self) => {\n        return self.indexOf(value) === index;\n      })\n      .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n\n    const tree = data[\"tree\"]\n    const tree_labeling = data[\"labeling\"];\n    const migration = data[\"migration\"];\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    let handleLabelChange = (event) => {\n        insertParam(\"labeling\", event.target.value);\n    }\n\n    let rotateFn = (event) => {\n        let rotated = queryParameters.get(\"rotated\") === \"true\";\n        insertParam(\"rotated\", !rotated);\n    }\n\n    let addTab = (event) => {\n        window.location = `${window.location.protocol}//${window.location.host}/machina-viz/#/triviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling\")}`;\n    }\n\n    const eventBus = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    const eventBus2 = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    useEffect(() => {\n        //let intervalId = setInterval(() => {\n        //    setProgress(prevProgress => prevProgress + 10);\n        //}, 1000);\n\n        \n        // clearInterval(intervalId);\n        document.addEventListener(\"keydown\", handleKeyPress);\n        setMu(localStorage.getItem(\"mu\"));\n        setGamma(localStorage.getItem(\"gamma\"));\n        setMuSum(localStorage.getItem(\"musum\"));\n        setGammaSum(localStorage.getItem(\"gammasum\"));\n        setIsLoading(false)\n\n        //return () => clearInterval(intervalId);\n    }, []);\n\n    useEffect(() => {\n        setMuSum(localStorage.getItem(\"musum\"));\n        setGammaSum(localStorage.getItem(\"gammasum\"));\n    }, [isLoading])\n\n    return (\n        <div className=\"viz\">\n            {!isLoading ? (\n                <>\n                    <div className=\"panel info one sum\">\n                        <div className=\"titlewrapper\">\n                            <InlineSVG src={gear} className=\"settingsgear\" onClick={() => setShowPanel(!showPanel)}/>\n                            <FilterMenu show={showPanel} numSolns={numSolns} data={migrationSummary}/>\n                            <h3 className=\"viztitle\"><b>Summary</b></h3>\n                            <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                            <a onClick={() => {window.location.href=`/machina-viz/#/viz?labeling=${queryParameters.get(\"labeling\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n                        </div>\n                        <div className=\"panel migration top left sum\">\n                            <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                            <p className=\"paneltitle mu\">{`\\u03BC: ${muSum}`}</p>\n                            <p className=\"paneltitle gamma\">{`\\u03B3: ${gammaSum}`}</p>\n                            <MigrationSummary data={migrationSummary} coloring={coloring} evtbus={eventBus}/>\n                        </div>\n                    </div>\n                    <div className=\"panel info one two sum\">\n                        <div className=\"titlewrapper\">\n                            <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                            <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                                {labelnames.map(l => \n                                {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                                )}\n                            </select>\n                            </b></p></label>\n                            <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n                            <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                        </div>\n                        <div className=\"panel migration top left\">\n                            <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                            <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                            <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                            <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n                            <Migration tree={tree} labeling={tree_labeling} migration={migration} coloring={coloring} evtbus={eventBus}/>\n                        </div>\n                        <div className=\"panel migration left\">\n                            <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                            <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus} rightcol={true}/>\n                        </div>\n                    </div>\n                    <div className=\"panel tab_add\" onClick={addTab}><p className='addpanelp'><b>+</b></p></div>\n                </>\n            ) : (\n                <Loading progress={progress}/>\n            )}\n        </div>\n    )\n}\n\nexport default SumViz;\n","import React from 'react';\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(COSEBilkent);\nCytoscape.use(dagre);\n\nfunction ClonalSummary(props) {\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n    const colorPalette = [\n    \"#a6cee3\",\n    \"#1f78b4\",\n    \"#b2df8a\",\n    \"#33a02c\",\n    \"#fb9a99\",\n    \"#e31a1c\",\n    \"#fdbf6f\",\n    \"#ff7f00\",\n    \"#cab2d6\",\n    \"#6a3d9a\",\n    \"#ffff99\",\n    \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n    }\n\n    function intersectArrays(...arrays) {\n        return arrays.reduce((accumulator, current) => {\n          return accumulator.filter(element => current.includes(element));\n        });\n    }\n\n    function removeDuplicates(array) {\n        return array.filter((element, index) => array.indexOf(element) === index);\n    }\n\n    function removeDuplicateArrays(array) {\n        return array.filter(\n          (element, index, self) =>\n            index === self.findIndex((t) => JSON.stringify(t) === JSON.stringify(element))\n        );\n    }\n\n    function findLabel(node) {\n        return labeling.map((value, index) => {\n          if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n    }\n\n    function getNumberOfLabels(value) {\n        return labeling.filter(item => item[0] === value).length\n    }\n\n    function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n            if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        let retval = hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n        return retval === undefined ? '#000' : retval;\n    }\n\n    function strictConsensus(edgelists) {\n        const edges = {};\n        for (const edgelist of edgelists) {\n            for (const edge of edgelist) {\n                const key = edge.join(\"->\");\n                edges[key] = (edges[key] || 0) + 1;\n            }\n        }\n\n        const strictConsensus = [];\n        for (const key in edges) {\n            if (edges[key] === edgelists.length) {\n                const [source, target] = key.split(\"->\");\n                strictConsensus.push([source, target]);\n            }\n        }\n\n        return strictConsensus;\n    }\n\n    let trees = props.data[\"solutions\"].map(item => item[\"tree\"]);\n    let nodeLists = trees.map(item => removeDuplicates(item.flat()));\n    let nodeIds = removeDuplicates(intersectArrays(...nodeLists));\n    const tree = strictConsensus(trees);\n    \n    const labels = props.data[\"solutions\"].map(item => item[\"labeling\"]);\n    let labeling = removeDuplicateArrays([].concat(...labels));\n    labeling = labeling.filter(item => getNumberOfLabels(item[0]) === 1 && nodeIds.includes(item[0]))\n\n    let nodes = tree.flat().filter(onlyUnique).map((value, index) => {\n        return { data: { id: value, label: findLabel(value), type: \"ip\"} };\n      });\n      let edges = tree.map((value, index) => {\n        return { data: { source: value[0], target: value[1], label: `${value[0]}->${value[1]}`, migration: `${findLabel(value[0])}->${findLabel(value[1])}`} }\n      })\n    \n      const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n      });\n    \n      let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#4a56a6\",\n            width: 15,\n            height: 15,\n            label: \"data(id)\",\n    \n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            \"line-color\": \"#AAD8FF\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\"\n          }\n        }\n      ];\n    \n      props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n      })\n    \n      edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        console.log(source);\n        styleSheet.push({\n          selector: `edge[label='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(findLabel(source))} ${getColor(findLabel(target))}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(findLabel(target))}`\n          }\n        })\n      })\n    \n      let myCyRef;\n      const layout = {\n        name: \"dagre\",\n        fit: true,\n        // circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNodeCl') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNodeCl') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'hoverNodeCl') {\n              myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n                width: 10\n              })\n            }\n            if (eventName === 'dehoverNodeCl') {\n              myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n                width: 3\n              })\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n      };\n    \n      return <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n            console.log(\"EVT\", evt);\n            console.log(\"TARGET\", node.data());\n            console.log(\"TARGET TYPE\", typeof node[0]);\n          });\n    \n          cy.on('mouseover', 'node', function(event) {\n            // Get the node information\n            var node = event.target;\n            var label = node.data('label');\n            \n            // Create the div element\n            var div = document.createElement(\"div\");\n            div.setAttribute(\"class\", \"panel popup\");\n    \n            div.innerHTML = `<p>${label}&nbsp;</p>`;\n          \n            // Position the div element near the node\n            const canvas = document.getElementsByTagName('canvas')[0];\n            div.style.position = \"absolute\";\n            div.style.top = (node.renderedPosition('y') + canvas.height*0.5 + 30) + 'px';\n            div.style.left = node.renderedPosition('x') + 'px';\n          \n            // Add the div element to the page\n            document.body.appendChild(div);\n            const nodeId = event.target.id();\n    \n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n            props.evtbus.fireEvent('hoverNodeSC', { nodeId });\n          });\n    \n          cy.on('mouseout', 'node', function(event){\n            // Remove the div element on mouseout\n            var div = document.querySelector('.panel.popup');\n            if (document.body.contains(div)) {\n                document.body.removeChild(div);\n            }\n    \n            var node = event.target;\n            var label = node.data('label');\n            const nodeId = event.target.id();\n    \n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n            props.evtbus.fireEvent('dehoverNodeSC', { nodeId });\n          });\n    \n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            let source = target.data().source;\n            let sink = target.data().target;\n            props.evtbus.fireEvent('selectNode', { nodeId, source, sink, target});\n            props.evtbus.fireEvent('selectNodeSC', { nodeId, source, sink, target});\n          });\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            let source = target.data().source;\n            let sink = target.data().target;\n            props.evtbus.fireEvent('deselectNode', { nodeId, source, sink, target});\n            props.evtbus.fireEvent('deselectNodeSC', { nodeId, source, sink, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n      />\n}\n\nexport default ClonalSummary;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport Migration from \"./Migration.js\";\nimport ClonalTree from \"./ClonalTree.js\";\nimport MigrationSummary from \"./MigrationSummary.js\";\nimport Loading from \"./Loading.js\";\nimport ClonalSummary from \"./ClonalSummary.js\";\n\nfunction insertParam(key, value) {\n    // Get the current url\n    let currentUrl = new URL(window.location.href);\n  \n    // Change a url parameter using URLSearchParams\n    let urlParams = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    urlParams.set(key, value);\n    console.log(urlParams.toString());\n  \n    // Replace the URL\n    //currentUrl.search = urlParams.toString();\n    window.location.href = '#/triviz?' + urlParams.toString();\n  \n    // Reload the page\n    console.log(window.location);\n    window.location.reload();\n}\n\nfunction handleKeyPress(event) {\n    if (event.key === '/') {\n      alert('Instructions:\\n\\nIn this view, you can compare the summary and two different solutions. In the summary graph, corresponding migration and clonal tree components with bold on hover.\\n\\nToggle and move around the migration graphs and clonal trees. Hover over nodes in the clonal trees to find the corresponding anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panels.\\n\\nYou can close out panels by clicking the [X].');\n    }\n}\n\nfunction TriViz(props) {\n    const [isLoading, setIsLoading] = useState(true);\n    const [progress, setProgress] = useState(0);\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [mu2, setMu2] = useState(0);\n    const [gamma2, setGamma2] = useState(0);\n    const [muSum, setMuSum] = useState(0);\n    const [gammaSum, setGammaSum] = useState(0);\n\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    const jsonContents=localStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n\n    const labelName = queryParameters.get(\"labeling\");\n    const labelName2 = queryParameters.get(\"labeling2\");\n\n    const data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n    const data2 = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName2})[0];\n\n    const migrationSummary = wholeData[\"summary\"][\"migration\"];\n\n    let coloring = data[\"labeling\"]\n      .map((item) => item[1])\n      .filter((value, index, self) => {\n        return self.indexOf(value) === index;\n      })\n      .map((item, index) => [item, `${index}`]);\n\n      const tree = data[\"tree\"]\n      const tree2 = data2[\"tree\"]\n      const tree_labeling = data[\"labeling\"];\n      const tree_labeling2 = data2[\"labeling\"];\n      const migration = data[\"migration\"];\n      const migration2 = data2[\"migration\"];\n  \n      let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n  \n      let handleLabelChange = (event) => {\n          insertParam(\"labeling\", event.target.value);\n      }\n  \n      let handleLabelChange2 = (event) => {\n          insertParam(\"labeling2\", event.target.value);\n      }\n  \n      const eventBus = {\n          listeners: [],\n          addListener(callback) {\n            this.listeners.push(callback);\n          },\n          removeListener(callback) {\n            this.listeners = this.listeners.filter(listener => listener !== callback);\n          },\n          fireEvent(eventName, eventData) {\n            this.listeners.forEach((listener) => {\n              listener(eventName, eventData);\n            });\n          },\n      };\n  \n      useEffect(() => {\n        //let intervalId = setInterval(() => {\n        //    setProgress(prevProgress => prevProgress + 10);\n        //}, 1000);\n\n        //setTimeout(() => {\n        //    clearInterval(intervalId);\n          document.addEventListener(\"keydown\", handleKeyPress);\n          setMu(localStorage.getItem(\"mu\"));\n          setGamma(localStorage.getItem(\"gamma\"));\n          setMu2(localStorage.getItem(\"mu2\"));\n          setGamma2(localStorage.getItem(\"gamma2\"));\n          setMuSum(localStorage.getItem(\"musum\"));\n          setGammaSum(localStorage.getItem(\"gammasum\"));\n          setIsLoading(false)\n        //}, 10000);\n\n        //return () => clearInterval(intervalId);\n      }, []);\n  \n      return <div className=\"viz\">\n        {!isLoading ? (\n                <>\n            <div className=\"panel info tri\">\n                <div className=\"titlewrapper\">\n                    <h3 className=\"viztitle\"><b>Summary</b></h3>\n                    <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                    <a onClick={() => {window.location.href=`/machina-viz/#/dualviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling2\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n                </div>\n                <div className=\"panel migration top left sum\">\n                    <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                    <p className=\"paneltitle mu\">{`\\u03BC: ${muSum}`}</p>\n                    <p className=\"paneltitle gamma\">{`\\u03B3: ${gammaSum}`}</p>\n                    <MigrationSummary data={migrationSummary} coloring={coloring} evtbus={eventBus}/>\n                </div>\n            </div>\n          <div className=\"panel info tri two\">\n              <div className=\"titlewrapper\">\n                  <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                  <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                      {labelnames.map(l => \n                      {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                      )}\n                  </select>\n                  </b></p></label>\n                  <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n                  <a onClick={() => {window.location.href=`/machina-viz/#/sumviz?labeling=${queryParameters.get(\"labeling2\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n              </div>\n              <div className=\"panel migration top left\">\n                  <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                  <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                  <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                  <Migration tree={tree} labeling={tree_labeling} migration={migration} coloring={coloring} evtbus={eventBus}/>\n              </div>\n              <div className=\"panel migration left\">\n                  <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                  <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus}/>\n              </div>\n          </div>\n          <div className=\"panel info tri three\">\n              <div className=\"titlewrapper\">\n                  <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                  <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange2}>\n                      {labelnames.map(l => \n                      {return (l === queryParameters.get(\"labeling2\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                      )}\n                  </select>\n                  </b></p></label>\n                  <h3 className=\"viztitle\"><b>{data2[\"name\"]}</b></h3>\n                  <a onClick={() => {window.location.href=`/machina-viz/#/sumviz?labeling=${queryParameters.get(\"labeling\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n              </div>\n              <div className=\"panel migration top left\">\n                  <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                  <p className=\"paneltitle mu\">{`\\u03BC: ${mu2}`}</p>\n                  <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma2}`}</p>\n                  <Migration tree={tree2} labeling={tree_labeling2} migration={migration2} coloring={coloring} evtbus={eventBus} rightcol={true}/>\n              </div>\n              <div className=\"panel migration left\">\n                  <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                  <ClonalTree tree={tree2} labeling={tree_labeling2} coloring={coloring} evtbus={eventBus} rightcol={true}/>\n              </div>\n          </div>\n          </>\n           ) : (\n            <Loading progress={progress}/>\n        )}\n    </div>\n} \n\nexport default TriViz;","import React, { useState, useEffect } from \"react\"\nimport './App.css';\n\nimport About from './components/About.js'\nimport Viz from './components/Viz.js'\nimport Home from './components/Home.js'\nimport DualViz from \"./components/DualViz\";\nimport SumViz from \"./components/SumViz\";\nimport TriViz from \"./components/TriViz\";\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport { createBrowserHistory } from 'history';\n\n\nfunction App() {\n  const history = createBrowserHistory({\n    basename: '/machina-viz/#' // Replace with your repository name\n  });\n\n  return (\n    <div className=\"App\">\n        <Switch>\n          <Route path=\"/about\">\n            <About/>\n          </Route>\n          <Route path=\"/viz\">\n            <Viz/>\n          </Route>\n          <Route path=\"/dualviz\">\n            <DualViz/>\n          </Route>\n          <Route path=\"/sumviz\">\n            <SumViz/>\n          </Route>\n          <Route path=\"/triviz\">\n            <TriViz/>\n          </Route>\n          <Route path=\"/machina-viz/about\">\n            <About/>\n          </Route>\n          <Route path=\"/machina-viz/viz\">\n            <Viz/>\n          </Route>\n          <Route path=\"/machina-viz/dualviz\">\n            <DualViz/>\n          </Route>\n          <Route path=\"/machina-viz/sumviz\">\n            <SumViz/>\n          </Route>\n          <Route path=\"/machina-viz/triviz\">\n            <TriViz/>\n          </Route>\n          <Route path=\"/machina-viz\">\n            <Home/>\n          </Route>\n          <Route exact path=\"/\">\n            <Home/>\n          </Route>\n        </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { HashRouter as Router } from \"react-router-dom\";\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <Router basename=\"/machina-viz\">\n      <App />\n    </Router>\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}