(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{151:function(e,t,n){e.exports=n.p+"static/media/sample_page.17167d94.png"},153:function(e){e.exports={"Breast_A1-1":"viz?labeling=T-0","Breast_A1-2":"viz?labeling=T-0","Breast_A1-3":"viz?labeling=T-0","Breast_A1-4":"viz?labeling=T-0","Breast-A7-1":"viz?labeling=T-0","Breast-A7-2":"viz?labeling=T-0",Prostate_A10:"viz?labeling=T-0",Prostate_A12:"viz?labeling=T-0",Prostate_A17:"viz?labeling=T-0",Prostate_A21:"viz?labeling=T-0",Prostate_A22:"viz?labeling=T-0",Prostate_A24:"viz?labeling=T-0",Prostate_A29:"viz?labeling=T-0",Prostate_A31:"viz?labeling=T-0",Prostate_A32:"viz?labeling=T-0",Prostate_A34:"viz?labeling=T-0",OSCE2:"viz?labeling=T-0",OSCE3:"viz?labeling=T-0",OSCE9:"viz?labeling=T-0",LOv_patient1:"viz?labeling=T-0",ROv_patient1:"viz?labeling=T-0",ROv_patient2:"viz?labeling=T-0",LOv_patient3:"viz?labeling=T-0",ROv_patient3:"viz?labeling=T-0",LOv_patient4:"viz?labeling=T-0",ROv_patient4:"viz?labeling=T-0",LOv_patient7:"viz?labeling=T-0",ROv_patient7:"viz?labeling=T-0",LOv_patient9:"viz?labeling=T-0",ROv_patient9:"viz?labeling=T-0",ROv_patient10:"viz?labeling=T-0",CRUK0063:"viz?labeling=T-0"}},154:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAj0lEQVR4nO2USwrEIBAF6xJp5kg5dyQM+aySRfa5iMNAC0ISBE0v8nnQKCpVoI3wtLSAsxQ4oLEUXD8d8LUUeK1XcKMraoARkB2B6F5RV/UKnBUYBKJrXs9kRyJQGON5EBelAqYIHmoBPqXwI0kWPPUNCDBoSeLHdZYt6I845oJ15yF9Zv1Zm9QnSVZl3SQ/PmdfIXJmioIAAAAASUVORK5CYII="},191:function(e,t,n){e.exports=n(390)},198:function(e,t,n){},200:function(e,t,n){},385:function(e,t,n){var a={"./A1/Breast_A1-1":[156,0],"./A1/Breast_A1-1.json":[156,0],"./A1/Breast_A1-2":[157,1],"./A1/Breast_A1-2.json":[157,1],"./A1/Breast_A1-3":[158,2],"./A1/Breast_A1-3.json":[158,2],"./A1/Breast_A1-4":[159,3],"./A1/Breast_A1-4.json":[159,3],"./A10/Prostate_A10":[160,4],"./A10/Prostate_A10.json":[160,4],"./A12/Prostate_A12":[161,5],"./A12/Prostate_A12.json":[161,5],"./A17/Prostate_A17":[162,6],"./A17/Prostate_A17.json":[162,6],"./A21/Prostate_A21":[163,7],"./A21/Prostate_A21.json":[163,7],"./A22/Prostate_A22":[164,8],"./A22/Prostate_A22.json":[164,8],"./A24/Prostate_A24":[165,9],"./A24/Prostate_A24.json":[165,9],"./A29/Prostate_A29":[166,10],"./A29/Prostate_A29.json":[166,10],"./A31/Prostate_A31":[167,11],"./A31/Prostate_A31.json":[167,11],"./A32/A32":[168,12],"./A32/A32.json":[168,12],"./A32/Prostate_A32":[169,13],"./A32/Prostate_A32.json":[169,13],"./A34/Prostate_A34":[170,14],"./A34/Prostate_A34.json":[170,14],"./A7/Breast_A7-1":[171,15],"./A7/Breast_A7-1.json":[171,15],"./A7/Breast_A7-2":[172,16],"./A7/Breast_A7-2.json":[172,16],"./OSCE/OSCE2":[173,17],"./OSCE/OSCE2.json":[173,17],"./OSCE/OSCE3":[174,18],"./OSCE/OSCE3.json":[174,18],"./OSCE/OSCE9":[175,19],"./OSCE/OSCE9.json":[175,19],"./mapping":[45],"./mapping.json":[45],"./patient10/Ovarian_ROv_patient10":[176,20],"./patient10/Ovarian_ROv_patient10.json":[176,20],"./patient1_LOv/Ovarian_LOv_patient1":[177,21],"./patient1_LOv/Ovarian_LOv_patient1.json":[177,21],"./patient1_ROv/Ovarian_ROv_patient1":[178,22],"./patient1_ROv/Ovarian_ROv_patient1.json":[178,22],"./patient2/Ovarian_ROv_patient2":[179,23],"./patient2/Ovarian_ROv_patient2.json":[179,23],"./patient3_LOv/Ovarian_LOv_patient3":[180,24],"./patient3_LOv/Ovarian_LOv_patient3.json":[180,24],"./patient3_ROv/Ovarian_ROv_patient3":[181,25],"./patient3_ROv/Ovarian_ROv_patient3.json":[181,25],"./patient4_LOv/Ovarian_LOv_patient4":[182,26],"./patient4_LOv/Ovarian_LOv_patient4.json":[182,26],"./patient4_ROv/Ovarian_ROv_patient4":[183,27],"./patient4_ROv/Ovarian_ROv_patient4.json":[183,27],"./patient7_LOv/Ovarian_LOv_patient7":[184,28],"./patient7_LOv/Ovarian_LOv_patient7.json":[184,28],"./patient7_ROv/Ovarian_ROv_patient7":[185,29],"./patient7_ROv/Ovarian_ROv_patient7.json":[185,29],"./patient9_LOv/Ovarian_LOv_patient9":[186,30],"./patient9_LOv/Ovarian_LOv_patient9.json":[186,30],"./patient9_ROv/Ovarian_ROv_patient9":[187,31],"./patient9_ROv/Ovarian_ROv_patient9.json":[187,31],"./tracerx/TRACERx_CRUK0063":[188,32],"./tracerx/TRACERx_CRUK0063.json":[188,32],"./tracerx/tracerx":[189,33],"./tracerx/tracerx.json":[189,33],"./tracerx/tracerx_new_all":[190,34],"./tracerx/tracerx_new_all.json":[190,34]};function r(e){var t=a[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n.t(e,3)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(a)},r.id=385,e.exports=r},390:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(150),i=n.n(o),s=(n(198),n(200),n(23)),c=n(151),l=n.n(c);var u=function(){return r.a.createElement("div",{className:"about"},r.a.createElement("div",{className:"panel about"},r.a.createElement("div",{className:"aboutcontainer"},r.a.createElement("p",{className:"backarrow"},r.a.createElement("b",null,r.a.createElement(s.b,{to:"",style:{textDecoration:"none",color:"black"}},"\u2190 home"))),r.a.createElement("h1",{className:"abouttitle"},"Instructions")),r.a.createElement("p",null,r.a.createElement("b",null,"For full documentation on both MACH2 and MACH2-Viz, please see the following ",r.a.createElement("a",{href:"https://elkebir-group.github.io/mach2-docs/"},"link"))),r.a.createElement("p",{id:"mach2"},r.a.createElement("b",null,"MACH2")," is a personalized tool to visualize cancer metastasis. It is a sequel to MACHINA, an algorithm designed to solve the Parsimonious Migration History Problem (PMH problem)."),r.a.createElement("p",{id:"ii"},r.a.createElement("b",null,"The Parsimonious Migration History Problem:")," Given current oncological mutations at their respective anatomical sites, how can we infer their mutation tree as well as a network of anatomical sites inferring metastases?"),r.a.createElement("p",{id:"iii"},r.a.createElement("b",null,"Visualization Format:")),r.a.createElement("p",null,"Upon selecting one of the examples on the home page, you will be redirected to the visualization page. The page showcases multiple panels. The descriptions along with an image of the panels are shown below:"),r.a.createElement("ul",{style:{columns:1}},r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"MACH2 Solutions (middle and right):"),"The solutions computed by MACH2 are displayed here. Change between possible solutions by selecting the drop down menu at the top of the panel. Each graph in this panel is described below:")),r.a.createElement("ul",{style:{columns:1}},r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Clonal Tree (bottom right and bottom middle):"),' This is a tree of oncological mutations. Each node in this tree is a variant allele in the cancer patient. Each edge is a mutation from one variant to another. In the case of multiple clonal tree solutions, you can click the drop-down on the main panel (labeled "jsons/hoadley16_A7-1" below) to select between them. Additionally, you can see that there are buttons that say "Clonal Tree" and "Input Tree". The clonal tree displays the tree of mutations after polytomy refinement done by MACH2. The input tree is simply the original tree before these refinements are applied.')),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Migration Graph (top right and top middle):")," Each node in the clonal tree has a tag with an anatomical location inferred using ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Maximum_parsimony_(phylogenetics)"},"Maximum Parsimony"),". The clonal tree is compressed into a migration graph where each node represents an anatomical location, and each edge is a metastasis (e.g. a migration) between two anatomical locations."))),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Summary (left):")," You can also view a summary migration graph that is computed by unioning edges across migration graphs in each solution. Edges are weighted by the number of solutions they appear in."))),r.a.createElement("p",null,'You can click on the long gray bars on the sides of the visualization page to add extra panels. You can also click the "[X]" buttons on the top right corners of panels to delete them.'),r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"aboutimg",src:l.a,alt:"Sample Page"})),r.a.createElement("p",{id:"iv"},r.a.createElement("b",null,"Filtering Solutions:")),r.a.createElement("p",null,"The user has an option to delete or require edges displayed on the Summary Panel. Their functions are described below:"),r.a.createElement("ul",{style:{columns:1}},r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Delete edges: "),"Shift+Click on an edge in the summary panel to delete it. By deleting it, the MACH2 solution panels will only show solutions that do not have the edge in their solution.")),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Require edges: "),"Click on an edge in the summary panel to require it. By requiring it, the MACH2 solution panels will only show solutions that have that edge in their solution."))),r.a.createElement("p",null,"To undo actions, you can click the undo arrow that will appear on the top right corner of the summary panel after editing the summary panel edges."),r.a.createElement("p",{id:"v"},r.a.createElement("b",null,"Generating inputs:")),r.a.createElement("p",null,"MACH2 should already output a JSON format that is fully compatible with MACH2-Viz. However, if you are interested in using MACHINA, we have provided a ",r.a.createElement("a",{href:"https://github.com/vikramr2/json_compression"},"json compression")," program that takes an output directory from MACHINA that contains ",r.a.createElement("b",null,".tree")," files and their corresponding ",r.a.createElement("b",null,".labeling")," files, and returns a ",r.a.createElement("b",null,".json"),' file that can be used as input for this visualizer. Click the "+" icon in the home page to use this feature. For more information, see this ',r.a.createElement("a",{href:"https://github.com/vikramr2/json_compression/blob/main/README.md"},"README"),". Output from any algorithm that solves the PMH problem will be accepted provided that it is in a JSON format as shown in the README."),r.a.createElement("p",{id:"vi"},r.a.createElement("b",null,"Questions? Contact")),r.a.createElement("ul",{id:"singlecol"},r.a.createElement("li",null,r.a.createElement("p",null,"Vikram Ramavarapu (",r.a.createElement("a",{href:"mailto:vikramr2@illinois.edu"},"vikramr2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Roman Mineyev (",r.a.createElement("a",{href:"mailto:mineyev2@illinois.edu"},"mineyev2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Akul Joshi (",r.a.createElement("a",{href:"mailto:akulj2@illinois.edu"},"akulj2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Mrinmoy Roddur (",r.a.createElement("a",{href:"mailto:mroddur2@illinois.edu"},"mroddur2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Mohammed El-Kebir (",r.a.createElement("a",{href:"mailto:melkebir@illinois.edu"},"melkebir@illinois.edu"),")")))))},d=n(7),m=n(2),f=n(24),p=n(20),_=n.n(p),h=n(39),v=n.n(h);function g(e,t,n){if(n){var a=[];return e.forEach(function(e){e[1]===t&&a.push(e[0])}),a}e.forEach(function(e){if(e[0]===t)return[e[1]]})}function b(e,t){var n=[];return e.forEach(function(e){t.includes(e[0])&&t.includes(e[1])&&n.push(e)}),n}_.a.use(v.a);var E=function(e){var t=/^#(?:[0-9a-fA-F]{3}){1,2}$/,n=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],o=n.length;function i(a){if(!a)return"#000";var r=e.coloring.find(function(e){return e[0]===a}),i=r?r[1]:void 0;return t.test(i)?i:n[parseInt(i)%o]}function s(e,t,n){return n.indexOf(e)===t}function c(t){var n=e.labeling.find(function(e){return e[0]===t});return n?n[1]:void 0}var l=e.tree.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(s).map(function(e,t){return{data:{id:e,label:c(e),type:"ip"}}}),u=e.tree.map(function(e,t){return{data:{source:e[0],target:e[1],label:"".concat(e[0],"->").concat(e[1]),migration:"".concat(c(e[0]),"->").concat(c(e[1]))}}}),p=Object(a.useState)({nodes:l,edges:u}),_=Object(m.a)(p,2),h=_[0],v=_[1];Object(a.useEffect)(function(){l=e.tree.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(s).map(function(e,t){return{data:{id:e,label:c(e),type:"ip"}}}),u=e.tree.map(function(e,t){return{data:{source:e[0],target:e[1],label:"".concat(e[0],"->").concat(e[1]),migration:"".concat(c(e[0]),"->").concat(c(e[1]))}}}),v({nodes:l,edges:u})},[e.tree,e.labeling]);var E,y=[{selector:"node",style:{backgroundColor:"#4a56a6",width:15,height:15,label:"data(id)","overlay-padding":"6px","z-index":"10","text-outline-width":"2px",color:"white",fontSize:15}},{selector:"node:selected",style:{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C",width:50,height:50,"text-outline-color":"#77828C","text-outline-width":8}},{selector:"edge",style:{width:3,"line-color":"#AAD8FF","target-arrow-color":"#6774cb","target-arrow-shape":"triangle","curve-style":"bezier"}}];e.coloring.forEach(function(e,a){y.push({selector:"node[label='".concat(e[0],"']"),style:{backgroundColor:t.test(e[1])?e[1]:n[parseInt(e[1])%o]}})}),u.forEach(function(e,t){var n=e.data.source,a=e.data.target;y.push({selector:"edge[label='".concat(n,"->").concat(a,"']"),style:{"line-fill":"linear-gradient","line-gradient-stop-colors":"".concat(i(c(n))," ").concat(i(c(a))),"line-gradient-stop-positions":"33% 66%","target-arrow-color":"".concat(i(c(a)))}})});var O={name:"dagre",fit:!0,directed:!0,padding:10,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,ready:function(){e.evtbus.addListener(function(t,n){if("selectNodeCl"===t){var a=E.getElementById(n.nodeId);E.$("edge[migration='".concat(n.nodeId,"']")).css({width:10}),a.trigger("select")}if("deselectNodeCl"===t){var r=E.getElementById(n.nodeId);E.$("edge[migration='".concat(n.nodeId,"']")).css({width:3}),r.trigger("select")}if("hoverNodeCl"===t&&E.$("edge[migration='".concat(n.nodeId,"->").concat(n.nodeId,"']")).css({width:10}),"dehoverNodeCl"===t&&E.$("edge[migration='".concat(n.nodeId,"->").concat(n.nodeId,"']")).css({width:3}),"selectNodeSC"===t){var o=E.getElementById(n.nodeId),i=n.label;E.$("edge[label='".concat(i,"']")).css({width:10}),o.trigger("select")}if("deselectNodeSC"===t){var s=E.getElementById(n.nodeId),c=n.label;E.$("edge[label='".concat(c,"']")).css({width:3}),s.trigger("select")}if("hoverNodeSC"===t){var m=E.getElementById(n.nodeId),f=n.nodeId;E.$("node[id='".concat(f,"']")).css({width:25,height:25}),m.trigger("select")}if("dehoverNodeSC"===t){var p=E.getElementById(n.nodeId),_=n.nodeId;E.$("node[id='".concat(_,"']")).css({width:15,height:15}),p.trigger("select")}if("resetClonal"===t&&n.index===e.index&&v({nodes:l,edges:u}),"clonalHover"===t){var h=n.eventParams;void 0!==h&&(h.forEach(function(e){var t=E.getElementById(n.nodeId);E.$("node[id='".concat(e,"']")).css({width:25,height:25}),t.trigger("select")}),b(e.tree,h).forEach(function(e){E.$("edge[label='".concat(e[0],"->").concat(e[1],"']")).css({width:10})}))}if("clonalDehover"===t){var g=n.eventParams;void 0!==g&&(g.forEach(function(e){var t=E.getElementById(n.nodeId);E.$("node[id='".concat(e,"']")).css({width:15,height:15}),t.trigger("select")}),b(e.tree,g).forEach(function(e){E.$("edge[label='".concat(e[0],"->").concat(e[1],"']")).css({width:3})}))}if("zoomClonal"===t){var y=n.node,O=function(e,t){var n=Object(d.a)(new Set([].concat.apply([],e)));return t.filter(function(e){return n.includes(e)})}(e.tree,n.corr)[0],S=E.$("node[id='".concat(O,"']"));try{E.fit(S)}catch(w){E.fit(y)}}})}};return Object(a.useMemo)(function(){return r.a.createElement(f.a,{elements:f.a.normalizeElements(h),style:{width:"100%",height:"100%"},zoomingEnabled:!0,maxZoom:3,minZoom:.1,autounselectify:!0,boxSelectionEnabled:!0,layout:O,stylesheet:y,cy:function(t){E=t,t.on("mouseover","node",function(n){var a=n.target,r=a.data("label"),o=a.data("id"),i=e.unobserved&&e.unobserved.includes(o)?"(unobserved)":"";if(void 0!==r){var s=document.createElement("div");s.setAttribute("class","panel popup"),s.innerHTML="<p>".concat(r,'&nbsp;<span class="red-text">').concat(i,"</span>&nbsp;</p>");var c=a.position(),l=t.container(),u=t.zoom(),d=l.getBoundingClientRect();s.style.position="absolute";var m=d.left+c.x*u+t.pan().x+15,f=d.top+c.y*u+t.pan().y-15;s.style.top=f+"px",s.style.left=m+"px",document.body.appendChild(s);var p=document.querySelector("#".concat(r));null!==p&&(p.style.opacity=1,p.style.zIndex=100,p.style.fontWeight="bold")}var _=n.target.id();if(e.evtbus.fireEvent("hoverNodeSC",{nodeId:_}),e.clonalMap.length>0){var h=g(e.clonalMap,_,e.clonal);e.evtbus.fireEvent("clonalHover",{eventParams:h})}}),t.on("mouseout","node",function(t){var n=document.querySelector(".panel.popup");document.body.contains(n)&&document.body.removeChild(n);var a=t.target.id(),r=t.target.data("label"),o=document.querySelector("#".concat(r));if(null!==o&&(o.style.opacity=.7,o.style.zIndex=1,o.style.fontWeight="normal"),e.evtbus.fireEvent("dehoverNodeSC",{nodeId:a}),e.clonalMap.length>0){var i=g(e.clonalMap,a,e.clonal);e.evtbus.fireEvent("clonalDehover",{eventParams:i})}}),t.on("mouseover","edge",function(t){var n=t.target;n.css({width:10});var a=t.target.id(),r=c(n.data().source),o=c(n.data().target),i=n.data().label;e.evtbus.fireEvent("selectNode",{nodeId:a,source:r,sink:o,target:n}),e.evtbus.fireEvent("selectNodeSC",{nodeId:a,source:r,sink:o,target:n,label:i})}),t.on("mouseout","edge",function(t){var n=t.target;n.css({width:3});var a=t.target.id(),r=c(n.data().source),o=c(n.data().target),i=n.data().label;e.evtbus.fireEvent("deselectNode",{nodeId:a,source:r,sink:o,target:n}),e.evtbus.fireEvent("deselectNodeSC",{nodeId:a,source:r,sink:o,target:n,label:i})}),t.on("tap","node",function(n){var a=n.target,r=Object(d.a)(new Set(function(e,t){var n=[];return e.forEach(function(e){e[0]===t&&(n.push(e[1]),n.push(e[0])),e[1]===t&&(n.push(e[0]),n.push(e[1]))}),0===n.length&&n.push(t),n}(e.clonalMap,a.id())));e.evtbus.fireEvent("zoomClonal",{node:a,corr:r}),t.fit(a)})}})},[h])},y=n(64),O=n.n(y);function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}_.a.use(v.a),_.a.use(O.a);var P=function(e){var t=e.tree,n=e.labeling,o=e.coloring,i=e.migration,s=e.evtbus,c=e.rightcol,l=e.rotated,u=(e.setLoadingAction,/^#(?:[0-9a-fA-F]{3}){1,2}$/),d=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],p=d.length;function _(e,t,n){return n.indexOf(e)===t}function h(e){var t=n.find(function(t){return t[0]===e});return t?t[1]:void 0}function v(e){var t=o.find(function(t){return t[0]===e});return t&&(t=t[1]),u.test(t)?t:d[parseInt(t)%p]}var g,b=t.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(_).map(function(e,t){return{data:{id:h(e),label:h(e),type:"ip"}}}),E=i.map(function(e,t){return{data:{source:e[0],target:e[1],label:e[2],id:"".concat(e[0],"->").concat(e[1]),clsource:e[0],cltarget:e[1]}}}),y=S(E.entries());try{for(y.s();!(g=y.n()).done;){var O=g.value,w=Object(m.a)(O,2),P=w[0];1==w[1].data.label&&(E[P].data.label="")}}catch(M){y.e(M)}finally{y.f()}var A,B=Object(a.useState)({nodes:b,edges:E}),k=Object(m.a)(B,2),j=k[0],C=k[1];Object(a.useEffect)(function(){var e,n=t.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(_).map(function(e,t){return{data:{id:h(e),label:h(e),type:"ip"}}}),a=i.map(function(e,t){return{data:{source:e[0],target:e[1],label:e[2],id:"".concat(e[0],"->").concat(e[1]),clsource:e[0],cltarget:e[1]}}}),r=S(a.entries());try{for(r.s();!(e=r.n()).done;){var o=e.value,s=Object(m.a)(o,2),c=s[0];1==s[1].data.label&&(a[c].data.label="")}}catch(M){r.e(M)}finally{r.f()}C({nodes:n,edges:a})},[t,n,i,l]);var R=[{selector:"node",style:{backgroundColor:"#fff","border-width":10,shape:"rectangle",width:100,height:50,label:"data(label)","overlay-padding":"6px","z-index":"10","text-outline-width":"2px",color:"white",fontSize:15,"text-valign":"center","text-halign":"center"}},{selector:"node:selected",style:{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C",width:50,height:50,"text-outline-color":"#77828C","text-outline-width":8}},{selector:"node[type='device']",style:{shape:"rectangle"}},{selector:"edge",style:{width:3,label:"data(label)","target-arrow-color":"#6774cb","target-arrow-shape":"triangle","curve-style":"bezier","text-outline-width":"2px",color:"white",fontSize:15}}];o.forEach(function(e,t){R.push({selector:"node[label='".concat(e[0],"']"),style:{"border-color":u.test(e[1])?e[1]:d[parseInt(e[1])%p]}})}),E.forEach(function(e,t){var n=e.data.source,a=e.data.target;R.push({selector:"edge[id='".concat(n,"->").concat(a,"']"),style:{"line-fill":"linear-gradient","line-gradient-stop-colors":"".concat(v(n)," ").concat(v(a)),"line-gradient-stop-positions":"33% 66%","target-arrow-color":"".concat(v(a))}})});var z=new URLSearchParams(window.location.hash.split("?")[1]),N=c?"true"===z.get("rotated2"):"true"===z.get("rotated");null===N&&(N=!1);var I={name:"dagre",fit:!0,circle:!0,directed:!0,padding:10,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,transform:function(e,t){return{x:l?-2*t.y:t.x,y:l?t.x:t.y}},ready:function(){s.addListener(function(e,t){if("selectNode"===e){var n=A.getElementById(t.nodeId),a=t.source,r=t.sink;A.$("edge[id='".concat(a,"->").concat(r,"']")).css({width:10}),n.trigger("select")}if("deselectNode"===e){var o=A.getElementById(t.nodeId),i=t.source,s=t.sink;A.$("edge[id='".concat(i,"->").concat(s,"']")).css({width:3}),o.trigger("select")}if("selectNodeSum"===e){var l=A.getElementById(t.nodeId);A.$("edge[id='".concat(t.nodeId,"']")).css({width:10}),l.trigger("select")}if("deselectNodeSum"===e){var u=A.getElementById(t.nodeId);A.$("edge[id='".concat(t.nodeId,"']")).css({width:3}),u.trigger("select")}if("hoverNodeSum"===e){var d=A.getElementById(t.nodeId);A.$("node[id='".concat(t.nodeId,"']")).css({"border-width":20}),d.trigger("select")}if("dehoverNodeSum"===e){var m=A.getElementById(t.nodeId);A.$("node[id='".concat(t.nodeId,"']")).css({"border-width":10}),m.trigger("select")}"resetMigration"===e&&(1===t.index&&!c||2===t.index&&c)&&C({nodes:b,edges:E})})}},x=0,L=function(e){var t,n=new Set,a=S(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;-1!==r[2]&&n.add(r[2])}}catch(M){a.e(M)}finally{a.f()}return n.size}(t);return E.forEach(function(e){""==e.data.label?x+=1:x+=parseInt(e.data.label)}),c?(sessionStorage.setItem("mu2",x),sessionStorage.setItem("gamma2",L)):(sessionStorage.setItem("mu",x),sessionStorage.setItem("gamma",L)),Object(a.useMemo)(function(){return r.a.createElement(f.a,{elements:f.a.normalizeElements(j),style:{width:"100%",height:"100%"},zoomingEnabled:!0,maxZoom:3,minZoom:.1,autounselectify:!0,boxSelectionEnabled:!0,layout:I,stylesheet:R,cy:function(e){A=e,e.on("mouseover","edge",function(e){var t=e.target;t.css({width:10});var n=e.target.id();s.fireEvent("selectNodeSum",{nodeId:n,target:t}),s.fireEvent("selectNodeCl",{nodeId:n,target:t})}),e.on("mouseover","node",function(e){e.target.css({"border-width":20});var t=e.target.id();s.fireEvent("hoverNodeSum",{nodeId:t}),s.fireEvent("hoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=1,a.style.zIndex=100,a.style.fontWeight="bold")}),e.on("mouseout","node",function(e){e.target.css({"border-width":10});var t=e.target.id();s.fireEvent("dehoverNodeSum",{nodeId:t}),s.fireEvent("dehoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=.7,a.style.zIndex=1,a.style.fontWeight="normal")}),e.on("mouseout","edge",function(e){var t=e.target;t.css({width:3});var n=e.target.id();s.fireEvent("deselectNodeSum",{nodeId:n,target:t}),s.fireEvent("deselectNodeCl",{nodeId:n,target:t})})}})},[j])},A=n(19),B=function e(t){return Object(A.a)(this,e),new Proxy({},{get:function(e,n){return n in e?e[n]:t}})};function k(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function j(e){return encodeURIComponent(function(e){for(var t,n=(3-e.length%3)%3,a="",r=e.length,o=0,i=0;i<r;i++)t=i%3,o|=e[i]<<(16>>>t&24),2!==t&&e.length-i!==1||(a+=String.fromCharCode(k(o>>>18&63),k(o>>>12&63),k(o>>>6&63),k(63&o)),o=0);return 0===n?a:a.substring(0,a.length-n)+(1===n?"=":"==")}(e).replace(/\+/g,"-").replace(/\//g,"_"))}function C(e){return function(e,t){for(var n,a,r,o=e.replace(/[^A-Za-z0-9\+\/]/g,""),i=o.length,s=t?Math.ceil((3*i+1>>>2)/t)*t:3*i+1>>>2,c=new Uint8Array(s),l=0,u=0,d=0;d<i;d++)if(a=3&d,l|=((r=o.charCodeAt(d))>64&&r<91?r-65:r>96&&r<123?r-71:r>47&&r<58?r+4:43===r?62:47===r?63:0)<<18-6*a,3===a||i-d===1){for(n=0;n<3&&u<s;n++,u++)c[u]=l>>>(16>>>n&24)&255;l=0}return c}(decodeURIComponent(e).replace(/-/g,"+").replace(/_/g,"/"))}var R=4294967296,z=[4294967295,-R],N=[0,-0x8000000000000000],I=[0,0],x=[1,0];function L(e,t){return T(e[0]+t[0],e[1]+t[1])}function M(e){var t=[];return t[e-1]=void 0,t}function D(e,t){return function(e,t){var n;n=t,t<0&&(n+=R);return[n,e*R]}(~~Math.max(Math.min(e[1]/R,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/R,2147483647),-2147483648),G(e)&G(t))}function F(e,t){var n,a;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,a=t[1]<0,n&&!a?-1:!n&&a?1:J(e,t)[1]<0?-1:1)}function T(e,t){var n,a;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%R)+(a=Math.floor(e/R)*R),e=e-a+n;e<0;)e+=R,t-=R;for(;e>4294967295;)e-=R,t+=R;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function H(e,t){return e[0]==t[0]&&e[1]==t[1]}function q(e){return e>=0?[e,0]:[e+R,-R]}function G(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-R,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function W(e){return e<=30?1<<e:W(30)*W(e-30)}function U(e,t){var n,a,r,o;if(t&=63,H(e,N))return t?I:e;if(e[1]<0)throw new Error("Neg");return o=W(t),a=e[1]*o%0x10000000000000000,(a+=n=(r=e[0]*o)-r%R)>=0x8000000000000000&&(a-=0x10000000000000000),[r-=n,a]}function $(e,t){var n;return n=W(t&=63),T(Math.floor(e[0]/n),e[1]/n)}function J(e,t){return T(e[0]-t[0],e[1]-t[1])}function Y(e,t){return e.buf=t,e.pos=0,e.count=t.length,e}function K(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function V(e,t,n,a){return e.pos>=e.count?-1:(a=Math.min(a,e.count-e.pos),te(e.buf,e.pos,t,n,a),e.pos+=a,a)}function X(e){return e.buf=M(32),e.count=0,e}function Z(e){var t=e.buf;return t.length=e.count,t}function Q(e,t){e.buf[e.count++]=t<<24>>24}function ee(e,t,n,a){te(t,n,e.buf,e.count,a),e.count+=a}function te(e,t,n,a,r){for(var o=0;o<r;++o)n[a+o]=e[t+o]}function ne(e,t,n,a,r,o){var i,s;if(F(a,z)<0)throw new Error("invalid length "+a);for(e.length_0=a,function(e,t){!function(e,t){e._dictionarySize=t;for(var n=0;t>1<<n;++n);e._distTableSize=2*n}(t,1<<e.s),t._numFastBytes=e.f,function(e,t){var n=e._matchFinderType;e._matchFinderType=t,e._matchFinder&&n!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null)}(t,e.m),t._numLiteralPosStateBits=0,t._numLiteralContextBits=3,t._posStateBits=2,t._posStateMask=3}(r,i=function(e){var t;for(e._repDistances=M(4),e._optimum=[],e._rangeEncoder={},e._isMatch=M(192),e._isRep=M(12),e._isRepG0=M(12),e._isRepG1=M(12),e._isRepG2=M(12),e._isRep0Long=M(192),e._posSlotEncoder=[],e._posEncoders=M(114),e._posAlignEncoder=Ke({},4),e._lenEncoder=De({}),e._repMatchLenEncoder=De({}),e._literalEncoder={},e._matchDistances=[],e._posSlotPrices=[],e._distancesPrices=[],e._alignPrices=M(16),e.reps=M(4),e.repLens=M(4),e.processedInSize=[I],e.processedOutSize=[I],e.finished=[0],e.properties=M(5),e.tempPrices=M(128),e._longestMatchLength=0,e._matchFinderType=1,e._numDistancePairs=0,e._numFastBytesPrev=-1,e.backRes=0,t=0;t<4096;++t)e._optimum[t]={};for(t=0;t<4;++t)e._posSlotEncoder[t]=Ke({},6);return e}({})),i._writeEndMark=o,function(e,t){e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24;for(var n=0;n<4;++n)e.properties[1+n]=e._dictionarySize>>8*n<<24>>24;ee(t,e.properties,0,5)}(i,n),s=0;s<64;s+=8)Q(n,255&G($(a,s)));e.chunker=(i._needReleaseMFStream=0,i._inStream=t,i._finished=0,function(e){var t,n;e._matchFinder||(t={},n=4,e._matchFinderType||(n=2),function(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}(t,n),e._matchFinder=t);if(function(e,t,n){var a,r;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,r=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=M(r),a=0;a<r;++a)e.m_Coders[a]=We({})}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),e._dictionarySize==e._dictionarySizePrev&&e._numFastBytesPrev==e._numFastBytes)return;(function(e,t,n,a,r){var o,i;t<1073741567&&(e._cutValue=16+(a>>1),function(e,t,n,a){var r;e._keepSizeBefore=t,e._keepSizeAfter=n,r=t+n+a,(null==e._bufferBase||e._blockSize!=r)&&(e._bufferBase=null,e._blockSize=r,e._bufferBase=M(e._blockSize));e._pointerToLastSafePosition=e._blockSize-n}(e,t+n,a+r,256+~~((t+n+a+r)/2)),e._matchMaxLen=a,o=t+1,e._cyclicBufferSize!=o&&(e._son=M(2*(e._cyclicBufferSize=o))),i=65536,e.HASH_ARRAY&&(i=t-1,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i>>=1,(i|=65535)>16777216&&(i>>=1),e._hashMask=i,++i,i+=e.kFixHashSize),i!=e._hashSizeSum&&(e._hash=M(e._hashSizeSum=i)))})(e._matchFinder,e._dictionarySize,4096,e._numFastBytes,274),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes}(i),i._rangeEncoder.Stream=n,function(e){(function(e){e._state=0,e._previousByte=0;for(var t=0;t<4;++t)e._repDistances[t]=0})(e),function(e){e._position=I,e.Low=I,e.Range=-1,e._cacheSize=1,e._cache=0}(e._rangeEncoder),at(e._isMatch),at(e._isRep0Long),at(e._isRep),at(e._isRepG0),at(e._isRepG1),at(e._isRepG2),at(e._posEncoders),function(e){var t,n=1<<e.m_NumPrevBits+e.m_NumPosBits;for(t=0;t<n;++t)at(e.m_Coders[t].m_Encoders)}(e._literalEncoder);for(var t=0;t<4;++t)at(e._posSlotEncoder[t].Models);xe(e._lenEncoder,1<<e._posStateBits),xe(e._repMatchLenEncoder,1<<e._posStateBits),at(e._posAlignEncoder.Models),e._longestMatchWasFound=0,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(i),Ae(i),Pe(i),i._lenEncoder._tableSize=i._numFastBytes+1-2,Te(i._lenEncoder,1<<i._posStateBits),i._repMatchLenEncoder._tableSize=i._numFastBytes+1-2,Te(i._repMatchLenEncoder,1<<i._posStateBits),i.nowPos64=I,function(e,t){return e.encoder=t,e.decoder=null,e.alive=1,e}({},i))}function ae(e,t,n){var a,r,o,i,s="",c=[];for(r=0;r<5;++r){if(-1==(o=K(t)))throw new Error("truncated input");c[r]=o<<24>>24}if(!function(e,t){var n,a,r,o,i,s,c;if(t.length<5)return 0;for(c=255&t[0],r=c%9,o=(s=~~(c/9))%5,i=~~(s/5),n=0,a=0;a<4;++a)n+=(255&t[1+a])<<8*a;if(n>99999999||!function(e,t,n,a){if(t>8||n>4||a>4)return 0;!function(e,t,n){var a,r;if(null!=e.m_Coders&&e.m_NumPrevBits==n&&e.m_NumPosBits==t)return;for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,r=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=M(r),a=0;a<r;++a)e.m_Coders[a]=Oe({})}(e.m_LiteralDecoder,n,t);var r=1<<a;return ge(e.m_LenDecoder,r),ge(e.m_RepLenDecoder,r),e.m_PosStateMask=r-1,1}(e,r,o,i))return 0;return function(e,t){if(t<0)return 0;e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=Math.max(e.m_DictionarySize,1),function(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=M(t));e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,Math.max(e.m_DictionarySizeCheck,4096)));return 1}(e,n)}(a=function(e){e.m_OutWindow={},e.m_RangeDecoder={},e.m_IsMatchDecoders=M(192),e.m_IsRepDecoders=M(12),e.m_IsRepG0Decoders=M(12),e.m_IsRepG1Decoders=M(12),e.m_IsRepG2Decoders=M(12),e.m_IsRep0LongDecoders=M(192),e.m_PosSlotDecoder=M(4),e.m_PosDecoders=M(114),e.m_PosAlignDecoder=Je({},4),e.m_LenDecoder=Ee({}),e.m_RepLenDecoder=Ee({}),e.m_LiteralDecoder={};for(var t=0;t<4;++t)e.m_PosSlotDecoder[t]=Je({},6);return e}({}),c))throw new Error("corrupted input");for(r=0;r<64;r+=8){if(-1==(o=K(t)))throw new Error("truncated input");1==(o=o.toString(16)).length&&(o="0"+o),s=o+""+s}/^0+$|^f+$/i.test(s)?e.length_0=z:(i=parseInt(s,16),e.length_0=i>4294967295?z:q(i)),e.chunker=function(e,t,n,a){return e.m_RangeDecoder.Stream=t,pe(e.m_OutWindow),e.m_OutWindow._stream=n,function(e){e.m_OutWindow._streamPos=0,e.m_OutWindow._pos=0,at(e.m_IsMatchDecoders),at(e.m_IsRep0LongDecoders),at(e.m_IsRepDecoders),at(e.m_IsRepG0Decoders),at(e.m_IsRepG1Decoders),at(e.m_IsRepG2Decoders),at(e.m_PosDecoders),function(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)at(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder);for(var t=0;t<4;++t)at(e.m_PosSlotDecoder[t].Models);ye(e.m_LenDecoder),ye(e.m_RepLenDecoder),at(e.m_PosAlignDecoder.Models),function(e){e.Code=0,e.Range=-1;for(var t=0;t<5;++t)e.Code=e.Code<<8|K(e.Stream)}(e.m_RangeDecoder)}(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=a,e.nowPos64=I,e.prevByte=0,function(e,t){return e.decoder=t,e.encoder=null,e.alive=1,e}({},e)}(a,t,n,e.length_0)}function re(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function oe(e,t,n,a){var r,o;for(e._streamEndWasReached&&e._pos+t+a>e._streamPos&&(a=e._streamPos-(e._pos+t)),++n,o=e._bufferOffset+e._pos+t,r=0;r<a&&e._bufferBase[o+r]==e._bufferBase[o+r-n];++r);return r}function ie(e){return e._streamPos-e._pos}function se(e){var t,n;if(!e._streamEndWasReached)for(;;){if(!(n=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=V(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,n)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=1);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function ce(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}var le=function(){var e,t,n,a=[];for(e=0;e<256;++e){for(n=e,t=0;t<8;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;a[e]=n}return a}();function ue(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),function(e){++e._pos,e._pos>e._posLimit&&(e._bufferOffset+e._pos>e._pointerToLastSafePosition&&function(e){var t,n,a;for((a=e._bufferOffset+e._pos-e._keepSizeBefore)>0&&--a,n=e._bufferOffset+e._streamPos-a,t=0;t<n;++t)e._bufferBase[t]=e._bufferBase[a+t];e._bufferOffset-=a}(e),se(e))}(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,de(e._son,2*e._cyclicBufferSize,t),de(e._hash,e._hashSizeSum,t),ce(e,t))}function de(e,t,n){var a,r;for(a=0;a<t;++a)(r=e[a]||0)<=n?r=0:r-=n,e[a]=r}function me(e){var t=e._pos-e._streamPos;t&&(ee(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function fe(e,t){var n=e._pos-t-1;return n<0&&(n+=e._windowSize),e._buffer[n]}function pe(e){me(e),e._stream=null}function _e(e){return(e-=2)<4?e:3}function he(e){return e<4?0:e<10?e-3:e-6}function ve(e){if(!e.alive)throw new Error("bad state");return e.encoder?function(e){(function(e,t,n,a){var r,o,i,s,c,l,u,d,m,f,p,_,h,v,g;if(t[0]=I,n[0]=I,a[0]=1,e._inStream&&(e._matchFinder._stream=e._inStream,function(e){e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=0,se(e),e._cyclicBufferPos=0,ce(e,-1)}(e._matchFinder),e._needReleaseMFStream=1,e._inStream=null),!e._finished){if(e._finished=1,v=e.nowPos64,H(e.nowPos64,I)){if(!ie(e._matchFinder))return void Be(e,G(e.nowPos64));ze(e),h=G(e.nowPos64)&e._posStateMask,ot(e._rangeEncoder,e._isMatch,(e._state<<4)+h,0),e._state=he(e._state),i=re(e._matchFinder,-e._additionalOffset),qe(He(e._literalEncoder,G(e.nowPos64),e._previousByte),e._rangeEncoder,i),e._previousByte=i,--e._additionalOffset,e.nowPos64=L(e.nowPos64,x)}if(ie(e._matchFinder))for(;;){if(u=ke(e,G(e.nowPos64)),f=e.backRes,h=G(e.nowPos64)&e._posStateMask,o=(e._state<<4)+h,1==u&&-1==f)ot(e._rangeEncoder,e._isMatch,o,0),i=re(e._matchFinder,-e._additionalOffset),g=He(e._literalEncoder,G(e.nowPos64),e._previousByte),e._state<7?qe(g,e._rangeEncoder,i):(m=re(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),Ge(g,e._rangeEncoder,m,i)),e._previousByte=i,e._state=he(e._state);else{if(ot(e._rangeEncoder,e._isMatch,o,1),f<4){if(ot(e._rangeEncoder,e._isRep,e._state,1),f?(ot(e._rangeEncoder,e._isRepG0,e._state,1),1==f?ot(e._rangeEncoder,e._isRepG1,e._state,0):(ot(e._rangeEncoder,e._isRepG1,e._state,1),ot(e._rangeEncoder,e._isRepG2,e._state,f-2))):(ot(e._rangeEncoder,e._isRepG0,e._state,0),ot(e._rangeEncoder,e._isRep0Long,o,1==u?0:1)),1==u?e._state=e._state<7?9:11:(Me(e._repMatchLenEncoder,e._rangeEncoder,u-2,h),e._state=e._state<7?8:11),s=e._repDistances[f],0!=f){for(l=f;l>=1;--l)e._repDistances[l]=e._repDistances[l-1];e._repDistances[0]=s}}else{for(ot(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,Me(e._lenEncoder,e._rangeEncoder,u-2,h),_=Ie(f-=4),d=_e(u),Ve(e._posSlotEncoder[d],e._rangeEncoder,_),_>=4&&(p=f-(r=(2|1&_)<<(c=(_>>1)-1)),_<14?et(e._posEncoders,r-_-1,e._rangeEncoder,c,p):(it(e._rangeEncoder,p>>4,c-4),Ze(e._posAlignEncoder,e._rangeEncoder,15&p),++e._alignPriceCount)),s=f,l=3;l>=1;--l)e._repDistances[l]=e._repDistances[l-1];e._repDistances[0]=s,++e._matchPriceCount}e._previousByte=re(e._matchFinder,u-1-e._additionalOffset)}if(e._additionalOffset-=u,e.nowPos64=L(e.nowPos64,q(u)),!e._additionalOffset){if(e._matchPriceCount>=128&&Ae(e),e._alignPriceCount>=16&&Pe(e),t[0]=e.nowPos64,n[0]=st(e._rangeEncoder),!ie(e._matchFinder))return void Be(e,G(e.nowPos64));if(F(J(e.nowPos64,v),[4096,0])>=0)return e._finished=0,void(a[0]=0)}}else Be(e,G(e.nowPos64))}})(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(!function(e){Ne(e),e._rangeEncoder.Stream=null}(e.encoder),e.alive=0)}(e):function(e){var t=function(e){var t,n,a,r,o,i;if(i=G(e.nowPos64)&e.m_PosStateMask,nt(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+i)){if(nt(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))a=0,nt(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?(nt(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?(nt(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?(n=e.rep3,e.rep3=e.rep2):n=e.rep2,e.rep2=e.rep1):n=e.rep1,e.rep1=e.rep0,e.rep0=n):nt(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+i)||(e.state=e.state<7?9:11,a=1),a||(a=be(e.m_RepLenDecoder,e.m_RangeDecoder,i)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,a=2+be(e.m_LenDecoder,e.m_RangeDecoder,i),e.state=e.state<7?7:10,(o=Ye(e.m_PosSlotDecoder[_e(a)],e.m_RangeDecoder))>=4){if(r=(o>>1)-1,e.rep0=(2|1&o)<<r,o<14)e.rep0+=function(e,t,n,a){var r,o,i=1,s=0;for(o=0;o<a;++o)r=nt(n,e,t+i),i<<=1,i+=r,s|=r<<o;return s}(e.m_PosDecoders,e.rep0-o-1,e.m_RangeDecoder,r);else if(e.rep0+=function(e,t){var n,a,r=0;for(n=t;0!=n;--n)e.Range>>>=1,a=e.Code-e.Range>>>31,e.Code-=e.Range&a-1,r=r<<1|1-a,-16777216&e.Range||(e.Code=e.Code<<8|K(e.Stream),e.Range<<=8);return r}(e.m_RangeDecoder,r-4)<<4,e.rep0+=function(e,t){var n,a,r=1,o=0;for(a=0;a<e.NumBitLevels;++a)n=nt(t,e.Models,r),r<<=1,r+=n,o|=n<<a;return o}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=o;if(F(q(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;!function(e,t,n){var a=e._pos-t-1;for(a<0&&(a+=e._windowSize);0!=n;--n)a>=e._windowSize&&(a=0),e._buffer[e._pos++]=e._buffer[a++],e._pos>=e._windowSize&&me(e)}(e.m_OutWindow,e.rep0,a),e.nowPos64=L(e.nowPos64,q(a)),e.prevByte=fe(e.m_OutWindow,0)}else t=function(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}(e.m_LiteralDecoder,G(e.nowPos64),e.prevByte),e.state<7?e.prevByte=function(e,t){var n=1;do{n=n<<1|nt(t,e.m_Decoders,n)}while(n<256);return n<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function(e,t,n){var a,r,o=1;do{if(r=n>>7&1,n<<=1,a=nt(t,e.m_Decoders,(1+r<<8)+o),o=o<<1|a,r!=a){for(;o<256;)o=o<<1|nt(t,e.m_Decoders,o);break}}while(o<256);return o<<24>>24}(t,e.m_RangeDecoder,fe(e.m_OutWindow,e.rep0)),function(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&me(e)}(e.m_OutWindow,e.prevByte),e.state=he(e.state),e.nowPos64=L(e.nowPos64,x);return 0}(e.decoder);if(-1==t)throw new Error("corrupted input");e.inBytesProcessed=z,e.outBytesProcessed=e.decoder.nowPos64,(t||F(e.decoder.outSize,I)>=0&&F(e.decoder.nowPos64,e.decoder.outSize)>=0)&&(me(e.decoder.m_OutWindow),pe(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}(e),e.alive}function ge(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=Je({},3),e.m_MidCoder[e.m_NumPosStates]=Je({},3)}function be(e,t,n){if(!nt(t,e.m_Choice,0))return Ye(e.m_LowCoder[n],t);var a=8;return nt(t,e.m_Choice,1)?a+=8+Ye(e.m_HighCoder,t):a+=Ye(e.m_MidCoder[n],t),a}function Ee(e){return e.m_Choice=M(2),e.m_LowCoder=M(16),e.m_MidCoder=M(16),e.m_HighCoder=Je({},8),e.m_NumPosStates=0,e}function ye(e){at(e.m_Choice);for(var t=0;t<e.m_NumPosStates;++t)at(e.m_LowCoder[t].Models),at(e.m_MidCoder[t].Models);at(e.m_HighCoder.Models)}function Oe(e){return e.m_Decoders=M(768),e}var Se=function(){var e,t,n,a=2,r=[0,1];for(n=2;n<22;++n)for(t=1<<(n>>1)-1,e=0;e<t;++e,++a)r[a]=n<<24>>24;return r}();function we(e,t){var n,a,r,o;e._optimumEndIndex=t,r=e._optimum[t].PosPrev,a=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&($e(e._optimum[r]),e._optimum[r].PosPrev=r-1,e._optimum[t].Prev2&&(e._optimum[r-1].Prev1IsChar=0,e._optimum[r-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[r-1].BackPrev=e._optimum[t].BackPrev2)),o=r,n=a,a=e._optimum[o].BackPrev,r=e._optimum[o].PosPrev,e._optimum[o].BackPrev=n,e._optimum[o].PosPrev=t,t=o}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function Pe(e){for(var t=0;t<16;++t)e._alignPrices[t]=Qe(e._posAlignEncoder,t);e._alignPriceCount=0}function Ae(e){var t,n,a,r,o,i,s,c;for(r=4;r<128;++r)t=(2|1&(i=Ie(r)))<<(a=(i>>1)-1),e.tempPrices[r]=tt(e._posEncoders,t-i-1,a,r-t);for(o=0;o<4;++o){for(n=e._posSlotEncoder[o],s=o<<6,i=0;i<e._distTableSize;++i)e._posSlotPrices[s+i]=Xe(n,i);for(i=14;i<e._distTableSize;++i)e._posSlotPrices[s+i]+=(i>>1)-1-4<<6;for(c=128*o,r=0;r<4;++r)e._distancesPrices[c+r]=e._posSlotPrices[s+r];for(;r<128;++r)e._distancesPrices[c+r]=e._posSlotPrices[s+Ie(r)]+e.tempPrices[r]}e._matchPriceCount=0}function Be(e,t){Ne(e),function(e,t){if(!e._writeEndMark)return;ot(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),ot(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,Me(e._lenEncoder,e._rangeEncoder,0,t);var n=_e(2);Ve(e._posSlotEncoder[n],e._rangeEncoder,63),it(e._rangeEncoder,67108863,26),Ze(e._posAlignEncoder,e._rangeEncoder,15)}(e,t&e._posStateMask);for(var n=0;n<5;++n)ct(e._rangeEncoder)}function ke(e,t){var n,a,r,o,i,s,c,l,u,d,m,f,p,_,h,v,g,b,E,y,O,S,w,P,A,B,k,j,C,R,z,N,I,x,L,M,D,F,T,H,q,G,W,U;if(e._optimumEndIndex!=e._optimumCurrentIndex)return p=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,p;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(f=e._longestMatchLength,e._longestMatchWasFound=0):f=ze(e),B=e._numDistancePairs,(P=ie(e._matchFinder)+1)<2)return e.backRes=-1,1;for(P>273&&(P=273),T=0,u=0;u<4;++u)e.reps[u]=e._repDistances[u],e.repLens[u]=oe(e._matchFinder,-1,e.reps[u],273),e.repLens[u]>e.repLens[T]&&(T=u);if(e.repLens[T]>=e._numFastBytes)return e.backRes=T,Re(e,(p=e.repLens[T])-1),p;if(f>=e._numFastBytes)return e.backRes=e._matchDistances[B-1]+4,Re(e,f-1),f;if(c=re(e._matchFinder,-1),g=re(e._matchFinder,-e._repDistances[0]-1-1),f<2&&c!=g&&e.repLens[T]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,I=t&e._posStateMask,e._optimum[1].Price=rt[e._isMatch[(e._state<<4)+I]>>>2]+Ue(He(e._literalEncoder,t,e._previousByte),e._state>=7,g,c),$e(e._optimum[1]),F=(b=rt[2048-e._isMatch[(e._state<<4)+I]>>>2])+rt[2048-e._isRep[e._state]>>>2],g==c&&(H=F+function(e,t,n){return rt[e._isRepG0[t]>>>2]+rt[e._isRep0Long[(t<<4)+n]>>>2]}(e,e._state,I))<e._optimum[1].Price&&(e._optimum[1].Price=H,function(e){e.BackPrev=0,e.Prev1IsChar=0}(e._optimum[1])),(m=f>=e.repLens[T]?f:e.repLens[T])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],d=m;do{e._optimum[d--].Price=268435455}while(d>=2);for(u=0;u<4;++u)if(!((D=e.repLens[u])<2)){L=F+Ce(e,u,e._state,I);do{(o=L+Fe(e._repMatchLenEncoder,D-2,I))<(R=e._optimum[D]).Price&&(R.Price=o,R.PosPrev=0,R.BackPrev=u,R.Prev1IsChar=0)}while(--D>=2)}if(w=b+rt[e._isRep[e._state]>>>2],(d=e.repLens[0]>=2?e.repLens[0]+1:2)<=f){for(k=0;d>e._matchDistances[k];)k+=2;for(;(o=w+je(e,l=e._matchDistances[k+1],d,I))<(R=e._optimum[d]).Price&&(R.Price=o,R.PosPrev=0,R.BackPrev=l+4,R.Prev1IsChar=0),d!=e._matchDistances[k]||(k+=2)!=B;++d);}for(n=0;;){if(++n==m)return we(e,n);if(E=ze(e),B=e._numDistancePairs,E>=e._numFastBytes)return e._longestMatchLength=E,e._longestMatchWasFound=1,we(e,n);if(++t,N=e._optimum[n].PosPrev,e._optimum[n].Prev1IsChar?(--N,e._optimum[n].Prev2?(G=e._optimum[e._optimum[n].PosPrev2].State,G=e._optimum[n].BackPrev2<4?G<7?8:11:G<7?7:10):G=e._optimum[N].State,G=he(G)):G=e._optimum[N].State,N==n-1?G=e._optimum[n].BackPrev?he(G):G<7?9:11:(e._optimum[n].Prev1IsChar&&e._optimum[n].Prev2?(N=e._optimum[n].PosPrev2,z=e._optimum[n].BackPrev2,G=G<7?8:11):G=(z=e._optimum[n].BackPrev)<4?G<7?8:11:G<7?7:10,C=e._optimum[N],z<4?z?1==z?(e.reps[0]=C.Backs1,e.reps[1]=C.Backs0,e.reps[2]=C.Backs2,e.reps[3]=C.Backs3):2==z?(e.reps[0]=C.Backs2,e.reps[1]=C.Backs0,e.reps[2]=C.Backs1,e.reps[3]=C.Backs3):(e.reps[0]=C.Backs3,e.reps[1]=C.Backs0,e.reps[2]=C.Backs1,e.reps[3]=C.Backs2):(e.reps[0]=C.Backs0,e.reps[1]=C.Backs1,e.reps[2]=C.Backs2,e.reps[3]=C.Backs3):(e.reps[0]=z-4,e.reps[1]=C.Backs0,e.reps[2]=C.Backs1,e.reps[3]=C.Backs2)),e._optimum[n].State=G,e._optimum[n].Backs0=e.reps[0],e._optimum[n].Backs1=e.reps[1],e._optimum[n].Backs2=e.reps[2],e._optimum[n].Backs3=e.reps[3],s=e._optimum[n].Price,c=re(e._matchFinder,-1),g=re(e._matchFinder,-e.reps[0]-1-1),I=t&e._posStateMask,y=0,(a=s+rt[e._isMatch[(G<<4)+I]>>>2]+Ue(He(e._literalEncoder,t,re(e._matchFinder,-2)),G>=7,g,c))<(O=e._optimum[n+1]).Price&&(O.Price=a,O.PosPrev=n,O.BackPrev=-1,O.Prev1IsChar=0,y=1),F=(b=s+rt[2048-e._isMatch[(G<<4)+I]>>>2])+rt[2048-e._isRep[G]>>>2],g!=c||O.PosPrev<n&&!O.BackPrev||(H=F+(rt[e._isRepG0[G]>>>2]+rt[e._isRep0Long[(G<<4)+I]>>>2]))<=O.Price&&(O.Price=H,O.PosPrev=n,O.BackPrev=0,O.Prev1IsChar=0,y=1),!((P=A=4095-n<(A=ie(e._matchFinder)+1)?4095-n:A)<2)){if(P>e._numFastBytes&&(P=e._numFastBytes),!y&&g!=c&&(U=Math.min(A-1,e._numFastBytes),(h=oe(e._matchFinder,0,e.reps[0],U))>=2)){for(W=he(G),x=t+1&e._posStateMask,S=a+rt[2048-e._isMatch[(W<<4)+x]>>>2]+rt[2048-e._isRep[W]>>>2],j=n+1+h;m<j;)e._optimum[++m].Price=268435455;(o=S+(Fe(e._repMatchLenEncoder,h-2,x)+Ce(e,0,W,x)))<(R=e._optimum[j]).Price&&(R.Price=o,R.PosPrev=n+1,R.BackPrev=0,R.Prev1IsChar=1,R.Prev2=0)}for(q=2,M=0;M<4;++M)if(!((_=oe(e._matchFinder,-1,e.reps[M],P))<2)){v=_;do{for(;m<n+_;)e._optimum[++m].Price=268435455;(o=F+(Fe(e._repMatchLenEncoder,_-2,I)+Ce(e,M,G,I)))<(R=e._optimum[n+_]).Price&&(R.Price=o,R.PosPrev=n,R.BackPrev=M,R.Prev1IsChar=0)}while(--_>=2);if(_=v,M||(q=_+1),_<A&&(U=Math.min(A-1-_,e._numFastBytes),(h=oe(e._matchFinder,_,e.reps[M],U))>=2)){for(W=G<7?8:11,x=t+_&e._posStateMask,r=F+(Fe(e._repMatchLenEncoder,_-2,I)+Ce(e,M,G,I))+rt[e._isMatch[(W<<4)+x]>>>2]+Ue(He(e._literalEncoder,t+_,re(e._matchFinder,_-1-1)),1,re(e._matchFinder,_-1-(e.reps[M]+1)),re(e._matchFinder,_-1)),W=he(W),x=t+_+1&e._posStateMask,S=r+rt[2048-e._isMatch[(W<<4)+x]>>>2]+rt[2048-e._isRep[W]>>>2],j=_+1+h;m<n+j;)e._optimum[++m].Price=268435455;(o=S+(Fe(e._repMatchLenEncoder,h-2,x)+Ce(e,0,W,x)))<(R=e._optimum[n+j]).Price&&(R.Price=o,R.PosPrev=n+_+1,R.BackPrev=0,R.Prev1IsChar=1,R.Prev2=1,R.PosPrev2=n,R.BackPrev2=M)}}if(E>P){for(E=P,B=0;E>e._matchDistances[B];B+=2);e._matchDistances[B]=E,B+=2}if(E>=q){for(w=b+rt[e._isRep[G]>>>2];m<n+E;)e._optimum[++m].Price=268435455;for(k=0;q>e._matchDistances[k];)k+=2;for(_=q;;++_)if((o=w+je(e,i=e._matchDistances[k+1],_,I))<(R=e._optimum[n+_]).Price&&(R.Price=o,R.PosPrev=n,R.BackPrev=i+4,R.Prev1IsChar=0),_==e._matchDistances[k]){if(_<A&&(U=Math.min(A-1-_,e._numFastBytes),(h=oe(e._matchFinder,_,i,U))>=2)){for(W=G<7?7:10,x=t+_&e._posStateMask,r=o+rt[e._isMatch[(W<<4)+x]>>>2]+Ue(He(e._literalEncoder,t+_,re(e._matchFinder,_-1-1)),1,re(e._matchFinder,_-(i+1)-1),re(e._matchFinder,_-1)),W=he(W),x=t+_+1&e._posStateMask,S=r+rt[2048-e._isMatch[(W<<4)+x]>>>2]+rt[2048-e._isRep[W]>>>2],j=_+1+h;m<n+j;)e._optimum[++m].Price=268435455;(o=S+(Fe(e._repMatchLenEncoder,h-2,x)+Ce(e,0,W,x)))<(R=e._optimum[n+j]).Price&&(R.Price=o,R.PosPrev=n+_+1,R.BackPrev=0,R.Prev1IsChar=1,R.Prev2=1,R.PosPrev2=n,R.BackPrev2=i+4)}if((k+=2)==B)break}}}}}function je(e,t,n,a){var r=_e(n);return(t<128?e._distancesPrices[128*r+t]:e._posSlotPrices[(r<<6)+function(e){if(e<131072)return Se[e>>6]+12;if(e<134217728)return Se[e>>16]+32;return Se[e>>26]+52}(t)]+e._alignPrices[15&t])+Fe(e._lenEncoder,n-2,a)}function Ce(e,t,n,a){var r;return t?(r=rt[2048-e._isRepG0[n]>>>2],1==t?r+=rt[e._isRepG1[n]>>>2]:(r+=rt[2048-e._isRepG1[n]>>>2],r+=lt(e._isRepG2[n],t-2))):(r=rt[e._isRepG0[n]>>>2],r+=rt[2048-e._isRep0Long[(n<<4)+a]>>>2]),r}function Re(e,t){t>0&&(!function(e,t){var n,a,r,o,i,s,c,l,u,d,m,f,p,_,h,v,g;do{if(e._pos+e._matchMaxLen<=e._streamPos)f=e._matchMaxLen;else if((f=e._streamPos-e._pos)<e.kMinMatchCheck){ue(e);continue}for(p=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,a=e._bufferOffset+e._pos,e.HASH_ARRAY?(s=1023&(g=le[255&e._bufferBase[a]]^255&e._bufferBase[a+1]),e._hash[s]=e._pos,c=65535&(g^=(255&e._bufferBase[a+2])<<8),e._hash[1024+c]=e._pos,l=(g^le[255&e._bufferBase[a+3]]<<5)&e._hashMask):l=255&e._bufferBase[a]^(255&e._bufferBase[a+1])<<8,r=e._hash[e.kFixHashSize+l],e._hash[e.kFixHashSize+l]=e._pos,h=1+(e._cyclicBufferPos<<1),v=e._cyclicBufferPos<<1,d=m=e.kNumHashDirectBytes,n=e._cutValue;;){if(r<=p||0==n--){e._son[h]=e._son[v]=0;break}if(o=((i=e._pos-r)<=e._cyclicBufferPos?e._cyclicBufferPos-i:e._cyclicBufferPos-i+e._cyclicBufferSize)<<1,_=e._bufferOffset+r,u=d<m?d:m,e._bufferBase[_+u]==e._bufferBase[a+u]){for(;++u!=f&&e._bufferBase[_+u]==e._bufferBase[a+u];);if(u==f){e._son[v]=e._son[o],e._son[h]=e._son[o+1];break}}(255&e._bufferBase[_+u])<(255&e._bufferBase[a+u])?(e._son[v]=r,v=o+1,r=e._son[v],m=u):(e._son[h]=r,h=o,r=e._son[h],d=u)}ue(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function ze(e){var t=0;return e._numDistancePairs=function(e,t){var n,a,r,o,i,s,c,l,u,d,m,f,p,_,h,v,g,b,E,y,O;if(e._pos+e._matchMaxLen<=e._streamPos)_=e._matchMaxLen;else if((_=e._streamPos-e._pos)<e.kMinMatchCheck)return ue(e),0;for(g=0,h=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,a=e._bufferOffset+e._pos,v=1,l=0,u=0,e.HASH_ARRAY?(l=1023&(O=le[255&e._bufferBase[a]]^255&e._bufferBase[a+1]),u=65535&(O^=(255&e._bufferBase[a+2])<<8),d=(O^le[255&e._bufferBase[a+3]]<<5)&e._hashMask):d=255&e._bufferBase[a]^(255&e._bufferBase[a+1])<<8,r=e._hash[e.kFixHashSize+d]||0,e.HASH_ARRAY&&(o=e._hash[l]||0,i=e._hash[1024+u]||0,e._hash[l]=e._pos,e._hash[1024+u]=e._pos,o>h&&e._bufferBase[e._bufferOffset+o]==e._bufferBase[a]&&(t[g++]=v=2,t[g++]=e._pos-o-1),i>h&&e._bufferBase[e._bufferOffset+i]==e._bufferBase[a]&&(i==o&&(g-=2),t[g++]=v=3,t[g++]=e._pos-i-1,o=i),0!=g&&o==r&&(g-=2,v=1)),e._hash[e.kFixHashSize+d]=e._pos,E=1+(e._cyclicBufferPos<<1),y=e._cyclicBufferPos<<1,f=p=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&r>h&&e._bufferBase[e._bufferOffset+r+e.kNumHashDirectBytes]!=e._bufferBase[a+e.kNumHashDirectBytes]&&(t[g++]=v=e.kNumHashDirectBytes,t[g++]=e._pos-r-1),n=e._cutValue;;){if(r<=h||0==n--){e._son[E]=e._son[y]=0;break}if(s=((c=e._pos-r)<=e._cyclicBufferPos?e._cyclicBufferPos-c:e._cyclicBufferPos-c+e._cyclicBufferSize)<<1,b=e._bufferOffset+r,m=f<p?f:p,e._bufferBase[b+m]==e._bufferBase[a+m]){for(;++m!=_&&e._bufferBase[b+m]==e._bufferBase[a+m];);if(v<m&&(t[g++]=v=m,t[g++]=c-1,m==_)){e._son[y]=e._son[s],e._son[E]=e._son[s+1];break}}(255&e._bufferBase[b+m])<(255&e._bufferBase[a+m])?(e._son[y]=r,y=s+1,r=e._son[y],p=m):(e._son[E]=r,E=s,r=e._son[E],f=m)}return ue(e),g}(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=oe(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function Ne(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=0)}function Ie(e){return e<2048?Se[e]:e<2097152?Se[e>>10]+20:Se[e>>20]+40}function xe(e,t){at(e._choice);for(var n=0;n<t;++n)at(e._lowCoder[n].Models),at(e._midCoder[n].Models);at(e._highCoder.Models)}function Le(e,t,n,a,r){var o,i,s,c,l;for(o=rt[e._choice[0]>>>2],s=(i=rt[2048-e._choice[0]>>>2])+rt[e._choice[1]>>>2],c=i+rt[2048-e._choice[1]>>>2],l=0,l=0;l<8;++l){if(l>=n)return;a[r+l]=o+Xe(e._lowCoder[t],l)}for(;l<16;++l){if(l>=n)return;a[r+l]=s+Xe(e._midCoder[t],l-8)}for(;l<n;++l)a[r+l]=c+Xe(e._highCoder,l-8-8)}function Me(e,t,n,a){!function(e,t,n,a){n<8?(ot(t,e._choice,0,0),Ve(e._lowCoder[a],t,n)):(n-=8,ot(t,e._choice,0,1),n<8?(ot(t,e._choice,1,0),Ve(e._midCoder[a],t,n)):(ot(t,e._choice,1,1),Ve(e._highCoder,t,n-8)))}(e,t,n,a),0==--e._counters[a]&&(Le(e,a,e._tableSize,e._prices,272*a),e._counters[a]=e._tableSize)}function De(e){return function(e){e._choice=M(2),e._lowCoder=M(16),e._midCoder=M(16),e._highCoder=Ke({},8);for(var t=0;t<16;++t)e._lowCoder[t]=Ke({},3),e._midCoder[t]=Ke({},3)}(e),e._prices=[],e._counters=[],e}function Fe(e,t,n){return e._prices[272*n+t]}function Te(e,t){for(var n=0;n<t;++n)Le(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize}function He(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}function qe(e,t,n){var a,r,o=1;for(r=7;r>=0;--r)a=n>>r&1,ot(t,e.m_Encoders,o,a),o=o<<1|a}function Ge(e,t,n,a){var r,o,i,s,c=1,l=1;for(o=7;o>=0;--o)r=a>>o&1,s=l,c&&(s+=1+(i=n>>o&1)<<8,c=i==r),ot(t,e.m_Encoders,s,r),l=l<<1|r}function We(e){return e.m_Encoders=M(768),e}function Ue(e,t,n,a){var r,o,i=1,s=7,c=0;if(t)for(;s>=0;--s)if(o=n>>s&1,r=a>>s&1,c+=lt(e.m_Encoders[(1+o<<8)+i],r),i=i<<1|r,o!=r){--s;break}for(;s>=0;--s)r=a>>s&1,c+=lt(e.m_Encoders[i],r),i=i<<1|r;return c}function $e(e){e.BackPrev=-1,e.Prev1IsChar=0}function Je(e,t){return e.NumBitLevels=t,e.Models=M(1<<t),e}function Ye(e,t){var n,a=1;for(n=e.NumBitLevels;0!=n;--n)a=(a<<1)+nt(t,e.Models,a);return a-(1<<e.NumBitLevels)}function Ke(e,t){return e.NumBitLevels=t,e.Models=M(1<<t),e}function Ve(e,t,n){var a,r,o=1;for(r=e.NumBitLevels;0!=r;)a=n>>>--r&1,ot(t,e.Models,o,a),o=o<<1|a}function Xe(e,t){var n,a,r=1,o=0;for(a=e.NumBitLevels;0!=a;)n=t>>>--a&1,o+=lt(e.Models[r],n),r=(r<<1)+n;return o}function Ze(e,t,n){var a,r,o=1;for(r=0;r<e.NumBitLevels;++r)a=1&n,ot(t,e.Models,o,a),o=o<<1|a,n>>=1}function Qe(e,t){var n,a,r=1,o=0;for(a=e.NumBitLevels;0!=a;--a)n=1&t,t>>>=1,o+=lt(e.Models[r],n),r=r<<1|n;return o}function et(e,t,n,a,r){var o,i,s=1;for(i=0;i<a;++i)ot(n,e,t+s,o=1&r),s=s<<1|o,r>>=1}function tt(e,t,n,a){var r,o,i=1,s=0;for(o=n;0!=o;--o)r=1&a,a>>>=1,s+=rt[(2047&(e[t+i]-r^-r))>>>2],i=i<<1|r;return s}function nt(e,t,n){var a,r=t[n];return a=(e.Range>>>11)*r,(-2147483648^e.Code)<(-2147483648^a)?(e.Range=a,t[n]=r+(2048-r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|K(e.Stream),e.Range<<=8),0):(e.Range-=a,e.Code-=a,t[n]=r-(r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|K(e.Stream),e.Range<<=8),1)}function at(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}var rt=function(){var e,t,n,a=[];for(t=8;t>=0;--t)for(e=1<<9-t,n=1<<9-t-1;n<e;++n)a[n]=(t<<6)+(e-n<<6>>>9-t-1);return a}();function ot(e,t,n,a){var r,o=t[n];r=(e.Range>>>11)*o,a?(e.Low=L(e.Low,D(q(r),[4294967295,0])),e.Range-=r,t[n]=o-(o>>>5)<<16>>16):(e.Range=r,t[n]=o+(2048-o>>>5)<<16>>16),-16777216&e.Range||(e.Range<<=8,ct(e))}function it(e,t,n){for(var a=n-1;a>=0;--a)e.Range>>>=1,1==(t>>>a&1)&&(e.Low=L(e.Low,q(e.Range))),-16777216&e.Range||(e.Range<<=8,ct(e))}function st(e){return L(L(q(e._cacheSize),e._position),[4,0])}function ct(e){var t,n=G(function(e,t){var n;return n=$(e,t&=63),e[1]<0&&(n=L(n,U([2,0],63-t))),n}(e.Low,32));if(0!=n||F(e.Low,[4278190080,0])<0){e._position=L(e._position,q(e._cacheSize)),t=e._cache;do{Q(e.Stream,t+n),t=255}while(0!=--e._cacheSize);e._cache=G(e.Low)>>>24}++e._cacheSize,e.Low=U(D(e.Low,[16777215,0]),8)}function lt(e,t){return rt[(2047&(e-t^-t))>>>2]}var ut=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];function dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,a=void 0===n?7:n,r=t.enableEndMark,o=void 0===r||r,i={};for(i.c=function(e,t,n,a){return e.output=X({}),ne(e,Y({},t),e.output,q(t.length),n,a),e}({},function(e){var t,n,a,r=[],o=0,i=e.length;if("object"==typeof e)return e;for(function(e,t,n,a,r){var o;for(o=t;o<n;++o)a[r++]=e.charCodeAt(o)}(e,0,i,r,0),a=0;a<i;++a)(t=r[a])>=1&&t<=127?++o:o+=!t||t>=128&&t<=2047?2:3;for(n=[],o=0,a=0;a<i;++a)(t=r[a])>=1&&t<=127?n[o++]=t<<24>>24:!t||t>=128&&t<=2047?(n[o++]=(192|t>>6&31)<<24>>24,n[o++]=(128|63&t)<<24>>24):(n[o++]=(224|t>>12&15)<<24>>24,n[o++]=(128|t>>6&63)<<24>>24,n[o++]=(128|63&t)<<24>>24);return n}(e),function(e){return ut[e-1]||ut[6]}(a),o);ve(i.c.chunker););return Z(i.c.output)}function mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,a=void 0===n?7:n,r=t.enableEndMark,o=dt(e,{mode:a,enableEndMark:void 0===r||r});return j(new Uint8Array(o))}function ft(e){var t={};for(t.d=function(e,t){return e.output=X({}),ae(e,Y({},t),e.output),e}({},e);ve(t.d.chunker););return function(e){for(var t,n,a,r=0,o=0,i=e.length,s=[],c=[];r<i;++r,++o){if(128&(t=255&e[r]))if(192==(224&t)){if(r+1>=i)return e;if(128!=(192&(n=255&e[++r])))return e;c[o]=(31&t)<<6|63&n}else{if(224!=(240&t))return e;if(r+2>=i)return e;if(128!=(192&(n=255&e[++r])))return e;if(128!=(192&(a=255&e[++r])))return e;c[o]=(15&t)<<12|(63&n)<<6|63&a}else{if(!t)return e;c[o]=t}16383==o&&(s.push(String.fromCharCode.apply(String,c)),o=-1)}return o>0&&(c.length=o,s.push(String.fromCharCode.apply(String,c))),s.join("")}(Z(t.d.output))}function pt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}_.a.use(v.a),_.a.use(O.a);var ht=function(e){var t=e.data,n=e.coloringDict,o=e.evtbus,i=e.title,s=e.onDeleteSummaryEdge,c=e.onRequireSummaryEdge,l=e.roots,u=e.requiredEdges;e.setLoadingAction,document.addEventListener("keydown",function(e){"Shift"===e.key&&document.body.classList.add("shift-click")}),document.addEventListener("keyup",function(e){"Shift"===e.key&&document.body.classList.remove("shift-click")});var p=[],_=JSON.parse(sessionStorage.getItem("selected"));if(i===_.title)for(var h in _)"title"===h||_[h]||p.push(h.split("\u2192"));var v,g=(v=t.map(function(e,t){return[e[0],e[1]]}).flat(),Object(d.a)(new Set(v))).map(function(e,t){return{data:{id:e,label:e,type:"ip"}}}),b=t.filter(function(e){for(var t=0,n=p;t<n.length;t++){var a=n[t];if(a[0]===e[0]&&a[1]===e[1])return!1}return!0}).map(function(e,t){return{data:{source:e[0],target:e[1],label:e[2],id:"".concat(e[0],"->").concat(e[1]),clsource:e[0],cltarget:e[1]}}});if(Object.keys(l).length>1)for(var E in g.push({data:{id:"roots",label:"roots",type:"ip",root:"true"}}),l)b.push({data:{source:"roots",target:E,label:l[E],id:"roots->".concat(E),clsource:"roots",cltarget:E,rootedge:"true"}});var y,O=pt(b.entries());try{for(O.s();!(y=O.n()).done;){var S=y.value,w=Object(m.a)(S,2),P=w[0];1==w[1].data.label&&(b[P].data.label="")}}catch(L){O.e(L)}finally{O.f()}var A,B={nodes:g,edges:b},k=[{selector:"node",style:{backgroundColor:"#fff","border-width":10,shape:"rectangle",width:100,height:50,label:"data(label)","overlay-padding":"6px","z-index":"10","text-outline-width":"2px",color:"white",fontSize:15,"text-valign":"center","text-halign":"center"}},{selector:"node:selected",style:{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C",width:50,height:50,"text-outline-color":"#77828C","text-outline-width":8}},{selector:"node[type='device']",style:{shape:"rectangle"}},{selector:"edge",style:{width:3,label:"data(label)","target-arrow-color":"#6774cb","target-arrow-shape":"triangle","arrow-scale":1,"curve-style":"bezier","edge-distances":"node-position","text-outline-width":"2px",color:"white",fontSize:15}},{selector:"node[root='true']",style:{"border-color":"#bbb"}},{selector:"edge[rootedge='true']",style:{"line-style":"dashed"}}];for(var j in n){var C=n[j];k.push({selector:"node[label='".concat(j,"']"),style:{"border-color":C}})}b.map(function(e,t){var n=e.data.source,a=e.data.target;return k.push({selector:"edge[id='".concat(n,"->").concat(a,"']"),style:{"line-fill":"linear-gradient","line-gradient-stop-colors":"".concat(x(n)," ").concat(x(a)),"line-gradient-stop-positions":"33% 66%","target-arrow-color":"".concat(x(a))}}),0});var R="true"===new URLSearchParams(window.location.search).get("rotatedsum");null===R&&(R=!1);var z={name:"circle",fit:!0,circle:!0,directed:!0,padding:10,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,ready:function(){o.addListener(function(e,t){if("selectNode"===e){var n=A.getElementById(t.nodeId),a=t.source,r=t.sink;A.$("edge[id='".concat(a,"->").concat(r,"']")).css({width:10}),n.trigger("select")}if("deselectNode"===e){var o=A.getElementById(t.nodeId),i=t.source,s=t.sink;A.$("edge[id='".concat(i,"->").concat(s,"']")).css({width:3}),o.trigger("select")}if("unrequireEdge"===e){var c=A.$("edge[id='".concat(t.object,"']"));c.css({"font-weight":"normal",width:3,arrowScale:1}),c.data("selected","false")}if("requireEdge"===e){var l=A.$("edge[id='".concat(t.object,"']"));l.css({"font-weight":"normal",width:10,arrowScale:1}),l.data("selected","true")}if("resetStack"===e){var u=A.$("edge");u.css({"font-weight":"normal",width:3,arrowScale:1}),u.data("selected","false")}})}},N=0,I=b.length;function x(e){return"roots"===e?"#bbb":n[e]}return b.map(function(e){return"roots"!==e.data.source&&(""==e.data.label?N+=1:N+=parseInt(e.data.label)),0}),sessionStorage.setItem("musum",N),sessionStorage.setItem("gammasum",I),Object(a.useMemo)(function(){return r.a.createElement(f.a,{elements:f.a.normalizeElements(B),style:{width:"100%",height:"100%"},zoomingEnabled:!0,maxZoom:3,minZoom:.1,autounselectify:!0,boxSelectionEnabled:!0,layout:z,stylesheet:k,cy:function(e){A=e,e.ready(function(){u.forEach(function(t){var n=e.getElementById(t);n.css({"font-weight":"bold",width:10,arrowScale:1}),n.data("selected","true")})}),e.off("cxttap","edge"),e.on("cxttap","edge",function(e){}),e.off("tap","edge"),e.on("tap","edge",function(e){var t="require";e.originalEvent.shiftKey&&(t="delete");var n=e.target;-1!==function(e,t){return"require"===t?c(e.id()):s(e.id())}(n,t)&&"require"===t&&(u.includes(n.id())?(n.css({"font-weight":"normal",width:3,arrowScale:1}),n.data("selected","false")):(n.css({"font-weight":"bold",width:10,arrowScale:1}),n.data("selected","true")))}),e.off("mouseover","edge"),e.on("mouseover","edge",function(e){var t=e.target;"true"!==t.data().selected?t.css({width:6,arrowScale:.5}):t.css({width:13,arrowScale:.769});var n=e.target.id();o.fireEvent("selectNodeSum",{nodeId:n,target:t}),o.fireEvent("selectNodeCl",{nodeId:n,target:t})}),e.off("mouseover","node"),e.on("mouseover","node",function(e){e.target.css({"border-width":20});var t=e.target.id();o.fireEvent("hoverNodeSum",{nodeId:t}),o.fireEvent("hoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=1,a.style.zIndex=100,a.style.fontWeight="bold")}),e.off("mouseout","node"),e.on("mouseout","node",function(e){e.target.css({"border-width":10});var t=e.target.id();o.fireEvent("dehoverNodeSum",{nodeId:t}),o.fireEvent("dehoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=.7,a.style.zIndex=1,a.style.fontWeight="normal")}),e.off("mouseout","edge"),e.on("mouseout","edge",function(e){var t=e.target;"true"!==t.data().selected?t.css({width:3,arrowScale:1}):t.css({width:10,arrowScale:1});var n=e.target.id();o.fireEvent("deselectNodeSum",{nodeId:n,target:t}),o.fireEvent("deselectNodeCl",{nodeId:n,target:t})})}})},[t])};var vt=function(e){var t=e.type,n=e.setType,o=e.insertParam,i=e.usedData,s=e.coloring,c=(e.muSum,e.evtBus),l=e.onDeleteSummaryEdge,u=e.onRequireSummaryEdge,f=e.clearData,p=e.roots,_=e.deletedEdges,h=e.requiredEdges,v=e.deletedRoots,g=e.requiredRoots,b=e.setDeletedEdges,E=e.setRequiredEdges,y=e.setDeletedRoots,O=e.setRequiredRoots,S=e.filterStack,w=e.setFilterStack,P=e.setLoadingAction,A=Object(a.useState)(!1),B=Object(m.a)(A,2),k=B[0],j=B[1];function C(e,t){var n=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],a=n.length,r=e[t];return/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)?r:n[parseInt(r)%a]}var R=i.summary.migration;void 0===R&&(R=i.summary);for(var z={},N=0;N<s.length;N++)z[s[N][0]]=s[N][1];return r.a.createElement("div",{className:"panel info ".concat("sumviz"===t?"one":"tri")},r.a.createElement("div",{className:"titlewrapper"},r.a.createElement("h3",{className:"sumviztitle"},r.a.createElement("b",null,"Summary")),r.a.createElement("p",{className:"titleelem end"},r.a.createElement("b",null,"Press [/] for help")),r.a.createElement("span",{onClick:function(e){f(),"sumviz"===t?(n("viz"),o("type","viz")):(n("dualviz"),o("type","dualviz"))},style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"panelclosebutton"},r.a.createElement("b",null,"[X]")))),r.a.createElement("div",{className:"panel migration top left sum"},r.a.createElement("p",{className:"paneltitle"},r.a.createElement("b",null,"Migration Graph")),r.a.createElement("p",{className:"paneltitle mu"},"solutions: ".concat(i.solutions.length)),S.length>0?r.a.createElement("p",{className:"rightAlign",onClick:function(){j(!1);var e=S.pop().split(" "),t=Object(m.a)(e,3),n=t[0],a=t[1],r=t[2];"required"===n&&("root"===a&&O(g.filter(function(e){return e!==r})),"edge"===a&&(E(h.filter(function(e){return e!==r})),c.fireEvent("unrequireEdge",{object:r}))),"deleted"===n&&("root"===a&&y(v.filter(function(e){return e!==r})),"edge"===a&&b(_.filter(function(e){return e!==r}))),"deletedrequired"===n&&(b(_.filter(function(e){return e!==r})),E([].concat(Object(d.a)(h),[r])),c.fireEvent("requireEdge",{object:r})),"relaxed"===n&&(E([].concat(Object(d.a)(h),[r])),c.fireEvent("requireEdge",{object:r}))},onMouseEnter:function(){return j(!0)},onMouseLeave:function(){return j(!1)}},"\u21a9"):r.a.createElement(r.a.Fragment,null),k?function(e,t){if(e.length<=0)return r.a.createElement(r.a.Fragment,null);var n=e[e.length-1].split(" "),a=n[n.length-1].split("->"),o=Object(m.a)(a,2),i=o[0],s=o[1],c=C(t,i),l=C(t,s);"deletedrequired"===n[0]&&(n[0]="deleted");var u={display:"inline-block",backgroundColor:c,padding:"5px",borderRadius:"5px",color:"white"},d={display:"inline-block",backgroundColor:l,padding:"5px",borderRadius:"5px",color:"white"};return r.a.createElement("div",{className:"panel actionwrapper"},r.a.createElement("p",null,r.a.createElement("b",null,"Undo Most Recent Action: ")),r.a.createElement("p",{className:"recentAction"},n[0]," ",n[1]),r.a.createElement("p",{className:"recentAction"},r.a.createElement("span",{style:u},i)," ",r.a.createElement("span",{style:d},s)))}(S,z):r.a.createElement(r.a.Fragment,null),r.a.createElement("button",{type:"button",className:"paneltitle button summary",onClick:function(){w([]),b([]),E([]),y([]),O([]),c.fireEvent("resetStack")}},"Reset"),r.a.createElement(ht,{data:R,coloringDict:z,evtbus:c,title:i.name,onDeleteSummaryEdge:l,onRequireSummaryEdge:u,roots:p,requiredEdges:h,setLoadingAction:P})))},gt=n(65);function bt(e){var t=e.isPopupOpen,n=e.togglePopup;return r.a.createElement(gt.a,{open:t,togglePopup:n,overlayStyle:{background:"rgba(0, 0, 0, 0.6)",zIndex:9999},animationType:"fade",modal:!0},function(e){return r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"header"},"Help"),r.a.createElement("p",{className:"popup-container-text"},"Click and drag around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponding anatomical location for the node."),r.a.createElement("p",{className:"popup-container-text"},"Select different solutions from the dropdown on the top left of the panel."),r.a.createElement("p",{className:"popup-container-text"},"To compare with another solution, click the [+] on the right. To view the solution space summary, click the [+] on the left."),r.a.createElement("p",{className:"popup-container-text"},"To filter out any solutions with a particular edge, shift+click on that edge in the summary graph. To require all solutions to have some edge, click the edge on the summary graph."),r.a.createElement("p",{className:"popup-container-text"},'For more help, please select the "Instructions" button in the home page. You can return to the home page by pressing "[X]" on all the currently opened panels.'),r.a.createElement("button",{className:"close-button",onClick:function(){n()}},"Close"))})}function Et(e){var t=e.isPopupOpen,n=e.togglePopup;return r.a.createElement(gt.a,{open:t,onClose:n,overlayStyle:{background:"rgba(0, 0, 0, 0.6)",zIndex:9999},animationType:"fade",modal:!0},function(e){return r.a.createElement("div",{className:"no-sol-popup-container"},r.a.createElement("div",{className:"header"},"ERROR"),r.a.createElement("p",{className:"popup-container-text"},"There are no solutions available for your input!"),r.a.createElement("button",{className:"close-button",onClick:e},"Close"))})}function yt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function St(e){var t,n,a=new Map,r=yt(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=Object(m.a)(o,2),s=i[0],c=i[1];a.has(s)||a.set(s,0),a.has(c)||a.set(c,0),a.set(c,a.get(c)+1)}}catch(l){r.e(l)}finally{r.f()}if(a.forEach(function(e,t){if(0===e){if(n)throw new Error("Invalid tree: multiple roots");n=t}}),void 0===n)throw new Error("Invalid tree: no root found");return n}function wt(e,t){var n,a=St(e),r=yt(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o[0]===a)return o[1]}}catch(i){r.e(i)}finally{r.f()}return null}function Pt(e){var t=e.solutions;return function(e){var t,n={},a=yt(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r]?n[r]++:n[r]=1}}catch(o){a.e(o)}finally{a.f()}return n}(t.map(function(e){return e.tree}).map(function(e){return St(e)}).map(function(e,n){var a,r=yt(t[n].labeling);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o[0]===e)return o[1]}}catch(i){r.e(i)}finally{r.f()}return 0}))}function At(e,t){var n=new URLSearchParams(window.location.hash.split("?")[1]);n.set(e,t),window.location.href="#/viz?"+n.toString()}var Bt=function(e){var t,n=Object(a.useState)(0),o=Object(m.a)(n,2),i=o[0],s=o[1],c=Object(a.useState)(0),l=Object(m.a)(c,2),u=l[0],f=l[1],p=Object(a.useState)(0),_=Object(m.a)(p,2),h=_[0],v=_[1],g=Object(a.useState)(0),b=Object(m.a)(g,2),y=b[0],O=b[1],S=Object(a.useState)(0),w=Object(m.a)(S,2),A=w[0],k=w[1],j=Object(a.useState)(0),R=Object(m.a)(j,2),z=R[0],N=R[1],I=(t=sessionStorage.getItem("json_data"),ft(new Int8Array(C(t)))),x=JSON.parse(I),L=Object(a.useState)([]),M=Object(m.a)(L,2),D=M[0],F=M[1],T=Object(a.useState)([]),H=Object(m.a)(T,2),q=H[0],G=H[1],W=Object(a.useState)(0),U=Object(m.a)(W,2),$=U[0],J=U[1],Y=Object(a.useState)(!1),K=Object(m.a)(Y,2),V=K[0],X=K[1],Z=Object(a.useState)(!1),Q=Object(m.a)(Z,2),ee=Q[0],te=Q[1],ne=Object(a.useState)([]),ae=Object(m.a)(ne,2),re=ae[0],oe=ae[1],ie=Object(a.useState)([]),se=Object(m.a)(ie,2),ce=se[0],le=se[1],ue=Object(a.useState)([]),de=Object(m.a)(ue,2),me=de[0],fe=de[1],pe=Object(a.useState)([]),_e=Object(m.a)(pe,2),he=_e[0],ve=_e[1];Object(a.useEffect)(function(){Oe()},[D,q,me,ce]);var ge=Object(a.useState)(x),be=Object(m.a)(ge,2),Ee=be[0],ye=be[1];function Oe(){for(var e=x,t={name:e.name,original:e.original,solutions:[],summary:{migration:[]}},n=0;n<e.solutions.length;n++){for(var a=e.solutions[n].tree,r=e.solutions[n].labeling,o=e.solutions[n].migration,i=wt(a,r),s=!1,c=0===ce.length||ce.includes(i),l=0!==me.length&&me.includes(i),u=0,m=0;m<o.length;m++){for(var f=o[m][0]+"->"+e.solutions[n].migration[m][1],p=0;p<D.length;p++)f===D[p]&&(s=!0);for(var _=0;_<q.length;_++)f===q[_]&&u++}if(!l&&c&&!s&&u===q.length){var h=JSON.parse(JSON.stringify(e.solutions[n]));t.solutions.push(h)}}for(var v=0;v<t.solutions.length;v++)for(var g=0;g<t.solutions[v].migration.length;g++){for(var b=!1,E=0;E<t.summary.migration.length;E++)t.summary.migration[E][0]===t.solutions[v].migration[g][0]&&t.summary.migration[E][1]===t.solutions[v].migration[g][1]&&(b=!0,t.summary.migration[E][2]+=1);if(!b){var y=[].concat(Object(d.a)(t.solutions[v].migration[g].slice(0,-1)),[1]);t.summary.migration.push(y)}}if(0===t.summary.migration.length){var O=he[he.length-1];return ve(he.slice(0,-1)),"deleted edge"===O.slice(0,12)?F(D.slice(0,-1)):"deleted root"===O.slice(0,12)?F(me.slice(0,-1)):"required root"===O.slice(0,13)?F(ce.slice(0,-1)):G(q.slice(0,-1)),Gn(),-1}e.coloring&&(t.coloring=JSON.parse(JSON.stringify(e.coloring))),ye(t),oe(Pt(t));var S=t.solutions.map(function(e,t){return e.name});if(Se){var w=S.filter(function(e,t){return _n.solution_names.includes(e)}),P=S.filter(function(e,t){return bn.solution_names.includes(e)});w.includes(ot.name)||it(t.solutions.filter(function(e){return e.name===w[0]})[0]),Se&&void 0!==lt&&!P.includes(lt.name)&&ut(t.solutions.filter(function(e){return e.name===P[0]})[0])}else S.includes(ot.name)||it(t.solutions.filter(function(e){return e.name===S[0]})[0]),void 0===lt||S.includes(lt.name)||ut(t.solutions.filter(function(e){return e.name===S[0]})[0]);return 0}var Se=Array.isArray(Ee.original),we=Object(a.useState)(Ee.solutions.map(function(e,t){return e.name})),Pe=Object(m.a)(we,2),Ae=Pe[0],Be=Pe[1],ke=Object(a.useState)(Se?Ee.original.map(function(e,t){return e.name}):[]),je=Object(m.a)(ke,2),Ce=je[0],Re=je[1],ze=new URLSearchParams(window.location.hash.split("?")[1]),Ne=ze.get("labeling"),Ie=ze.get("labeling2"),xe=Object(a.useState)(Ne),Le=Object(m.a)(xe,2),Me=Le[0],De=Le[1],Fe=Object(a.useState)(Ie),Te=Object(m.a)(Fe,2),He=Te[0],qe=Te[1],Ge=Object(a.useState)("true"===ze.get("rotated")),We=Object(m.a)(Ge,2),Ue=We[0],$e=We[1],Je=Object(a.useState)("true"===ze.get("rotated2")),Ye=Object(m.a)(Je,2),Ke=Ye[0],Ve=Ye[1],Xe=Object(a.useState)(ze.get("type")),Ze=Object(m.a)(Xe,2),Qe=Ze[0],et=Ze[1];"undefined"===Ne&&(At("labeling",Ee.solutions[0].name),De(Ee.solutions[0].name)),"undefined"===Ie&&(At("labeling2",Ee.solutions[0].name),qe(Ee.solutions[0].name)),sessionStorage.setItem("selected",JSON.stringify(new B(0))),sessionStorage.setItem("violations",JSON.stringify(new B(0)));var tt,nt,at=Object(a.useState)(Ee.solutions.filter(function(e){return e.name===Me})[0]),rt=Object(m.a)(at,2),ot=rt[0],it=rt[1],st=Object(a.useState)(Ee.solutions.filter(function(e){return e.name===He})[0]),ct=Object(m.a)(st,2),lt=ct[0],ut=ct[1],dt=Object(a.useState)(ot.tree),mt=Object(m.a)(dt,2),pt=mt[0],_t=mt[1],ht=Object(a.useState)(ot.unobserved_clones),gt=Object(m.a)(ht,2),yt=gt[0],Ot=gt[1],St=Object(a.useState)(ot.labeling),Bt=Object(m.a)(St,2),kt=Bt[0],jt=Bt[1],Ct=Object(a.useState)(ot.migration),Rt=Object(m.a)(Ct,2),zt=Rt[0],Nt=Rt[1],It=Object(a.useState)([]),xt=Object(m.a)(It,2),Lt=xt[0],Mt=xt[1],Dt=Object(a.useState)([]),Ft=Object(m.a)(Dt,2),Tt=Ft[0],Ht=Ft[1],qt=Object(a.useState)([]),Gt=Object(m.a)(qt,2),Wt=Gt[0],Ut=Gt[1],$t=Object(a.useState)([]),Jt=Object(m.a)($t,2),Yt=Jt[0],Kt=Jt[1],Vt=Object(a.useState)([]),Xt=Object(m.a)(Vt,2),Zt=Xt[0],Qt=Xt[1],en=Object(a.useState)([]),tn=Object(m.a)(en,2),nn=tn[0],an=tn[1],rn=Object(a.useState)(Se?x.original[0].name:""),on=Object(m.a)(rn,2),sn=on[0],cn=on[1],ln=Object(a.useState)(Se?x.original[0].name:""),un=Object(m.a)(ln,2),dn=un[0],mn=un[1],fn=Object(a.useState)(Se?x.original[0]:""),pn=Object(m.a)(fn,2),_n=pn[0],hn=pn[1],vn=Object(a.useState)(Se?x.original[0]:""),gn=Object(m.a)(vn,2),bn=gn[0],En=gn[1],yn=!0;try{tt=Ee.original.tree,nt=Ee.original.labeling}catch($n){yn=!1}var On=Object(a.useState)(Ee.coloring),Sn=Object(m.a)(On,2),wn=Sn[0],Pn=Sn[1],An=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"];void 0!==wn&&0!==wn.length||Pn(ot.labeling.map(function(e){return e[1]}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(e,t){return[e,"".concat(An[t%An.length])]}));var Bn={};Object(a.useEffect)(function(){for(var e=0;e<wn.length;e++)Bn[wn[e][0]]=wn[e][1]},[wn]),Object(a.useEffect)(function(){Oe(),_t(ot.tree),jt(ot.labeling),Ot(ot.unobserved_clones),Nt(ot.migration),s(sessionStorage.getItem("mu")),f(sessionStorage.getItem("gamma")),void 0!==ot.origin_node&&Qt(ot.origin_node)},[Me]),Object(a.useEffect)(function(){if(Be(Ee.solutions.map(function(e,t){return e.name})),Se){var e=Ee.solutions.map(function(e,t){return e.name}),t=Ee.original.filter(function(t,n){return t.solution_names.some(function(t){return e.includes(t)})}).map(function(e,t){return e.name});Re(t)}},[Ee]),Object(a.useEffect)(function(){Ae.includes(Me)||(At("labeling",Ae[0]),De(Ae[0])),Ae.includes(He)||(At("labeling2",Ae[0]),qe(Ae[0]))},[Ae]);var kn=Ee.map,jn=function(e){"dualviz"===Qe||"triviz"===Qe?(et("dualviz"===Qe?"viz":"sumviz"),1===e&&(it(lt),De(He),$e(Ke),_t(lt.tree),jt(lt.labeling),Ot(lt.unoberved_clones),Nt(lt.migration),hn(bn),cn(dn),void 0!==lt.origin_node&&Qt(ot.origin_node)),At("type","viz")):window.location="".concat(window.location.protocol,"//").concat(window.location.host,"/mach2-viz/#/")};Object(a.useEffect)(function(){lt&&(Mt(lt.tree),Ut(lt.labeling),Ht(lt.unobserved_clones),Kt(lt.migration),void 0!==lt.origin_node&&an(ot.origin_node))},[lt]),Object(a.useEffect)(function(){v(sessionStorage.getItem("mu2")),O(sessionStorage.getItem("gamma2"))},[Lt]),Object(a.useEffect)(function(){J(function(e){return e+1})},[Qe]);var Cn=function(e){In.fireEvent("resetMigration",{index:e})},Rn=function(e){In.fireEvent("resetClonal",{index:e})};Object(a.useEffect)(function(){s(sessionStorage.getItem("mu")),f(sessionStorage.getItem("gamma")),v(sessionStorage.getItem("mu2")),O(sessionStorage.getItem("gamma2")),k(sessionStorage.getItem("musum")),N(sessionStorage.getItem("gammasum")),Oe(),document.addEventListener("keydown",Un);var e=document.getElementById("overlay");e&&e.parentElement.removeChild(e)},[]);var zn=Object(a.useState)({listeners:[],addListener:function(e){this.listeners.push(e)},removeListener:function(e){this.listeners=this.listeners.filter(function(t){return t!==e})},fireEvent:function(e,t){this.listeners.forEach(function(n){n(e,t)})}}),Nn=Object(m.a)(zn,2),In=Nn[0],xn=(Nn[1],Object(a.useState)(!1)),Ln=Object(m.a)(xn,2),Mn=Ln[0],Dn=Ln[1],Fn=Object(a.useState)(!1),Tn=Object(m.a)(Fn,2),Hn=Tn[0],qn=Tn[1];function Gn(){qn(!Hn)}function Wn(){Dn(!Mn)}function Un(e){"/"===e.key&&Wn()}return r.a.createElement("div",{className:"viz"},r.a.createElement(bt,{isPopupOpen:Mn,togglePopup:Wn}),r.a.createElement(Et,{isPopupOpen:Hn,togglePopup:Gn}),"sumviz"!==Qe&&"triviz"!==Qe?r.a.createElement("div",{className:"panel tab_add2",onClick:function(e){"dualviz"===Qe?(et("triviz"),At("type","triviz")):(et("sumviz"),At("type","sumviz"))}},r.a.createElement("p",{className:"addpanelp"},r.a.createElement("b",null,"+"))):r.a.createElement(r.a.Fragment,null),"sumviz"===Qe||"triviz"===Qe?r.a.createElement(vt,{key:$,type:Qe,setType:et,insertParam:At,usedData:Ee,coloring:wn,muSum:A,gammaSum:z,evtBus:In,onDeleteSummaryEdge:function(e){var t=e.split("->"),n=Object(m.a)(t,2),a=n[0],r=n[1];if("roots"!==a){if(q.includes(e)){var o=q.filter(function(t){return t!==e});G(o),ve([].concat(Object(d.a)(he),["deletedrequired edge ".concat(e)]))}else ve([].concat(Object(d.a)(he),["deleted edge ".concat(e)]));F([].concat(Object(d.a)(D),[e]))}else ve([].concat(Object(d.a)(he),["deleted root ".concat(r)])),fe([].concat(Object(d.a)(me),[r]))},onRequireSummaryEdge:function(e){var t=e.split("->"),n=Object(m.a)(t,2),a=n[0],r=n[1];if("roots"!==a)if(q.includes(e)){var o=q.filter(function(t){return t!==e});G(o),ve([].concat(Object(d.a)(he),["relaxed edge ".concat(e)]))}else ve([].concat(Object(d.a)(he),["required edge ".concat(e)])),G([].concat(Object(d.a)(q),[e]));else ve([].concat(Object(d.a)(he),["required root ".concat(r)])),le([].concat(Object(d.a)(ce),[r]))},clearData:function(){F([]),G([]),fe([]),le([]),ve([])},roots:re,deletedEdges:D,requiredEdges:q,deletedRoots:me,requiredRoots:ce,setDeletedEdges:F,setRequiredEdges:G,setDeletedRoots:fe,setRequiredRoots:le,filterStack:he,setFilterStack:ve}):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"panel info ".concat("dualviz"===Qe?"one":"sumviz"===Qe?"one two":"triviz"===Qe?"tri two":"")},r.a.createElement("div",{className:"titlewrapper"},Se?r.a.createElement("label",{className:"titleelem left",htmlFor:"inputs"},r.a.createElement("p",null,r.a.createElement("b",null,Se&&"triviz"===Qe?"":"Input Tree: ",r.a.createElement("select",{name:"inputs",id:"inputs",onChange:function(e){At("input",e.target.value),cn(e.target.value),Ee.original.forEach(function(t){if(t.name===e.target.value){var n=t.solution_names.filter(function(e){return Ae.includes(e)})[0];hn(t),De(n),it(Ee.solutions.filter(function(e){return e.name===n})[0])}})},value:sn},Ce.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))):r.a.createElement(r.a.Fragment,null),r.a.createElement("label",{className:"titleelem end",htmlFor:"labelings"},r.a.createElement("p",null,r.a.createElement("b",null,Se&&"triviz"===Qe?"":"Full Labeling: ",r.a.createElement("select",{name:"labelings",id:"labelings",onChange:function(e){At("labeling",e.target.value),De(e.target.value),it(Ee.solutions.filter(function(t){return t.name===e.target.value})[0])},value:Me},Ae.filter(function(e){return!Se||_n.solution_names.includes(e)}).map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),"dualviz"!==Qe&&"triviz"!==Qe&&"sumviz"!==Qe?r.a.createElement("p",{className:"titleelem end"},r.a.createElement("b",null,"Press [/] for help \xa0\xa0")):r.a.createElement(r.a.Fragment,null),"sumviz"!==Qe?r.a.createElement("span",{onClick:jn.bind(null,1),style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"panelclosebutton"},r.a.createElement("b",null,"[X]"))):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:void 0===kn?"leftcolumn nolegend":"leftcolumn"},r.a.createElement("div",{className:"panel migration top ".concat("dualviz"===Qe||"triviz"===Qe?"left":"")},r.a.createElement("p",{className:"paneltitle"},r.a.createElement("b",null,"Migration Graph")),r.a.createElement("p",{className:"paneltitle mu"},"migrations: ".concat(i)),r.a.createElement("p",{className:"paneltitle gamma"},"co-migrations: ".concat(u)),r.a.createElement("button",{type:"button",className:"paneltitle button",onClick:function(e){var t="true"===ze.get("rotated");At("rotated",!t),$e(!t)}},"Rotate"),r.a.createElement("button",{type:"button",className:"paneltitle button under",onClick:function(){return Cn(1)}},"Reset"),r.a.createElement(P,{key:$,tree:pt,labeling:kt,coloring:wn,migration:zt,evtbus:In,rotated:Ue})),r.a.createElement("div",{className:"panel migration ".concat("dualviz"===Qe||"triviz"===Qe?"left":"")},r.a.createElement("p",{className:"paneltitle"},yn?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:{fontWeight:V?"normal":"bold"},onClick:function(){V&&X(!V)}},"Clonal Tree")," ","|"," ",r.a.createElement("button",{style:{fontWeight:V?"bold":"normal"},onClick:function(){V||X(!V)}},"Input Tree")):r.a.createElement("b",null,"Clonal Tree")),r.a.createElement("button",{type:"button",className:"paneltitle button clonal",onClick:function(){return Rn(1)}},"Reset"),r.a.createElement(E,{key:$,tree:V?Se?_n.tree:tt:pt,labeling:V?Se?_n.labeling:nt:kt,coloring:wn,evtbus:In,rightcol:"sumviz"===Qe||"triviz"===Qe,index:1,clonalMap:Zt,clonal:V,unobserved:yt})))),"dualviz"===Qe||"triviz"===Qe?r.a.createElement("div",{className:"panel info ".concat("dualviz"===Qe?"one two":"tri three")},r.a.createElement("div",{className:"titlewrapper"},Se?r.a.createElement("label",{className:"titleelem left",htmlFor:"inputs"},r.a.createElement("p",null,r.a.createElement("b",null,Se&&"triviz"===Qe?"":"Input Tree: ",r.a.createElement("select",{name:"inputs",id:"inputs",onChange:function(e){At("input2",e.target.value),mn(e.target.value),Ee.original.forEach(function(t){if(t.name===e.target.value){var n=t.solution_names.filter(function(e){return Ae.includes(e)})[0];En(t),qe(n),ut(Ee.solutions.filter(function(e){return e.name===n})[0])}})},value:dn},Ce.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))):r.a.createElement(r.a.Fragment,null),r.a.createElement("label",{className:"titleelem left",htmlFor:"labelings"},r.a.createElement("p",null,r.a.createElement("b",null,Se&&"triviz"===Qe?"":"Full Labeling: ",r.a.createElement("select",{name:"labelings",id:"labelings",onChange:function(e){At("labeling2",e.target.value),qe(e.target.value),ut(Ee.solutions.filter(function(t){return t.name===e.target.value})[0])},value:He},Ae.filter(function(e){return!Se||bn.solution_names.includes(e)}).map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("span",{onClick:jn.bind(null,2),style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"panelclosebutton"},r.a.createElement("b",null,"[X]")))),r.a.createElement("div",{className:void 0===kn?"leftcolumn nolegend":"leftcolumn"},r.a.createElement("div",{className:"panel migration top ".concat("dualviz"===Qe||"triviz"===Qe?"left":"")},r.a.createElement("p",{className:"paneltitle"},r.a.createElement("b",null,"Migration Graph")),r.a.createElement("p",{className:"paneltitle mu"},"migrations: ".concat(h)),r.a.createElement("p",{className:"paneltitle gamma"},"co-migrations: ".concat(y)),r.a.createElement("button",{type:"button",className:"paneltitle button",onClick:function(e){var t="true"===ze.get("rotated2");At("rotated2",!t),Ve(!t)}},"Rotate"),r.a.createElement("button",{type:"button",className:"paneltitle button under",onClick:function(){return Cn(2)}},"Reset"),r.a.createElement(P,{key:$,tree:Lt,labeling:Wt,coloring:wn,migration:Yt,evtbus:In,rightcol:!0,rotated:Ke})),r.a.createElement("div",{className:"panel migration ".concat("dualviz"===Qe||"triviz"===Qe?"left":"")},r.a.createElement("p",{className:"paneltitle"},yn?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:{fontWeight:ee?"normal":"bold"},onClick:function(){ee&&te(!ee)}},"Clonal Tree")," ","|"," ",r.a.createElement("button",{style:{fontWeight:ee?"bold":"normal"},onClick:function(){ee||te(!ee)}},"Input Tree")):r.a.createElement("b",null,"Clonal Tree")),r.a.createElement("button",{type:"button",className:"paneltitle button clonal",onClick:function(){return Rn(2)}},"Reset"),r.a.createElement(E,{key:$,tree:ee?Se?bn.tree:tt:Lt,labeling:ee?Se?bn.labeling:nt:Wt,coloring:wn,evtbus:In,rightcol:!0,index:2,clonalMap:nn,clonal:ee,unobserved:Tt})))):r.a.createElement(r.a.Fragment,null),"dualviz"!==Qe&&"triviz"!==Qe?r.a.createElement("div",{className:"panel tab_add",onClick:function(e){"sumviz"===Qe?(At("type","triviz"),et("triviz")):(At("type","dualviz"),et("dualviz")),At("labeling2",Me),qe(Me),ut(Ee.solutions.filter(function(e){return e.name===Me})[0]),v(sessionStorage.getItem("mu2")),O(sessionStorage.getItem("gamma2"))}},r.a.createElement("p",{className:"addpanelp"},r.a.createElement("b",null,"+"))):r.a.createElement(r.a.Fragment,null))},kt=n(68),jt=n(153),Ct=n(154),Rt=n.n(Ct),zt=n(393),Nt=n(155),It=n.n(Nt),xt=n(45);function Lt(){Lt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(k){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),s=new P(r||[]);return a(i,"_invoke",{value:y(e,n,s)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(k){return{type:"throw",arg:k}}}e.wrap=l;var d={};function m(){}function f(){}function p(){}var _={};c(_,o,function(){return this});var h=Object.getPrototypeOf,v=h&&h(h(A([])));v&&v!==t&&n.call(v,o)&&(_=v);var g=p.prototype=m.prototype=Object.create(_);function b(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var r;a(this,"_invoke",{value:function(a,o){function i(){return new t(function(r,i){!function a(r,o,i,s){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,s)},function(e){a("throw",e,i,s)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,s)})}s(c.arg)}(a,o,r,i)})}return r=r?r.then(i,i):i()}})}function y(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return B()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var s=O(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=u(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}function O(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:B}}function B(){return{value:void 0,done:!0}}return f.prototype=p,a(g,"constructor",{value:p,configurable:!0}),a(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),c(E.prototype,i,function(){return this}),e.AsyncIterator=E,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new E(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(g),c(g,s,"Generator"),c(g,o,function(){return this}),c(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=A,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;w(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:A(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var Mt=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),o=t[0],i=t[1],c=Object(a.useState)({}),l=Object(m.a)(c,2),u=l[0],d=l[1],f=Object(a.useState)([]),p=Object(m.a)(f,2),_=p[0],h=p[1],v=Object(a.useState)([]),g=Object(m.a)(v,2),b=g[0],E=g[1],y=function(){var e=Object(kt.a)(Lt().mark(function e(t){var a;return Lt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(385)("./".concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("An error occurred while importing:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),O=function(e){var t=xt.find(function(t){return t.name===e});return t?t.dataset:null};if(Object(a.useEffect)(function(){(function(){var e=Object(kt.a)(Lt().mark(function e(){var t,n,a,r,o;return Lt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=xt.map(function(){var e=Object(kt.a)(Lt().mark(function e(t){var n;return Lt().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(t.path);case 2:return n=e.sent,e.abrupt("return",{name:t.name,module:n.default});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:n=e.sent,a={},r=[],o=[],n.forEach(function(e){var t=e.name,n=e.module;a[t]=n,r.push(t),o.push(O(t))}),d(a),h(r),E(o),i(!0);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()().catch(function(e){console.error("Error loading components:",e)})},[]),!o)return r.a.createElement("div",{className:"panel"},r.a.createElement("h1",null,"Loading..."));var S=[],w=!0;sessionStorage.setItem("selected",JSON.stringify(new B(0))),sessionStorage.setItem("violations",JSON.stringify(new B(0)));for(var P=function(e){k=_[e],j=b[e],C=w?"#EBEBEB":"#A3A3A3",R=jt[k],S.push(r.a.createElement(s.b,{className:"patient-link",onClick:function(){var t=document.createElement("div");t.id="overlay";var n=document.createElement("div");n.id="loading-container";var a=document.createElement("h1");a.textContent="Loading...",n.appendChild(a),t.appendChild(n),document.body.appendChild(t),setTimeout(function(){sessionStorage.setItem("json_data",mt(JSON.stringify(u[_[e]]))),window.location.href="#/".concat(R)},100)}},r.a.createElement("div",{className:"patient-container"},r.a.createElement("div",{className:"patientitem",style:{backgroundColor:C}},r.a.createElement("p",null,r.a.createElement("b",null,j))),r.a.createElement("div",{className:"patientitem2",style:{backgroundColor:C}},r.a.createElement("p",{className:"leftli"},r.a.createElement("b",null,k)),r.a.createElement("img",{className:"rightli",src:Rt.a,alt:"download",onClick:function(){return t="https://raw.githubusercontent.com/vikramr2/machina-viz/main/src/samples/".concat(_[e],"/").concat(_[e],".json"),n="".concat(_[e],".json"),void zt.a.get(t,{responseType:"blob"}).then(function(e){It()(e.data,n)});var t,n}}))))),w=!w},A=0;A<_.length;A++){var k,j,C,R;P(A)}return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"panel home-panel"},r.a.createElement("div",{className:"home-column-1"},r.a.createElement("h1",null,r.a.createElement("b",null,"Welcome to MACH2!")),r.a.createElement("div",{className:"about-text"},r.a.createElement("p",null,r.a.createElement("b",null,"A lightweight visualizer for MACH2, ",r.a.createElement("a",{href:"https://www.nature.com/articles/s41588-018-0106-z"},"MACHINA's")," sequel.")," Use this visualizer to examine a solution space for the parsimonious migration history problem and its respective summary for a given patient. Examples are provided below. You can also upload a JSON file to view a custom input. See the Instructions page for how to use this website:")),r.a.createElement(s.b,{to:"about",style:{textDecoration:"none",color:"black"}},r.a.createElement("button",{className:"about-button"},"Instructions"))),r.a.createElement("div",{className:"home-column-2"},r.a.createElement("div",{className:"patient-list-title-container"},r.a.createElement("h3",null,"Examples"),r.a.createElement("div",{className:"patient-container"},r.a.createElement("div",{className:"patientitem",style:{backgroundColor:"#717171"}},r.a.createElement("p",{className:"datasettitle",style:{color:"black"}},r.a.createElement("b",null,"Dataset"))),r.a.createElement("div",{className:"patientitem",style:{backgroundColor:"#717171"}},r.a.createElement(s.b,{to:R,style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"datasettitle",style:{color:"black"}},r.a.createElement("b",null,"Patient")))))),r.a.createElement("div",{className:"patient-list-container"},S.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e)})))),r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"json_upload",name:"json_upload",accept:"application/JSON",onChange:function(e){var t=document.createElement("div");t.id="overlay";var n=document.createElement("div");n.id="loading-container";var a=document.createElement("h1");a.textContent="Loading...",n.appendChild(a),t.appendChild(n),document.body.appendChild(t),setTimeout(function(){var t,n=new FileReader,a=e.target.files[0];n.onload=function(e){var n=e.target.result;t=n;var a=JSON.parse(t).solutions.map(function(e,t){return e.name});sessionStorage.setItem("json_data",mt(t)),window.location=window.location+"viz?labeling=".concat(a[0])},n.readAsText(a)},100)}}),r.a.createElement("label",{htmlFor:"json_upload"},r.a.createElement("div",{id:"addnew",className:"dot"},r.a.createElement("h1",{className:"plus"},"+"),r.a.createElement("span",{className:"tooltiptext"},r.a.createElement("b",null,"Upload Patient JSON"))))))},Dt=n(6),Ft=n(9);var Tt=function(){return Object(Ft.a)({basename:"/mach2-viz/#"}),r.a.createElement("div",{className:"App"},r.a.createElement(Dt.c,null,r.a.createElement(Dt.a,{path:"/about"},r.a.createElement(u,null)),r.a.createElement(Dt.a,{path:"/viz"},r.a.createElement(Bt,null)),r.a.createElement(Dt.a,{path:"/mach2-viz/about"},r.a.createElement(u,null)),r.a.createElement(Dt.a,{path:"/mach2-viz/viz"},r.a.createElement(Bt,null)),r.a.createElement(Dt.a,{path:"/mach2-viz"},r.a.createElement(Mt,null)),r.a.createElement(Dt.a,{exact:!0,path:"/"},r.a.createElement(Mt,null))))},Ht=function(e){e&&e instanceof Function&&n.e(36).then(n.bind(null,392)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)})};i.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{basename:"/mach2-viz"},r.a.createElement(Tt,null)))),Ht()},45:function(e){e.exports=[{name:"Breast_A1-1",dataset:"hoadley_2016",path:"A1/Breast_A1-1.json"},{name:"Breast_A1-2",dataset:"hoadley_2016",path:"A1/Breast_A1-2.json"},{name:"Breast_A1-3",dataset:"hoadley_2016",path:"A1/Breast_A1-3.json"},{name:"Breast_A1-4",dataset:"hoadley_2016",path:"A1/Breast_A1-4.json"},{name:"Breast_A7-1",dataset:"hoadley_2016",path:"A7/Breast_A7-1.json"},{name:"Breast_A7-2",dataset:"hoadley_2016",path:"A7/Breast_A7-2.json"},{name:"Prostate_A10",dataset:"gundem_2015",path:"A10/Prostate_A10.json"},{name:"Prostate_A12",dataset:"gundem_2015",path:"A12/Prostate_A12.json"},{name:"Prostate_A17",dataset:"gundem_2015",path:"A17/Prostate_A17.json"},{name:"Prostate_A21",dataset:"gundem_2015",path:"A21/Prostate_A21.json"},{name:"Prostate_A22",dataset:"gundem_2015",path:"A22/Prostate_A22.json"},{name:"Prostate_A24",dataset:"gundem_2015",path:"A24/Prostate_A24.json"},{name:"Prostate_A29",dataset:"gundem_2015",path:"A29/Prostate_A29.json"},{name:"Prostate_A31",dataset:"gundem_2015",path:"A31/Prostate_A31.json"},{name:"Prostate_A32",dataset:"gundem_2015",path:"A32/Prostate_A32.json"},{name:"Prostate_A34",dataset:"gundem_2015",path:"A34/Prostate_A34.json"},{name:"OSCE2",dataset:"kinnaman_2023",path:"OSCE/OSCE2.json"},{name:"OSCE3",dataset:"kinnaman_2023",path:"OSCE/OSCE3.json"},{name:"OSCE9",dataset:"kinnaman_2023",path:"OSCE/OSCE9.json"},{name:"LOv_patient1",dataset:"mcpherson_2016",path:"patient1_LOv/Ovarian_LOv_patient1.json"},{name:"ROv_patient1",dataset:"mcpherson_2016",path:"patient1_ROv/Ovarian_ROv_patient1.json"},{name:"ROv_patient2",dataset:"mcpherson_2016",path:"patient2/Ovarian_ROv_patient2.json"},{name:"LOv_patient3",dataset:"mcpherson_2016",path:"patient3_LOv/Ovarian_LOv_patient3.json"},{name:"ROv_patient3",dataset:"mcpherson_2016",path:"patient3_ROv/Ovarian_ROv_patient3.json"},{name:"LOv_patient4",dataset:"mcpherson_2016",path:"patient4_LOv/Ovarian_LOv_patient4.json"},{name:"ROv_patient4",dataset:"mcpherson_2016",path:"patient4_ROv/Ovarian_ROv_patient4.json"},{name:"LOv_patient7",dataset:"mcpherson_2016",path:"patient7_LOv/Ovarian_LOv_patient7.json"},{name:"ROv_patient7",dataset:"mcpherson_2016",path:"patient7_ROv/Ovarian_ROv_patient7.json"},{name:"LOv_patient9",dataset:"mcpherson_2016",path:"patient9_LOv/Ovarian_LOv_patient9.json"},{name:"ROv_patient9",dataset:"mcpherson_2016",path:"patient9_ROv/Ovarian_ROv_patient9.json"},{name:"ROv_patient10",dataset:"mcpherson_2016",path:"patient10/Ovarian_ROv_patient10.json"},{name:"CRUK0063",dataset:"tracerx",path:"tracerx/TRACERx_CRUK0063.json"}]}},[[191,38,37]]]);
//# sourceMappingURL=main.99b0887e.chunk.js.map