{"version":3,"sources":["assets/map.jpeg","assets/download.png","assets/logo.png","assets/settings-gear.svg","components/About.js","components/ClonalTree.js","components/Migration.js","components/Legend.js","components/MigrationMap.js","components/RightColumn.js","components/Viz.js","components/Home.js","components/DualViz.js","components/MigrationSummary.js","components/Loading.js","components/FilterMenu.js","components/SumViz.js","components/ClonalSummary.js","components/TriViz.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","__webpack_require__","p","About","React","createElement","className","Link","to","style","textDecoration","color","href","id","Cytoscape","use","COSEBilkent","dagre","ClonalTree","props","hexColorRegex","colorPalette","ncolors","length","getColor","label","coloring","map","value","index","filter","item","undefined","test","parseInt","_useState","useState","_useState2","_slicedToArray","width","_useState3","_useState4","height","findLabel","node","labeling","myCyRef","nodes","tree","flat","array","indexOf","data","type","edges","source","target","concat","migration","_useState5","_useState6","graphData","styleSheet","selector","backgroundColor","overlay-padding","z-index","text-outline-width","fontSize","border-width","border-color","border-opacity","background-color","text-outline-color","line-color","target-arrow-color","target-arrow-shape","curve-style","push","line-fill","line-gradient-stop-colors","line-gradient-stop-positions","layout","name","fit","directed","padding","animate","animationDuration","avoidOverlap","nodeDimensionsIncludeLabels","ready","evtbus","addListener","eventName","eventData","getElementById","nodeId","$","css","trigger","CytoscapeComponent","elements","normalizeElements","zoomingEnabled","maxZoom","minZoom","autounselectify","boxSelectionEnabled","stylesheet","cy","on","evt","event","div","document","setAttribute","innerHTML","canvas","getElementsByTagName","position","top","renderedPosition","left","rightcol","body","appendChild","labeltag","querySelector","opacity","zIndex","fontWeight","fireEvent","contains","removeChild","sink","abc","console","log","Migration","_step","clsource","cltarget","_iterator","_createForOfIteratorHelper","entries","s","n","done","_ref","_ref2","i","err","e","f","shape","text-valign","text-halign","queryParameters","URLSearchParams","window","location","search","rotated","get","circle","transform","x","y","edge","mu","gamma","localStorage","setItem","Legend","ret","forEach","l","fetchColor","coord_map","Fragment","src","cyCanvas","require","MigrationMap","canvheight","setCanvHeight","disp","setDisp","count","findCoords","found","coord","_useState7","_useState8","edges_t","_step4","flag","_iterator4","_ref7","_ref8","j","edge2","_step2","_iterator2","_ref3","_ref4","_useState9","_useState10","setGraphData","useEffect","Math","floor","_step3","_iterator3","_ref5","_ref6","addEventListener","canv","offsetHeight","userZoomingEnabled","userPanningEnabled","ungrabify","pos","positions","slice","getBoundingClientRect","leftPos","RightColumn","handleKeyPress","key","alert","Viz","history","useHistory","setMu","setGamma","jsonContents","getItem","wholeData","JSON","parse","hash","split","labelName","size","self","tree_labeling","labelnames","insertParam","currentUrl","URL","urlParams","set","toString","reload","eventBus","listeners","callback","this","removeListener","listener","onClick","protocol","host","for","onChange","selected","Home","json_dict","A7","A10","A22","A29","A31","A32","patient1","patient2","patient3","patient4","patient7","patient9","patient10","tracerx_res","default_patients","default_dirs","div_elements","which_color","_loop","current_directory","current_color","link","URLs","current_patient","stringify","download","url","filename","axios","responseType","then","res","fileDownload","getElementsByClassName","parentNode","elem","accept","json_contents","reader","FileReader","file","files","onload","readerEvt","jsonString","result","readAsText","class","DualViz","mu2","setMu2","gamma2","setGamma2","labelName2","data2","tree2","tree_labeling2","migration2","eventBus2","MigrationSummary","_toConsumableArray","Set","Loading","circumference","PI","strokeDashoffset","progress","icon","alt","cx","r","stroke","strokeWidth","fill","strokeDasharray","FilterMenu","show","text","checked","SumViz","isLoading","setIsLoading","muSum","setMuSum","_useState11","_useState12","gammaSum","setGammaSum","_useState13","_useState14","showPanel","setShowPanel","numSolns","migrationSummary","InlineSVG","gear","TriViz","_useState15","_useState16","App","createBrowserHistory","basename","Switch","Route","path","exact","reportWebVitals","onPerfEntry","Function","bind","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","render","StrictMode","Router"],"mappings":"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","file":"static/js/main.8238c1a1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/map.0c0c2213.jpeg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAj0lEQVR4nO2USwrEIBAF6xJp5kg5dyQM+aySRfa5iMNAC0ISBE0v8nnQKCpVoI3wtLSAsxQ4oLEUXD8d8LUUeK1XcKMraoARkB2B6F5RV/UKnBUYBKJrXs9kRyJQGON5EBelAqYIHmoBPqXwI0kWPPUNCDBoSeLHdZYt6I845oJ15yF9Zv1Zm9QnSVZl3SQ/PmdfIXJmioIAAAAASUVORK5CYII=\"","module.exports = __webpack_public_path__ + \"static/media/logo.97812ed6.png\";","module.exports = __webpack_public_path__ + \"static/media/settings-gear.80b88740.svg\";","import React, { useState, useEffect } from 'react';\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\n\nfunction About() {\n    return (\n        <div className='about'>\n            <div className='panel about'>\n                <div className='aboutcontainer'>\n                    <p className='backarrow'><b><Link to=\"\" style={{ textDecoration: 'none', color: 'black'}}>&#8592; home</Link></b></p>\n                    <h1 className='abouttitle'>Enter MACHINA-Viz</h1>\n                </div>\n                <p>MACHINA-Viz is a personalized medical tool to visualize cancer metastasis.</p>\n                <p>We have provided a <a href=\"https://github.com/vikramr2/machina-viz/blob/main/src/json_compression.py\"><b>json_compression.py</b></a> (Python) file with which you can take\n                   your data directory and build a JSON file to plug into our visualizer. The format for\n                   this directory is as follows:\n                   <ul className='lowerlist'>\n                       <li>[dir name].labeling</li>\n                       <li>[dir name].tree</li>\n                       <li>coloring.txt</li>\n                       <li>potential_labelings (containing additional tree labelings)</li>\n                   </ul>\n                   \n                   Running our Python file will generate <b>[dir name].json</b>, which can be plugged into\n                   our visualizer to view the clone trees and resultant migration graph. \n                   </p>\n                <p><b>Questions? Contact</b></p>\n                <ul id=\"singlecol\">\n                    <li><p>Akul Joshi (<a href=\"mailto:akulj2@illinois.edu\">akulj2@illinois.edu</a>)</p></li>\n                    <li><p>Vikram Ramavarapu (<a href=\"mailto:vikramr2@illinois.edu\">vikramr2@illinois.edu</a>)</p></li>\n                    <li><p>Mohammed El-Kebir (<a href=\"mailto:melkebir@illinois.edu\">melkebir@illinois.edu</a>)</p></li>\n                </ul>\n            </div>\n        </div>\n    );\n}\n\nexport default About;","import React from 'react';\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(COSEBilkent);\nCytoscape.use(dagre);\n\nfunction ClonalTree(props) {\n  var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n  const colorPalette = [\n    \"#a6cee3\",\n    \"#1f78b4\",\n    \"#b2df8a\",\n    \"#33a02c\",\n    \"#fb9a99\",\n    \"#e31a1c\",\n    \"#fdbf6f\",\n    \"#ff7f00\",\n    \"#cab2d6\",\n    \"#6a3d9a\",\n    \"#ffff99\",\n    \"#b15928\"\n  ]\n  const ncolors = colorPalette.length;\n\n  function getColor(label) {\n    if (!label) return '#000';\n    let color = props.coloring.map((value, index) => {\n      if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n    return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n  }\n\n  const [width, setWith] = useState(\"100%\");\n  const [height, setHeight] = useState(\"100%\");\n\n  function onlyUnique(value, index, array) {\n    return array.indexOf(value) === index;\n  }\n\n  function findLabel(node) {\n    return props.labeling.map((value, index) => {\n      if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n  }\n\n  const nodes = props.tree.flat().filter(onlyUnique).map((value, index) => {\n    return { data: { id: value, label: findLabel(value), type: \"ip\"} };\n  });\n  const edges = props.tree.map((value, index) => {\n    return { data: { source: value[0], target: value[1], label: `${value[0]}->${value[1]}`, migration: `${findLabel(value[0])}->${findLabel(value[1])}`} }\n  })\n\n  const [graphData, setGraphData] = useState({\n    nodes: nodes,\n    edges: edges\n  });\n\n  let styleSheet = [\n    {\n      selector: \"node\",\n      style: {\n        backgroundColor: \"#4a56a6\",\n        width: 15,\n        height: 15,\n        label: \"data(id)\",\n\n        // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n        // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n        // \"text-valign\": \"center\",\n        // \"text-halign\": \"center\",\n        \"overlay-padding\": \"6px\",\n        \"z-index\": \"10\",\n        //text props\n        //\"text-outline-color\": \"#4a56a6\",\n        \"text-outline-width\": \"2px\",\n        color: \"white\",\n        fontSize: 15\n      }\n    },\n    {\n      selector: \"node:selected\",\n      style: {\n        \"border-width\": \"6px\",\n        \"border-color\": \"#AAD8FF\",\n        \"border-opacity\": \"0.5\",\n        \"background-color\": \"#77828C\",\n        width: 50,\n        height: 50,\n        //text props\n        \"text-outline-color\": \"#77828C\",\n        \"text-outline-width\": 8\n      }\n    },\n    {\n      selector: \"edge\",\n      style: {\n        width: 3,\n        // \"line-color\": \"#6774cb\",\n        \"line-color\": \"#AAD8FF\",\n        \"target-arrow-color\": \"#6774cb\",\n        \"target-arrow-shape\": \"triangle\",\n        \"curve-style\": \"bezier\"\n      }\n    }\n  ];\n\n  props.coloring.map((value, index) => {\n    styleSheet.push({\n      selector: `node[label='${value[0]}']`,\n      style: {\n        backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n      }\n    })\n  })\n\n  edges.map((value, index) => {\n    let source = value.data.source;\n    let target = value.data.target;\n    styleSheet.push({\n      selector: `edge[label='${source}->${target}']`,\n      style: {\n        'line-fill': 'linear-gradient',\n        'line-gradient-stop-colors': `${getColor(findLabel(source))} ${getColor(findLabel(target))}`,\n        'line-gradient-stop-positions': '33% 66%',\n        \"target-arrow-color\": `${getColor(findLabel(target))}`\n      }\n    })\n  })\n\n  let myCyRef;\n  const layout = {\n    name: \"dagre\",\n    fit: true,\n    // circle: true,\n    directed: true,\n    padding: 10,\n    // spacingFactor: 1.5,\n    animate: true,\n    animationDuration: 1000,\n    avoidOverlap: true,\n    nodeDimensionsIncludeLabels: false,\n    ready: function() {\n      const listener = (eventName, eventData) => {\n        // Respond to event from other graph here\n        // For example:\n        if (eventName === 'selectNodeCl') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n            width: 10\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'deselectNodeCl') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n            width: 3\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'hoverNodeCl') {\n          myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n            width: 10\n          })\n        }\n        if (eventName === 'dehoverNodeCl') {\n          myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n            width: 3\n          })\n        }\n        if (eventName === 'selectNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let label = eventData.label;\n\n          myCyRef.$(`edge[label='${label}']`).css({\n            width: 10\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'deselectNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let label = eventData.label;\n\n          myCyRef.$(`edge[label='${label}']`).css({\n            width: 3\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'hoverNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let source = eventData.nodeId;\n\n          myCyRef.$(`node[id='${source}']`).css({\n            width: 25,\n            height: 25\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'dehoverNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let source = eventData.nodeId;\n\n          myCyRef.$(`node[id='${source}']`).css({\n            width: 15,\n            height: 15\n          })\n          node.trigger('select');\n        }\n      };\n      props.evtbus.addListener(listener);\n    }\n  };\n\n  return <CytoscapeComponent\n    elements={CytoscapeComponent.normalizeElements(graphData)}\n    // pan={{ x: 200, y: 200 }}\n    style={{ width: width, height: height }}\n    zoomingEnabled={true}\n    maxZoom={3}\n    minZoom={0.1}\n    autounselectify={false}\n    boxSelectionEnabled={true}\n    layout={layout}\n    stylesheet={styleSheet}\n    cy={cy => {\n      myCyRef = cy;\n\n\n      cy.on(\"tap\", \"node\", evt => {\n        var node = evt.target;\n      });\n\n      cy.on('mouseover', 'node', function(event) {\n        // Get the node information\n        var node = event.target;\n        var label = node.data('label');\n        \n        // Create the div element\n        var div = document.createElement(\"div\");\n        div.setAttribute(\"class\", \"panel popup\");\n\n        div.innerHTML = `<p>${label}&nbsp;</p>`;\n      \n        // Position the div element near the node\n        const canvas = document.getElementsByTagName('canvas')[0];\n        div.style.position = \"absolute\";\n        div.style.top = (node.renderedPosition('y') + canvas.height*0.5 + 30) + 'px';\n        div.style.left = node.renderedPosition('x') + 'px';\n        if (props.rightcol) {\n          div.style.left = 'calc(50% + ' + node.renderedPosition('x') + 'px)';\n        }\n      \n        // Add the div element to the page\n        document.body.appendChild(div);\n\n        const nodeId = event.target.id();\n\n        var labeltag = document.querySelector(`#${label}`);\n        if (labeltag !== null) {\n          labeltag.style.opacity = 1;\n          labeltag.style.zIndex = 100;\n          labeltag.style.fontWeight = 'bold';\n        }\n\n        props.evtbus.fireEvent('hoverNodeSC', { nodeId });\n      });\n\n      cy.on('mouseout', 'node', function(event){\n        // Remove the div element on mouseout\n        var div = document.querySelector('.panel.popup');\n        if (document.body.contains(div)) {\n          document.body.removeChild(div);\n        }\n\n        const nodeId = event.target.id();\n\n        var node = event.target;\n        var label = node.data('label');\n\n        var labeltag = document.querySelector(`#${label}`);\n        if (labeltag !== null) {\n          labeltag.style.opacity = 0.7;\n          labeltag.style.zIndex = 1;\n          labeltag.style.fontWeight = 'normal';\n        }\n\n        props.evtbus.fireEvent('dehoverNodeSC', { nodeId });\n      });\n\n      cy.on('mouseover', 'edge', function(event) {\n        const { target } = event;\n        target.css({\n          width: 10\n        })\n        const nodeId = event.target.id();\n        let source = findLabel(target.data().source);\n        let sink = findLabel(target.data().target);\n        let label = target.data().label;\n        props.evtbus.fireEvent('selectNode', { nodeId, source, sink, target});\n        props.evtbus.fireEvent('selectNodeSC', { nodeId, source, sink, target, label});\n      });\n\n      cy.on('mouseout', 'edge', function(event) {\n        const { target } = event;\n        target.css({\n          width: 3\n        })\n        const nodeId = event.target.id();\n        let source = findLabel(target.data().source);\n        let sink = findLabel(target.data().target);\n        let label = target.data().label;\n        props.evtbus.fireEvent('deselectNode', { nodeId, source, sink, target});\n        props.evtbus.fireEvent('deselectNodeSC', { nodeId, source, sink, target, label});\n      });\n    }}\n    abc={console.log(\"myCyRef\", myCyRef)}\n  />\n}\n\nexport default ClonalTree;","import React from 'react';\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\nfunction Migration(props) {\n      var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n      const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n      ]\n      const ncolors = colorPalette.length;\n    \n      const [width, setWith] = useState(\"100%\");\n      const [height, setHeight] = useState(\"100%\");\n    \n      function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n      }\n    \n      function findLabel(node) {\n        return props.labeling.map((value, index) => {\n          if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n      }\n\n      function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n          if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n      }\n    \n      let nodes = props.tree.flat().filter(onlyUnique).map((value, index) => {\n        return { data: { id:  findLabel(value), label: findLabel(value), type: \"ip\"} };\n      });\n      let edges = props.migration.map((value, index) => {\n        return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n      })\n      for (const [i, edge] of edges.entries()) {\n        if (edge.data.label == 1) {\n          edges[i].data.label = \"\";\n        }\n      }\n    \n      const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n      });\n\n      let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#fff\",\n            'border-width': 10,\n            shape: \"rectangle\",\n            width: 100,\n            height: 50,\n            label: \"data(label)\",\n    \n            // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"text-valign\": \"center\",\n            // \"text-halign\": \"center\",\n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            //text props\n            //\"text-outline-color\": \"#4a56a6\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15,\n            'text-valign': 'center',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        }\n      ];\n\n      props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            'border-color': hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n      })\n\n      edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        styleSheet.push({\n          selector: `edge[id='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(target)}`\n          }\n        })\n      })\n    \n      let myCyRef;\n\n      const queryParameters = new URLSearchParams(window.location.search);\n      let rotated = props.rightcol ? queryParameters.get(\"rotated2\") === \"true\" : queryParameters.get(\"rotated\") === \"true\";\n      if (rotated === null) {\n        rotated = false;\n      }\n\n      const layout = {\n        name: \"dagre\",\n        fit: true,\n        circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        transform: (node, position) => {\n          return {\n            x: rotated ? -2*position.y : position.x,\n            y: rotated ? position.x : position.y\n          }\n        },\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'selectNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[id='${eventData.nodeId}']`).css({\n                width: 10\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'deselectNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[id='${eventData.nodeId}']`).css({\n                width: 3\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'hoverNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`node[id='${eventData.nodeId}']`).css({\n                'border-width': 20,\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'dehoverNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`node[id='${eventData.nodeId}']`).css({\n                'border-width': 10,\n              })\n              edge.trigger('select');\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n      };\n\n      let mu = edges.length;\n      let gamma = edges.filter((item) => { return item.data.label !== '' }).length\n\n      if (!props.rightcol) {\n        localStorage.setItem(\"mu\", mu);\n        localStorage.setItem(\"gamma\", gamma);\n      } else {\n        localStorage.setItem(\"mu2\", mu);\n        localStorage.setItem(\"gamma2\", gamma);\n      }\n    \n      return <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n          });\n\n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 20,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 10,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n      />\n}\n\nexport default Migration;","import React from 'react';\nimport { useState, useEffect, useRef } from \"react\";\nimport map from '../assets/map.jpeg';\n\nfunction Legend(props) {\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n    let fetchColor = (label) => {\n        let ret = 0;\n        props.coloring.forEach(l => {\n            if (l[0] === label) {\n                ret = l[1];\n            }\n        })\n        return ret;\n    }\n\n    const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    console.log(colorPalette[parseInt(fetchColor('breast')) % ncolors]);\n\n    if (props.coord_map === undefined) {\n        return <></>/*ul className=\"legendlist\">\n            {props.coloring.map((l) => \n                <li className=\"legendtext\" style={{color: hexColorRegex.test(l[1]) ? l[1] : colorPalette[parseInt(l[1]) % ncolors], liststyle: \"circle\"}}>\n                    <span><p style={{color: \"black\"}}>{l[0]}</p></span>\n                </li>)}\n        </ul>*/\n    } else {\n        return <div style={{ position: 'relative', height: 0 }}>\n            <img \n                src={map}\n                className='paneltitle bodymap'\n            />\n        </div>\n    }\n}\n\nexport default Legend;","import React from 'react';\nimport { useState, useEffect, useRef } from 'react'\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nvar cyCanvas = require('cytoscape-canvas');\n\nCytoscape.use(cyCanvas);\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\nfunction MigrationMap(props) {\n    const [canvheight, setCanvHeight] = useState(0)\n    const [disp, setDisp] = useState(false);\n    let count = 0;\n\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n    var findCoords = (nodeId) => {\n        let found = props.coord_map.filter(coord => coord[0] == findLabel(nodeId))[0];\n        return {x: found[1][1]+15, y: found[1][0]+30}\n    }\n\n    const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n    }\n\n    function findLabel(node) {\n        return props.labeling.map((value, index) => {\n            if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n    }\n\n    function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n            if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        if (color === undefined) {\n            return '#ffffff'\n        }\n        return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n    }\n\n    let nodes = props.tree.flat().filter(onlyUnique).map((value, index) => {\n    return { data: { id:  findLabel(value), label: findLabel(value), type: \"ip\" }, position: findCoords(value) };\n    });\n    //nodes.push({data: {id: 'dummy', label: 'dummy', type: \"dummy\"}, position: {x: 0, y:0}})\n    let edges_t = props.tree.map((value, index) => {\n        return { data: { source: findLabel(value[0]), target: findLabel(value[1]), label: 1, id: `${findLabel(value[0])}->${findLabel(value[1])}`, type:\"actual\"} }\n    })\n\n    let edges = [];\n\n    for (const [i, edge] of edges_t.entries()) {\n        let flag = false;\n        for (const [j, edge2] of edges.entries()) {\n            if (edge.data.source == edge2.data.source && edge.data.target == edge2.data.target) {\n                edges[j].data.label++;\n                flag = true;\n                break;\n            }\n        }\n        if (!flag && edge.data.source !== edge.data.target) edges.push(edges_t[i]);\n    }\n\n    for (const [i, edge] of edges.entries()) {\n        if (edge.data.label == 1) {\n            edges[i].data.label = \"\";\n        }\n    }\n\n    console.log(edges);\n\n    const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n    });\n\n    let styleSheet = [\n        {\n            selector: \"node\",\n            style: {\n                backgroundColor: \"#ffffff\",\n                width: 10,\n                height: 10,\n                // label: \"data(id)\",\n                // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n                // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n                // \"text-valign\": \"center\",\n                // \"text-halign\": \"center\",\n                \"overlay-padding\": \"6px\",\n                \"z-index\": \"10\",\n                //text props\n                //\"text-outline-color\": \"#4a56a6\",\n                //\"text-outline-width\": \"2px\",\n                color: \"white\",\n                fontSize: 15\n            }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"1\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 7,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        },\n        {\n            selector: \"edge[type='label']\",\n            style: {\n                width: 2,\n                \"curve-style\": \"haystack\"\n            }\n        },\n        {\n            selector: \"node[type='label']\",\n            style: {\n                width: 2,\n                height: 2\n            }\n        },\n        {\n            selector: \"edge[type='label']\",\n            style: {\n                \"line-color\": '#bbb'\n            }\n        }\n    ];\n\n    props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n    })\n\n    edges.map((value, index) => {\n        if (value.data.type === \"actual\") {\n            let source = value.data.source;\n            let target = value.data.target;\n            console.log(value.data.id);\n            console.log(source);\n            styleSheet.push({\n            selector: `edge[id='${source}->${target}']`,\n            style: {\n                'line-fill': 'linear-gradient',\n                'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n                'line-gradient-stop-positions': '33% 66%',\n                \"target-arrow-color\": `${getColor(target)}`\n            }\n            })\n        }\n    })\n\n    let myCyRef;\n    const layout = {\n        name: \"preset\",\n        fit: false,\n        // circle: true,\n        // directed: true,\n        // padding: 50,\n        // spacingFactor: 1.5,\n           animate: true,\n           animationDuration: 1000,\n        // avoidOverlap: true,\n        // nodeDimensionsIncludeLabels: false\n    };\n\n    useEffect(() => {\n        props.coord_map.map((l, index) => {\n            console.log((index + 1)*(100/(2*props.coord_map)))\n            nodes.push({\n                data: {\n                    id: `labelnode${index}`,\n                    label: `labelnode${index}`,\n                    type: \"label\"\n                },\n                position: {\n                    x: index % 2 == 0 ? 5 : 310,\n                    y: (index + 1)*Math.floor(canvheight/(props.coord_map.length)/1.75)\n                }\n            })\n            edges.push({\n                data: {\n                    source: `labelnode${index}`,\n                    target: l[0],\n                    label: 1,\n                    id: `labelnode${index}->${l[0]}`,\n                    type: \"label\"\n                }\n            })\n        })\n\n        for (const [i, edge] of edges.entries()) {\n            if (edge.data.label == 1) {\n                edges[i].data.label = \"\";\n            }\n        }\n\n        setGraphData({\n            nodes: nodes,\n            edges: edges\n        })\n\n        setDisp(true);\n    }, [canvheight])\n\n    document.addEventListener(\"DOMContentLoaded\", function(event) { \n        let canv = document.querySelector('.migrationmap')\n        setCanvHeight(canv.offsetHeight);\n    });\n\n    return <CytoscapeComponent\n        className='migrationmap'\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n\n          //var layer = cy.cyCanvas();\n          //var canvas = layer.getCanvas();\n          //var ctx = canvas.getContext('2d');\n    \n          console.log(\"EVT\", cy);\n\n          cy.userZoomingEnabled( false );\n          cy.userPanningEnabled( false );\n          cy.nodes().ungrabify();\n\n          cy.nodes().forEach(function(node) {\n            var pos = node.position();\n            if (node.data().type === 'label') {\n                pos.y /= 75\n                //pos.y *= canvheight/(props.coord_map.length*2)\n                console.log(Math.floor(canvheight/(props.coord_map.length)))\n                pos.y *= Math.floor(canvheight/(props.coord_map.length))\n            }\n            console.log(node.position())\n          });\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n            console.log(\"EVT\", evt);\n            console.log(\"TARGET\", node.data());\n            console.log(\"TARGET TYPE\", typeof node[0]);\n          });\n\n          cy.on('mouseover', \"edge[type='actual']\", function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', \"node[type='ip']\", function(event) {\n            const { target } = event;\n            target.css({\n                width: 15,\n                height: 15,\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', \"node[type='ip']\", function(event) {\n            const { target } = event;\n            target.css({\n                width: 10,\n                height: 10,\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', \"edge[type='actual']\", function(event) {\n            const { target } = event;\n            target.css({\n              width: 7\n            })\n            const nodeId = event.target.id();\n            //props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n\n          const positions = {};\n            cy.nodes().forEach((node) => {\n                positions[node.data().id] = node.position();\n          });\n          console.log(positions);\n\n          if (disp) {\n            cy.nodes().forEach((node) => {\n                count++;\n                console.log(count);\n                if (node.data().type === 'label' && node.renderedPosition('y') > 0) {\n                    let index = parseInt(node.data().id.slice(-1));\n                    let label = props.coord_map[index][0]\n\n                    var div = document.createElement(\"div\");\n                    div.setAttribute(\"class\", \"panel label\");\n\n                    div.innerHTML = `<ul className=\"legendlist\"><li><span><p>${label}</p></span></li></ul>`;\n                \n                    // Position the div element near the node\n                    const canvas = document.querySelector('.rightcolumn');\n                    console.log(canvas.getBoundingClientRect());\n                    div.style.position = \"absolute\";\n                    \n                    let leftPos = `calc(${node.renderedPosition('x') + 'px'} + 70% + 20px `\n                    if (index % 2 == 1) {\n                        leftPos += \"- 100px\";\n                    }\n                    leftPos += \")\";\n\n                    div.id = label;\n\n                    div.style.top = (node.renderedPosition('y') + canvas.getBoundingClientRect().top/2 - 15) + 'px';\n                    div.style.left = leftPos; \n                    div.style.opacity = 0.7;\n\n                    document.body.appendChild(div);\n                }\n            })\n          }\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n    />\n}\n\nexport default MigrationMap;","import React, { useState, useEffect } from \"react\"\nimport Legend from \"./Legend.js\";\nimport MigrationMap from \"./MigrationMap.js\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nfunction RightColumn(props) {\n    if (props.coord_map === undefined) {\n        return <></>\n    } else {\n        return <div className=\"rightcolumn\">\n            <div className={props.coord_map === undefined ? \"panel migration legend top\" : \"panel migration legend top map\"}>\n                <Legend coloring={props.coloring} coord_map={props.coord_map}/>\n                <MigrationMap tree={props.tree} labeling={props.labeling} coloring={props.coloring} coord_map={props.coord_map}/>\n            </div>\n        </div>\n    }\n    \n}\n\nexport default RightColumn;","import React, { useState, useEffect, useContext } from \"react\"\nimport ClonalTree from \"./ClonalTree.js\";\nimport Migration from \"./Migration.js\";\nimport { useHistory } from 'react-router-dom';\nimport Legend from \"./Legend.js\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport RightColumn from \"./RightColumn.js\";\n\nfunction handleKeyPress(event) {\n  if (event.key === '/') {\n    alert('Instructions:\\n\\nToggle and move around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponsing anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panel.\\n\\nOn the right, rotate around an anatomical model to visualize the corresponding metastatic locations.');\n  }\n}\n\nfunction Viz(props) {\n    const history = useHistory();\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const jsonContents=localStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n\n    const labelName = queryParameters.get(\"labeling\");\n    console.log(\"window thingy:\", window.location.hash)\n    console.log(\"queryParameters:\", queryParameters.size)\n    console.log(\"labelName:\", labelName);\n    \n    // const coloring = data[\"coloring\"]\n\n    const data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n\n    // console.log(data[\"labeling\"])\n    let coloring = data[\"labeling\"]\n      .map((item) => item[1])\n      .filter((value, index, self) => {\n        return self.indexOf(value) === index;\n      })\n      .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n\n    const tree = data[\"tree\"]\n    const tree_labeling = data[\"labeling\"]\n    const migration = data[\"migration\"]\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    let coord_map = wholeData[\"map\"]; \n\n    let insertParam = (key, value) => {\n      // Get the current url\n      let currentUrl = new URL(window.location.href);\n\n      // Change a url parameter using URLSearchParams\n      let urlParams = new URLSearchParams(currentUrl.search);\n      urlParams.set(key, value);\n      history.push('/viz?' + urlParams.toString());\n      window.location.reload();\n    }\n\n    let handleLabelChange = (event) => {\n      insertParam(\"labeling\", event.target.value);\n    }\n\n    let addTab = (event) => {\n      window.location = `${window.location.protocol}//${window.location.host}/machina-viz/#/dualviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling\")}`;\n    }\n\n    let gotoSummary = (event) => {\n      window.location = `${window.location.protocol}//${window.location.host}/machina-viz/#/sumviz?labeling=${queryParameters.get(\"labeling\")}`;\n    }\n\n    let rotateFn = (event) => {\n      let rotated = queryParameters.get(\"rotated\") === \"true\";\n      insertParam(\"rotated\", !rotated);\n    }\n\n    useEffect(() => {\n      document.addEventListener(\"keydown\", handleKeyPress);\n      setMu(localStorage.getItem(\"mu\"));\n      setGamma(localStorage.getItem(\"gamma\"));\n    });\n\n    const eventBus = {\n      listeners: [],\n      addListener(callback) {\n        this.listeners.push(callback);\n      },\n      removeListener(callback) {\n        this.listeners = this.listeners.filter(listener => listener !== callback);\n      },\n      fireEvent(eventName, eventData) {\n        this.listeners.forEach((listener) => {\n          listener(eventName, eventData);\n        });\n      },\n    };\n\n\n\n    return (\n      <div className=\"viz\">\n        <div className=\"panel tab_add2\" onClick={gotoSummary}><p className='addpanelp'><b>+</b></p></div>\n        <div className=\"panel info\">\n          <div className=\"titlewrapper\">\n            <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n              <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                {labelnames.map(l => \n                  {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                )}\n              </select>\n            </b></p></label>\n            <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n            <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n            <Link to=\"\" style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></Link>\n          </div>\n          <div className=\"columnwrapper\">\n            <div className={coord_map === undefined ? \"leftcolumn nolegend\" : \"leftcolumn\"}>\n              <div className=\"panel migration top\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n                <Migration tree={tree} labeling={tree_labeling} coloring={coloring} migration={migration} evtbus={eventBus}/>\n              </div>\n              <div className=\"panel migration\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus}/>\n              </div>\n            </div>\n            <RightColumn coord_map={coord_map} coloring={coloring} tree={tree} labeling={tree_labeling} evtbus={eventBus}/>\n          </div>\n        </div>\n        <div className=\"panel tab_add\" onClick={addTab}><p className='addpanelp'><b>+</b></p></div>\n      </div>\n    )\n}\n\nexport default Viz;","import React, { useState, useEffect, useContext } from 'react';\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\n\nimport URLs from \"../utils/default_url.json\";\nimport download from \"../assets/download.png\";\n\nimport axios from 'axios'\nimport fileDownload from 'js-file-download'\n\nimport A7 from \"../samples/A7/A7.json\";\nimport A10 from \"../samples/A10/A10.json\";\nimport A22 from \"../samples/A22/A22.json\";\nimport A29 from \"../samples/A29/A29.json\";\nimport A31 from \"../samples/A31/A31.json\";\nimport A32 from \"../samples/A32/A32.json\";\nimport patient1 from \"../samples/patient1/patient1.json\";\nimport patient2 from \"../samples/patient2/patient2.json\";\nimport patient3 from \"../samples/patient3/patient3.json\";\nimport patient4 from \"../samples/patient4/patient4.json\";\nimport patient7 from \"../samples/patient7/patient7.json\";\nimport patient9 from \"../samples/patient9/patient9.json\";\nimport patient10 from \"../samples/patient10/patient10.json\";\nimport tracerx_res from \"../samples/tracerx_res/tracerx_res.json\";\n\nfunction Home(props) {\n    let handleDownload = (url, filename) => {\n      axios.get(url, {\n        responseType: 'blob',\n      })\n      .then((res) => {\n        fileDownload(res.data, filename)\n      })\n    }\n\n    var json_dict = {\n      \"A7\": A7,\n      \"A10\": A10,\n      \"A22\": A22,\n      \"A29\": A29,\n      \"A31\": A31,\n      \"A32\": A32,\n      \"patient1\": patient1,\n      \"patient2\": patient2,\n      \"patient3\": patient3,\n      \"patient4\": patient4,\n      \"patient7\": patient7,\n      \"patient9\": patient9,\n      \"patient10\": patient10,\n      \"tracerx_res\": tracerx_res\n    }\n\n    var default_patients = [\"A7\", \"A10\", \"A22\", \"A29\", \"A31\", \"A32\", \"patient1\", \"patient2\", \"patient3\", \"patient4\", \"patient7\", \"patient9\", \"patient10\", \"tracerx_res\"]\n    var default_dirs = [\"hoadley_2016\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"tracerx\"]\n    var div_elements = []\n    var which_color = true;\n    const color1 = \"#EBEBEB\";\n    const color2 = \"#A3A3A3\";\n    \n    for (let i = 0; i < default_patients.length; i++) {\n        var current_patient = default_patients[i];\n        var current_directory = default_dirs[i];\n        var current_color = (which_color ? color1 : color2)\n\n        var link = URLs[current_patient];\n\n        div_elements.push(<div className=\"patient-container\">\n          <div className=\"patientitem\" style={{ backgroundColor: current_color }}>\n            <li className=\"dirtext\">\n              <p><b>{current_directory}</b></p>\n            </li>\n          </div>\n          <div className=\"patientitem\" style={{ backgroundColor: current_color }}>\n            <Link to={link} style={{ textDecoration: 'none', color: 'black'}} onClick={() => {localStorage.setItem(\"json_data\", JSON.stringify(json_dict[default_patients[i]]))}}>\n              <li className=\"abouttext\">\n                <div className='liwrapper'>\n                  <p className='leftli'><b>{current_patient}</b></p>\n                </div>\n              </li>\n            </Link>\n            <img \n              className='rightli' \n              src={download}\n              onClick={() => handleDownload(`https://raw.githubusercontent.com/vikramr2/machina-viz/main/src/samples/${default_patients[i]}/${default_patients[i]}.json`, `${default_patients[i]}.json`)}\n            >\n            </img>\n          </div>\n        </div>)\n        which_color = !which_color;\n    }\n\n    if (document.getElementsByClassName('label').length > 1) {\n      const elements = document.getElementsByClassName('label');\n      while(elements.length > 0){\n        elements[0].parentNode.removeChild(elements[0]);\n      }\n    }\n\n    let handleChange = (e) => {\n      const reader = new FileReader();\n      const file = e.target.files[0];\n      let json_contents;\n  \n      reader.onload = function(readerEvt) {\n        let jsonString = readerEvt.target.result;\n        json_contents = jsonString;\n\n        const data = JSON.parse(json_contents);\n        let labelnames = data[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n        // let stateObj = {json_contents: json_contents};\n        // history.pushState(stateObj, window.location.href);\n        localStorage.setItem(\"json_data\", json_contents);\n  \n        window.location = window.location + `viz?labeling=${labelnames[0]}`;\n        // history.push(`viz?labeling=${labelnames[0]}`);\n      }\n      // Read the file as a text\n      reader.readAsText(file);\n    }\n\n    return (\n        <div className='home'>\n            <div className='panel home'>\n                <h1><b>Welcome to MACHINA-Viz!</b></h1>\n                <div className=\"aboutdir\"><Link to=\"about\" style={{ textDecoration: 'none', color: 'black'}}><h4 className='abouttext'>About</h4></Link></div>\n                <h3>Examples</h3>\n\n                <div className=\"panel title\">\n                  <ol className=\"patientlist\">\n                    <div className=\"patient-container\">\n                      <div className=\"patientitem\" style={{ backgroundColor: \"#A3A3A3\" }}>\n                        <li className=\"dirtext title\">\n                          <p className='datasettitle'><b>Dataset</b></p>\n                        </li>\n                      </div>\n                      <div className=\"patientitem\" style={{ backgroundColor: \"#A3A3A3\" }}>\n                        <Link to={link} style={{ textDecoration: 'none', color: 'black'}}>\n                          <li className=\"abouttext title\">\n                          <p className='datasettitle'><b>Patient</b></p>\n                          </li>\n                        </Link>\n                      </div>\n                    </div>\n                  </ol>\n                </div>\n\n                <div className=\"panel example\">\n                    <ol className=\"patientlist\">\n                      { \n                        div_elements.map(elem => (\n                          elem\n                        ))\n                      }\n                    </ol>\n              </div>\n            </div>\n            \n            <input \n              type=\"file\"\n              id=\"json_upload\" \n              name=\"json_upload\"\n              accept=\"application/JSON\"\n              onChange={handleChange}/>\n            <label for=\"json_upload\"><div id=\"addnew\" className=\"dot\"><h1 className=\"plus\">+</h1><span class=\"tooltiptext\"><b>Upload Patient JSON</b></span></div></label>\n        </div>\n    );\n}\n\nexport default Home;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport Migration from \"./Migration.js\";\nimport ClonalTree from \"./ClonalTree.js\";\n\nfunction insertParam(key, value) {\n    // Get the current url\n    let currentUrl = new URL(window.location.href);\n  \n    // Change a url parameter using URLSearchParams\n    let urlParams = new URLSearchParams(currentUrl.search);\n    urlParams.set(key, value);\n  \n    // Replace the URL\n    //currentUrl.search = urlParams.toString();\n    window.location.href = '#/dualviz?' + urlParams.toString();\n  \n    // Reload the page\n    //window.location.reload();\n}\n\nfunction handleKeyPress(event) {\n    if (event.key === '/') {\n      alert('Instructions:\\n\\nToggle and move around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponsing anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panel.\\n\\nThe dual visualization window allows you to compare different solutions side by side!');\n    }\n  }\n\nfunction DualViz() {\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [mu2, setMu2] = useState(0);\n    const [gamma2, setGamma2] = useState(0);\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    const jsonContents=localStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n\n    const labelName = queryParameters.get(\"labeling\");\n    const labelName2 = queryParameters.get(\"labeling2\");\n\n    const data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n    const data2 = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName2})[0];\n\n    let coloring = data[\"labeling\"]\n      .map((item) => item[1])\n      .filter((value, index, self) => {\n        return self.indexOf(value) === index;\n      })\n      .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n\n    const tree = data[\"tree\"]\n    const tree2 = data2[\"tree\"]\n    const tree_labeling = data[\"labeling\"];\n    const tree_labeling2 = data2[\"labeling\"];\n    const migration = data[\"migration\"];\n    const migration2 = data2[\"migration\"];\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    let handleLabelChange = (event) => {\n        insertParam(\"labeling\", event.target.value);\n    }\n\n    let handleLabelChange2 = (event) => {\n        insertParam(\"labeling2\", event.target.value);\n    }\n\n    let rotateFn = (event) => {\n        let rotated = queryParameters.get(\"rotated\") === \"true\";\n        insertParam(\"rotated\", !rotated);\n    }\n\n    let rotateFn2 = (event) => {\n        let rotated = queryParameters.get(\"rotated2\") === \"true\";\n        insertParam(\"rotated2\", !rotated);\n    }\n\n    let gotoSummary = (event) => {\n      window.location = `${window.location.protocol}//${window.location.host}/#/triviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling2\")}`;\n    }\n\n    const eventBus = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    const eventBus2 = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    useEffect(() => {\n        document.addEventListener(\"keydown\", handleKeyPress);\n        setMu(localStorage.getItem(\"mu\"));\n        setGamma(localStorage.getItem(\"gamma\"));\n        setMu2(localStorage.getItem(\"mu2\"));\n        setGamma2(localStorage.getItem(\"gamma2\"));\n    });\n\n    return <div className=\"viz\">\n        <div className=\"panel tab_add2\" onClick={gotoSummary}><p className='addpanelp'><b>+</b></p></div>\n        <div className=\"panel info one\">\n            <div className=\"titlewrapper\">\n                <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                    {labelnames.map(l => \n                    {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                    )}\n                </select>\n                </b></p></label>\n                <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n                <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                <a onClick={() => {window.location.href=`/#/viz?labeling=${queryParameters.get(\"labeling2\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n                <Migration tree={tree} labeling={tree_labeling} migration={migration} coloring={coloring} evtbus={eventBus}/>\n            </div>\n            <div className=\"panel migration left\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus}/>\n            </div>\n        </div>\n        <div className=\"panel info one two\">\n            <div className=\"titlewrapper\">\n                <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange2}>\n                    {labelnames.map(l => \n                    {return (l === queryParameters.get(\"labeling2\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                    )}\n                </select>\n                </b></p></label>\n                <h3 className=\"viztitle\"><b>{data2[\"name\"]}</b></h3>\n                <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                <a onClick={() => {window.location.href=`/#/viz?labeling=${queryParameters.get(\"labeling\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu2}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma2}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn2}>Rotate</button>\n                <Migration tree={tree2} labeling={tree_labeling2} migration={migration2} coloring={coloring} evtbus={eventBus2} rightcol={true}/>\n            </div>\n            <div className=\"panel migration left\">\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree2} labeling={tree_labeling2} coloring={coloring} evtbus={eventBus2} rightcol={true}/>\n            </div>\n        </div>\n    </div>\n}\n\nexport default DualViz;\n","import React from 'react';\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\nfunction MigrationSummary(props) {\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n    const colorPalette = [\n      \"#a6cee3\",\n      \"#1f78b4\",\n      \"#b2df8a\",\n      \"#33a02c\",\n      \"#fb9a99\",\n      \"#e31a1c\",\n      \"#fdbf6f\",\n      \"#ff7f00\",\n      \"#cab2d6\",\n      \"#6a3d9a\",\n      \"#ffff99\",\n      \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    function onlyUnique(array) {\n      return [...new Set(array)];\n    }\n\n    function getColor(label) {\n      let color = props.coloring.map((value, index) => {\n        if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n      return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n    }\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    let nodeSet = onlyUnique(props.data.map((value, index) => [value[0], value[1]]).flat())\n\n    let nodes = nodeSet.map((value, index) => {\n        return { data: { id:  value, label: value, type: \"ip\"} };\n    });\n\n    let edges = props.data.map((value, index) => {\n      return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n    })\n\n    for (const [i, edge] of edges.entries()) {\n      if (edge.data.label == 1) {\n        edges[i].data.label = \"\";\n      }\n    }\n\n    const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n    });\n\n    let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#fff\",\n            'border-width': 10,\n            shape: \"rectangle\",\n            width: 100,\n            height: 50,\n            label: \"data(label)\",\n    \n            // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"text-valign\": \"center\",\n            // \"text-halign\": \"center\",\n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            //text props\n            //\"text-outline-color\": \"#4a56a6\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15,\n            'text-valign': 'center',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        }\n    ];\n    \n    props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            'border-color': hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n    })\n\n    edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        styleSheet.push({\n          selector: `edge[id='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(target)}`\n          }\n        })\n    })\n\n    let myCyRef;\n\n    const queryParameters = new URLSearchParams(window.location.search);\n    let rotated = queryParameters.get(\"rotatedsum\") === \"true\";\n    if (rotated === null) {\n        rotated = false;\n    }\n\n    const layout = {\n        name: \"dagre\",\n        fit: true,\n        circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n    };\n\n    let mu = edges.length;\n    let gamma = edges.filter((item) => { return item.data.label !== '' }).length;\n\n    localStorage.setItem(\"musum\", mu);\n    localStorage.setItem(\"gammasum\", gamma);\n\n    return <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n          });\n\n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('selectNodeSum', { nodeId, target});\n            props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 20,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('hoverNodeSum', { nodeId });\n            props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 10,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('dehoverNodeSum', { nodeId });\n            props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('deselectNodeSum', { nodeId, target});\n            props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n      />\n}\n\nexport default MigrationSummary;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport icon from \"../assets/logo.png\";\n\nfunction Loading(props) {\n    const radius = 40;\n    const circumference = 2 * Math.PI * radius;\n    const strokeDashoffset = circumference - (props.progress / 100) * circumference;\n\n    return <div className=\"loading\">\n        <img src={icon} alt=\"Icon\" width=\"500px\"/>\n        <h1>Loading...</h1>\n        <svg>\n            <circle\n            cx=\"50\"\n            cy=\"50\"\n            r={radius}\n            stroke=\"#006699\"\n            strokeWidth=\"6\"\n            fill=\"transparent\"\n            strokeDasharray={`${circumference} ${circumference}`}\n            style={{ strokeDashoffset }}\n            />\n        </svg>\n    </div>\n}\n\nexport default Loading;","import React, { useState, useEffect } from \"react\"\n\nfunction FilterMenu(props) {\n    if (props.show) { \n        const edges = props.data.map((text, index) => {\n            return (\n                <div>\n                    <input type=\"checkbox\" className=\"checkbox\" id={`${text[0]}\\u2192${text[1]}`} name={`${text[0]}\\u2192${text[1]}`} checked/>\n                    <label for={`${text[0]}\\u2192${text[1]}`}>{`${text[0]}\\u2192${text[1]}`}</label>\n                </div>\n            );\n        });\n\n        return (\n            <div className=\"filtermenu panel\">\n                {edges}\n            </div>\n        )\n    } else {\n        return <></>\n    }\n}\n\nexport default FilterMenu;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\nimport InlineSVG from 'react-inlinesvg';\n\nimport Migration from \"./Migration.js\";\nimport ClonalTree from \"./ClonalTree.js\";\nimport MigrationSummary from \"./MigrationSummary.js\";\nimport Loading from \"./Loading.js\";\nimport FilterMenu from \"./FilterMenu.js\";\n\n\nimport gear from '../assets/settings-gear.svg'\n\nfunction insertParam(key, value) {\n    // Get the current url\n    let currentUrl = new URL(window.location.href);\n  \n    // Change a url parameter using URLSearchParams\n    let urlParams = new URLSearchParams(currentUrl.search);\n    urlParams.set(key, value);\n  \n    // Replace the URL\n    //currentUrl.search = urlParams.toString();\n    window.location.href = '#/sumviz?' + urlParams.toString();\n  \n    // Reload the page\n    //window.location.reload();\n}\n\nfunction handleKeyPress(event) {\n    if (event.key === '/') {\n      alert('Instructions:\\n\\nToggle and move around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponsing anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panel.\\n\\nThe dual visualization window allows you to compare different solutions side by side!');\n    }\n}\n\nfunction SumViz() {\n    const [isLoading, setIsLoading] = useState(true);\n    const [progress, setProgress] = useState(0);\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [muSum, setMuSum] = useState(0);\n    const [gammaSum, setGammaSum] = useState(0);\n    const [showPanel, setShowPanel] = useState(false);\n\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    const jsonContents=localStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n\n    const labelName = queryParameters.get(\"labeling\");\n\n    const data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n\n    const numSolns = wholeData[\"solutions\"].length;\n\n    const migrationSummary = wholeData[\"summary\"][\"migration\"]\n\n    let coloring = data[\"labeling\"]\n      .map((item) => item[1])\n      .filter((value, index, self) => {\n        return self.indexOf(value) === index;\n      })\n      .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n\n    const tree = data[\"tree\"]\n    const tree_labeling = data[\"labeling\"];\n    const migration = data[\"migration\"];\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    let handleLabelChange = (event) => {\n        insertParam(\"labeling\", event.target.value);\n    }\n\n    let rotateFn = (event) => {\n        let rotated = queryParameters.get(\"rotated\") === \"true\";\n        insertParam(\"rotated\", !rotated);\n    }\n\n    let addTab = (event) => {\n        window.location = `${window.location.protocol}//${window.location.host}/#/triviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling\")}`;\n    }\n\n    const eventBus = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    const eventBus2 = {\n        listeners: [],\n        addListener(callback) {\n          this.listeners.push(callback);\n        },\n        removeListener(callback) {\n          this.listeners = this.listeners.filter(listener => listener !== callback);\n        },\n        fireEvent(eventName, eventData) {\n          this.listeners.forEach((listener) => {\n            listener(eventName, eventData);\n          });\n        },\n    };\n\n    useEffect(() => {\n        //let intervalId = setInterval(() => {\n        //    setProgress(prevProgress => prevProgress + 10);\n        //}, 1000);\n\n        \n        // clearInterval(intervalId);\n        document.addEventListener(\"keydown\", handleKeyPress);\n        setMu(localStorage.getItem(\"mu\"));\n        setGamma(localStorage.getItem(\"gamma\"));\n        setMuSum(localStorage.getItem(\"musum\"));\n        setGammaSum(localStorage.getItem(\"gammasum\"));\n        setIsLoading(false)\n\n        //return () => clearInterval(intervalId);\n    }, []);\n\n    useEffect(() => {\n        setMuSum(localStorage.getItem(\"musum\"));\n        setGammaSum(localStorage.getItem(\"gammasum\"));\n    }, [isLoading])\n\n    return (\n        <div className=\"viz\">\n            {!isLoading ? (\n                <>\n                    <div className=\"panel info one sum\">\n                        <div className=\"titlewrapper\">\n                            <InlineSVG src={gear} className=\"settingsgear\" onClick={() => setShowPanel(!showPanel)}/>\n                            <FilterMenu show={showPanel} numSolns={numSolns} data={migrationSummary}/>\n                            <h3 className=\"viztitle\"><b>Summary</b></h3>\n                            <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                            <a onClick={() => {window.location.href=`/#/viz?labeling=${queryParameters.get(\"labeling\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n                        </div>\n                        <div className=\"panel migration top left sum\">\n                            <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                            <p className=\"paneltitle mu\">{`\\u03BC: ${muSum}`}</p>\n                            <p className=\"paneltitle gamma\">{`\\u03B3: ${gammaSum}`}</p>\n                            <MigrationSummary data={migrationSummary} coloring={coloring} evtbus={eventBus}/>\n                        </div>\n                    </div>\n                    <div className=\"panel info one two sum\">\n                        <div className=\"titlewrapper\">\n                            <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                            <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                                {labelnames.map(l => \n                                {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                                )}\n                            </select>\n                            </b></p></label>\n                            <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n                            <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                        </div>\n                        <div className=\"panel migration top left\">\n                            <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                            <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                            <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                            <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n                            <Migration tree={tree} labeling={tree_labeling} migration={migration} coloring={coloring} evtbus={eventBus}/>\n                        </div>\n                        <div className=\"panel migration left\">\n                            <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                            <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus} rightcol={true}/>\n                        </div>\n                    </div>\n                    <div className=\"panel tab_add\" onClick={addTab}><p className='addpanelp'><b>+</b></p></div>\n                </>\n            ) : (\n                <Loading progress={progress}/>\n            )}\n        </div>\n    )\n}\n\nexport default SumViz;\n","import React from 'react';\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(COSEBilkent);\nCytoscape.use(dagre);\n\nfunction ClonalSummary(props) {\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n    const colorPalette = [\n    \"#a6cee3\",\n    \"#1f78b4\",\n    \"#b2df8a\",\n    \"#33a02c\",\n    \"#fb9a99\",\n    \"#e31a1c\",\n    \"#fdbf6f\",\n    \"#ff7f00\",\n    \"#cab2d6\",\n    \"#6a3d9a\",\n    \"#ffff99\",\n    \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n    }\n\n    function intersectArrays(...arrays) {\n        return arrays.reduce((accumulator, current) => {\n          return accumulator.filter(element => current.includes(element));\n        });\n    }\n\n    function removeDuplicates(array) {\n        return array.filter((element, index) => array.indexOf(element) === index);\n    }\n\n    function removeDuplicateArrays(array) {\n        return array.filter(\n          (element, index, self) =>\n            index === self.findIndex((t) => JSON.stringify(t) === JSON.stringify(element))\n        );\n    }\n\n    function findLabel(node) {\n        return labeling.map((value, index) => {\n          if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n    }\n\n    function getNumberOfLabels(value) {\n        return labeling.filter(item => item[0] === value).length\n    }\n\n    function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n            if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        let retval = hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n        return retval === undefined ? '#000' : retval;\n    }\n\n    function strictConsensus(edgelists) {\n        const edges = {};\n        for (const edgelist of edgelists) {\n            for (const edge of edgelist) {\n                const key = edge.join(\"->\");\n                edges[key] = (edges[key] || 0) + 1;\n            }\n        }\n\n        const strictConsensus = [];\n        for (const key in edges) {\n            if (edges[key] === edgelists.length) {\n                const [source, target] = key.split(\"->\");\n                strictConsensus.push([source, target]);\n            }\n        }\n\n        return strictConsensus;\n    }\n\n    let trees = props.data[\"solutions\"].map(item => item[\"tree\"]);\n    let nodeLists = trees.map(item => removeDuplicates(item.flat()));\n    let nodeIds = removeDuplicates(intersectArrays(...nodeLists));\n    const tree = strictConsensus(trees);\n    \n    const labels = props.data[\"solutions\"].map(item => item[\"labeling\"]);\n    let labeling = removeDuplicateArrays([].concat(...labels));\n    labeling = labeling.filter(item => getNumberOfLabels(item[0]) === 1 && nodeIds.includes(item[0]))\n\n    let nodes = tree.flat().filter(onlyUnique).map((value, index) => {\n        return { data: { id: value, label: findLabel(value), type: \"ip\"} };\n      });\n      let edges = tree.map((value, index) => {\n        return { data: { source: value[0], target: value[1], label: `${value[0]}->${value[1]}`, migration: `${findLabel(value[0])}->${findLabel(value[1])}`} }\n      })\n    \n      const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n      });\n    \n      let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#4a56a6\",\n            width: 15,\n            height: 15,\n            label: \"data(id)\",\n    \n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            \"line-color\": \"#AAD8FF\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\"\n          }\n        }\n      ];\n    \n      props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n      })\n    \n      edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        console.log(source);\n        styleSheet.push({\n          selector: `edge[label='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(findLabel(source))} ${getColor(findLabel(target))}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(findLabel(target))}`\n          }\n        })\n      })\n    \n      let myCyRef;\n      const layout = {\n        name: \"dagre\",\n        fit: true,\n        // circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNodeCl') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNodeCl') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'hoverNodeCl') {\n              myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n                width: 10\n              })\n            }\n            if (eventName === 'dehoverNodeCl') {\n              myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n                width: 3\n              })\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n      };\n    \n      return <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n            console.log(\"EVT\", evt);\n            console.log(\"TARGET\", node.data());\n            console.log(\"TARGET TYPE\", typeof node[0]);\n          });\n    \n          cy.on('mouseover', 'node', function(event) {\n            // Get the node information\n            var node = event.target;\n            var label = node.data('label');\n            \n            // Create the div element\n            var div = document.createElement(\"div\");\n            div.setAttribute(\"class\", \"panel popup\");\n    \n            div.innerHTML = `<p>${label}&nbsp;</p>`;\n          \n            // Position the div element near the node\n            const canvas = document.getElementsByTagName('canvas')[0];\n            div.style.position = \"absolute\";\n            div.style.top = (node.renderedPosition('y') + canvas.height*0.5 + 30) + 'px';\n            div.style.left = node.renderedPosition('x') + 'px';\n          \n            // Add the div element to the page\n            document.body.appendChild(div);\n            const nodeId = event.target.id();\n    \n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n            props.evtbus.fireEvent('hoverNodeSC', { nodeId });\n          });\n    \n          cy.on('mouseout', 'node', function(event){\n            // Remove the div element on mouseout\n            var div = document.querySelector('.panel.popup');\n            if (document.body.contains(div)) {\n                document.body.removeChild(div);\n            }\n    \n            var node = event.target;\n            var label = node.data('label');\n            const nodeId = event.target.id();\n    \n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n            props.evtbus.fireEvent('dehoverNodeSC', { nodeId });\n          });\n    \n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            let source = target.data().source;\n            let sink = target.data().target;\n            props.evtbus.fireEvent('selectNode', { nodeId, source, sink, target});\n            props.evtbus.fireEvent('selectNodeSC', { nodeId, source, sink, target});\n          });\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            let source = target.data().source;\n            let sink = target.data().target;\n            props.evtbus.fireEvent('deselectNode', { nodeId, source, sink, target});\n            props.evtbus.fireEvent('deselectNodeSC', { nodeId, source, sink, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n      />\n}\n\nexport default ClonalSummary;","import React, { useState, useEffect } from \"react\"\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n} from \"react-router-dom\";\n\nimport Migration from \"./Migration.js\";\nimport ClonalTree from \"./ClonalTree.js\";\nimport MigrationSummary from \"./MigrationSummary.js\";\nimport Loading from \"./Loading.js\";\nimport ClonalSummary from \"./ClonalSummary.js\";\n\nfunction insertParam(key, value) {\n    // Get the current url\n    let currentUrl = new URL(window.location.href);\n  \n    // Change a url parameter using URLSearchParams\n    let urlParams = new URLSearchParams(currentUrl.search);\n    urlParams.set(key, value);\n    console.log(urlParams.toString());\n  \n    // Replace the URL\n    //currentUrl.search = urlParams.toString();\n    window.location.href = '#/triviz?' + urlParams.toString();\n  \n    // Reload the page\n    console.log(window.location);\n    //window.location.reload();\n}\n\nfunction handleKeyPress(event) {\n    if (event.key === '/') {\n      alert('Instructions:\\n\\nToggle and move around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponsing anatomical location for the node.\\n\\nSelect different labelings from the dropdown on the top left of the panel.\\n\\nThe dual visualization window allows you to compare different solutions side by side!');\n    }\n}\n\nfunction TriViz(props) {\n    const [isLoading, setIsLoading] = useState(true);\n    const [progress, setProgress] = useState(0);\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [mu2, setMu2] = useState(0);\n    const [gamma2, setGamma2] = useState(0);\n    const [muSum, setMuSum] = useState(0);\n    const [gammaSum, setGammaSum] = useState(0);\n\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n    const jsonContents=localStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n\n    const labelName = queryParameters.get(\"labeling\");\n    const labelName2 = queryParameters.get(\"labeling2\");\n\n    const data = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName})[0];\n    const data2 = wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labelName2})[0];\n\n    const migrationSummary = wholeData[\"summary\"][\"migration\"];\n\n    let coloring = data[\"labeling\"]\n      .map((item) => item[1])\n      .filter((value, index, self) => {\n        return self.indexOf(value) === index;\n      })\n      .map((item, index) => [item, `${index}`]);\n\n      const tree = data[\"tree\"]\n      const tree2 = data2[\"tree\"]\n      const tree_labeling = data[\"labeling\"];\n      const tree_labeling2 = data2[\"labeling\"];\n      const migration = data[\"migration\"];\n      const migration2 = data2[\"migration\"];\n  \n      let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n  \n      let handleLabelChange = (event) => {\n          insertParam(\"labeling\", event.target.value);\n      }\n  \n      let handleLabelChange2 = (event) => {\n          insertParam(\"labeling2\", event.target.value);\n      }\n  \n      const eventBus = {\n          listeners: [],\n          addListener(callback) {\n            this.listeners.push(callback);\n          },\n          removeListener(callback) {\n            this.listeners = this.listeners.filter(listener => listener !== callback);\n          },\n          fireEvent(eventName, eventData) {\n            this.listeners.forEach((listener) => {\n              listener(eventName, eventData);\n            });\n          },\n      };\n  \n      useEffect(() => {\n        //let intervalId = setInterval(() => {\n        //    setProgress(prevProgress => prevProgress + 10);\n        //}, 1000);\n\n        //setTimeout(() => {\n        //    clearInterval(intervalId);\n          document.addEventListener(\"keydown\", handleKeyPress);\n          setMu(localStorage.getItem(\"mu\"));\n          setGamma(localStorage.getItem(\"gamma\"));\n          setMu2(localStorage.getItem(\"mu2\"));\n          setGamma2(localStorage.getItem(\"gamma2\"));\n          setMuSum(localStorage.getItem(\"musum\"));\n          setGammaSum(localStorage.getItem(\"gammasum\"));\n          setIsLoading(false)\n        //}, 10000);\n\n        //return () => clearInterval(intervalId);\n      }, []);\n  \n      return <div className=\"viz\">\n        {!isLoading ? (\n                <>\n            <div className=\"panel info tri\">\n                <div className=\"titlewrapper\">\n                    <h3 className=\"viztitle\"><b>Summary</b></h3>\n                    <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                    <a onClick={() => {window.location.href=`/#/dualviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling2\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n                </div>\n                <div className=\"panel migration top left sum\">\n                    <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                    <p className=\"paneltitle mu\">{`\\u03BC: ${muSum}`}</p>\n                    <p className=\"paneltitle gamma\">{`\\u03B3: ${gammaSum}`}</p>\n                    <MigrationSummary data={migrationSummary} coloring={coloring} evtbus={eventBus}/>\n                </div>\n            </div>\n          <div className=\"panel info tri two\">\n              <div className=\"titlewrapper\">\n                  <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                  <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                      {labelnames.map(l => \n                      {return (l === queryParameters.get(\"labeling\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                      )}\n                  </select>\n                  </b></p></label>\n                  <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n                  <a onClick={() => {window.location.href=`/#/sumviz?labeling=${queryParameters.get(\"labeling2\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n              </div>\n              <div className=\"panel migration top left\">\n                  <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                  <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n                  <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n                  <Migration tree={tree} labeling={tree_labeling} migration={migration} coloring={coloring} evtbus={eventBus}/>\n              </div>\n              <div className=\"panel migration left\">\n                  <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                  <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={eventBus}/>\n              </div>\n          </div>\n          <div className=\"panel info tri three\">\n              <div className=\"titlewrapper\">\n                  <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                  <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange2}>\n                      {labelnames.map(l => \n                      {return (l === queryParameters.get(\"labeling2\")) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                      )}\n                  </select>\n                  </b></p></label>\n                  <h3 className=\"viztitle\"><b>{data2[\"name\"]}</b></h3>\n                  <a onClick={() => {window.location.href=`/#/sumviz?labeling=${queryParameters.get(\"labeling\")}`}} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n              </div>\n              <div className=\"panel migration top left\">\n                  <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                  <p className=\"paneltitle mu\">{`\\u03BC: ${mu2}`}</p>\n                  <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma2}`}</p>\n                  <Migration tree={tree2} labeling={tree_labeling2} migration={migration2} coloring={coloring} evtbus={eventBus} rightcol={true}/>\n              </div>\n              <div className=\"panel migration left\">\n                  <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                  <ClonalTree tree={tree2} labeling={tree_labeling2} coloring={coloring} evtbus={eventBus} rightcol={true}/>\n              </div>\n          </div>\n          </>\n           ) : (\n            <Loading progress={progress}/>\n        )}\n    </div>\n} \n\nexport default TriViz;","import React, { useState, useEffect } from \"react\"\nimport './App.css';\n\nimport About from './components/About.js'\nimport Viz from './components/Viz.js'\nimport Home from './components/Home.js'\nimport DualViz from \"./components/DualViz\";\nimport SumViz from \"./components/SumViz\";\nimport TriViz from \"./components/TriViz\";\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport { createBrowserHistory } from 'history';\n\n\nfunction App() {\n  const history = createBrowserHistory({\n    basename: '/machina-viz/#' // Replace with your repository name\n  });\n\n  return (\n    <div className=\"App\">\n        <Switch>\n          <Route path=\"/about\">\n            <About/>\n          </Route>\n          <Route path=\"/viz\">\n            <Viz/>\n          </Route>\n          <Route path=\"/dualviz\">\n            <DualViz/>\n          </Route>\n          <Route path=\"/sumviz\">\n            <SumViz/>\n          </Route>\n          <Route path=\"/triviz\">\n            <TriViz/>\n          </Route>\n          <Route path=\"/machina-viz/about\">\n            <About/>\n          </Route>\n          <Route path=\"/machina-viz/viz\">\n            <Viz/>\n          </Route>\n          <Route path=\"/machina-viz/dualviz\">\n            <DualViz/>\n          </Route>\n          <Route path=\"/machina-viz/sumviz\">\n            <SumViz/>\n          </Route>\n          <Route path=\"/machina-viz/triviz\">\n            <TriViz/>\n          </Route>\n          <Route path=\"/machina-viz\">\n            <Home/>\n          </Route>\n          <Route exact path=\"/\">\n            <Home/>\n          </Route>\n        </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { HashRouter as Router } from \"react-router-dom\";\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <Router basename=\"/machina-viz\">\n      <App />\n    </Router>\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}