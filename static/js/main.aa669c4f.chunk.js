(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{151:function(e,t,n){e.exports=n.p+"static/media/sample_page.17167d94.png"},153:function(e){e.exports={lung_CRUK0063:"viz?labeling=\\#0",ovarian_10_ROv:"viz?labeling=\\#0",ovarian_1_LOv:"viz?labeling=\\#0",ovarian_1_ROv:"viz?labeling=\\#0",ovarian_2_ROv:"viz?labeling=\\#0",ovarian_3_LOv:"viz?labeling=\\#0",ovarian_3_ROv:"viz?labeling=\\#0",ovarian_4_LOv:"viz?labeling=\\#0",ovarian_4_ROv:"viz?labeling=\\#0",ovarian_7_LOv:"viz?labeling=\\#0",ovarian_7_ROv:"viz?labeling=\\#0",ovarian_9_LOv:"viz?labeling=\\#0",ovarian_9_ROv:"viz?labeling=\\#0",prostate_10:"viz?labeling=\\#0",prostate_12:"viz?labeling=\\#0",prostate_17:"viz?labeling=\\#0",prostate_21:"viz?labeling=\\#0",prostate_22:"viz?labeling=\\#0",prostate_24:"viz?labeling=\\#0",prostate_29:"viz?labeling=\\#0",prostate_31:"viz?labeling=\\#0",prostate_32:"viz?labeling=\\#0",prostate_34:"viz?labeling=\\#0",breast_1:"viz?labeling=\\#0",breast_7:"viz?labeling=\\#0"}},154:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAj0lEQVR4nO2USwrEIBAF6xJp5kg5dyQM+aySRfa5iMNAC0ISBE0v8nnQKCpVoI3wtLSAsxQ4oLEUXD8d8LUUeK1XcKMraoARkB2B6F5RV/UKnBUYBKJrXs9kRyJQGON5EBelAqYIHmoBPqXwI0kWPPUNCDBoSeLHdZYt6I845oJ15yF9Zv1Zm9QnSVZl3SQ/PmdfIXJmioIAAAAASUVORK5CYII="},181:function(e,t,n){e.exports=n(380)},188:function(e,t,n){},190:function(e,t,n){},375:function(e,t,n){var a={"./breast_1":[156,0],"./breast_1.json":[156,0],"./breast_7":[157,1],"./breast_7.json":[157,1],"./lung_CRUK0063":[158,2],"./lung_CRUK0063.json":[158,2],"./mapping":[45],"./mapping.json":[45],"./ovarian_10_ROv":[159,3],"./ovarian_10_ROv.json":[159,3],"./ovarian_1_LOv":[160,4],"./ovarian_1_LOv.json":[160,4],"./ovarian_1_ROv":[161,5],"./ovarian_1_ROv.json":[161,5],"./ovarian_2_ROv":[162,6],"./ovarian_2_ROv.json":[162,6],"./ovarian_3_LOv":[163,7],"./ovarian_3_LOv.json":[163,7],"./ovarian_3_ROv":[164,8],"./ovarian_3_ROv.json":[164,8],"./ovarian_4_LOv":[165,9],"./ovarian_4_LOv.json":[165,9],"./ovarian_4_ROv":[166,10],"./ovarian_4_ROv.json":[166,10],"./ovarian_7_LOv":[167,11],"./ovarian_7_LOv.json":[167,11],"./ovarian_7_ROv":[168,12],"./ovarian_7_ROv.json":[168,12],"./ovarian_9_LOv":[169,13],"./ovarian_9_LOv.json":[169,13],"./ovarian_9_ROv":[170,14],"./ovarian_9_ROv.json":[170,14],"./prostate_10":[171,15],"./prostate_10.json":[171,15],"./prostate_12":[172,16],"./prostate_12.json":[172,16],"./prostate_17":[173,17],"./prostate_17.json":[173,17],"./prostate_21":[174,18],"./prostate_21.json":[174,18],"./prostate_22":[175,19],"./prostate_22.json":[175,19],"./prostate_24":[176,20],"./prostate_24.json":[176,20],"./prostate_29":[177,21],"./prostate_29.json":[177,21],"./prostate_31":[178,22],"./prostate_31.json":[178,22],"./prostate_32":[179,23],"./prostate_32.json":[179,23],"./prostate_34":[180,24],"./prostate_34.json":[180,24]};function r(e){var t=a[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){var e=t[0];return n.t(e,3)}):Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}r.keys=function(){return Object.keys(a)},r.id=375,e.exports=r},380:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(150),i=n.n(o),s=(n(188),n(190),n(23)),c=n(151),l=n.n(c);var u=function(){return r.a.createElement("div",{className:"about"},r.a.createElement("div",{className:"panel about"},r.a.createElement("div",{className:"aboutcontainer"},r.a.createElement("p",{className:"backarrow"},r.a.createElement("b",null,r.a.createElement(s.b,{to:"",style:{textDecoration:"none",color:"black"}},"\u2190 home"))),r.a.createElement("h1",{className:"abouttitle"},"Instructions")),r.a.createElement("p",null,r.a.createElement("b",null,"For full documentation on both MACH2 and MACH2-Viz, please see the following ",r.a.createElement("a",{href:"https://elkebir-group.github.io/mach2-docs/"},"link"))),r.a.createElement("p",{id:"mach2"},r.a.createElement("b",null,"MACH2")," is a personalized tool to visualize cancer metastasis. It is a sequel to MACHINA, an algorithm designed to solve the Parsimonious Migration History Problem (PMH problem)."),r.a.createElement("p",{id:"ii"},r.a.createElement("b",null,"The Parsimonious Migration History Problem:")," Given current oncological mutations at their respective anatomical sites, how can we infer their mutation tree as well as a network of anatomical sites inferring metastases?"),r.a.createElement("p",{id:"iii"},r.a.createElement("b",null,"Visualization Format:")),r.a.createElement("p",null,"Upon selecting one of the examples on the home page, you will be redirected to the visualization page. The page showcases multiple panels. The descriptions along with an image of the panels are shown below:"),r.a.createElement("ul",{style:{columns:1}},r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"MACH2 Solutions (middle and right):"),"The solutions computed by MACH2 are displayed here. Change between possible solutions by selecting the drop down menu at the top of the panel. Each graph in this panel is described below:")),r.a.createElement("ul",{style:{columns:1}},r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Clonal Tree (bottom right and bottom middle):"),' This is a tree of oncological mutations. Each node in this tree is a variant allele in the cancer patient. Each edge is a mutation from one variant to another. In the case of multiple clonal tree solutions, you can click the drop-down on the main panel (labeled "jsons/hoadley16_A7-1" below) to select between them. Additionally, you can see that there are buttons that say "Clonal Tree" and "Input Tree". The clonal tree displays the tree of mutations after polytomy refinement done by MACH2. The input tree is simply the original tree before these refinements are applied.')),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Migration Graph (top right and top middle):")," Each node in the clonal tree has a tag with an anatomical location inferred using ",r.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Maximum_parsimony_(phylogenetics)"},"Maximum Parsimony"),". The clonal tree is compressed into a migration graph where each node represents an anatomical location, and each edge is a metastasis (e.g. a migration) between two anatomical locations."))),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Summary (left):")," You can also view a summary migration graph that is computed by unioning edges across migration graphs in each solution. Edges are weighted by the number of solutions they appear in."))),r.a.createElement("p",null,'You can click on the long gray bars on the sides of the visualization page to add extra panels. You can also click the "[X]" buttons on the top right corners of panels to delete them.'),r.a.createElement("div",{className:"image-container"},r.a.createElement("img",{className:"aboutimg",src:l.a,alt:"Sample Page"})),r.a.createElement("p",{id:"iv"},r.a.createElement("b",null,"Filtering Solutions:")),r.a.createElement("p",null,"The user has an option to delete or require edges displayed on the Summary Panel. Their functions are described below:"),r.a.createElement("ul",{style:{columns:1}},r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Delete edges: "),"Shift+Click on an edge in the summary panel to delete it. By deleting it, the MACH2 solution panels will only show solutions that do not have the edge in their solution.")),r.a.createElement("li",null,r.a.createElement("p",null,r.a.createElement("b",null,"Require edges: "),"Click on an edge in the summary panel to require it. By requiring it, the MACH2 solution panels will only show solutions that have that edge in their solution."))),r.a.createElement("p",null,"To undo actions, you can click the undo arrow that will appear on the top right corner of the summary panel after editing the summary panel edges."),r.a.createElement("p",{id:"v"},r.a.createElement("b",null,"Generating inputs:")),r.a.createElement("p",null,"MACH2 should already output a JSON format that is fully compatible with MACH2-Viz. However, if you are interested in using MACHINA, we have provided a ",r.a.createElement("a",{href:"https://github.com/vikramr2/json_compression"},"json compression")," program that takes an output directory from MACHINA that contains ",r.a.createElement("b",null,".tree")," files and their corresponding ",r.a.createElement("b",null,".labeling")," files, and returns a ",r.a.createElement("b",null,".json"),' file that can be used as input for this visualizer. Click the "+" icon in the home page to use this feature. For more information, see this ',r.a.createElement("a",{href:"https://github.com/vikramr2/json_compression/blob/main/README.md"},"README"),". Output from any algorithm that solves the PMH problem will be accepted provided that it is in a JSON format as shown in the README."),r.a.createElement("p",{id:"vi"},r.a.createElement("b",null,"Questions? Contact")),r.a.createElement("ul",{id:"singlecol"},r.a.createElement("li",null,r.a.createElement("p",null,"Vikram Ramavarapu (",r.a.createElement("a",{href:"mailto:vikramr2@illinois.edu"},"vikramr2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Roman Mineyev (",r.a.createElement("a",{href:"mailto:mineyev2@illinois.edu"},"mineyev2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Akul Joshi (",r.a.createElement("a",{href:"mailto:akulj2@illinois.edu"},"akulj2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Mrinmoy Roddur (",r.a.createElement("a",{href:"mailto:mroddur2@illinois.edu"},"mroddur2@illinois.edu"),")")),r.a.createElement("li",null,r.a.createElement("p",null,"Mohammed El-Kebir (",r.a.createElement("a",{href:"mailto:melkebir@illinois.edu"},"melkebir@illinois.edu"),")")))))},d=n(7),m=n(2),f=n(24),p=n(20),_=n.n(p),v=n(39),h=n.n(v);function g(e,t,n){if(n){var a=[];return e.forEach(function(e){e[1]===t&&a.push(e[0])}),a}e.forEach(function(e){if(e[0]===t)return[e[1]]})}function b(e,t){var n=[];return e.forEach(function(e){t.includes(e[0])&&t.includes(e[1])&&n.push(e)}),n}function E(e){var t={};return e.forEach(function(e){t[e[0]]=e[1]}),t}function y(e){var t={};return e.forEach(function(e){t[e[0]]=e[1]}),t}_.a.use(h.a);var S=function(e){console.log(e.labeling);var t=/^#(?:[0-9a-fA-F]{3}){1,2}$/,n=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],o=n.length;function i(a){if(!a)return"#000";if(Array.isArray(a)){if(0===a.length||a.length>1)return"#000";1===a.length&&(a=a[0])}var r=e.coloring.find(function(e){return e[0]===a}),i=r?r[1]:void 0;return t.test(i)?i:n[parseInt(i)%o]}function s(e,t,n){return n.indexOf(e)===t}function c(t){var n=e.labeling.find(function(e){return e[0]===t});return n?n[1]:void 0}var l=e.tree.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(s).map(function(e,t){return{data:{id:e,label:c(e),type:"ip"}}}),u=e.tree.map(function(e,t){return{data:{source:e[0],target:e[1],label:"".concat(e[0],"->").concat(e[1]),migration:"".concat(c(e[0]),"->").concat(c(e[1]))}}}),p=Object(a.useState)({nodes:l,edges:u}),_=Object(m.a)(p,2),v=_[0],h=_[1],S=Object(a.useState)(E(e.clonalMap)),w=Object(m.a)(S,2),P=w[0],O=w[1];Object(a.useEffect)(function(){l=e.tree.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(s).map(function(e,t){return{data:{id:e,label:c(e),type:"ip"}}}),u=e.tree.map(function(e,t){return{data:{source:e[0],target:e[1],label:"".concat(e[0],"->").concat(e[1]),migration:"".concat(c(e[0]),"->").concat(c(e[1]))}}}),h({nodes:l,edges:u}),O(E(e.clonalMap))},[e.tree,e.labeling]);var k,j=[{selector:"node",style:{backgroundColor:"#4a56a6",width:15,height:15,label:"data(id)","overlay-padding":"6px","z-index":"10","text-outline-width":"2px",color:"white",fontSize:15}},{selector:"node:selected",style:{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C",width:50,height:50,"text-outline-color":"#77828C","text-outline-width":8}},{selector:"edge",style:{width:3,"line-color":"#AAD8FF","target-arrow-color":"#6774cb","target-arrow-shape":"triangle","curve-style":"bezier"}}];e.coloring.forEach(function(e,t){console.log(e),j.push({selector:"node[label='".concat(e[0],"']"),style:{backgroundColor:"".concat(i(e[0]))}})}),l.forEach(function(e,t){j.push({selector:"node[id='".concat(e.data.id,"']"),style:{backgroundColor:"".concat(i(c(e.data.id)))}})}),u.forEach(function(e,t){var n=e.data.source,a=e.data.target;j.push({selector:"edge[label='".concat(n,"->").concat(a,"']"),style:{"line-fill":"linear-gradient","line-gradient-stop-colors":"".concat(i(c(n))," ").concat(i(c(a))),"line-gradient-stop-positions":"33% 66%","target-arrow-color":"".concat(i(c(a)))}})});var B={name:"dagre",fit:!0,directed:!0,padding:10,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,ready:function(){e.evtbus.addListener(function(t,n){if("selectNodeCl"===t){var a=k.getElementById(n.nodeId);k.$("edge[migration='".concat(n.nodeId,"']")).css({width:10}),a.trigger("select")}if("deselectNodeCl"===t){var r=k.getElementById(n.nodeId);k.$("edge[migration='".concat(n.nodeId,"']")).css({width:3}),r.trigger("select")}if("hoverNodeCl"===t&&k.$("edge[migration='".concat(n.nodeId,"->").concat(n.nodeId,"']")).css({width:10}),"dehoverNodeCl"===t&&k.$("edge[migration='".concat(n.nodeId,"->").concat(n.nodeId,"']")).css({width:3}),"selectNodeSC"===t){var o=k.getElementById(n.nodeId),i=n.label;k.$("edge[label='".concat(i,"']")).css({width:10}),o.trigger("select")}if("deselectNodeSC"===t){var s=k.getElementById(n.nodeId),c=n.label;k.$("edge[label='".concat(c,"']")).css({width:3}),s.trigger("select")}if("hoverNodeSC"===t){var m=k.getElementById(n.nodeId),f=n.nodeId;k.$("node[id='".concat(f,"']")).css({width:25,height:25}),m.trigger("select")}if("dehoverNodeSC"===t){var p=k.getElementById(n.nodeId),_=n.nodeId;k.$("node[id='".concat(_,"']")).css({width:15,height:15}),p.trigger("select")}if("resetClonal"===t&&n.index===e.index&&h({nodes:l,edges:u}),"clonalHover"===t){var v=n.eventParams;void 0!==v&&(v.forEach(function(e){var t=k.getElementById(n.nodeId);k.$("node[id='".concat(e,"']")).css({width:25,height:25}),t.trigger("select")}),b(e.tree,v).forEach(function(e){k.$("edge[label='".concat(e[0],"->").concat(e[1],"']")).css({width:10})}))}if("clonalDehover"===t){var g=n.eventParams;void 0!==g&&(g.forEach(function(e){var t=k.getElementById(n.nodeId);k.$("node[id='".concat(e,"']")).css({width:15,height:15}),t.trigger("select")}),b(e.tree,g).forEach(function(e){k.$("edge[label='".concat(e[0],"->").concat(e[1],"']")).css({width:3})}))}if("zoomClonal"===t){var E=n.node,y=function(e,t){var n=Object(d.a)(new Set([].concat.apply([],e)));return t.filter(function(e){return n.includes(e)})}(e.tree,n.corr)[0],S=k.$("node[id='".concat(y,"']"));try{k.fit(S)}catch(w){k.fit(E)}}})}},C=0,N=y(e.originalLabeling),R=y(e.labeling);return l.forEach(function(e){var t=e.data.id,n=P[t];void 0!==n&&(N[n].includes(R[t])?e.data.unobserved=!1:(C+=1,e.data.unobserved=!0))}),e.rightcol?sessionStorage.setItem("unobserved2",C):sessionStorage.setItem("unobserved",C),Object(a.useMemo)(function(){return r.a.createElement(f.a,{elements:f.a.normalizeElements(v),style:{width:"100%",height:"100%"},zoomingEnabled:!0,maxZoom:3,minZoom:.1,autounselectify:!0,boxSelectionEnabled:!0,layout:B,stylesheet:j,cy:function(t){k=t,t.on("mouseover","node",function(n){var a=n.target,r=a.data("label"),o=document.createElement("div");o.setAttribute("class","panel popup");var s=a.position(),c=t.container(),l=t.zoom(),u=c.getBoundingClientRect();o.style.position="absolute";var d=u.left+s.x*l+t.pan().x+15,m=u.top+s.y*l+t.pan().y-15;o.style.top=m+"px",o.style.left=d+"px","string"===typeof r?(o.innerHTML="<p>".concat(r,"&nbsp;</p>"),a.data("unobserved")&&(o.innerHTML+='<p><span style="color: red;">unobserved</span>&nbsp;</p>')):0===r.length?(o.innerHTML="<p>unobserved&nbsp;</p>",o.style.color="red"):(o.innerHTML="<p>This clone was observed in:&nbsp;</p>",r.forEach(function(e,t){o.innerHTML+='<p><span style="color: '.concat(i(e),'; font-size: 2em; vertical-align: middle;">&bull;</span> <span style="color: black;">').concat(e,"</span></p>")})),document.body.appendChild(o);var f=n.target.id();if(e.evtbus.fireEvent("hoverNodeSC",{nodeId:f}),e.clonalMap.length>0){var p=g(e.clonalMap,f,e.clonal);e.evtbus.fireEvent("clonalHover",{eventParams:p})}}),t.on("mouseout","node",function(t){var n=document.querySelector(".panel.popup");document.body.contains(n)&&document.body.removeChild(n);var a=t.target.id();if(e.evtbus.fireEvent("dehoverNodeSC",{nodeId:a}),e.clonalMap.length>0){var r=g(e.clonalMap,a,e.clonal);e.evtbus.fireEvent("clonalDehover",{eventParams:r})}}),t.on("mouseover","edge",function(t){var n=t.target;n.css({width:10});var a=t.target.id(),r=c(n.data().source),o=c(n.data().target),i=n.data().label;e.evtbus.fireEvent("selectNode",{nodeId:a,source:r,sink:o,target:n}),e.evtbus.fireEvent("selectNodeSC",{nodeId:a,source:r,sink:o,target:n,label:i})}),t.on("mouseout","edge",function(t){var n=t.target;n.css({width:3});var a=t.target.id(),r=c(n.data().source),o=c(n.data().target),i=n.data().label;e.evtbus.fireEvent("deselectNode",{nodeId:a,source:r,sink:o,target:n}),e.evtbus.fireEvent("deselectNodeSC",{nodeId:a,source:r,sink:o,target:n,label:i})}),t.on("tap","node",function(n){var a=n.target,r=Object(d.a)(new Set(function(e,t){var n=[];return e.forEach(function(e){e[0]===t&&(n.push(e[1]),n.push(e[0])),e[1]===t&&(n.push(e[0]),n.push(e[1]))}),0===n.length&&n.push(t),n}(e.clonalMap,a.id())));e.evtbus.fireEvent("zoomClonal",{node:a,corr:r}),t.fit(a)})}})},[v])},w=n(64),P=n.n(w);function O(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}_.a.use(h.a),_.a.use(P.a);var j=function(e){var t=e.tree,n=e.labeling,o=e.coloring,i=e.migration,s=e.evtbus,c=e.rightcol,l=e.rotated,u=(e.setLoadingAction,/^#(?:[0-9a-fA-F]{3}){1,2}$/),d=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],p=d.length;function _(e,t,n){return n.indexOf(e)===t}function v(e){var t=n.find(function(t){return t[0]===e});return t?t[1]:void 0}function h(e){var t=o.find(function(t){return t[0]===e});return t&&(t=t[1]),u.test(t)?t:d[parseInt(t)%p]}var g,b=t.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(_).map(function(e,t){return{data:{id:v(e),label:v(e),type:"ip"}}}),E=i.map(function(e,t){return{data:{source:e[0],target:e[1],label:e[2],id:"".concat(e[0],"->").concat(e[1]),clsource:e[0],cltarget:e[1]}}}),y=O(E.entries());try{for(y.s();!(g=y.n()).done;){var S=g.value,w=Object(m.a)(S,2),P=w[0];1==w[1].data.label&&(E[P].data.label="")}}catch(D){y.e(D)}finally{y.f()}var k,j=Object(a.useState)({nodes:b,edges:E}),B=Object(m.a)(j,2),C=B[0],N=B[1];Object(a.useEffect)(function(){var e,n=t.map(function(e){return e.filter(function(e,t){return 2!==t})}).flat().filter(_).map(function(e,t){return{data:{id:v(e),label:v(e),type:"ip"}}}),a=i.map(function(e,t){return{data:{source:e[0],target:e[1],label:e[2],id:"".concat(e[0],"->").concat(e[1]),clsource:e[0],cltarget:e[1]}}}),r=O(a.entries());try{for(r.s();!(e=r.n()).done;){var o=e.value,s=Object(m.a)(o,2),c=s[0];1==s[1].data.label&&(a[c].data.label="")}}catch(D){r.e(D)}finally{r.f()}N({nodes:n,edges:a})},[t,n,i,l]);var R=[{selector:"node",style:{backgroundColor:"#fff","border-width":10,shape:"rectangle",width:100,height:50,label:"data(label)","overlay-padding":"6px","z-index":"10","text-outline-width":"2px",color:"white",fontSize:15,"text-valign":"center","text-halign":"center"}},{selector:"node:selected",style:{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C",width:50,height:50,"text-outline-color":"#77828C","text-outline-width":8}},{selector:"node[type='device']",style:{shape:"rectangle"}},{selector:"edge",style:{width:3,label:"data(label)","target-arrow-color":"#6774cb","target-arrow-shape":"triangle","curve-style":"bezier","text-outline-width":"2px",color:"white",fontSize:15}}];o.forEach(function(e,t){R.push({selector:"node[label='".concat(e[0],"']"),style:{"border-color":u.test(e[1])?e[1]:d[parseInt(e[1])%p]}})}),E.forEach(function(e,t){var n=e.data.source,a=e.data.target;R.push({selector:"edge[id='".concat(n,"->").concat(a,"']"),style:{"line-fill":"linear-gradient","line-gradient-stop-colors":"".concat(h(n)," ").concat(h(a)),"line-gradient-stop-positions":"33% 66%","target-arrow-color":"".concat(h(a))}})});var I=new URLSearchParams(window.location.hash.split("?")[1]),z=c?"true"===I.get("rotated2"):"true"===I.get("rotated");null===z&&(z=!1);var M={name:"dagre",fit:!0,circle:!0,directed:!0,padding:10,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,transform:function(e,t){return{x:l?-2*t.y:t.x,y:l?t.x:t.y}},ready:function(){s.addListener(function(e,t){if("selectNode"===e){var n=k.getElementById(t.nodeId),a=t.source,r=t.sink;k.$("edge[id='".concat(a,"->").concat(r,"']")).css({width:10}),n.trigger("select")}if("deselectNode"===e){var o=k.getElementById(t.nodeId),i=t.source,s=t.sink;k.$("edge[id='".concat(i,"->").concat(s,"']")).css({width:3}),o.trigger("select")}if("selectNodeSum"===e){var l=k.getElementById(t.nodeId);k.$("edge[id='".concat(t.nodeId,"']")).css({width:10}),l.trigger("select")}if("deselectNodeSum"===e){var u=k.getElementById(t.nodeId);k.$("edge[id='".concat(t.nodeId,"']")).css({width:3}),u.trigger("select")}if("hoverNodeSum"===e){var d=k.getElementById(t.nodeId);k.$("node[id='".concat(t.nodeId,"']")).css({"border-width":20}),d.trigger("select")}if("dehoverNodeSum"===e){var m=k.getElementById(t.nodeId);k.$("node[id='".concat(t.nodeId,"']")).css({"border-width":10}),m.trigger("select")}"resetMigration"===e&&(1===t.index&&!c||2===t.index&&c)&&N({nodes:b,edges:E})})}},L=0,x=function(e){var t,n=new Set,a=O(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;-1!==r[2]&&n.add(r[2])}}catch(D){a.e(D)}finally{a.f()}return n.size}(t);return E.forEach(function(e){""==e.data.label?L+=1:L+=parseInt(e.data.label)}),c?(sessionStorage.setItem("mu2",L),sessionStorage.setItem("gamma2",x)):(sessionStorage.setItem("mu",L),sessionStorage.setItem("gamma",x)),Object(a.useMemo)(function(){return r.a.createElement(f.a,{elements:f.a.normalizeElements(C),style:{width:"100%",height:"100%"},zoomingEnabled:!0,maxZoom:3,minZoom:.1,autounselectify:!0,boxSelectionEnabled:!0,layout:M,stylesheet:R,cy:function(e){k=e,e.on("mouseover","edge",function(e){var t=e.target;t.css({width:10});var n=e.target.id();s.fireEvent("selectNodeSum",{nodeId:n,target:t}),s.fireEvent("selectNodeCl",{nodeId:n,target:t})}),e.on("mouseover","node",function(e){e.target.css({"border-width":20});var t=e.target.id();s.fireEvent("hoverNodeSum",{nodeId:t}),s.fireEvent("hoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=1,a.style.zIndex=100,a.style.fontWeight="bold")}),e.on("mouseout","node",function(e){e.target.css({"border-width":10});var t=e.target.id();s.fireEvent("dehoverNodeSum",{nodeId:t}),s.fireEvent("dehoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=.7,a.style.zIndex=1,a.style.fontWeight="normal")}),e.on("mouseout","edge",function(e){var t=e.target;t.css({width:3});var n=e.target.id();s.fireEvent("deselectNodeSum",{nodeId:n,target:t}),s.fireEvent("deselectNodeCl",{nodeId:n,target:t})})}})},[C])},B=n(19),C=function e(t){return Object(B.a)(this,e),new Proxy({},{get:function(e,n){return n in e?e[n]:t}})};function N(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function R(e){return encodeURIComponent(function(e){for(var t,n=(3-e.length%3)%3,a="",r=e.length,o=0,i=0;i<r;i++)t=i%3,o|=e[i]<<(16>>>t&24),2!==t&&e.length-i!==1||(a+=String.fromCharCode(N(o>>>18&63),N(o>>>12&63),N(o>>>6&63),N(63&o)),o=0);return 0===n?a:a.substring(0,a.length-n)+(1===n?"=":"==")}(e).replace(/\+/g,"-").replace(/\//g,"_"))}function I(e){return function(e,t){for(var n,a,r,o=e.replace(/[^A-Za-z0-9\+\/]/g,""),i=o.length,s=t?Math.ceil((3*i+1>>>2)/t)*t:3*i+1>>>2,c=new Uint8Array(s),l=0,u=0,d=0;d<i;d++)if(a=3&d,l|=((r=o.charCodeAt(d))>64&&r<91?r-65:r>96&&r<123?r-71:r>47&&r<58?r+4:43===r?62:47===r?63:0)<<18-6*a,3===a||i-d===1){for(n=0;n<3&&u<s;n++,u++)c[u]=l>>>(16>>>n&24)&255;l=0}return c}(decodeURIComponent(e).replace(/-/g,"+").replace(/_/g,"/"))}var z=4294967296,M=[4294967295,-z],L=[0,-0x8000000000000000],x=[0,0],D=[1,0];function A(e,t){return G(e[0]+t[0],e[1]+t[1])}function F(e){var t=[];return t[e-1]=void 0,t}function T(e,t){return function(e,t){var n;n=t,t<0&&(n+=z);return[n,e*z]}(~~Math.max(Math.min(e[1]/z,2147483647),-2147483648)&~~Math.max(Math.min(t[1]/z,2147483647),-2147483648),W(e)&W(t))}function H(e,t){var n,a;return e[0]==t[0]&&e[1]==t[1]?0:(n=e[1]<0,a=t[1]<0,n&&!a?-1:!n&&a?1:K(e,t)[1]<0?-1:1)}function G(e,t){var n,a;for(e%=0x10000000000000000,t=(t%=0x10000000000000000)-(n=t%z)+(a=Math.floor(e/z)*z),e=e-a+n;e<0;)e+=z,t-=z;for(;e>4294967295;)e-=z,t+=z;for(t%=0x10000000000000000;t>0x7fffffff00000000;)t-=0x10000000000000000;for(;t<-0x8000000000000000;)t+=0x10000000000000000;return[e,t]}function q(e,t){return e[0]==t[0]&&e[1]==t[1]}function U(e){return e>=0?[e,0]:[e+z,-z]}function W(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-z,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function $(e){return e<=30?1<<e:$(30)*$(e-30)}function J(e,t){var n,a,r,o;if(t&=63,q(e,L))return t?x:e;if(e[1]<0)throw new Error("Neg");return o=$(t),a=e[1]*o%0x10000000000000000,(a+=n=(r=e[0]*o)-r%z)>=0x8000000000000000&&(a-=0x10000000000000000),[r-=n,a]}function Y(e,t){var n;return n=$(t&=63),G(Math.floor(e[0]/n),e[1]/n)}function K(e,t){return G(e[0]-t[0],e[1]-t[1])}function V(e,t){return e.buf=t,e.pos=0,e.count=t.length,e}function X(e){return e.pos>=e.count?-1:255&e.buf[e.pos++]}function Z(e,t,n,a){return e.pos>=e.count?-1:(a=Math.min(a,e.count-e.pos),ae(e.buf,e.pos,t,n,a),e.pos+=a,a)}function Q(e){return e.buf=F(32),e.count=0,e}function ee(e){var t=e.buf;return t.length=e.count,t}function te(e,t){e.buf[e.count++]=t<<24>>24}function ne(e,t,n,a){ae(t,n,e.buf,e.count,a),e.count+=a}function ae(e,t,n,a,r){for(var o=0;o<r;++o)n[a+o]=e[t+o]}function re(e,t,n,a,r,o){var i,s;if(H(a,M)<0)throw new Error("invalid length "+a);for(e.length_0=a,function(e,t){!function(e,t){e._dictionarySize=t;for(var n=0;t>1<<n;++n);e._distTableSize=2*n}(t,1<<e.s),t._numFastBytes=e.f,function(e,t){var n=e._matchFinderType;e._matchFinderType=t,e._matchFinder&&n!=e._matchFinderType&&(e._dictionarySizePrev=-1,e._matchFinder=null)}(t,e.m),t._numLiteralPosStateBits=0,t._numLiteralContextBits=3,t._posStateBits=2,t._posStateMask=3}(r,i=function(e){var t;for(e._repDistances=F(4),e._optimum=[],e._rangeEncoder={},e._isMatch=F(192),e._isRep=F(12),e._isRepG0=F(12),e._isRepG1=F(12),e._isRepG2=F(12),e._isRep0Long=F(192),e._posSlotEncoder=[],e._posEncoders=F(114),e._posAlignEncoder=Xe({},4),e._lenEncoder=Te({}),e._repMatchLenEncoder=Te({}),e._literalEncoder={},e._matchDistances=[],e._posSlotPrices=[],e._distancesPrices=[],e._alignPrices=F(16),e.reps=F(4),e.repLens=F(4),e.processedInSize=[x],e.processedOutSize=[x],e.finished=[0],e.properties=F(5),e.tempPrices=F(128),e._longestMatchLength=0,e._matchFinderType=1,e._numDistancePairs=0,e._numFastBytesPrev=-1,e.backRes=0,t=0;t<4096;++t)e._optimum[t]={};for(t=0;t<4;++t)e._posSlotEncoder[t]=Xe({},6);return e}({})),i._writeEndMark=o,function(e,t){e.properties[0]=9*(5*e._posStateBits+e._numLiteralPosStateBits)+e._numLiteralContextBits<<24>>24;for(var n=0;n<4;++n)e.properties[1+n]=e._dictionarySize>>8*n<<24>>24;ne(t,e.properties,0,5)}(i,n),s=0;s<64;s+=8)te(n,255&W(Y(a,s)));e.chunker=(i._needReleaseMFStream=0,i._inStream=t,i._finished=0,function(e){var t,n;e._matchFinder||(t={},n=4,e._matchFinderType||(n=2),function(e,t){e.HASH_ARRAY=t>2,e.HASH_ARRAY?(e.kNumHashDirectBytes=0,e.kMinMatchCheck=4,e.kFixHashSize=66560):(e.kNumHashDirectBytes=2,e.kMinMatchCheck=3,e.kFixHashSize=0)}(t,n),e._matchFinder=t);if(function(e,t,n){var a,r;if(null==e.m_Coders||e.m_NumPrevBits!=n||e.m_NumPosBits!=t)for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,r=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=F(r),a=0;a<r;++a)e.m_Coders[a]=$e({})}(e._literalEncoder,e._numLiteralPosStateBits,e._numLiteralContextBits),e._dictionarySize==e._dictionarySizePrev&&e._numFastBytesPrev==e._numFastBytes)return;(function(e,t,n,a,r){var o,i;t<1073741567&&(e._cutValue=16+(a>>1),function(e,t,n,a){var r;e._keepSizeBefore=t,e._keepSizeAfter=n,r=t+n+a,(null==e._bufferBase||e._blockSize!=r)&&(e._bufferBase=null,e._blockSize=r,e._bufferBase=F(e._blockSize));e._pointerToLastSafePosition=e._blockSize-n}(e,t+n,a+r,256+~~((t+n+a+r)/2)),e._matchMaxLen=a,o=t+1,e._cyclicBufferSize!=o&&(e._son=F(2*(e._cyclicBufferSize=o))),i=65536,e.HASH_ARRAY&&(i=t-1,i|=i>>1,i|=i>>2,i|=i>>4,i|=i>>8,i>>=1,(i|=65535)>16777216&&(i>>=1),e._hashMask=i,++i,i+=e.kFixHashSize),i!=e._hashSizeSum&&(e._hash=F(e._hashSizeSum=i)))})(e._matchFinder,e._dictionarySize,4096,e._numFastBytes,274),e._dictionarySizePrev=e._dictionarySize,e._numFastBytesPrev=e._numFastBytes}(i),i._rangeEncoder.Stream=n,function(e){(function(e){e._state=0,e._previousByte=0;for(var t=0;t<4;++t)e._repDistances[t]=0})(e),function(e){e._position=x,e.Low=x,e.Range=-1,e._cacheSize=1,e._cache=0}(e._rangeEncoder),ot(e._isMatch),ot(e._isRep0Long),ot(e._isRep),ot(e._isRepG0),ot(e._isRepG1),ot(e._isRepG2),ot(e._posEncoders),function(e){var t,n=1<<e.m_NumPrevBits+e.m_NumPosBits;for(t=0;t<n;++t)ot(e.m_Coders[t].m_Encoders)}(e._literalEncoder);for(var t=0;t<4;++t)ot(e._posSlotEncoder[t].Models);De(e._lenEncoder,1<<e._posStateBits),De(e._repMatchLenEncoder,1<<e._posStateBits),ot(e._posAlignEncoder.Models),e._longestMatchWasFound=0,e._optimumEndIndex=0,e._optimumCurrentIndex=0,e._additionalOffset=0}(i),Be(i),je(i),i._lenEncoder._tableSize=i._numFastBytes+1-2,Ge(i._lenEncoder,1<<i._posStateBits),i._repMatchLenEncoder._tableSize=i._numFastBytes+1-2,Ge(i._repMatchLenEncoder,1<<i._posStateBits),i.nowPos64=x,function(e,t){return e.encoder=t,e.decoder=null,e.alive=1,e}({},i))}function oe(e,t,n){var a,r,o,i,s="",c=[];for(r=0;r<5;++r){if(-1==(o=X(t)))throw new Error("truncated input");c[r]=o<<24>>24}if(!function(e,t){var n,a,r,o,i,s,c;if(t.length<5)return 0;for(c=255&t[0],r=c%9,o=(s=~~(c/9))%5,i=~~(s/5),n=0,a=0;a<4;++a)n+=(255&t[1+a])<<8*a;if(n>99999999||!function(e,t,n,a){if(t>8||n>4||a>4)return 0;!function(e,t,n){var a,r;if(null!=e.m_Coders&&e.m_NumPrevBits==n&&e.m_NumPosBits==t)return;for(e.m_NumPosBits=t,e.m_PosMask=(1<<t)-1,e.m_NumPrevBits=n,r=1<<e.m_NumPrevBits+e.m_NumPosBits,e.m_Coders=F(r),a=0;a<r;++a)e.m_Coders[a]=Pe({})}(e.m_LiteralDecoder,n,t);var r=1<<a;return Ee(e.m_LenDecoder,r),Ee(e.m_RepLenDecoder,r),e.m_PosStateMask=r-1,1}(e,r,o,i))return 0;return function(e,t){if(t<0)return 0;e.m_DictionarySize!=t&&(e.m_DictionarySize=t,e.m_DictionarySizeCheck=Math.max(e.m_DictionarySize,1),function(e,t){null!=e._buffer&&e._windowSize==t||(e._buffer=F(t));e._windowSize=t,e._pos=0,e._streamPos=0}(e.m_OutWindow,Math.max(e.m_DictionarySizeCheck,4096)));return 1}(e,n)}(a=function(e){e.m_OutWindow={},e.m_RangeDecoder={},e.m_IsMatchDecoders=F(192),e.m_IsRepDecoders=F(12),e.m_IsRepG0Decoders=F(12),e.m_IsRepG1Decoders=F(12),e.m_IsRepG2Decoders=F(12),e.m_IsRep0LongDecoders=F(192),e.m_PosSlotDecoder=F(4),e.m_PosDecoders=F(114),e.m_PosAlignDecoder=Ke({},4),e.m_LenDecoder=Se({}),e.m_RepLenDecoder=Se({}),e.m_LiteralDecoder={};for(var t=0;t<4;++t)e.m_PosSlotDecoder[t]=Ke({},6);return e}({}),c))throw new Error("corrupted input");for(r=0;r<64;r+=8){if(-1==(o=X(t)))throw new Error("truncated input");1==(o=o.toString(16)).length&&(o="0"+o),s=o+""+s}/^0+$|^f+$/i.test(s)?e.length_0=M:(i=parseInt(s,16),e.length_0=i>4294967295?M:U(i)),e.chunker=function(e,t,n,a){return e.m_RangeDecoder.Stream=t,ve(e.m_OutWindow),e.m_OutWindow._stream=n,function(e){e.m_OutWindow._streamPos=0,e.m_OutWindow._pos=0,ot(e.m_IsMatchDecoders),ot(e.m_IsRep0LongDecoders),ot(e.m_IsRepDecoders),ot(e.m_IsRepG0Decoders),ot(e.m_IsRepG1Decoders),ot(e.m_IsRepG2Decoders),ot(e.m_PosDecoders),function(e){var t,n;for(n=1<<e.m_NumPrevBits+e.m_NumPosBits,t=0;t<n;++t)ot(e.m_Coders[t].m_Decoders)}(e.m_LiteralDecoder);for(var t=0;t<4;++t)ot(e.m_PosSlotDecoder[t].Models);we(e.m_LenDecoder),we(e.m_RepLenDecoder),ot(e.m_PosAlignDecoder.Models),function(e){e.Code=0,e.Range=-1;for(var t=0;t<5;++t)e.Code=e.Code<<8|X(e.Stream)}(e.m_RangeDecoder)}(e),e.state=0,e.rep0=0,e.rep1=0,e.rep2=0,e.rep3=0,e.outSize=a,e.nowPos64=x,e.prevByte=0,function(e,t){return e.decoder=t,e.encoder=null,e.alive=1,e}({},e)}(a,t,n,e.length_0)}function ie(e,t){return e._bufferBase[e._bufferOffset+e._pos+t]}function se(e,t,n,a){var r,o;for(e._streamEndWasReached&&e._pos+t+a>e._streamPos&&(a=e._streamPos-(e._pos+t)),++n,o=e._bufferOffset+e._pos+t,r=0;r<a&&e._bufferBase[o+r]==e._bufferBase[o+r-n];++r);return r}function ce(e){return e._streamPos-e._pos}function le(e){var t,n;if(!e._streamEndWasReached)for(;;){if(!(n=-e._bufferOffset+e._blockSize-e._streamPos))return;if(-1==(t=Z(e._stream,e._bufferBase,e._bufferOffset+e._streamPos,n)))return e._posLimit=e._streamPos,e._bufferOffset+e._posLimit>e._pointerToLastSafePosition&&(e._posLimit=e._pointerToLastSafePosition-e._bufferOffset),void(e._streamEndWasReached=1);e._streamPos+=t,e._streamPos>=e._pos+e._keepSizeAfter&&(e._posLimit=e._streamPos-e._keepSizeAfter)}}function ue(e,t){e._bufferOffset+=t,e._posLimit-=t,e._pos-=t,e._streamPos-=t}var de=function(){var e,t,n,a=[];for(e=0;e<256;++e){for(n=e,t=0;t<8;++t)0!=(1&n)?n=n>>>1^-306674912:n>>>=1;a[e]=n}return a}();function me(e){var t;++e._cyclicBufferPos>=e._cyclicBufferSize&&(e._cyclicBufferPos=0),function(e){++e._pos,e._pos>e._posLimit&&(e._bufferOffset+e._pos>e._pointerToLastSafePosition&&function(e){var t,n,a;for((a=e._bufferOffset+e._pos-e._keepSizeBefore)>0&&--a,n=e._bufferOffset+e._streamPos-a,t=0;t<n;++t)e._bufferBase[t]=e._bufferBase[a+t];e._bufferOffset-=a}(e),le(e))}(e),1073741823==e._pos&&(t=e._pos-e._cyclicBufferSize,fe(e._son,2*e._cyclicBufferSize,t),fe(e._hash,e._hashSizeSum,t),ue(e,t))}function fe(e,t,n){var a,r;for(a=0;a<t;++a)(r=e[a]||0)<=n?r=0:r-=n,e[a]=r}function pe(e){var t=e._pos-e._streamPos;t&&(ne(e._stream,e._buffer,e._streamPos,t),e._pos>=e._windowSize&&(e._pos=0),e._streamPos=e._pos)}function _e(e,t){var n=e._pos-t-1;return n<0&&(n+=e._windowSize),e._buffer[n]}function ve(e){pe(e),e._stream=null}function he(e){return(e-=2)<4?e:3}function ge(e){return e<4?0:e<10?e-3:e-6}function be(e){if(!e.alive)throw new Error("bad state");return e.encoder?function(e){(function(e,t,n,a){var r,o,i,s,c,l,u,d,m,f,p,_,v,h,g;if(t[0]=x,n[0]=x,a[0]=1,e._inStream&&(e._matchFinder._stream=e._inStream,function(e){e._bufferOffset=0,e._pos=0,e._streamPos=0,e._streamEndWasReached=0,le(e),e._cyclicBufferPos=0,ue(e,-1)}(e._matchFinder),e._needReleaseMFStream=1,e._inStream=null),!e._finished){if(e._finished=1,h=e.nowPos64,q(e.nowPos64,x)){if(!ce(e._matchFinder))return void Ce(e,W(e.nowPos64));Me(e),v=W(e.nowPos64)&e._posStateMask,st(e._rangeEncoder,e._isMatch,(e._state<<4)+v,0),e._state=ge(e._state),i=ie(e._matchFinder,-e._additionalOffset),Ue(qe(e._literalEncoder,W(e.nowPos64),e._previousByte),e._rangeEncoder,i),e._previousByte=i,--e._additionalOffset,e.nowPos64=A(e.nowPos64,D)}if(ce(e._matchFinder))for(;;){if(u=Ne(e,W(e.nowPos64)),f=e.backRes,v=W(e.nowPos64)&e._posStateMask,o=(e._state<<4)+v,1==u&&-1==f)st(e._rangeEncoder,e._isMatch,o,0),i=ie(e._matchFinder,-e._additionalOffset),g=qe(e._literalEncoder,W(e.nowPos64),e._previousByte),e._state<7?Ue(g,e._rangeEncoder,i):(m=ie(e._matchFinder,-e._repDistances[0]-1-e._additionalOffset),We(g,e._rangeEncoder,m,i)),e._previousByte=i,e._state=ge(e._state);else{if(st(e._rangeEncoder,e._isMatch,o,1),f<4){if(st(e._rangeEncoder,e._isRep,e._state,1),f?(st(e._rangeEncoder,e._isRepG0,e._state,1),1==f?st(e._rangeEncoder,e._isRepG1,e._state,0):(st(e._rangeEncoder,e._isRepG1,e._state,1),st(e._rangeEncoder,e._isRepG2,e._state,f-2))):(st(e._rangeEncoder,e._isRepG0,e._state,0),st(e._rangeEncoder,e._isRep0Long,o,1==u?0:1)),1==u?e._state=e._state<7?9:11:(Fe(e._repMatchLenEncoder,e._rangeEncoder,u-2,v),e._state=e._state<7?8:11),s=e._repDistances[f],0!=f){for(l=f;l>=1;--l)e._repDistances[l]=e._repDistances[l-1];e._repDistances[0]=s}}else{for(st(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,Fe(e._lenEncoder,e._rangeEncoder,u-2,v),_=xe(f-=4),d=he(u),Ze(e._posSlotEncoder[d],e._rangeEncoder,_),_>=4&&(p=f-(r=(2|1&_)<<(c=(_>>1)-1)),_<14?nt(e._posEncoders,r-_-1,e._rangeEncoder,c,p):(ct(e._rangeEncoder,p>>4,c-4),et(e._posAlignEncoder,e._rangeEncoder,15&p),++e._alignPriceCount)),s=f,l=3;l>=1;--l)e._repDistances[l]=e._repDistances[l-1];e._repDistances[0]=s,++e._matchPriceCount}e._previousByte=ie(e._matchFinder,u-1-e._additionalOffset)}if(e._additionalOffset-=u,e.nowPos64=A(e.nowPos64,U(u)),!e._additionalOffset){if(e._matchPriceCount>=128&&Be(e),e._alignPriceCount>=16&&je(e),t[0]=e.nowPos64,n[0]=lt(e._rangeEncoder),!ce(e._matchFinder))return void Ce(e,W(e.nowPos64));if(H(K(e.nowPos64,h),[4096,0])>=0)return e._finished=0,void(a[0]=0)}}else Ce(e,W(e.nowPos64))}})(e.encoder,e.encoder.processedInSize,e.encoder.processedOutSize,e.encoder.finished),e.inBytesProcessed=e.encoder.processedInSize[0],e.encoder.finished[0]&&(!function(e){Le(e),e._rangeEncoder.Stream=null}(e.encoder),e.alive=0)}(e):function(e){var t=function(e){var t,n,a,r,o,i;if(i=W(e.nowPos64)&e.m_PosStateMask,rt(e.m_RangeDecoder,e.m_IsMatchDecoders,(e.state<<4)+i)){if(rt(e.m_RangeDecoder,e.m_IsRepDecoders,e.state))a=0,rt(e.m_RangeDecoder,e.m_IsRepG0Decoders,e.state)?(rt(e.m_RangeDecoder,e.m_IsRepG1Decoders,e.state)?(rt(e.m_RangeDecoder,e.m_IsRepG2Decoders,e.state)?(n=e.rep3,e.rep3=e.rep2):n=e.rep2,e.rep2=e.rep1):n=e.rep1,e.rep1=e.rep0,e.rep0=n):rt(e.m_RangeDecoder,e.m_IsRep0LongDecoders,(e.state<<4)+i)||(e.state=e.state<7?9:11,a=1),a||(a=ye(e.m_RepLenDecoder,e.m_RangeDecoder,i)+2,e.state=e.state<7?8:11);else if(e.rep3=e.rep2,e.rep2=e.rep1,e.rep1=e.rep0,a=2+ye(e.m_LenDecoder,e.m_RangeDecoder,i),e.state=e.state<7?7:10,(o=Ve(e.m_PosSlotDecoder[he(a)],e.m_RangeDecoder))>=4){if(r=(o>>1)-1,e.rep0=(2|1&o)<<r,o<14)e.rep0+=function(e,t,n,a){var r,o,i=1,s=0;for(o=0;o<a;++o)r=rt(n,e,t+i),i<<=1,i+=r,s|=r<<o;return s}(e.m_PosDecoders,e.rep0-o-1,e.m_RangeDecoder,r);else if(e.rep0+=function(e,t){var n,a,r=0;for(n=t;0!=n;--n)e.Range>>>=1,a=e.Code-e.Range>>>31,e.Code-=e.Range&a-1,r=r<<1|1-a,-16777216&e.Range||(e.Code=e.Code<<8|X(e.Stream),e.Range<<=8);return r}(e.m_RangeDecoder,r-4)<<4,e.rep0+=function(e,t){var n,a,r=1,o=0;for(a=0;a<e.NumBitLevels;++a)n=rt(t,e.Models,r),r<<=1,r+=n,o|=n<<a;return o}(e.m_PosAlignDecoder,e.m_RangeDecoder),e.rep0<0)return-1==e.rep0?1:-1}else e.rep0=o;if(H(U(e.rep0),e.nowPos64)>=0||e.rep0>=e.m_DictionarySizeCheck)return-1;!function(e,t,n){var a=e._pos-t-1;for(a<0&&(a+=e._windowSize);0!=n;--n)a>=e._windowSize&&(a=0),e._buffer[e._pos++]=e._buffer[a++],e._pos>=e._windowSize&&pe(e)}(e.m_OutWindow,e.rep0,a),e.nowPos64=A(e.nowPos64,U(a)),e.prevByte=_e(e.m_OutWindow,0)}else t=function(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}(e.m_LiteralDecoder,W(e.nowPos64),e.prevByte),e.state<7?e.prevByte=function(e,t){var n=1;do{n=n<<1|rt(t,e.m_Decoders,n)}while(n<256);return n<<24>>24}(t,e.m_RangeDecoder):e.prevByte=function(e,t,n){var a,r,o=1;do{if(r=n>>7&1,n<<=1,a=rt(t,e.m_Decoders,(1+r<<8)+o),o=o<<1|a,r!=a){for(;o<256;)o=o<<1|rt(t,e.m_Decoders,o);break}}while(o<256);return o<<24>>24}(t,e.m_RangeDecoder,_e(e.m_OutWindow,e.rep0)),function(e,t){e._buffer[e._pos++]=t,e._pos>=e._windowSize&&pe(e)}(e.m_OutWindow,e.prevByte),e.state=ge(e.state),e.nowPos64=A(e.nowPos64,D);return 0}(e.decoder);if(-1==t)throw new Error("corrupted input");e.inBytesProcessed=M,e.outBytesProcessed=e.decoder.nowPos64,(t||H(e.decoder.outSize,x)>=0&&H(e.decoder.nowPos64,e.decoder.outSize)>=0)&&(pe(e.decoder.m_OutWindow),ve(e.decoder.m_OutWindow),e.decoder.m_RangeDecoder.Stream=null,e.alive=0)}(e),e.alive}function Ee(e,t){for(;e.m_NumPosStates<t;++e.m_NumPosStates)e.m_LowCoder[e.m_NumPosStates]=Ke({},3),e.m_MidCoder[e.m_NumPosStates]=Ke({},3)}function ye(e,t,n){if(!rt(t,e.m_Choice,0))return Ve(e.m_LowCoder[n],t);var a=8;return rt(t,e.m_Choice,1)?a+=8+Ve(e.m_HighCoder,t):a+=Ve(e.m_MidCoder[n],t),a}function Se(e){return e.m_Choice=F(2),e.m_LowCoder=F(16),e.m_MidCoder=F(16),e.m_HighCoder=Ke({},8),e.m_NumPosStates=0,e}function we(e){ot(e.m_Choice);for(var t=0;t<e.m_NumPosStates;++t)ot(e.m_LowCoder[t].Models),ot(e.m_MidCoder[t].Models);ot(e.m_HighCoder.Models)}function Pe(e){return e.m_Decoders=F(768),e}var Oe=function(){var e,t,n,a=2,r=[0,1];for(n=2;n<22;++n)for(t=1<<(n>>1)-1,e=0;e<t;++e,++a)r[a]=n<<24>>24;return r}();function ke(e,t){var n,a,r,o;e._optimumEndIndex=t,r=e._optimum[t].PosPrev,a=e._optimum[t].BackPrev;do{e._optimum[t].Prev1IsChar&&(Ye(e._optimum[r]),e._optimum[r].PosPrev=r-1,e._optimum[t].Prev2&&(e._optimum[r-1].Prev1IsChar=0,e._optimum[r-1].PosPrev=e._optimum[t].PosPrev2,e._optimum[r-1].BackPrev=e._optimum[t].BackPrev2)),o=r,n=a,a=e._optimum[o].BackPrev,r=e._optimum[o].PosPrev,e._optimum[o].BackPrev=n,e._optimum[o].PosPrev=t,t=o}while(t>0);return e.backRes=e._optimum[0].BackPrev,e._optimumCurrentIndex=e._optimum[0].PosPrev,e._optimumCurrentIndex}function je(e){for(var t=0;t<16;++t)e._alignPrices[t]=tt(e._posAlignEncoder,t);e._alignPriceCount=0}function Be(e){var t,n,a,r,o,i,s,c;for(r=4;r<128;++r)t=(2|1&(i=xe(r)))<<(a=(i>>1)-1),e.tempPrices[r]=at(e._posEncoders,t-i-1,a,r-t);for(o=0;o<4;++o){for(n=e._posSlotEncoder[o],s=o<<6,i=0;i<e._distTableSize;++i)e._posSlotPrices[s+i]=Qe(n,i);for(i=14;i<e._distTableSize;++i)e._posSlotPrices[s+i]+=(i>>1)-1-4<<6;for(c=128*o,r=0;r<4;++r)e._distancesPrices[c+r]=e._posSlotPrices[s+r];for(;r<128;++r)e._distancesPrices[c+r]=e._posSlotPrices[s+xe(r)]+e.tempPrices[r]}e._matchPriceCount=0}function Ce(e,t){Le(e),function(e,t){if(!e._writeEndMark)return;st(e._rangeEncoder,e._isMatch,(e._state<<4)+t,1),st(e._rangeEncoder,e._isRep,e._state,0),e._state=e._state<7?7:10,Fe(e._lenEncoder,e._rangeEncoder,0,t);var n=he(2);Ze(e._posSlotEncoder[n],e._rangeEncoder,63),ct(e._rangeEncoder,67108863,26),et(e._posAlignEncoder,e._rangeEncoder,15)}(e,t&e._posStateMask);for(var n=0;n<5;++n)ut(e._rangeEncoder)}function Ne(e,t){var n,a,r,o,i,s,c,l,u,d,m,f,p,_,v,h,g,b,E,y,S,w,P,O,k,j,B,C,N,R,I,z,M,L,x,D,A,F,T,H,G,q,U,W;if(e._optimumEndIndex!=e._optimumCurrentIndex)return p=e._optimum[e._optimumCurrentIndex].PosPrev-e._optimumCurrentIndex,e.backRes=e._optimum[e._optimumCurrentIndex].BackPrev,e._optimumCurrentIndex=e._optimum[e._optimumCurrentIndex].PosPrev,p;if(e._optimumCurrentIndex=e._optimumEndIndex=0,e._longestMatchWasFound?(f=e._longestMatchLength,e._longestMatchWasFound=0):f=Me(e),j=e._numDistancePairs,(O=ce(e._matchFinder)+1)<2)return e.backRes=-1,1;for(O>273&&(O=273),T=0,u=0;u<4;++u)e.reps[u]=e._repDistances[u],e.repLens[u]=se(e._matchFinder,-1,e.reps[u],273),e.repLens[u]>e.repLens[T]&&(T=u);if(e.repLens[T]>=e._numFastBytes)return e.backRes=T,ze(e,(p=e.repLens[T])-1),p;if(f>=e._numFastBytes)return e.backRes=e._matchDistances[j-1]+4,ze(e,f-1),f;if(c=ie(e._matchFinder,-1),g=ie(e._matchFinder,-e._repDistances[0]-1-1),f<2&&c!=g&&e.repLens[T]<2)return e.backRes=-1,1;if(e._optimum[0].State=e._state,M=t&e._posStateMask,e._optimum[1].Price=it[e._isMatch[(e._state<<4)+M]>>>2]+Je(qe(e._literalEncoder,t,e._previousByte),e._state>=7,g,c),Ye(e._optimum[1]),F=(b=it[2048-e._isMatch[(e._state<<4)+M]>>>2])+it[2048-e._isRep[e._state]>>>2],g==c&&(H=F+function(e,t,n){return it[e._isRepG0[t]>>>2]+it[e._isRep0Long[(t<<4)+n]>>>2]}(e,e._state,M))<e._optimum[1].Price&&(e._optimum[1].Price=H,function(e){e.BackPrev=0,e.Prev1IsChar=0}(e._optimum[1])),(m=f>=e.repLens[T]?f:e.repLens[T])<2)return e.backRes=e._optimum[1].BackPrev,1;e._optimum[1].PosPrev=0,e._optimum[0].Backs0=e.reps[0],e._optimum[0].Backs1=e.reps[1],e._optimum[0].Backs2=e.reps[2],e._optimum[0].Backs3=e.reps[3],d=m;do{e._optimum[d--].Price=268435455}while(d>=2);for(u=0;u<4;++u)if(!((A=e.repLens[u])<2)){x=F+Ie(e,u,e._state,M);do{(o=x+He(e._repMatchLenEncoder,A-2,M))<(R=e._optimum[A]).Price&&(R.Price=o,R.PosPrev=0,R.BackPrev=u,R.Prev1IsChar=0)}while(--A>=2)}if(P=b+it[e._isRep[e._state]>>>2],(d=e.repLens[0]>=2?e.repLens[0]+1:2)<=f){for(B=0;d>e._matchDistances[B];)B+=2;for(;(o=P+Re(e,l=e._matchDistances[B+1],d,M))<(R=e._optimum[d]).Price&&(R.Price=o,R.PosPrev=0,R.BackPrev=l+4,R.Prev1IsChar=0),d!=e._matchDistances[B]||(B+=2)!=j;++d);}for(n=0;;){if(++n==m)return ke(e,n);if(E=Me(e),j=e._numDistancePairs,E>=e._numFastBytes)return e._longestMatchLength=E,e._longestMatchWasFound=1,ke(e,n);if(++t,z=e._optimum[n].PosPrev,e._optimum[n].Prev1IsChar?(--z,e._optimum[n].Prev2?(q=e._optimum[e._optimum[n].PosPrev2].State,q=e._optimum[n].BackPrev2<4?q<7?8:11:q<7?7:10):q=e._optimum[z].State,q=ge(q)):q=e._optimum[z].State,z==n-1?q=e._optimum[n].BackPrev?ge(q):q<7?9:11:(e._optimum[n].Prev1IsChar&&e._optimum[n].Prev2?(z=e._optimum[n].PosPrev2,I=e._optimum[n].BackPrev2,q=q<7?8:11):q=(I=e._optimum[n].BackPrev)<4?q<7?8:11:q<7?7:10,N=e._optimum[z],I<4?I?1==I?(e.reps[0]=N.Backs1,e.reps[1]=N.Backs0,e.reps[2]=N.Backs2,e.reps[3]=N.Backs3):2==I?(e.reps[0]=N.Backs2,e.reps[1]=N.Backs0,e.reps[2]=N.Backs1,e.reps[3]=N.Backs3):(e.reps[0]=N.Backs3,e.reps[1]=N.Backs0,e.reps[2]=N.Backs1,e.reps[3]=N.Backs2):(e.reps[0]=N.Backs0,e.reps[1]=N.Backs1,e.reps[2]=N.Backs2,e.reps[3]=N.Backs3):(e.reps[0]=I-4,e.reps[1]=N.Backs0,e.reps[2]=N.Backs1,e.reps[3]=N.Backs2)),e._optimum[n].State=q,e._optimum[n].Backs0=e.reps[0],e._optimum[n].Backs1=e.reps[1],e._optimum[n].Backs2=e.reps[2],e._optimum[n].Backs3=e.reps[3],s=e._optimum[n].Price,c=ie(e._matchFinder,-1),g=ie(e._matchFinder,-e.reps[0]-1-1),M=t&e._posStateMask,y=0,(a=s+it[e._isMatch[(q<<4)+M]>>>2]+Je(qe(e._literalEncoder,t,ie(e._matchFinder,-2)),q>=7,g,c))<(S=e._optimum[n+1]).Price&&(S.Price=a,S.PosPrev=n,S.BackPrev=-1,S.Prev1IsChar=0,y=1),F=(b=s+it[2048-e._isMatch[(q<<4)+M]>>>2])+it[2048-e._isRep[q]>>>2],g!=c||S.PosPrev<n&&!S.BackPrev||(H=F+(it[e._isRepG0[q]>>>2]+it[e._isRep0Long[(q<<4)+M]>>>2]))<=S.Price&&(S.Price=H,S.PosPrev=n,S.BackPrev=0,S.Prev1IsChar=0,y=1),!((O=k=4095-n<(k=ce(e._matchFinder)+1)?4095-n:k)<2)){if(O>e._numFastBytes&&(O=e._numFastBytes),!y&&g!=c&&(W=Math.min(k-1,e._numFastBytes),(v=se(e._matchFinder,0,e.reps[0],W))>=2)){for(U=ge(q),L=t+1&e._posStateMask,w=a+it[2048-e._isMatch[(U<<4)+L]>>>2]+it[2048-e._isRep[U]>>>2],C=n+1+v;m<C;)e._optimum[++m].Price=268435455;(o=w+(He(e._repMatchLenEncoder,v-2,L)+Ie(e,0,U,L)))<(R=e._optimum[C]).Price&&(R.Price=o,R.PosPrev=n+1,R.BackPrev=0,R.Prev1IsChar=1,R.Prev2=0)}for(G=2,D=0;D<4;++D)if(!((_=se(e._matchFinder,-1,e.reps[D],O))<2)){h=_;do{for(;m<n+_;)e._optimum[++m].Price=268435455;(o=F+(He(e._repMatchLenEncoder,_-2,M)+Ie(e,D,q,M)))<(R=e._optimum[n+_]).Price&&(R.Price=o,R.PosPrev=n,R.BackPrev=D,R.Prev1IsChar=0)}while(--_>=2);if(_=h,D||(G=_+1),_<k&&(W=Math.min(k-1-_,e._numFastBytes),(v=se(e._matchFinder,_,e.reps[D],W))>=2)){for(U=q<7?8:11,L=t+_&e._posStateMask,r=F+(He(e._repMatchLenEncoder,_-2,M)+Ie(e,D,q,M))+it[e._isMatch[(U<<4)+L]>>>2]+Je(qe(e._literalEncoder,t+_,ie(e._matchFinder,_-1-1)),1,ie(e._matchFinder,_-1-(e.reps[D]+1)),ie(e._matchFinder,_-1)),U=ge(U),L=t+_+1&e._posStateMask,w=r+it[2048-e._isMatch[(U<<4)+L]>>>2]+it[2048-e._isRep[U]>>>2],C=_+1+v;m<n+C;)e._optimum[++m].Price=268435455;(o=w+(He(e._repMatchLenEncoder,v-2,L)+Ie(e,0,U,L)))<(R=e._optimum[n+C]).Price&&(R.Price=o,R.PosPrev=n+_+1,R.BackPrev=0,R.Prev1IsChar=1,R.Prev2=1,R.PosPrev2=n,R.BackPrev2=D)}}if(E>O){for(E=O,j=0;E>e._matchDistances[j];j+=2);e._matchDistances[j]=E,j+=2}if(E>=G){for(P=b+it[e._isRep[q]>>>2];m<n+E;)e._optimum[++m].Price=268435455;for(B=0;G>e._matchDistances[B];)B+=2;for(_=G;;++_)if((o=P+Re(e,i=e._matchDistances[B+1],_,M))<(R=e._optimum[n+_]).Price&&(R.Price=o,R.PosPrev=n,R.BackPrev=i+4,R.Prev1IsChar=0),_==e._matchDistances[B]){if(_<k&&(W=Math.min(k-1-_,e._numFastBytes),(v=se(e._matchFinder,_,i,W))>=2)){for(U=q<7?7:10,L=t+_&e._posStateMask,r=o+it[e._isMatch[(U<<4)+L]>>>2]+Je(qe(e._literalEncoder,t+_,ie(e._matchFinder,_-1-1)),1,ie(e._matchFinder,_-(i+1)-1),ie(e._matchFinder,_-1)),U=ge(U),L=t+_+1&e._posStateMask,w=r+it[2048-e._isMatch[(U<<4)+L]>>>2]+it[2048-e._isRep[U]>>>2],C=_+1+v;m<n+C;)e._optimum[++m].Price=268435455;(o=w+(He(e._repMatchLenEncoder,v-2,L)+Ie(e,0,U,L)))<(R=e._optimum[n+C]).Price&&(R.Price=o,R.PosPrev=n+_+1,R.BackPrev=0,R.Prev1IsChar=1,R.Prev2=1,R.PosPrev2=n,R.BackPrev2=i+4)}if((B+=2)==j)break}}}}}function Re(e,t,n,a){var r=he(n);return(t<128?e._distancesPrices[128*r+t]:e._posSlotPrices[(r<<6)+function(e){if(e<131072)return Oe[e>>6]+12;if(e<134217728)return Oe[e>>16]+32;return Oe[e>>26]+52}(t)]+e._alignPrices[15&t])+He(e._lenEncoder,n-2,a)}function Ie(e,t,n,a){var r;return t?(r=it[2048-e._isRepG0[n]>>>2],1==t?r+=it[e._isRepG1[n]>>>2]:(r+=it[2048-e._isRepG1[n]>>>2],r+=dt(e._isRepG2[n],t-2))):(r=it[e._isRepG0[n]>>>2],r+=it[2048-e._isRep0Long[(n<<4)+a]>>>2]),r}function ze(e,t){t>0&&(!function(e,t){var n,a,r,o,i,s,c,l,u,d,m,f,p,_,v,h,g;do{if(e._pos+e._matchMaxLen<=e._streamPos)f=e._matchMaxLen;else if((f=e._streamPos-e._pos)<e.kMinMatchCheck){me(e);continue}for(p=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,a=e._bufferOffset+e._pos,e.HASH_ARRAY?(s=1023&(g=de[255&e._bufferBase[a]]^255&e._bufferBase[a+1]),e._hash[s]=e._pos,c=65535&(g^=(255&e._bufferBase[a+2])<<8),e._hash[1024+c]=e._pos,l=(g^de[255&e._bufferBase[a+3]]<<5)&e._hashMask):l=255&e._bufferBase[a]^(255&e._bufferBase[a+1])<<8,r=e._hash[e.kFixHashSize+l],e._hash[e.kFixHashSize+l]=e._pos,v=1+(e._cyclicBufferPos<<1),h=e._cyclicBufferPos<<1,d=m=e.kNumHashDirectBytes,n=e._cutValue;;){if(r<=p||0==n--){e._son[v]=e._son[h]=0;break}if(o=((i=e._pos-r)<=e._cyclicBufferPos?e._cyclicBufferPos-i:e._cyclicBufferPos-i+e._cyclicBufferSize)<<1,_=e._bufferOffset+r,u=d<m?d:m,e._bufferBase[_+u]==e._bufferBase[a+u]){for(;++u!=f&&e._bufferBase[_+u]==e._bufferBase[a+u];);if(u==f){e._son[h]=e._son[o],e._son[v]=e._son[o+1];break}}(255&e._bufferBase[_+u])<(255&e._bufferBase[a+u])?(e._son[h]=r,h=o+1,r=e._son[h],m=u):(e._son[v]=r,v=o,r=e._son[v],d=u)}me(e)}while(0!=--t)}(e._matchFinder,t),e._additionalOffset+=t)}function Me(e){var t=0;return e._numDistancePairs=function(e,t){var n,a,r,o,i,s,c,l,u,d,m,f,p,_,v,h,g,b,E,y,S;if(e._pos+e._matchMaxLen<=e._streamPos)_=e._matchMaxLen;else if((_=e._streamPos-e._pos)<e.kMinMatchCheck)return me(e),0;for(g=0,v=e._pos>e._cyclicBufferSize?e._pos-e._cyclicBufferSize:0,a=e._bufferOffset+e._pos,h=1,l=0,u=0,e.HASH_ARRAY?(l=1023&(S=de[255&e._bufferBase[a]]^255&e._bufferBase[a+1]),u=65535&(S^=(255&e._bufferBase[a+2])<<8),d=(S^de[255&e._bufferBase[a+3]]<<5)&e._hashMask):d=255&e._bufferBase[a]^(255&e._bufferBase[a+1])<<8,r=e._hash[e.kFixHashSize+d]||0,e.HASH_ARRAY&&(o=e._hash[l]||0,i=e._hash[1024+u]||0,e._hash[l]=e._pos,e._hash[1024+u]=e._pos,o>v&&e._bufferBase[e._bufferOffset+o]==e._bufferBase[a]&&(t[g++]=h=2,t[g++]=e._pos-o-1),i>v&&e._bufferBase[e._bufferOffset+i]==e._bufferBase[a]&&(i==o&&(g-=2),t[g++]=h=3,t[g++]=e._pos-i-1,o=i),0!=g&&o==r&&(g-=2,h=1)),e._hash[e.kFixHashSize+d]=e._pos,E=1+(e._cyclicBufferPos<<1),y=e._cyclicBufferPos<<1,f=p=e.kNumHashDirectBytes,0!=e.kNumHashDirectBytes&&r>v&&e._bufferBase[e._bufferOffset+r+e.kNumHashDirectBytes]!=e._bufferBase[a+e.kNumHashDirectBytes]&&(t[g++]=h=e.kNumHashDirectBytes,t[g++]=e._pos-r-1),n=e._cutValue;;){if(r<=v||0==n--){e._son[E]=e._son[y]=0;break}if(s=((c=e._pos-r)<=e._cyclicBufferPos?e._cyclicBufferPos-c:e._cyclicBufferPos-c+e._cyclicBufferSize)<<1,b=e._bufferOffset+r,m=f<p?f:p,e._bufferBase[b+m]==e._bufferBase[a+m]){for(;++m!=_&&e._bufferBase[b+m]==e._bufferBase[a+m];);if(h<m&&(t[g++]=h=m,t[g++]=c-1,m==_)){e._son[y]=e._son[s],e._son[E]=e._son[s+1];break}}(255&e._bufferBase[b+m])<(255&e._bufferBase[a+m])?(e._son[y]=r,y=s+1,r=e._son[y],p=m):(e._son[E]=r,E=s,r=e._son[E],f=m)}return me(e),g}(e._matchFinder,e._matchDistances),e._numDistancePairs>0&&(t=e._matchDistances[e._numDistancePairs-2])==e._numFastBytes&&(t+=se(e._matchFinder,t-1,e._matchDistances[e._numDistancePairs-1],273-t)),++e._additionalOffset,t}function Le(e){e._matchFinder&&e._needReleaseMFStream&&(e._matchFinder._stream=null,e._needReleaseMFStream=0)}function xe(e){return e<2048?Oe[e]:e<2097152?Oe[e>>10]+20:Oe[e>>20]+40}function De(e,t){ot(e._choice);for(var n=0;n<t;++n)ot(e._lowCoder[n].Models),ot(e._midCoder[n].Models);ot(e._highCoder.Models)}function Ae(e,t,n,a,r){var o,i,s,c,l;for(o=it[e._choice[0]>>>2],s=(i=it[2048-e._choice[0]>>>2])+it[e._choice[1]>>>2],c=i+it[2048-e._choice[1]>>>2],l=0,l=0;l<8;++l){if(l>=n)return;a[r+l]=o+Qe(e._lowCoder[t],l)}for(;l<16;++l){if(l>=n)return;a[r+l]=s+Qe(e._midCoder[t],l-8)}for(;l<n;++l)a[r+l]=c+Qe(e._highCoder,l-8-8)}function Fe(e,t,n,a){!function(e,t,n,a){n<8?(st(t,e._choice,0,0),Ze(e._lowCoder[a],t,n)):(n-=8,st(t,e._choice,0,1),n<8?(st(t,e._choice,1,0),Ze(e._midCoder[a],t,n)):(st(t,e._choice,1,1),Ze(e._highCoder,t,n-8)))}(e,t,n,a),0==--e._counters[a]&&(Ae(e,a,e._tableSize,e._prices,272*a),e._counters[a]=e._tableSize)}function Te(e){return function(e){e._choice=F(2),e._lowCoder=F(16),e._midCoder=F(16),e._highCoder=Xe({},8);for(var t=0;t<16;++t)e._lowCoder[t]=Xe({},3),e._midCoder[t]=Xe({},3)}(e),e._prices=[],e._counters=[],e}function He(e,t,n){return e._prices[272*n+t]}function Ge(e,t){for(var n=0;n<t;++n)Ae(e,n,e._tableSize,e._prices,272*n),e._counters[n]=e._tableSize}function qe(e,t,n){return e.m_Coders[((t&e.m_PosMask)<<e.m_NumPrevBits)+((255&n)>>>8-e.m_NumPrevBits)]}function Ue(e,t,n){var a,r,o=1;for(r=7;r>=0;--r)a=n>>r&1,st(t,e.m_Encoders,o,a),o=o<<1|a}function We(e,t,n,a){var r,o,i,s,c=1,l=1;for(o=7;o>=0;--o)r=a>>o&1,s=l,c&&(s+=1+(i=n>>o&1)<<8,c=i==r),st(t,e.m_Encoders,s,r),l=l<<1|r}function $e(e){return e.m_Encoders=F(768),e}function Je(e,t,n,a){var r,o,i=1,s=7,c=0;if(t)for(;s>=0;--s)if(o=n>>s&1,r=a>>s&1,c+=dt(e.m_Encoders[(1+o<<8)+i],r),i=i<<1|r,o!=r){--s;break}for(;s>=0;--s)r=a>>s&1,c+=dt(e.m_Encoders[i],r),i=i<<1|r;return c}function Ye(e){e.BackPrev=-1,e.Prev1IsChar=0}function Ke(e,t){return e.NumBitLevels=t,e.Models=F(1<<t),e}function Ve(e,t){var n,a=1;for(n=e.NumBitLevels;0!=n;--n)a=(a<<1)+rt(t,e.Models,a);return a-(1<<e.NumBitLevels)}function Xe(e,t){return e.NumBitLevels=t,e.Models=F(1<<t),e}function Ze(e,t,n){var a,r,o=1;for(r=e.NumBitLevels;0!=r;)a=n>>>--r&1,st(t,e.Models,o,a),o=o<<1|a}function Qe(e,t){var n,a,r=1,o=0;for(a=e.NumBitLevels;0!=a;)n=t>>>--a&1,o+=dt(e.Models[r],n),r=(r<<1)+n;return o}function et(e,t,n){var a,r,o=1;for(r=0;r<e.NumBitLevels;++r)a=1&n,st(t,e.Models,o,a),o=o<<1|a,n>>=1}function tt(e,t){var n,a,r=1,o=0;for(a=e.NumBitLevels;0!=a;--a)n=1&t,t>>>=1,o+=dt(e.Models[r],n),r=r<<1|n;return o}function nt(e,t,n,a,r){var o,i,s=1;for(i=0;i<a;++i)st(n,e,t+s,o=1&r),s=s<<1|o,r>>=1}function at(e,t,n,a){var r,o,i=1,s=0;for(o=n;0!=o;--o)r=1&a,a>>>=1,s+=it[(2047&(e[t+i]-r^-r))>>>2],i=i<<1|r;return s}function rt(e,t,n){var a,r=t[n];return a=(e.Range>>>11)*r,(-2147483648^e.Code)<(-2147483648^a)?(e.Range=a,t[n]=r+(2048-r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|X(e.Stream),e.Range<<=8),0):(e.Range-=a,e.Code-=a,t[n]=r-(r>>>5)<<16>>16,-16777216&e.Range||(e.Code=e.Code<<8|X(e.Stream),e.Range<<=8),1)}function ot(e){for(var t=e.length-1;t>=0;--t)e[t]=1024}var it=function(){var e,t,n,a=[];for(t=8;t>=0;--t)for(e=1<<9-t,n=1<<9-t-1;n<e;++n)a[n]=(t<<6)+(e-n<<6>>>9-t-1);return a}();function st(e,t,n,a){var r,o=t[n];r=(e.Range>>>11)*o,a?(e.Low=A(e.Low,T(U(r),[4294967295,0])),e.Range-=r,t[n]=o-(o>>>5)<<16>>16):(e.Range=r,t[n]=o+(2048-o>>>5)<<16>>16),-16777216&e.Range||(e.Range<<=8,ut(e))}function ct(e,t,n){for(var a=n-1;a>=0;--a)e.Range>>>=1,1==(t>>>a&1)&&(e.Low=A(e.Low,U(e.Range))),-16777216&e.Range||(e.Range<<=8,ut(e))}function lt(e){return A(A(U(e._cacheSize),e._position),[4,0])}function ut(e){var t,n=W(function(e,t){var n;return n=Y(e,t&=63),e[1]<0&&(n=A(n,J([2,0],63-t))),n}(e.Low,32));if(0!=n||H(e.Low,[4278190080,0])<0){e._position=A(e._position,U(e._cacheSize)),t=e._cache;do{te(e.Stream,t+n),t=255}while(0!=--e._cacheSize);e._cache=W(e.Low)>>>24}++e._cacheSize,e.Low=J(T(e.Low,[16777215,0]),8)}function dt(e,t){return it[(2047&(e-t^-t))>>>2]}var mt=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];function ft(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,a=void 0===n?7:n,r=t.enableEndMark,o=void 0===r||r,i={};for(i.c=function(e,t,n,a){return e.output=Q({}),re(e,V({},t),e.output,U(t.length),n,a),e}({},function(e){var t,n,a,r=[],o=0,i=e.length;if("object"==typeof e)return e;for(function(e,t,n,a,r){var o;for(o=t;o<n;++o)a[r++]=e.charCodeAt(o)}(e,0,i,r,0),a=0;a<i;++a)(t=r[a])>=1&&t<=127?++o:o+=!t||t>=128&&t<=2047?2:3;for(n=[],o=0,a=0;a<i;++a)(t=r[a])>=1&&t<=127?n[o++]=t<<24>>24:!t||t>=128&&t<=2047?(n[o++]=(192|t>>6&31)<<24>>24,n[o++]=(128|63&t)<<24>>24):(n[o++]=(224|t>>12&15)<<24>>24,n[o++]=(128|t>>6&63)<<24>>24,n[o++]=(128|63&t)<<24>>24);return n}(e),function(e){return mt[e-1]||mt[6]}(a),o);be(i.c.chunker););return ee(i.c.output)}function pt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mode,a=void 0===n?7:n,r=t.enableEndMark,o=ft(e,{mode:a,enableEndMark:void 0===r||r});return R(new Uint8Array(o))}function _t(e){var t={};for(t.d=function(e,t){return e.output=Q({}),oe(e,V({},t),e.output),e}({},e);be(t.d.chunker););return function(e){for(var t,n,a,r=0,o=0,i=e.length,s=[],c=[];r<i;++r,++o){if(128&(t=255&e[r]))if(192==(224&t)){if(r+1>=i)return e;if(128!=(192&(n=255&e[++r])))return e;c[o]=(31&t)<<6|63&n}else{if(224!=(240&t))return e;if(r+2>=i)return e;if(128!=(192&(n=255&e[++r])))return e;if(128!=(192&(a=255&e[++r])))return e;c[o]=(15&t)<<12|(63&n)<<6|63&a}else{if(!t)return e;c[o]=t}16383==o&&(s.push(String.fromCharCode.apply(String,c)),o=-1)}return o>0&&(c.length=o,s.push(String.fromCharCode.apply(String,c))),s.join("")}(ee(t.d.output))}function vt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return ht(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ht(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}_.a.use(h.a),_.a.use(P.a);var gt=function(e){var t=e.data,n=e.coloringDict,o=e.evtbus,i=e.title,s=e.onDeleteSummaryEdge,c=e.onRequireSummaryEdge,l=e.roots,u=e.requiredEdges;e.setLoadingAction,document.addEventListener("keydown",function(e){"Shift"===e.key&&document.body.classList.add("shift-click")}),document.addEventListener("keyup",function(e){"Shift"===e.key&&document.body.classList.remove("shift-click")});var p=[],_=JSON.parse(sessionStorage.getItem("selected"));if(i===_.title)for(var v in _)"title"===v||_[v]||p.push(v.split("\u2192"));var h,g=(h=t.map(function(e,t){return[e[0],e[1]]}).flat(),Object(d.a)(new Set(h))).map(function(e,t){return{data:{id:e,label:e,type:"ip"}}}),b=t.filter(function(e){for(var t=0,n=p;t<n.length;t++){var a=n[t];if(a[0]===e[0]&&a[1]===e[1])return!1}return!0}).map(function(e,t){return{data:{source:e[0],target:e[1],label:e[2],id:"".concat(e[0],"->").concat(e[1]),clsource:e[0],cltarget:e[1]}}});if(Object.keys(l).length>1)for(var E in g.push({data:{id:"roots",label:"roots",type:"ip",root:"true"}}),l)b.push({data:{source:"roots",target:E,label:l[E],id:"roots->".concat(E),clsource:"roots",cltarget:E,rootedge:"true"}});var y,S=vt(b.entries());try{for(S.s();!(y=S.n()).done;){var w=y.value,P=Object(m.a)(w,2),O=P[0];1==P[1].data.label&&(b[O].data.label="")}}catch(x){S.e(x)}finally{S.f()}var k,j={nodes:g,edges:b},B=[{selector:"node",style:{backgroundColor:"#fff","border-width":10,shape:"rectangle",width:100,height:50,label:"data(label)","overlay-padding":"6px","z-index":"10","text-outline-width":"2px",color:"white",fontSize:15,"text-valign":"center","text-halign":"center"}},{selector:"node:selected",style:{"border-width":"6px","border-color":"#AAD8FF","border-opacity":"0.5","background-color":"#77828C",width:50,height:50,"text-outline-color":"#77828C","text-outline-width":8}},{selector:"node[type='device']",style:{shape:"rectangle"}},{selector:"edge",style:{width:3,label:"data(label)","target-arrow-color":"#6774cb","target-arrow-shape":"triangle","arrow-scale":1,"curve-style":"bezier","edge-distances":"node-position","text-outline-width":"2px",color:"white",fontSize:15}},{selector:"node[root='true']",style:{"border-color":"#bbb"}},{selector:"edge[rootedge='true']",style:{"line-style":"dashed"}}];for(var C in n){var N=n[C];B.push({selector:"node[label='".concat(C,"']"),style:{"border-color":N}})}b.map(function(e,t){var n=e.data.source,a=e.data.target;return B.push({selector:"edge[id='".concat(n,"->").concat(a,"']"),style:{"line-fill":"linear-gradient","line-gradient-stop-colors":"".concat(L(n)," ").concat(L(a)),"line-gradient-stop-positions":"33% 66%","target-arrow-color":"".concat(L(a))}}),0});var R="true"===new URLSearchParams(window.location.search).get("rotatedsum");null===R&&(R=!1);var I={name:"circle",fit:!0,circle:!0,directed:!0,padding:10,animate:!0,animationDuration:1e3,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,ready:function(){o.addListener(function(e,t){if("selectNode"===e){var n=k.getElementById(t.nodeId),a=t.source,r=t.sink;k.$("edge[id='".concat(a,"->").concat(r,"']")).css({width:10}),n.trigger("select")}if("deselectNode"===e){var o=k.getElementById(t.nodeId),i=t.source,s=t.sink;k.$("edge[id='".concat(i,"->").concat(s,"']")).css({width:3}),o.trigger("select")}if("unrequireEdge"===e){var c=k.$("edge[id='".concat(t.object,"']"));c.css({"font-weight":"normal",width:3,arrowScale:1}),c.data("selected","false")}if("requireEdge"===e){var l=k.$("edge[id='".concat(t.object,"']"));l.css({"font-weight":"normal",width:10,arrowScale:1}),l.data("selected","true")}if("resetStack"===e){var u=k.$("edge");u.css({"font-weight":"normal",width:3,arrowScale:1}),u.data("selected","false")}})}},z=0,M=b.length;function L(e){return"roots"===e?"#bbb":n[e]}return b.map(function(e){return"roots"!==e.data.source&&(""==e.data.label?z+=1:z+=parseInt(e.data.label)),0}),sessionStorage.setItem("musum",z),sessionStorage.setItem("gammasum",M),Object(a.useMemo)(function(){return r.a.createElement(f.a,{elements:f.a.normalizeElements(j),style:{width:"100%",height:"100%"},zoomingEnabled:!0,maxZoom:3,minZoom:.1,autounselectify:!0,boxSelectionEnabled:!0,layout:I,stylesheet:B,cy:function(e){k=e,e.ready(function(){u.forEach(function(t){var n=e.getElementById(t);n.css({"font-weight":"bold",width:10,arrowScale:1}),n.data("selected","true")})}),e.off("cxttap","edge"),e.on("cxttap","edge",function(e){}),e.off("tap","edge"),e.on("tap","edge",function(e){var t="require";e.originalEvent.shiftKey&&(t="delete");var n=e.target;-1!==function(e,t){return"require"===t?c(e.id()):s(e.id())}(n,t)&&"require"===t&&(u.includes(n.id())?(n.css({"font-weight":"normal",width:3,arrowScale:1}),n.data("selected","false")):(n.css({"font-weight":"bold",width:10,arrowScale:1}),n.data("selected","true")))}),e.off("mouseover","edge"),e.on("mouseover","edge",function(e){var t=e.target;"true"!==t.data().selected?t.css({width:6,arrowScale:.5}):t.css({width:13,arrowScale:.769});var n=e.target.id();o.fireEvent("selectNodeSum",{nodeId:n,target:t}),o.fireEvent("selectNodeCl",{nodeId:n,target:t})}),e.off("mouseover","node"),e.on("mouseover","node",function(e){e.target.css({"border-width":20});var t=e.target.id();o.fireEvent("hoverNodeSum",{nodeId:t}),o.fireEvent("hoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=1,a.style.zIndex=100,a.style.fontWeight="bold")}),e.off("mouseout","node"),e.on("mouseout","node",function(e){e.target.css({"border-width":10});var t=e.target.id();o.fireEvent("dehoverNodeSum",{nodeId:t}),o.fireEvent("dehoverNodeCl",{nodeId:t});var n=e.target.data("label"),a=document.querySelector("#".concat(n));null!==a&&(a.style.opacity=.7,a.style.zIndex=1,a.style.fontWeight="normal")}),e.off("mouseout","edge"),e.on("mouseout","edge",function(e){var t=e.target;"true"!==t.data().selected?t.css({width:3,arrowScale:1}):t.css({width:10,arrowScale:1});var n=e.target.id();o.fireEvent("deselectNodeSum",{nodeId:n,target:t}),o.fireEvent("deselectNodeCl",{nodeId:n,target:t})})}})},[t])};var bt=function(e){var t=e.type,n=e.setType,o=e.insertParam,i=e.usedData,s=e.coloring,c=(e.muSum,e.evtBus),l=e.onDeleteSummaryEdge,u=e.onRequireSummaryEdge,f=e.clearData,p=e.roots,_=e.deletedEdges,v=e.requiredEdges,h=e.deletedRoots,g=e.requiredRoots,b=e.setDeletedEdges,E=e.setRequiredEdges,y=e.setDeletedRoots,S=e.setRequiredRoots,w=e.filterStack,P=e.setFilterStack,O=e.setLoadingAction,k=Object(a.useState)(!1),j=Object(m.a)(k,2),B=j[0],C=j[1];function N(e,t){var n=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],a=n.length,r=e[t];return/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)?r:n[parseInt(r)%a]}var R=i.summary.migration;void 0===R&&(R=i.summary);for(var I={},z=0;z<s.length;z++)I[s[z][0]]=s[z][1];return r.a.createElement("div",{className:"panel info ".concat("sumviz"===t?"one":"tri")},r.a.createElement("div",{className:"titlewrapper"},r.a.createElement("h3",{className:"sumviztitle"},r.a.createElement("b",null,"Summary")),r.a.createElement("p",{className:"titleelem end"},r.a.createElement("b",null,"Press [/] for help")),r.a.createElement("span",{onClick:function(e){f(),"sumviz"===t?(n("viz"),o("type","viz")):(n("dualviz"),o("type","dualviz"))},style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"panelclosebutton"},r.a.createElement("b",null,"[X]")))),r.a.createElement("div",{className:"panel migration top left sum"},r.a.createElement("p",{className:"paneltitle"},r.a.createElement("b",null,"Migration Graph")),r.a.createElement("p",{className:"paneltitle mu"},"solutions: ".concat(i.solutions.length)),w.length>0?r.a.createElement("p",{className:"rightAlign",onClick:function(){C(!1);var e=w.pop().split(" "),t=Object(m.a)(e,3),n=t[0],a=t[1],r=t[2];"required"===n&&("root"===a&&S(g.filter(function(e){return e!==r})),"edge"===a&&(E(v.filter(function(e){return e!==r})),c.fireEvent("unrequireEdge",{object:r}))),"deleted"===n&&("root"===a&&y(h.filter(function(e){return e!==r})),"edge"===a&&b(_.filter(function(e){return e!==r}))),"deletedrequired"===n&&(b(_.filter(function(e){return e!==r})),E([].concat(Object(d.a)(v),[r])),c.fireEvent("requireEdge",{object:r})),"relaxed"===n&&(E([].concat(Object(d.a)(v),[r])),c.fireEvent("requireEdge",{object:r}))},onMouseEnter:function(){return C(!0)},onMouseLeave:function(){return C(!1)}},"\u21a9"):r.a.createElement(r.a.Fragment,null),B?function(e,t){if(e.length<=0)return r.a.createElement(r.a.Fragment,null);var n=e[e.length-1].split(" "),a=n[n.length-1].split("->"),o=Object(m.a)(a,2),i=o[0],s=o[1],c=N(t,i),l=N(t,s);"deletedrequired"===n[0]&&(n[0]="deleted");var u={display:"inline-block",backgroundColor:c,padding:"5px",borderRadius:"5px",color:"white"},d={display:"inline-block",backgroundColor:l,padding:"5px",borderRadius:"5px",color:"white"};return r.a.createElement("div",{className:"panel actionwrapper"},r.a.createElement("p",null,r.a.createElement("b",null,"Undo Most Recent Action: ")),r.a.createElement("p",{className:"recentAction"},n[0]," ",n[1]),r.a.createElement("p",{className:"recentAction"},r.a.createElement("span",{style:u},i)," ",r.a.createElement("span",{style:d},s)))}(w,I):r.a.createElement(r.a.Fragment,null),r.a.createElement("button",{type:"button",className:"paneltitle button summary",onClick:function(){P([]),b([]),E([]),y([]),S([]),c.fireEvent("resetStack")}},"Reset"),r.a.createElement(gt,{data:R,coloringDict:I,evtbus:c,title:i.name,onDeleteSummaryEdge:l,onRequireSummaryEdge:u,roots:p,requiredEdges:v,setLoadingAction:O})))},Et=n(65);function yt(e){var t=e.isPopupOpen,n=e.togglePopup;return r.a.createElement(Et.a,{open:t,togglePopup:n,overlayStyle:{background:"rgba(0, 0, 0, 0.6)",zIndex:9999},animationType:"fade",modal:!0},function(e){return r.a.createElement("div",{className:"popup-container"},r.a.createElement("div",{className:"header"},"Help"),r.a.createElement("p",{className:"popup-container-text"},"Click and drag around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponding anatomical location for the node."),r.a.createElement("p",{className:"popup-container-text"},"Select different solutions from the dropdown on the top left of the panel."),r.a.createElement("p",{className:"popup-container-text"},"To compare with another solution, click the [+] on the right. To view the solution space summary, click the [+] on the left."),r.a.createElement("p",{className:"popup-container-text"},"To filter out any solutions with a particular edge, shift+click on that edge in the summary graph. To require all solutions to have some edge, click the edge on the summary graph."),r.a.createElement("p",{className:"popup-container-text"},'For more help, please select the "Instructions" button in the home page. You can return to the home page by pressing "[X]" on all the currently opened panels.'),r.a.createElement("button",{className:"close-button",onClick:function(){n()}},"Close"))})}function St(e){var t=e.isPopupOpen,n=e.togglePopup;return r.a.createElement(Et.a,{open:t,onClose:n,overlayStyle:{background:"rgba(0, 0, 0, 0.6)",zIndex:9999},animationType:"fade",modal:!0},function(e){return r.a.createElement("div",{className:"no-sol-popup-container"},r.a.createElement("div",{className:"header"},"ERROR"),r.a.createElement("p",{className:"popup-container-text"},"There are no solutions available for your input!"),r.a.createElement("button",{className:"close-button",onClick:e},"Close"))})}function wt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ot(e){var t,n,a=new Map,r=wt(e);try{for(r.s();!(t=r.n()).done;){var o=t.value,i=Object(m.a)(o,2),s=i[0],c=i[1];a.has(s)||a.set(s,0),a.has(c)||a.set(c,0),a.set(c,a.get(c)+1)}}catch(l){r.e(l)}finally{r.f()}if(a.forEach(function(e,t){if(0===e){if(n)throw new Error("Invalid tree: multiple roots");n=t}}),void 0===n)throw new Error("Invalid tree: no root found");return n}function kt(e,t){var n,a=Ot(e),r=wt(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o[0]===a)return o[1]}}catch(i){r.e(i)}finally{r.f()}return null}function jt(e){var t=e.solutions;return function(e){var t,n={},a=wt(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r]?n[r]++:n[r]=1}}catch(o){a.e(o)}finally{a.f()}return n}(t.map(function(e){return e.tree}).map(function(e){return Ot(e)}).map(function(e,n){var a,r=wt(t[n].labeling);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o[0]===e)return o[1]}}catch(i){r.e(i)}finally{r.f()}return 0}))}function Bt(e,t){var n=new URLSearchParams(window.location.hash.split("?")[1]);n.set(e,t),window.location.href="#/viz?"+n.toString()}var Ct=function(e){var t,n=Object(a.useState)(0),o=Object(m.a)(n,2),i=o[0],s=o[1],c=Object(a.useState)(0),l=Object(m.a)(c,2),u=l[0],f=l[1],p=Object(a.useState)(0),_=Object(m.a)(p,2),v=_[0],h=_[1],g=Object(a.useState)(0),b=Object(m.a)(g,2),E=b[0],y=b[1],w=Object(a.useState)(0),P=Object(m.a)(w,2),O=P[0],k=P[1],B=Object(a.useState)(0),N=Object(m.a)(B,2),R=N[0],z=N[1],M=Object(a.useState)(0),L=Object(m.a)(M,2),x=L[0],D=L[1],A=Object(a.useState)(0),F=Object(m.a)(A,2),T=F[0],H=F[1],G=(t=sessionStorage.getItem("json_data"),_t(new Int8Array(I(t)))),q=JSON.parse(G),U=Object(a.useState)([]),W=Object(m.a)(U,2),$=W[0],J=W[1],Y=Object(a.useState)([]),K=Object(m.a)(Y,2),V=K[0],X=K[1],Z=Object(a.useState)(0),Q=Object(m.a)(Z,2),ee=Q[0],te=Q[1],ne=Object(a.useState)(!1),ae=Object(m.a)(ne,2),re=ae[0],oe=ae[1],ie=Object(a.useState)(!1),se=Object(m.a)(ie,2),ce=se[0],le=se[1],ue=Object(a.useState)([]),de=Object(m.a)(ue,2),me=de[0],fe=de[1],pe=Object(a.useState)([]),_e=Object(m.a)(pe,2),ve=_e[0],he=_e[1],ge=Object(a.useState)([]),be=Object(m.a)(ge,2),Ee=be[0],ye=be[1],Se=Object(a.useState)([]),we=Object(m.a)(Se,2),Pe=we[0],Oe=we[1];Object(a.useEffect)(function(){Ne()},[$,V,Ee,ve]);var ke=Object(a.useState)(q),je=Object(m.a)(ke,2),Be=je[0],Ce=je[1];function Ne(){for(var e=q,t={name:e.name,original:e.original,solutions:[],summary:{migration:[]}},n=0;n<e.solutions.length;n++){for(var a=e.solutions[n].tree,r=e.solutions[n].labeling,o=e.solutions[n].migration,i=kt(a,r),s=!1,c=0===ve.length||ve.includes(i),l=0!==Ee.length&&Ee.includes(i),u=0,m=0;m<o.length;m++){for(var f=o[m][0]+"->"+e.solutions[n].migration[m][1],p=0;p<$.length;p++)f===$[p]&&(s=!0);for(var _=0;_<V.length;_++)f===V[_]&&u++}if(!l&&c&&!s&&u===V.length){var v=JSON.parse(JSON.stringify(e.solutions[n]));t.solutions.push(v)}}for(var h=0;h<t.solutions.length;h++)for(var g=0;g<t.solutions[h].migration.length;g++){for(var b=!1,E=0;E<t.summary.migration.length;E++)t.summary.migration[E][0]===t.solutions[h].migration[g][0]&&t.summary.migration[E][1]===t.solutions[h].migration[g][1]&&(b=!0,t.summary.migration[E][2]+=1);if(!b){var y=[].concat(Object(d.a)(t.solutions[h].migration[g].slice(0,-1)),[1]);t.summary.migration.push(y)}}if(0===t.summary.migration.length){var S=Pe[Pe.length-1];return Oe(Pe.slice(0,-1)),"deleted edge"===S.slice(0,12)?J($.slice(0,-1)):"deleted root"===S.slice(0,12)?J(Ee.slice(0,-1)):"required root"===S.slice(0,13)?J(ve.slice(0,-1)):X(V.slice(0,-1)),qn(),-1}e.coloring&&(t.coloring=JSON.parse(JSON.stringify(e.coloring))),Ce(t),fe(jt(t));var w=t.solutions.map(function(e,t){return e.name});if(Re){var P=w.filter(function(e,t){return _n.solution_names.includes(e)}),O=w.filter(function(e,t){return bn.solution_names.includes(e)});P.includes(ft.name)||pt(t.solutions.filter(function(e){return e.name===P[0]})[0]),Re&&void 0!==gt&&!O.includes(gt.name)&&Et(t.solutions.filter(function(e){return e.name===O[0]})[0])}else w.includes(ft.name)||pt(t.solutions.filter(function(e){return e.name===w[0]})[0]),void 0===gt||w.includes(gt.name)||Et(t.solutions.filter(function(e){return e.name===w[0]})[0]);return 0}var Re=Array.isArray(Be.original),Ie=Object(a.useState)(Be.solutions.map(function(e,t){return e.name})),ze=Object(m.a)(Ie,2),Me=ze[0],Le=ze[1],xe=Object(a.useState)(Re?Be.original.map(function(e,t){return e.name}):[]),De=Object(m.a)(xe,2),Ae=De[0],Fe=De[1],Te=new URLSearchParams(window.location.hash.split("?")[1]),He=Te.get("labeling"),Ge=Te.get("labeling2"),qe=Object(a.useState)(He),Ue=Object(m.a)(qe,2),We=Ue[0],$e=Ue[1],Je=Object(a.useState)(Ge),Ye=Object(m.a)(Je,2),Ke=Ye[0],Ve=Ye[1],Xe=Object(a.useState)("true"===Te.get("rotated")),Ze=Object(m.a)(Xe,2),Qe=Ze[0],et=Ze[1],tt=Object(a.useState)("true"===Te.get("rotated2")),nt=Object(m.a)(tt,2),at=nt[0],rt=nt[1],ot=Object(a.useState)(Te.get("type")),it=Object(m.a)(ot,2),st=it[0],ct=it[1];"undefined"===He&&(Bt("labeling",Be.solutions[0].name),$e(Be.solutions[0].name)),"undefined"===Ge&&(Bt("labeling2",Be.solutions[0].name),Ve(Be.solutions[0].name)),sessionStorage.setItem("selected",JSON.stringify(new C(0))),sessionStorage.setItem("violations",JSON.stringify(new C(0)));var lt,ut,dt=Object(a.useState)(Be.solutions.filter(function(e){return e.name===We})[0]),mt=Object(m.a)(dt,2),ft=mt[0],pt=mt[1],vt=Object(a.useState)(Be.solutions.filter(function(e){return e.name===Ke})[0]),ht=Object(m.a)(vt,2),gt=ht[0],Et=ht[1],wt=Object(a.useState)(ft.tree),Pt=Object(m.a)(wt,2),Ot=Pt[0],Ct=Pt[1],Nt=Object(a.useState)(ft.labeling),Rt=Object(m.a)(Nt,2),It=Rt[0],zt=Rt[1],Mt=Object(a.useState)(ft.migration),Lt=Object(m.a)(Mt,2),xt=Lt[0],Dt=Lt[1],At=Object(a.useState)([]),Ft=Object(m.a)(At,2),Tt=Ft[0],Ht=Ft[1],Gt=Object(a.useState)([]),qt=Object(m.a)(Gt,2),Ut=qt[0],Wt=qt[1],$t=Object(a.useState)([]),Jt=Object(m.a)($t,2),Yt=Jt[0],Kt=Jt[1],Vt=Object(a.useState)([]),Xt=Object(m.a)(Vt,2),Zt=Xt[0],Qt=Xt[1],en=Object(a.useState)([]),tn=Object(m.a)(en,2),nn=tn[0],an=tn[1],rn=Object(a.useState)(Re?q.original[0].name:""),on=Object(m.a)(rn,2),sn=on[0],cn=on[1],ln=Object(a.useState)(Re?q.original[0].name:""),un=Object(m.a)(ln,2),dn=un[0],mn=un[1],fn=Object(a.useState)(Re?q.original[0]:""),pn=Object(m.a)(fn,2),_n=pn[0],vn=pn[1],hn=Object(a.useState)(Re?q.original[0]:""),gn=Object(m.a)(hn,2),bn=gn[0],En=gn[1],yn=!0;try{lt=Be.original.tree,ut=Be.original.labeling}catch($n){yn=!1}var Sn=Object(a.useState)(Be.coloring),wn=Object(m.a)(Sn,2),Pn=wn[0],On=wn[1],kn=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"];void 0!==Pn&&0!==Pn.length||On(ft.labeling.map(function(e){return e[1]}).filter(function(e,t,n){return n.indexOf(e)===t}).map(function(e,t){return[e,"".concat(kn[t%kn.length])]}));var jn={};Object(a.useEffect)(function(){for(var e=0;e<Pn.length;e++)jn[Pn[e][0]]=Pn[e][1]},[Pn]),Object(a.useEffect)(function(){Ne(),Ct(ft.tree),zt(ft.labeling),Dt(ft.migration),s(sessionStorage.getItem("mu")),f(sessionStorage.getItem("gamma")),h(sessionStorage.getItem("unobserved")),void 0!==ft.origin_node&&Qt(ft.origin_node)},[We]),Object(a.useEffect)(function(){if(Le(Be.solutions.map(function(e,t){return e.name})),h(sessionStorage.getItem("unobserved")),Re){var e=Be.solutions.map(function(e,t){return e.name}),t=Be.original.filter(function(t,n){return t.solution_names.some(function(t){return e.includes(t)})}).map(function(e,t){return e.name});Fe(t)}},[Be]),Object(a.useEffect)(function(){Me.includes(We)||(Bt("labeling",Me[0]),$e(Me[0])),Me.includes(Ke)||(Bt("labeling2",Me[0]),Ve(Me[0]))},[Me]);var Bn=Be.map,Cn=function(e){"dualviz"===st||"triviz"===st?(ct("dualviz"===st?"viz":"sumviz"),1===e&&(pt(gt),$e(Ke),et(at),Ct(gt.tree),zt(gt.labeling),Dt(gt.migration),vn(bn),cn(dn),void 0!==gt.origin_node&&Qt(ft.origin_node)),Bt("type","viz")):window.location="".concat(window.location.protocol,"//").concat(window.location.host,"/mach2-viz/#/")};Object(a.useEffect)(function(){gt&&(Ht(gt.tree),Wt(gt.labeling),Kt(gt.migration),void 0!==gt.origin_node&&an(ft.origin_node))},[gt]),Object(a.useEffect)(function(){y(sessionStorage.getItem("mu2")),k(sessionStorage.getItem("gamma2")),z(sessionStorage.getItem("unobserved2"))},[Tt]),Object(a.useEffect)(function(){te(function(e){return e+1})},[st]);var Nn=function(e){Mn.fireEvent("resetMigration",{index:e})},Rn=function(e){Mn.fireEvent("resetClonal",{index:e})};Object(a.useEffect)(function(){s(sessionStorage.getItem("mu")),f(sessionStorage.getItem("gamma")),h(sessionStorage.getItem("unobserved")),y(sessionStorage.getItem("mu2")),k(sessionStorage.getItem("gamma2")),z(sessionStorage.getItem("unobserved2")),D(sessionStorage.getItem("musum")),H(sessionStorage.getItem("gammasum")),Ne(),document.addEventListener("keydown",Wn);var e=document.getElementById("overlay");e&&e.parentElement.removeChild(e)},[]);var In=Object(a.useState)({listeners:[],addListener:function(e){this.listeners.push(e)},removeListener:function(e){this.listeners=this.listeners.filter(function(t){return t!==e})},fireEvent:function(e,t){this.listeners.forEach(function(n){n(e,t)})}}),zn=Object(m.a)(In,2),Mn=zn[0],Ln=(zn[1],Object(a.useState)(!1)),xn=Object(m.a)(Ln,2),Dn=xn[0],An=xn[1],Fn=Object(a.useState)(!1),Tn=Object(m.a)(Fn,2),Hn=Tn[0],Gn=Tn[1];function qn(){Gn(!Hn)}function Un(){An(!Dn)}function Wn(e){"/"===e.key&&Un()}return r.a.createElement("div",{className:"viz"},r.a.createElement(yt,{isPopupOpen:Dn,togglePopup:Un}),r.a.createElement(St,{isPopupOpen:Hn,togglePopup:qn}),"sumviz"!==st&&"triviz"!==st?r.a.createElement("div",{className:"panel tab_add2",onClick:function(e){"dualviz"===st?(ct("triviz"),Bt("type","triviz")):(ct("sumviz"),Bt("type","sumviz"))}},r.a.createElement("p",{className:"addpanelp"},r.a.createElement("b",null,"+"))):r.a.createElement(r.a.Fragment,null),"sumviz"===st||"triviz"===st?r.a.createElement(bt,{key:ee,type:st,setType:ct,insertParam:Bt,usedData:Be,coloring:Pn,muSum:x,gammaSum:T,evtBus:Mn,onDeleteSummaryEdge:function(e){var t=e.split("->"),n=Object(m.a)(t,2),a=n[0],r=n[1];if("roots"!==a){if(V.includes(e)){var o=V.filter(function(t){return t!==e});X(o),Oe([].concat(Object(d.a)(Pe),["deletedrequired edge ".concat(e)]))}else Oe([].concat(Object(d.a)(Pe),["deleted edge ".concat(e)]));J([].concat(Object(d.a)($),[e]))}else Oe([].concat(Object(d.a)(Pe),["deleted root ".concat(r)])),ye([].concat(Object(d.a)(Ee),[r]))},onRequireSummaryEdge:function(e){var t=e.split("->"),n=Object(m.a)(t,2),a=n[0],r=n[1];if("roots"!==a)if(V.includes(e)){var o=V.filter(function(t){return t!==e});X(o),Oe([].concat(Object(d.a)(Pe),["relaxed edge ".concat(e)]))}else Oe([].concat(Object(d.a)(Pe),["required edge ".concat(e)])),X([].concat(Object(d.a)(V),[e]));else Oe([].concat(Object(d.a)(Pe),["required root ".concat(r)])),he([].concat(Object(d.a)(ve),[r]))},clearData:function(){J([]),X([]),ye([]),he([]),Oe([])},roots:me,deletedEdges:$,requiredEdges:V,deletedRoots:Ee,requiredRoots:ve,setDeletedEdges:J,setRequiredEdges:X,setDeletedRoots:ye,setRequiredRoots:he,filterStack:Pe,setFilterStack:Oe}):r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"panel info ".concat("dualviz"===st?"one":"sumviz"===st?"one two":"triviz"===st?"tri two":"")},r.a.createElement("div",{className:"titlewrapper"},Re?r.a.createElement("label",{className:"titleelem left",htmlFor:"inputs"},r.a.createElement("p",null,r.a.createElement("b",null,Re&&"triviz"===st?"":"Input Tree: ",r.a.createElement("select",{name:"inputs",id:"inputs",onChange:function(e){Bt("input",e.target.value),cn(e.target.value),Be.original.forEach(function(t){if(t.name===e.target.value){var n=t.solution_names.filter(function(e){return Me.includes(e)})[0];vn(t),$e(n),pt(Be.solutions.filter(function(e){return e.name===n})[0])}})},value:sn},Ae.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))):r.a.createElement(r.a.Fragment,null),r.a.createElement("label",{className:"titleelem end",htmlFor:"labelings"},r.a.createElement("p",null,r.a.createElement("b",null,Re&&"triviz"===st?"":"Full Labeling: ",r.a.createElement("select",{name:"labelings",id:"labelings",onChange:function(e){Bt("labeling",e.target.value),$e(e.target.value),pt(Be.solutions.filter(function(t){return t.name===e.target.value})[0])},value:We},Me.filter(function(e){return!Re||_n.solution_names.includes(e)}).map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),"dualviz"!==st&&"triviz"!==st&&"sumviz"!==st?r.a.createElement("p",{className:"titleelem end"},r.a.createElement("b",null,"Press [/] for help \xa0\xa0")):r.a.createElement(r.a.Fragment,null),"sumviz"!==st?r.a.createElement("span",{onClick:Cn.bind(null,1),style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"panelclosebutton"},r.a.createElement("b",null,"[X]"))):r.a.createElement(r.a.Fragment,null)),r.a.createElement("div",{className:void 0===Bn?"leftcolumn nolegend":"leftcolumn"},r.a.createElement("div",{className:"panel migration top ".concat("dualviz"===st||"triviz"===st?"left":"")},r.a.createElement("p",{className:"paneltitle"},r.a.createElement("b",null,"Migration Graph")),r.a.createElement("p",{className:"paneltitle unobserved"},"unobserved clones: ".concat(v)),r.a.createElement("p",{className:"paneltitle mu"},"migrations: ".concat(i)),r.a.createElement("p",{className:"paneltitle gamma"},"comigrations: ".concat(u)),r.a.createElement("button",{type:"button",className:"paneltitle button",onClick:function(e){var t="true"===Te.get("rotated");Bt("rotated",!t),et(!t)}},"Rotate"),r.a.createElement("button",{type:"button",className:"paneltitle button under",onClick:function(){return Nn(1)}},"Reset"),r.a.createElement(j,{key:ee,tree:Ot,labeling:It,coloring:Pn,migration:xt,evtbus:Mn,rotated:Qe})),r.a.createElement("div",{className:"panel migration ".concat("dualviz"===st||"triviz"===st?"left":"")},r.a.createElement("p",{className:"paneltitle"},yn?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:{fontWeight:re?"normal":"bold"},onClick:function(){re&&oe(!re)}},"Refined Tree")," ","|"," ",r.a.createElement("button",{style:{fontWeight:re?"bold":"normal"},onClick:function(){re||oe(!re)}},"Clonal Tree")):r.a.createElement("b",null,"Clonal Tree")),r.a.createElement("button",{type:"button",className:"paneltitle button clonal",onClick:function(){return Rn(1)}},"Reset"),r.a.createElement(S,{key:ee,tree:re?Re?_n.tree:lt:Ot,labeling:re?Re?_n.labeling:ut:It,coloring:Pn,evtbus:Mn,rightcol:"sumviz"===st||"triviz"===st,index:1,clonalMap:Zt,clonal:re,originalTree:lt,originalLabeling:ut})))),"dualviz"===st||"triviz"===st?r.a.createElement("div",{className:"panel info ".concat("dualviz"===st?"one two":"tri three")},r.a.createElement("div",{className:"titlewrapper"},Re?r.a.createElement("label",{className:"titleelem left",htmlFor:"inputs"},r.a.createElement("p",null,r.a.createElement("b",null,Re&&"triviz"===st?"":"Input Tree: ",r.a.createElement("select",{name:"inputs",id:"inputs",onChange:function(e){Bt("input2",e.target.value),mn(e.target.value),Be.original.forEach(function(t){if(t.name===e.target.value){var n=t.solution_names.filter(function(e){return Me.includes(e)})[0];En(t),Ve(n),Et(Be.solutions.filter(function(e){return e.name===n})[0])}})},value:dn},Ae.map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))):r.a.createElement(r.a.Fragment,null),r.a.createElement("label",{className:"titleelem left",htmlFor:"labelings"},r.a.createElement("p",null,r.a.createElement("b",null,Re&&"triviz"===st?"":"Full Labeling: ",r.a.createElement("select",{name:"labelings",id:"labelings",onChange:function(e){Bt("labeling2",e.target.value),Ve(e.target.value),Et(Be.solutions.filter(function(t){return t.name===e.target.value})[0])},value:Ke},Me.filter(function(e){return!Re||bn.solution_names.includes(e)}).map(function(e){return r.a.createElement("option",{key:e,value:e},e)}))))),r.a.createElement("span",{onClick:Cn.bind(null,2),style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"panelclosebutton"},r.a.createElement("b",null,"[X]")))),r.a.createElement("div",{className:void 0===Bn?"leftcolumn nolegend":"leftcolumn"},r.a.createElement("div",{className:"panel migration top ".concat("dualviz"===st||"triviz"===st?"left":"")},r.a.createElement("p",{className:"paneltitle unobserved"},"unobserved clones: ".concat(R)),r.a.createElement("p",{className:"paneltitle"},r.a.createElement("b",null,"Migration Graph")),r.a.createElement("p",{className:"paneltitle mu"},"migrations: ".concat(E)),r.a.createElement("p",{className:"paneltitle gamma"},"comigrations: ".concat(O)),r.a.createElement("button",{type:"button",className:"paneltitle button",onClick:function(e){var t="true"===Te.get("rotated2");Bt("rotated2",!t),rt(!t)}},"Rotate"),r.a.createElement("button",{type:"button",className:"paneltitle button under",onClick:function(){return Nn(2)}},"Reset"),r.a.createElement(j,{key:ee,tree:Tt,labeling:Ut,coloring:Pn,migration:Yt,evtbus:Mn,rightcol:!0,rotated:at})),r.a.createElement("div",{className:"panel migration ".concat("dualviz"===st||"triviz"===st?"left":"")},r.a.createElement("p",{className:"paneltitle"},yn?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{style:{fontWeight:ce?"normal":"bold"},onClick:function(){ce&&le(!ce)}},"Refined Tree")," ","|"," ",r.a.createElement("button",{style:{fontWeight:ce?"bold":"normal"},onClick:function(){ce||le(!ce)}},"Clonal Tree")):r.a.createElement("b",null,"Clonal Tree")),r.a.createElement("button",{type:"button",className:"paneltitle button clonal",onClick:function(){return Rn(2)}},"Reset"),r.a.createElement(S,{key:ee,tree:ce?Re?bn.tree:lt:Tt,labeling:ce?Re?bn.labeling:ut:Ut,coloring:Pn,evtbus:Mn,rightcol:!0,index:2,clonalMap:nn,clonal:ce,originalTree:lt,originalLabeling:ut})))):r.a.createElement(r.a.Fragment,null),"dualviz"!==st&&"triviz"!==st?r.a.createElement("div",{className:"panel tab_add",onClick:function(e){"sumviz"===st?(Bt("type","triviz"),ct("triviz")):(Bt("type","dualviz"),ct("dualviz")),Bt("labeling2",We),Ve(We),Et(Be.solutions.filter(function(e){return e.name===We})[0]),y(sessionStorage.getItem("mu2")),k(sessionStorage.getItem("gamma2")),z(sessionStorage.getItem("unobserved2"))}},r.a.createElement("p",{className:"addpanelp"},r.a.createElement("b",null,"+"))):r.a.createElement(r.a.Fragment,null))},Nt=n(68),Rt=n(153),It=n(154),zt=n.n(It),Mt=n(383),Lt=n(155),xt=n.n(Lt),Dt=n(45);function At(){At=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(B){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),s=new O(r||[]);return a(i,"_invoke",{value:y(e,n,s)}),i}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(B){return{type:"throw",arg:B}}}e.wrap=l;var d={};function m(){}function f(){}function p(){}var _={};c(_,o,function(){return this});var v=Object.getPrototypeOf,h=v&&v(v(k([])));h&&h!==t&&n.call(h,o)&&(_=h);var g=p.prototype=m.prototype=Object.create(_);function b(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function E(e,t){var r;a(this,"_invoke",{value:function(a,o){function i(){return new t(function(r,i){!function a(r,o,i,s){var c=u(e[r],e,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?t.resolve(d.__await).then(function(e){a("next",e,i,s)},function(e){a("throw",e,i,s)}):t.resolve(d).then(function(e){l.value=e,i(l)},function(e){return a("throw",e,i,s)})}s(c.arg)}(a,o,r,i)})}return r=r?r.then(i,i):i()}})}function y(e,t,n){var a="suspendedStart";return function(r,o){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw o;return j()}for(n.method=r,n.arg=o;;){var i=n.delegate;if(i){var s=S(i,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var c=u(e,t,n);if("normal"===c.type){if(a=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a="completed",n.method="throw",n.arg=c.arg)}}}function S(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var r=u(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,d;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:j}}function j(){return{value:void 0,done:!0}}return f.prototype=p,a(g,"constructor",{value:p,configurable:!0}),a(p,"constructor",{value:f,configurable:!0}),f.displayName=c(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,c(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(E.prototype),c(E.prototype,i,function(){return this}),e.AsyncIterator=E,e.async=function(t,n,a,r,o){void 0===o&&(o=Promise);var i=new E(l(t,n,a,r),o);return e.isGeneratorFunction(n)?i:i.next().then(function(e){return e.done?e.value:i.next()})},b(g),c(g,s,"Generator"),c(g,o,function(){return this}),c(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;P(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}var Ft=function(){var e=Object(a.useState)(!1),t=Object(m.a)(e,2),o=t[0],i=t[1],c=Object(a.useState)({}),l=Object(m.a)(c,2),u=l[0],d=l[1],f=Object(a.useState)([]),p=Object(m.a)(f,2),_=p[0],v=p[1],h=Object(a.useState)([]),g=Object(m.a)(h,2),b=g[0],E=g[1],y=Object(a.useState)(!1),S=Object(m.a)(y,2),w=S[0],P=S[1],O=Object(a.useState)(0),k=Object(m.a)(O,2),j=(k[0],k[1]),B=function(){var e=Object(Nt.a)(At().mark(function e(t){var a;return At().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(375)("./".concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),console.error("An error occurred while importing:",e.t0),e.t0;case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t=Dt.find(function(t){return t.name===e});return t?t.dataset:null};if(Object(a.useEffect)(function(){(function(){var e=Object(Nt.a)(At().mark(function e(){var t,n,a,r,o;return At().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Dt.map(function(){var e=Object(Nt.a)(At().mark(function e(t){var n;return At().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t.path);case 2:return n=e.sent,e.abrupt("return",{name:t.name,module:n.default});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:n=e.sent,a={},r=[],o=[],n.forEach(function(e){var t=e.name,n=e.module;a[t]=n,r.push(t),o.push(N(t))}),d(a),v(r),E(o),i(!0);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()().catch(function(e){console.error("Error loading components:",e)})},[]),!o)return r.a.createElement("div",{className:"panel"},r.a.createElement("h1",null,"Loading..."));var R=[],I=!0;sessionStorage.setItem("selected",JSON.stringify(new C(0))),sessionStorage.setItem("violations",JSON.stringify(new C(0)));for(var z=function(e){L=_[e],x=b[e],D=I?"#EBEBEB":"#A3A3A3",console.log(L),A=Rt[L],console.log(A),R.push(r.a.createElement(s.b,{className:"patient-link",onClick:function(){var t=document.createElement("div");t.id="overlay";var n=document.createElement("div");n.id="loading-container";var a=document.createElement("h1");a.textContent="Loading...",n.appendChild(a),t.appendChild(n),document.body.appendChild(t),setTimeout(function(){sessionStorage.setItem("json_data",pt(JSON.stringify(u[_[e]]))),window.location.href="#/".concat(A)},100)}},r.a.createElement("div",{className:"patient-container"},r.a.createElement("div",{className:"patientitem",style:{backgroundColor:D}},r.a.createElement("p",null,r.a.createElement("b",null,x))),r.a.createElement("div",{className:"patientitem2",style:{backgroundColor:D}},r.a.createElement("p",{className:"leftli"},r.a.createElement("b",null,L)),r.a.createElement("img",{className:"rightli",src:zt.a,alt:"download",onClick:function(){return t="https://raw.githubusercontent.com/vikramr2/machina-viz/main/src/samples/".concat(_[e],"/").concat(_[e],".json"),n="".concat(_[e],".json"),void Mt.a.get(t,{responseType:"blob"}).then(function(e){xt()(e.data,n)});var t,n}}))))),I=!I},M=0;M<_.length;M++){var L,x,D,A;z(M)}var F=function(e){var t=document.createElement("div");t.id="overlay";var n=document.createElement("div");n.id="loading-container";var a=document.createElement("h1");a.textContent="Loading...",n.appendChild(a),t.appendChild(n),document.body.appendChild(t),setTimeout(function(){var t,n=new FileReader,a=e.target.files[0];n.onload=function(e){var n=e.target.result;t=n;var a=JSON.parse(t).solutions.map(function(e,t){return e.name});sessionStorage.setItem("json_data",pt(t)),window.location=window.location+"viz?labeling=".concat(a[0])},n.readAsText(a)},100)};return r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"panel home-panel"},r.a.createElement("div",{className:"left-column-container"},r.a.createElement("div",{className:"home-column-1"},r.a.createElement("h1",null,r.a.createElement("b",null,"Welcome to MACH2!")),r.a.createElement("div",{className:"about-text"},r.a.createElement("p",null,r.a.createElement("b",null,"A lightweight visualizer for MACH2, ",r.a.createElement("a",{href:"https://www.nature.com/articles/s41588-018-0106-z"},"MACHINA's")," sequel.")," Use this visualizer to examine a solution space for the parsimonious migration history problem and its respective summary for a given patient. Examples are provided below. You can also upload a JSON file to view a custom input. See the Instructions page for how to use this website:")),r.a.createElement(s.b,{to:"about",style:{textDecoration:"none",color:"black"}},r.a.createElement("button",{className:"about-button"},"Instructions"))),r.a.createElement("div",{className:"home-column-1-1 ".concat(w?"drag-over":""),onDrop:function(e){e.preventDefault(),e.stopPropagation(),P(!1),j(0),console.log("Drop event triggered");var t=e.dataTransfer.files;if(console.log("Files dropped:",t),t&&t.length>0){var n=t[0];if(console.log("File type:",n.type,"File name:",n.name),"application/json"===n.type||n.name.toLowerCase().endsWith(".json")){var a={target:{files:t}};console.log("Calling handleChange"),F(a)}else alert("Please drop a JSON file.")}},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),j(function(e){return e+1}),P(!0)},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),j(function(e){var t=e-1;return 0===t&&P(!1),t})}},w&&r.a.createElement("div",{className:"drag-overlay"},r.a.createElement("div",{className:"drag-overlay-text"},r.a.createElement("p",null,"Drop file here"))),r.a.createElement("h3",null,"Upload a JSON file"),r.a.createElement("p",{className:"center-text"},"To upload your own MACH2-generated JSON file, click the (+) button, or drag and drop a JSON file here"),r.a.createElement("div",{className:"upload-container"},r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"json_upload",name:"json_upload",accept:"application/JSON",onChange:F}),r.a.createElement("label",{htmlFor:"json_upload",className:"upload-label"},r.a.createElement("div",{id:"addnew",className:"dot"},r.a.createElement("h1",{className:"plus"},"+"),r.a.createElement("span",{className:"tooltiptext"},r.a.createElement("b",null,"Upload Patient JSON")))))))),r.a.createElement("div",{className:"home-column-2"},r.a.createElement("div",{className:"patient-list-title-container"},r.a.createElement("h3",null,"Examples"),r.a.createElement("div",{className:"patient-container"},r.a.createElement("div",{className:"patientitem",style:{backgroundColor:"#717171"}},r.a.createElement("p",{className:"datasettitle",style:{color:"black"}},r.a.createElement("b",null,"Dataset"))),r.a.createElement("div",{className:"patientitem",style:{backgroundColor:"#717171"}},r.a.createElement(s.b,{to:A,style:{textDecoration:"none",color:"black"}},r.a.createElement("p",{className:"datasettitle",style:{color:"black"}},r.a.createElement("b",null,"Patient")))))),r.a.createElement("div",{className:"patient-list-container"},R.map(function(e,t){return r.a.createElement(r.a.Fragment,{key:t},e)})))))},Tt=n(6),Ht=n(9);var Gt=function(){return Object(Ht.a)({basename:"/mach2-viz/#"}),r.a.createElement("div",{className:"App"},r.a.createElement(Tt.c,null,r.a.createElement(Tt.a,{path:"/about"},r.a.createElement(u,null)),r.a.createElement(Tt.a,{path:"/viz"},r.a.createElement(Ct,null)),r.a.createElement(Tt.a,{path:"/mach2-viz/about"},r.a.createElement(u,null)),r.a.createElement(Tt.a,{path:"/mach2-viz/viz"},r.a.createElement(Ct,null)),r.a.createElement(Tt.a,{path:"/mach2-viz"},r.a.createElement(Ft,null)),r.a.createElement(Tt.a,{exact:!0,path:"/"},r.a.createElement(Ft,null))))},qt=function(e){e&&e instanceof Function&&n.e(26).then(n.bind(null,382)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)})};i.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(s.a,{basename:"/mach2-viz"},r.a.createElement(Gt,null)))),qt()},45:function(e){e.exports=[{name:"lung_CRUK0063",dataset:"TRACERx",path:"lung_CRUK0063.json"},{name:"ovarian_10_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_10_ROv.json"},{name:"ovarian_1_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_1_LOv.json"},{name:"ovarian_1_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_1_ROv.json"},{name:"ovarian_2_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_2_ROv.json"},{name:"ovarian_3_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_3_LOv.json"},{name:"ovarian_3_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_3_ROv.json"},{name:"ovarian_4_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_4_LOv.json"},{name:"ovarian_4_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_4_ROv.json"},{name:"ovarian_7_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_7_LOv.json"},{name:"ovarian_7_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_7_ROv.json"},{name:"ovarian_9_LOv",dataset:"McPherson_et_al_2016",path:"ovarian_9_LOv.json"},{name:"ovarian_9_ROv",dataset:"McPherson_et_al_2016",path:"ovarian_9_ROv.json"},{name:"prostate_10",dataset:"Gundem_et_al_2015",path:"prostate_10.json"},{name:"prostate_12",dataset:"Gundem_et_al_2015",path:"prostate_12.json"},{name:"prostate_17",dataset:"Gundem_et_al_2015",path:"prostate_17.json"},{name:"prostate_21",dataset:"Gundem_et_al_2015",path:"prostate_21.json"},{name:"prostate_22",dataset:"Gundem_et_al_2015",path:"prostate_22.json"},{name:"prostate_24",dataset:"Gundem_et_al_2015",path:"prostate_24.json"},{name:"prostate_29",dataset:"Gundem_et_al_2015",path:"prostate_29.json"},{name:"prostate_31",dataset:"Gundem_et_al_2015",path:"prostate_31.json"},{name:"prostate_32",dataset:"Gundem_et_al_2015",path:"prostate_32.json"},{name:"prostate_34",dataset:"Gundem_et_al_2015",path:"prostate_34.json"},{name:"breast_1",dataset:"Gundem_et_al_2015",path:"breast_1.json"},{name:"breast_7",dataset:"Gundem_et_al_2015",path:"breast_7.json"}]}},[[181,28,27]]]);
//# sourceMappingURL=main.aa669c4f.chunk.js.map