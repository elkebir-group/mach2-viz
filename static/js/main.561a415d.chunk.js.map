{"version":3,"sources":["assets/clonal.jpeg","assets/migration.jpeg","assets/download.png","components/About.js","components/ClonalTree.js","components/Migration.js","utils/DefaultDict.js","components/MigrationSummary.js","components/Viz.js","components/Home.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","__webpack_require__","p","About","React","createElement","className","Link","to","style","textDecoration","color","columns","href","class","src","clonal","alt","migration","id","Cytoscape","use","COSEBilkent","dagre","ClonalTree","props","_useState","useState","_useState2","_slicedToArray","width","_useState3","_useState4","height","hexColorRegex","colorPalette","ncolors","length","getColor","label","coloring","map","value","index","filter","item","undefined","test","parseInt","onlyUnique","array","indexOf","findLabel","node","labeling","nodes","tree","_","flat","data","type","edges","source","target","concat","_useState5","_useState6","graphData","setGraphData","useEffect","myCyRef","styleSheet","selector","backgroundColor","overlay-padding","z-index","text-outline-width","fontSize","border-width","border-color","border-opacity","background-color","text-outline-color","line-color","target-arrow-color","target-arrow-shape","curve-style","push","line-fill","line-gradient-stop-colors","line-gradient-stop-positions","layout","name","fit","directed","padding","animate","animationDuration","avoidOverlap","nodeDimensionsIncludeLabels","ready","evtbus","addListener","eventName","eventData","getElementById","nodeId","$","css","trigger","useMemo","CytoscapeComponent","elements","normalizeElements","zoomingEnabled","maxZoom","minZoom","autounselectify","boxSelectionEnabled","stylesheet","cy","on","event","div","document","setAttribute","innerHTML","canvas","getElementsByTagName","position","top","renderedPosition","left","rightcol","body","appendChild","labeltag","querySelector","opacity","zIndex","fontWeight","fireEvent","contains","removeChild","sink","abc","console","log","Migration","_step","clsource","cltarget","_iterator","_createForOfIteratorHelper","entries","s","n","done","_ref","_ref2","i","err","e","f","_step2","_iterator2","_ref3","_ref4","rotated","shape","text-valign","text-halign","queryParameters","URLSearchParams","window","location","hash","split","get","circle","transform","x","y","edge","mu","gamma","sessionStorage","setItem","DefaultDict","defaultVal","_classCallCheck","this","Proxy","MigrationSummary","filterOut","filterJson","JSON","parse","getItem","title","key","_toConsumableArray","Set","_i","_filterOut","search","setEvtBus","evt","insertParam","urlParams","set","toString","handleKeyPress","alert","Viz","useHistory","setMu","setGamma","mu2","setMu2","_useState7","_useState8","gamma2","setGamma2","_useState9","_useState10","muSum","setMuSum","_useState11","_useState12","gammaSum","setGammaSum","jsonContents","wholeData","labelName","labelName2","selected","_useState13","_useState14","setLabeling","_useState15","_useState16","labeling2","setLabeling2","_useState17","_useState18","rotate","setRotate","_useState19","_useState20","rotate2","setRotate2","_useState21","_useState22","setType","stringify","migrationSummary","_useState23","_useState24","setData","_useState25","_useState26","data2","setData2","_useState27","_useState28","setTree","_useState29","_useState30","tree_labeling","setTreeLabeling","_useState31","_useState32","setMigration","_useState33","_useState34","tree2","setTree2","_useState35","_useState36","tree_labeling2","setTreeLabeling2","_useState37","_useState38","migration2","setMigration2","self","labelnames","coord_map","closeTab","tabIndex","protocol","host","addEventListener","_useState39","listeners","callback","removeListener","listener","forEach","_useState40","evtBus","eventBus2","onClick","Fragment","for","onChange","l","bind","rotated2","Home","json_dict","A7","A10","A22","A29","A31","A32","patient1","patient2","patient3","patient4","patient7","patient9","patient10","tracerx_res","tracerx_res_old","tracerx_res_new","default_patients","default_dirs","div_elements","which_color","_loop","current_directory","current_color","link","URLs","current_patient","download","url","filename","axios","responseType","then","res","fileDownload","elem","accept","json_contents","reader","FileReader","file","files","onload","readerEvt","jsonString","result","readAsText","App","createBrowserHistory","basename","Switch","Route","path","exact","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","createRoot","render","StrictMode","Router"],"mappings":"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","file":"static/js/main.561a415d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/clonal.34a92a85.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/migration.11b02e60.jpeg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAj0lEQVR4nO2USwrEIBAF6xJp5kg5dyQM+aySRfa5iMNAC0ISBE0v8nnQKCpVoI3wtLSAsxQ4oLEUXD8d8LUUeK1XcKMraoARkB2B6F5RV/UKnBUYBKJrXs9kRyJQGON5EBelAqYIHmoBPqXwI0kWPPUNCDBoSeLHdZYt6I845oJ15yF9Zv1Zm9QnSVZl3SQ/PmdfIXJmioIAAAAASUVORK5CYII=\"","import React, { useState, useEffect } from 'react';\nimport {\n    BrowserRouter as Router,\n    Link\n  } from \"react-router-dom\";\n\n// Figures\nimport clonal from \"../assets/clonal.jpeg\";\nimport migration from \"../assets/migration.jpeg\";\n\n/**\n * This page is simply a description of the application with a contact list\n */\nfunction About() {\n    return (\n        <div className='about'>\n            <div className='panel about'>\n                <div className='aboutcontainer'>\n                    <p className='backarrow'><b><Link to=\"\" style={{ textDecoration: 'none', color: 'black'}}>&#8592; home</Link></b></p>\n                    <h1 className='abouttitle'>Enter MACH2</h1>\n                </div>\n                <p><b>MACH2</b> is a personalized tool to visualize cancer metastasis. It is a sequel to MACHINA, an algorithm designed to solve the Parsimonious Migration History Problem.</p>\n                <p><b>The Parsimonious Migration History Problem:</b> Given current oncological mutations at their respective anatomical sites, how can we infer their mutation tree as well as a network of anatomical sites inferring metastases?</p>\n                <p><b>Visualization Format:</b> All structures have directed edges.</p>\n                <ul style={{columns: 1}}>\n                    <li><p><b>Clonal Tree (Left):</b> This is a tree of oncological mutations. Each node in this tree is a variant allele in the cancer patient. Each edge is a mutation from one variant to another.</p></li>\n                    <li><p><b>Migration Graph (Right):</b> Each node in the clonal tree has a tag with an anatomical location inferred using <a href='https://en.wikipedia.org/wiki/Maximum_parsimony_(phylogenetics)'>Maximum Parsimony</a>. The clonal tree is compressed into a migration graph where each node represents an anatomical location, and each edge is a metastasis (e.g. a migration) between two anatomical locations.</p></li>\n                    <li><p><b>Summary:</b> You can also view a summary migration graph that is computed by unioning edges across migration graphs in each solution. Edges are weighted by the number of solutions they appear in.</p></li>\n                </ul>\n                <div class=\"image-container\">\n                    <img className=\"aboutimg\" src={clonal} alt=\"Image 1\"/>\n                    <img className=\"aboutimg\" src={migration} alt=\"Image 2\"/>\n                </div>\n                <p><b>Generating inputs: </b>We have provided a <a href=\"https://github.com/vikramr2/json_compression\">json compression</a> program that takes an output directory from MACHINA that contains <b>.tree</b> files and their corresponding <b>.labeling</b> files, and returns a <b>.json</b> file that can be used as input for this visualizer. For more information, see this <a href='https://github.com/vikramr2/json_compression/blob/main/README.md'>README</a>. Output from any algorithm that solves the PMH problem will be accepted provided that it is in a JSON format as shown in the README.</p>\n                <p><b>Questions? Contact</b></p>\n                <ul id=\"singlecol\">\n                    <li><p>Vikram Ramavarapu (<a href=\"mailto:vikramr2@illinois.edu\">vikramr2@illinois.edu</a>)</p></li>\n                    <li><p>Roman Mineyev (<a href=\"mailto:mineyev2@illinois.edu\">mineyev2@illinois.edu</a>)</p></li>\n                    <li><p>Akul Joshi (<a href=\"mailto:akulj2@illinois.edu\">akulj2@illinois.edu</a>)</p></li>\n                    <li><p>Mrinmoy Roddur (<a href=\"mailto:mroddur2@illinois.edu\">mroddur2@illinois.edu</a>)</p></li>\n                    <li><p>Mohammed El-Kebir (<a href=\"mailto:melkebir@illinois.edu\">melkebir@illinois.edu</a>)</p></li>\n                </ul>\n            </div>\n        </div>\n    );\n}\n\nexport default About;","import React, { useEffect, useMemo } from 'react'\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\n// Load Cytoscape submodules\nCytoscape.use(COSEBilkent);\nCytoscape.use(dagre);\n\n/** This component contains the clonal tree showing the tumor phylogeny\n * \n * @param {*} props The JSX props used on this tag\n *  - coloring: (array) The coloring scheme of the tree\n *  - labeling: (array) The anatomical labels of each clone\n *  - tree:     (array) The tree topology as an edgelist\n *  - evtbus:   (obj) The event handler that is shared between graph structures\n *  - rightcol: (boolean) is this tree in the right column (for dual visualizations)\n * @returns The JSX/HTML structure of the component\n */\nfunction ClonalTree(props) {\n  const [width, setWith] = useState(\"100%\");\n  const [height, setHeight] = useState(\"100%\");\n\n  // Regex to check whether a string is a hex value representing a color\n  var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n  /* Default color palette\n  \n  Colorings can be specified as either:\n  - [node, index (int)]       : The second element is an index (mod length) chosen from the default color palette\n  - [node, hex color (string)]: The second element is a custom hex color */\n  const colorPalette = [\n    \"#a6cee3\",\n    \"#1f78b4\",\n    \"#b2df8a\",\n    \"#33a02c\",\n    \"#fb9a99\",\n    \"#e31a1c\",\n    \"#fdbf6f\",\n    \"#ff7f00\",\n    \"#cab2d6\",\n    \"#6a3d9a\",\n    \"#ffff99\",\n    \"#b15928\"\n  ]\n  const ncolors = colorPalette.length;\n\n  // DEFINE FUNCTIONS HERE\n\n  /** Given a clonal label, find its corresponding color in the graph\n   * \n   * @param {*} label (string) the clonal label\n   * @returns the hex value string of the color corresponding to the label\n   */\n  function getColor(label) {\n    if (!label) return '#000';\n    let color = props.coloring.map((value, index) => {\n      if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n    return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n  }\n\n  /** Filter an array into only unique elements*/\n  function onlyUnique(value, index, array) {\n    return array.indexOf(value) === index;\n  }\n\n  /** Find corresponding anatomical label of clone\n   * \n   * @param {*} node clone ID\n   * @returns anatomical location of clone\n   */\n  function findLabel(node) {\n    return props.labeling.map((value, index) => {\n      if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n  }\n\n  // Define the nodes and edges of the graph\n  let nodes = props.tree.map(array => {\n    // Entry structure in tree [u, v, time] s.t. time is the temporal value of the clonal mutation \n    // Create a new array excluding the third element since \n    return array.filter((_, index) => index !== 2);\n  }).flat().filter(onlyUnique).map((value, index) => {\n    return { data: { id: value, label: findLabel(value), type: \"ip\"} };\n  });\n  let edges = props.tree.map((value, index) => {\n    return { data: { source: value[0], target: value[1], label: `${value[0]}->${value[1]}`, migration: `${findLabel(value[0])}->${findLabel(value[1])}`} }\n  })\n\n  // Set the graph as a React state\n  const [graphData, setGraphData] = useState({\n    nodes: nodes,\n    edges: edges\n  });\n\n  // Handle graph changes (this is for when we switch the solution)\n  useEffect(() => {\n    // Reset nodes and labeling\n    nodes = props.tree.map(array => {\n      return array.filter((_, index) => index !== 2);\n    }).flat().filter(onlyUnique).map((value, index) => {\n      return { data: { id: value, label: findLabel(value), type: \"ip\"} }\n    });\n\n    edges = props.tree.map((value, index) => {\n      return { data: { source: value[0], target: value[1], label: `${value[0]}->${value[1]}`, migration: `${findLabel(value[0])}->${findLabel(value[1])}`} }\n    })\n\n    // Set the graph state\n    setGraphData({\n      nodes: nodes,\n      edges: edges\n    })\n  \n  // Set this change dependent on the tree or labeling change\n  }, [props.tree, props.labeling])\n\n  // This is like CSS for the Cytoscape graph\n  let styleSheet = [\n    {\n      selector: \"node\",\n      style: {\n        backgroundColor: \"#4a56a6\",\n        width: 15,\n        height: 15,\n        label: \"data(id)\",\n        \"overlay-padding\": \"6px\",\n        \"z-index\": \"10\",\n        \"text-outline-width\": \"2px\",\n        color: \"white\",\n        fontSize: 15\n      }\n    },\n    {\n      selector: \"node:selected\",\n      style: {\n        \"border-width\": \"6px\",\n        \"border-color\": \"#AAD8FF\",\n        \"border-opacity\": \"0.5\",\n        \"background-color\": \"#77828C\",\n        width: 50,\n        height: 50,\n\n        //text props\n        \"text-outline-color\": \"#77828C\",\n        \"text-outline-width\": 8\n      }\n    },\n    {\n      selector: \"edge\",\n      style: {\n        width: 3,\n        \"line-color\": \"#AAD8FF\",\n        \"target-arrow-color\": \"#6774cb\",\n        \"target-arrow-shape\": \"triangle\",\n        \"curve-style\": \"bezier\"\n      }\n    }\n  ];\n\n  // Set the coloring dynamically in the stylesheet using the coloring props\n  props.coloring.map((value, index) => {\n    styleSheet.push({\n      selector: `node[label='${value[0]}']`,\n      style: {\n        backgroundColor: hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n      }\n    })\n  })\n\n  // Style the edges dynamically via gradients based on the node colors\n  edges.map((value, index) => {\n    let source = value.data.source;\n    let target = value.data.target;\n    styleSheet.push({\n      selector: `edge[label='${source}->${target}']`,\n      style: {\n        'line-fill': 'linear-gradient',\n        'line-gradient-stop-colors': `${getColor(findLabel(source))} ${getColor(findLabel(target))}`,\n        'line-gradient-stop-positions': '33% 66%',\n        \"target-arrow-color\": `${getColor(findLabel(target))}`\n      }\n    })\n  })\n\n  // The layout encompasses node positions on load, animations, and events\n  let myCyRef;\n  const layout = {\n    name: \"dagre\",  // Dagre: Layout graph like a DAG (this is good for trees!)\n    fit: true,\n    // circle: true,\n    directed: true,\n    padding: 10,\n    // spacingFactor: 1.5,\n    animate: true,\n    animationDuration: 1000,\n    avoidOverlap: true,\n    nodeDimensionsIncludeLabels: false,\n    ready: function() {\n      // Event listener\n      const listener = (eventName, eventData) => {\n        // Respond to event from other graph here\n        // When a node ge\n        if (eventName === 'selectNodeCl') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n            width: 10\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'deselectNodeCl') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          myCyRef.$(`edge[migration='${eventData.nodeId}']`).css({\n            width: 3\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'hoverNodeCl') {\n          myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n            width: 10\n          })\n        }\n        if (eventName === 'dehoverNodeCl') {\n          myCyRef.$(`edge[migration='${eventData.nodeId}->${eventData.nodeId}']`).css({\n            width: 3\n          })\n        }\n        if (eventName === 'selectNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let label = eventData.label;\n\n          myCyRef.$(`edge[label='${label}']`).css({\n            width: 10\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'deselectNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let label = eventData.label;\n\n          myCyRef.$(`edge[label='${label}']`).css({\n            width: 3\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'hoverNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let source = eventData.nodeId;\n\n          myCyRef.$(`node[id='${source}']`).css({\n            width: 25,\n            height: 25\n          })\n          node.trigger('select');\n        }\n        if (eventName === 'dehoverNodeSC') {\n          const node = myCyRef.getElementById(eventData.nodeId);\n          let source = eventData.nodeId;\n\n          myCyRef.$(`node[id='${source}']`).css({\n            width: 15,\n            height: 15\n          })\n          node.trigger('select');\n        }\n      };\n      props.evtbus.addListener(listener);\n    }\n  };\n\n  // Memoization: Log the graph layout so that when states change, we dont have to recompute everything\n  const memoizedGraphComponent = useMemo(() => ( <CytoscapeComponent\n    elements={CytoscapeComponent.normalizeElements(graphData)}\n    style={{ width: width, height: height }}\n    zoomingEnabled={true}\n    maxZoom={3}\n    minZoom={0.1}\n    autounselectify={false}\n    boxSelectionEnabled={true}\n    layout={layout}\n    stylesheet={styleSheet}\n    cy={cy => {\n      myCyRef = cy;\n\n      // Here we handle events on the graph\n      cy.on('mouseover', 'node', function(event) {\n        // Get the node information\n        var node = event.target;\n        var label = node.data('label');\n        \n        // Create the div element\n        var div = document.createElement(\"div\");\n        div.setAttribute(\"class\", \"panel popup\");\n\n        div.innerHTML = `<p>${label}&nbsp;</p>`;\n      \n        // Position the div element near the node\n        const canvas = document.getElementsByTagName('canvas')[0];\n        div.style.position = \"absolute\";\n        div.style.top = (node.renderedPosition('y') + canvas.height*0.5 + 30) + 'px';\n        div.style.left = node.renderedPosition('x') + 'px';\n        if (props.rightcol) {\n          div.style.left = 'calc(50% + ' + node.renderedPosition('x') + 'px)';\n        }\n      \n        // Add the div element to the page\n        document.body.appendChild(div);\n\n        const nodeId = event.target.id();\n\n        // Style the anatomical location tag on hover\n        var labeltag = document.querySelector(`#${label}`);\n        if (labeltag !== null) {\n          labeltag.style.opacity = 1;\n          labeltag.style.zIndex = 100;\n          labeltag.style.fontWeight = 'bold';\n        }\n\n        // Enlarge the node on hover\n        props.evtbus.fireEvent('hoverNodeSC', { nodeId });\n      });\n\n      cy.on('mouseout', 'node', function(event){\n        // Remove the div element on mouseout\n        var div = document.querySelector('.panel.popup');\n        if (document.body.contains(div)) {\n          document.body.removeChild(div);\n        }\n\n        const nodeId = event.target.id();\n\n        var node = event.target;\n        var label = node.data('label');\n\n        var labeltag = document.querySelector(`#${label}`);\n        if (labeltag !== null) {\n          labeltag.style.opacity = 0.7;\n          labeltag.style.zIndex = 1;\n          labeltag.style.fontWeight = 'normal';\n        }\n\n        // Shrink the node back to size\n        props.evtbus.fireEvent('dehoverNodeSC', { nodeId });\n      });\n\n      cy.on('mouseover', 'edge', function(event) {\n        const { target } = event;\n\n        // Enlarge the edge\n        target.css({\n          width: 10\n        })\n        const nodeId = event.target.id();\n        let source = findLabel(target.data().source);\n        let sink = findLabel(target.data().target);\n        let label = target.data().label;\n\n        // Widen the edge in the migration graph as well\n        props.evtbus.fireEvent('selectNode', { nodeId, source, sink, target});\n        props.evtbus.fireEvent('selectNodeSC', { nodeId, source, sink, target, label});\n      });\n\n      cy.on('mouseout', 'edge', function(event) {\n        const { target } = event;\n\n        // Shrink edge back\n        target.css({\n          width: 3\n        })\n        const nodeId = event.target.id();\n        let source = findLabel(target.data().source);\n        let sink = findLabel(target.data().target);\n        let label = target.data().label;\n\n        // Shrink migration edge back\n        props.evtbus.fireEvent('deselectNode', { nodeId, source, sink, target});\n        props.evtbus.fireEvent('deselectNodeSC', { nodeId, source, sink, target, label});\n      });\n    }}\n    abc={console.log(\"myCyRef\", myCyRef)}\n    />), [graphData] )\n    return memoizedGraphComponent;\n}\n\nexport default ClonalTree;","import React, { useEffect, useMemo } from 'react'\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\n/** Migration graph showing the anatomical cancer metastases\n * \n * @param {*} props \n * - labeling:  anatomic labeling for the nodes\n * - coloring:  coloring scheme\n * - tree:      clonal tree edgelist\n * - migration: precomputed migration graph\n * - rightcol:  Is this a dualviz right column migration graph?\n * - rotated:   Is the graph rotated?\n * @returns JSX/HTML\n */\nfunction Migration(props) {\n      var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n\n      const colorPalette = [\n        \"#a6cee3\",\n        \"#1f78b4\",\n        \"#b2df8a\",\n        \"#33a02c\",\n        \"#fb9a99\",\n        \"#e31a1c\",\n        \"#fdbf6f\",\n        \"#ff7f00\",\n        \"#cab2d6\",\n        \"#6a3d9a\",\n        \"#ffff99\",\n        \"#b15928\"\n      ]\n      const ncolors = colorPalette.length;\n    \n      const [width, setWith] = useState(\"100%\");\n      const [height, setHeight] = useState(\"100%\");\n    \n      function onlyUnique(value, index, array) {\n        return array.indexOf(value) === index;\n      }\n    \n      function findLabel(node) {\n        return props.labeling.map((value, index) => {\n          if (value[0] === node) return value[1]}).filter((item) => {return item != undefined})[0];\n      }\n\n      function getColor(label) {\n        let color = props.coloring.map((value, index) => {\n          if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n        return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n      }\n    \n      // The difference between this and the Clonal Tree is that the nodes are anatomical locations instead of clones\n      let nodes = props.tree.map(array => {\n        // Create a new array excluding the third element\n        return array.filter((_, index) => index !== 2);\n      }).flat().filter(onlyUnique).map((value, index) => {\n        return { data: { id:  findLabel(value), label: findLabel(value), type: \"ip\"} };\n      });\n      let edges = props.migration.map((value, index) => {\n        return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n      })\n      for (const [i, edge] of edges.entries()) {\n        if (edge.data.label == 1) {\n          edges[i].data.label = \"\";\n        }\n      }\n    \n      const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n      });\n\n      // Likewise switch the graph data when any of the props values change\n      useEffect(() => {\n        let nodes = props.tree.map(array => {\n          // Create a new array excluding the third element\n          return array.filter((_, index) => index !== 2);\n        }).flat().filter(onlyUnique).map((value, index) => {\n          return { data: { id:  findLabel(value), label: findLabel(value), type: \"ip\"} };\n        });\n        let edges = props.migration.map((value, index) => {\n          return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n        })\n        for (const [i, edge] of edges.entries()) {\n          if (edge.data.label == 1) {\n            edges[i].data.label = \"\";\n          }\n        }\n        setGraphData({\n          nodes: nodes,\n          edges: edges\n        })\n      }, [props.tree, props.labeling, props.migration, props.rotated])\n\n      let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#fff\",\n            'border-width': 10,\n            shape: \"rectangle\",\n            width: 100,\n            height: 50,\n            label: \"data(label)\",\n    \n            // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"text-valign\": \"center\",\n            // \"text-halign\": \"center\",\n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            //text props\n            //\"text-outline-color\": \"#4a56a6\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15,\n            'text-valign': 'center',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        }\n      ];\n\n      props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            'border-color': hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n      })\n\n      edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        styleSheet.push({\n          selector: `edge[id='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(target)}`\n          }\n        })\n      })\n    \n      let myCyRef;\n\n      // Is the migration graph rotated?\n      const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n      let rotated = props.rightcol ? queryParameters.get(\"rotated2\") === \"true\" : queryParameters.get(\"rotated\") === \"true\";\n      if (rotated === null) {\n        rotated = false;\n      }\n\n      const layout = {\n        name: \"dagre\",\n        fit: true,\n        circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n\n        // Position the nodes based on the rotated parameter\n        transform: (node, position) => {\n          return {\n            x: props.rotated ? -2*position.y : position.x,\n            y: props.rotated ? position.x : position.y\n          }\n        },\n\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'selectNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[id='${eventData.nodeId}']`).css({\n                width: 10\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'deselectNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`edge[id='${eventData.nodeId}']`).css({\n                width: 3\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'hoverNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`node[id='${eventData.nodeId}']`).css({\n                'border-width': 20,\n              })\n              edge.trigger('select');\n            }\n            if (eventName === 'dehoverNodeSum') {\n              const edge = myCyRef.getElementById(eventData.nodeId);\n              myCyRef.$(`node[id='${eventData.nodeId}']`).css({\n                'border-width': 10,\n              })\n              edge.trigger('select');\n            }\n          };\n          props.evtbus.addListener(listener);\n        }\n      };\n\n      /** Parameter definitions\n       * \n       * Migration Number (Mu):       Sum of the edge weights\n       * Comigration Number (Gamma):  Number of unique migrations\n       */\n      let mu = 0;\n      let gamma = edges.length;\n      edges.map((edge) => {\n        if (edge.data.label == '') {\n          mu += 1;\n        } else {\n          mu += parseInt(edge.data.label);\n          //gamma += parseInt(edge.data.label) - 1;\n        }\n      })\n\n      // Which mu and gamma are we setting (this is for dualviz)\n      if (!props.rightcol) {\n        sessionStorage.setItem(\"mu\", mu);\n        sessionStorage.setItem(\"gamma\", gamma);\n      } else {\n        sessionStorage.setItem(\"mu2\", mu);\n        sessionStorage.setItem(\"gamma2\", gamma);\n      }\n    \n      const memoizedGraphComponent = useMemo(() => ( <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n\n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 20,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 10,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n        />), [graphData] )\n        return memoizedGraphComponent;\n}\n\nexport default Migration;","class DefaultDict {\n    constructor(defaultVal) {\n        return new Proxy({}, {\n        get: (target, name) => name in target ? target[name] : defaultVal\n        })\n    }\n}\n\nexport default DefaultDict;","import React, { useMemo } from 'react'\nimport { useState } from \"react\";\nimport CytoscapeComponent from 'react-cytoscapejs';\nimport Cytoscape from 'cytoscape';\nimport COSEBilkent from 'cytoscape-cose-bilkent';\nimport dagre from 'cytoscape-dagre';\n\nCytoscape.use(dagre);\nCytoscape.use(COSEBilkent);\n\n/** For the summary visualizer. Union the migration graphs.\n * \n * Summary graphs are edge-weighted by the number of solutions that edge appears in.\n * Therefore the max weight is the number of solutions there are\n * \n * @param {*} props \n * - title:     Name of the dataset\n * - data:      Full data including all solutions\n * - coloring:  Coloring scheme for the nodes\n * - evtbus\n * @returns \n */\nfunction MigrationSummary(props) {\n    // TODO: Perhaps change this since we are redoing filtration\n    var filterOut = [];\n    var filterJson = JSON.parse(sessionStorage.getItem(\"selected\"))\n    if (props.title === filterJson['title']) {\n      for (let key in filterJson) {\n        if (key !== 'title' && !filterJson[key]) {\n          filterOut.push(key.split('→'));\n        }\n      }\n    }\n\n    var hexColorRegex = /^#(?:[0-9a-fA-F]{3}){1,2}$/;\n    const colorPalette = [\n      \"#a6cee3\",\n      \"#1f78b4\",\n      \"#b2df8a\",\n      \"#33a02c\",\n      \"#fb9a99\",\n      \"#e31a1c\",\n      \"#fdbf6f\",\n      \"#ff7f00\",\n      \"#cab2d6\",\n      \"#6a3d9a\",\n      \"#ffff99\",\n      \"#b15928\"\n    ]\n    const ncolors = colorPalette.length;\n\n    function onlyUnique(array) {\n      return [...new Set(array)];\n    }\n\n    function getColor(label) {\n      let color = props.coloring.map((value, index) => {\n        if (value[0] === label) return value[1]}).filter((item) => {return item != undefined})[0];\n      return hexColorRegex.test(color) ? color : colorPalette[parseInt(color) % ncolors]\n    }\n\n    const [width, setWith] = useState(\"100%\");\n    const [height, setHeight] = useState(\"100%\");\n\n    let nodeSet = onlyUnique(props.data.map((value, index) => [value[0], value[1]]).flat())\n\n    let nodes = nodeSet.map((value, index) => {\n        return { data: { id:  value, label: value, type: \"ip\"} };\n    });\n\n    let edges = props.data.filter(e => {\n      for (let f of filterOut) {\n        if (f[0] == e[0] && f[1] == e[1]) {\n          return false;\n        }\n      }\n      return true;\n    }).map((value, index) => {\n      return { data: { source: value[0], target: value[1], label: value[2], id: `${value[0]}->${value[1]}`, clsource: value[0], cltarget: value[1] } }\n    })\n\n    // Dont label edge weights of 1\n    // BTW Edges are weighted by the number of solutions they appear in\n    for (const [i, edge] of edges.entries()) {\n      if (edge.data.label == 1) {\n        edges[i].data.label = \"\";\n      }\n    }\n\n    const [graphData, setGraphData] = useState({\n        nodes: nodes,\n        edges: edges\n    });\n\n    let styleSheet = [\n        {\n          selector: \"node\",\n          style: {\n            backgroundColor: \"#fff\",\n            'border-width': 10,\n            shape: \"rectangle\",\n            width: 100,\n            height: 50,\n            label: \"data(label)\",\n    \n            // \"width\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"height\": \"mapData(score, 0, 0.006769776522008331, 20, 60)\",\n            // \"text-valign\": \"center\",\n            // \"text-halign\": \"center\",\n            \"overlay-padding\": \"6px\",\n            \"z-index\": \"10\",\n            //text props\n            //\"text-outline-color\": \"#4a56a6\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15,\n            'text-valign': 'center',\n            'text-halign': 'center'\n          }\n        },\n        {\n          selector: \"node:selected\",\n          style: {\n            \"border-width\": \"6px\",\n            \"border-color\": \"#AAD8FF\",\n            \"border-opacity\": \"0.5\",\n            \"background-color\": \"#77828C\",\n            width: 50,\n            height: 50,\n            //text props\n            \"text-outline-color\": \"#77828C\",\n            \"text-outline-width\": 8\n          }\n        },\n        {\n          selector: \"node[type='device']\",\n          style: {\n            shape: \"rectangle\"\n          }\n        },\n        {\n          selector: \"edge\",\n          style: {\n            width: 3,\n            // \"line-color\": \"#6774cb\",\n            label: \"data(label)\",\n            \"target-arrow-color\": \"#6774cb\",\n            \"target-arrow-shape\": \"triangle\",\n            \"curve-style\": \"bezier\",\n            \"text-outline-width\": \"2px\",\n            color: \"white\",\n            fontSize: 15\n          }\n        }\n    ];\n    \n    props.coloring.map((value, index) => {\n        styleSheet.push({\n          selector: `node[label='${value[0]}']`,\n          style: {\n            'border-color': hexColorRegex.test(value[1]) ? value[1] : colorPalette[parseInt(value[1]) % ncolors]\n          }\n        })\n    })\n\n    edges.map((value, index) => {\n        let source = value.data.source;\n        let target = value.data.target;\n        styleSheet.push({\n          selector: `edge[id='${source}->${target}']`,\n          style: {\n            'line-fill': 'linear-gradient',\n            'line-gradient-stop-colors': `${getColor(source)} ${getColor(target)}`,\n            'line-gradient-stop-positions': '33% 66%',\n            \"target-arrow-color\": `${getColor(target)}`\n          }\n        })\n    })\n\n    let myCyRef;\n\n    // TODO: Probably remove since theres no rotation button for summary\n    const queryParameters = new URLSearchParams(window.location.search);\n    let rotated = queryParameters.get(\"rotatedsum\") === \"true\";\n    if (rotated === null) {\n        rotated = false;\n    }\n\n    const layout = {\n        name: \"dagre\",\n        fit: true,\n        circle: true,\n        directed: true,\n        padding: 10,\n        // spacingFactor: 1.5,\n        animate: true,\n        animationDuration: 1000,\n        avoidOverlap: true,\n        nodeDimensionsIncludeLabels: false,\n        ready: function() {\n          const listener = (eventName, eventData) => {\n            // Respond to event from other graph here\n            // For example:\n            if (eventName === 'selectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 10\n              })\n              node.trigger('select');\n            }\n            if (eventName === 'deselectNode') {\n              const node = myCyRef.getElementById(eventData.nodeId);\n              let source = eventData.source;\n              let target = eventData.sink;\n              myCyRef.$(`edge[id='${source}->${target}']`).css({\n                width: 3\n              })\n              node.trigger('select');\n            }\n          };\n          props.evtbus.addListener(listener);\n          props.setEvtBus(props.evtbus)\n        }\n    };\n\n    // Compute mu and gamma for the summary\n    let mu = 0;\n    let gamma = edges.length;\n    edges.map((edge) => {\n      if (edge.data.label == '') {\n        mu += 1;\n      } else {\n        mu += parseInt(edge.data.label);\n        //gamma += parseInt(edge.data.label) - 1;\n      }\n    })\n\n    sessionStorage.setItem(\"musum\", mu);\n    sessionStorage.setItem(\"gammasum\", gamma);\n\n    const memoizedGraphComponent = useMemo(() => ( <CytoscapeComponent\n        elements={CytoscapeComponent.normalizeElements(graphData)}\n        // pan={{ x: 200, y: 200 }}\n        style={{ width: width, height: height }}\n        zoomingEnabled={true}\n        maxZoom={3}\n        minZoom={0.1}\n        autounselectify={false}\n        boxSelectionEnabled={true}\n        layout={layout}\n        stylesheet={styleSheet}\n        cy={cy => {\n          myCyRef = cy;\n    \n          cy.on(\"tap\", \"node\", evt => {\n            var node = evt.target;\n          });\n\n          cy.on('mouseover', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 10\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('selectNodeSum', { nodeId, target});\n            props.evtbus.fireEvent('selectNodeCl', { nodeId, target});\n          });\n\n          cy.on('mouseover', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 20,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('hoverNodeSum', { nodeId });\n            props.evtbus.fireEvent('hoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 1;\n              labeltag.style.zIndex = 100;\n              labeltag.style.fontWeight = 'bold';\n            }\n          })\n\n          cy.on('mouseout', 'node', function(event) {\n            const { target } = event;\n            target.css({\n              'border-width': 10,\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('dehoverNodeSum', { nodeId });\n            props.evtbus.fireEvent('dehoverNodeCl', { nodeId });\n\n            var node = event.target;\n            var label = node.data('label');\n\n            var labeltag = document.querySelector(`#${label}`);\n            if (labeltag !== null) {\n              labeltag.style.opacity = 0.7;\n              labeltag.style.zIndex = 1;\n              labeltag.style.fontWeight = 'normal';\n            }\n          })\n    \n          cy.on('mouseout', 'edge', function(event) {\n            const { target } = event;\n            target.css({\n              width: 3\n            })\n            const nodeId = event.target.id();\n            props.evtbus.fireEvent('deselectNodeSum', { nodeId, target});\n            props.evtbus.fireEvent('deselectNodeCl', { nodeId, target});\n          });\n        }}\n        abc={console.log(\"myCyRef\", myCyRef)}\n      />), [graphData] )\n      return memoizedGraphComponent;\n}\n\nexport default MigrationSummary;","import React, { useState, useEffect, useContext } from \"react\"\nimport ClonalTree from \"./ClonalTree.js\";\nimport Migration from \"./Migration.js\";\nimport { useHistory } from 'react-router-dom';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport DefaultDict from \"../utils/DefaultDict.js\";\nimport MigrationSummary from \"./MigrationSummary.js\";\n\n/** Insert a URL parameter\n * \n * @param {*} key (string) variable name\n * @param {*} value (string) variable value\n */\nfunction insertParam(key, value) {\n  // Change a url parameter using URLSearchParams\n  let urlParams = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n  urlParams.set(key, value);\n\n  // Replace the URL\n  //currentUrl.search = urlParams.toString();\n  window.location.href = '#/viz?' + urlParams.toString();\n}\n\n/** TODO: Replace this with an actual window rather than just an alert message\n * \n * @param {*} event Event metadata\n */\nfunction handleKeyPress(event) {\n  if (event.key === '/') {\n    alert('Instructions:\\n\\nToggle and move around the migration graph and clonal tree. Hover over nodes in the clonal tree to find the corresponding anatomical location for the node.\\n\\nSelect different solutions from the dropdown on the top left of the panel.\\n\\nTo compare with another solution, click the [+] on the right. To view the solution space summary, click the [+] on the left.\\n\\nYou can return home by clicking the [X].');\n  }\n}\n\nfunction Viz(props) {\n    const history = useHistory();\n    const [mu, setMu] = useState(0);\n    const [gamma, setGamma] = useState(0);\n    const [mu2, setMu2] = useState(0);\n    const [gamma2, setGamma2] = useState(0);\n    const [muSum, setMuSum] = useState(0);\n    const [gammaSum, setGammaSum] = useState(0);\n    const jsonContents=sessionStorage.getItem(\"json_data\");\n    const wholeData = JSON.parse(jsonContents);\n    const queryParameters = new URLSearchParams(window.location.hash.split(\"?\")[1]);\n\n    let labelName = queryParameters.get(\"labeling\");\n    let labelName2 = queryParameters.get(\"labeling2\");\n\n    let selected = new DefaultDict(true);\n    let violations = new DefaultDict(0);\n\n\n    const [labeling, setLabeling] = useState(labelName)\n    const [labeling2, setLabeling2] = useState(labelName2)\n\n    const [rotate, setRotate] = useState(queryParameters.get(\"rotated\") === \"true\");\n    const [rotate2, setRotate2] = useState(queryParameters.get(\"rotated2\") === \"true\");\n\n    const [type, setType] = useState(queryParameters.get(\"type\"))\n\n    if (labelName == \"undefined\") {\n      insertParam(\"labeling\", wholeData[\"solutions\"][0][\"name\"]);\n      setLabeling(wholeData[\"solutions\"][0][\"name\"])\n    }\n    if (labelName2 == \"undefined\") {\n      insertParam(\"labeling2\", wholeData[\"solutions\"][0][\"name\"]);\n      setLabeling2(wholeData[\"solutions\"][0][\"name\"])\n    }\n\n    sessionStorage.setItem(\"selected\", JSON.stringify(new DefaultDict(0)));\n    sessionStorage.setItem(\"violations\", JSON.stringify(new DefaultDict(0)));\n    \n    let coloring = wholeData[\"coloring\"];\n\n    const migrationSummary = wholeData[\"summary\"][\"migration\"]\n\n    const [data, setData] = useState(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labeling})[0]);\n    const [data2, setData2] = useState(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labeling2})[0]);\n    const [tree, setTree] = useState(data[\"tree\"])\n    const [tree_labeling, setTreeLabeling] = useState(data[\"labeling\"])\n    const [migration, setMigration] = useState(data[\"migration\"])\n    const [tree2, setTree2] = useState([])\n    const [tree_labeling2, setTreeLabeling2] = useState([])\n    const [migration2, setMigration2] = useState([])\n\n    if (coloring === undefined || coloring.length === 0) {\n      coloring = data[\"labeling\"]\n        .map((item) => item[1])\n        .filter((value, index, self) => {\n          return self.indexOf(value) === index;\n        })\n        .map((item, index, self) => [item, `${self.indexOf(item)}`]);\n    }\n\n    useEffect(() => {\n      setTree(data[\"tree\"])\n      setTreeLabeling(data[\"labeling\"])\n      setMigration(data[\"migration\"])\n      setMu(sessionStorage.getItem(\"mu\"));\n      setGamma(sessionStorage.getItem(\"gamma\"));\n    }, [labeling])\n\n    let labelnames = wholeData[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n    let coord_map = wholeData[\"map\"]; \n\n    let getParam = (key) => {\n      const url = new URL(window.location.href);\n      const searchParams = new URLSearchParams(`?${url.hash.slice(1).split('?')[1]}`);\n\n      return searchParams.get(key);\n    }\n\n    let handleLabelChange = (event) => {\n      insertParam(\"labeling\", event.target.value);\n      setLabeling(event.target.value)\n      setData(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === event.target.value})[0]);\n    }\n\n    let handleLabelChange2 = (event) => {\n      insertParam(\"labeling2\", event.target.value);\n      setLabeling2(event.target.value)\n      setData2(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === event.target.value})[0]);\n    }\n\n    let toggleSelected = (name) => {\n      selected['title'] = wholeData['name'];\n      selected[name] = !selected[name];\n      let name_parts = name.split('\\u2192');\n      \n      for (let i = 0; i < migrationSummary.length; i++) {\n          if (migrationSummary[i][0] == name_parts[0] && migrationSummary[i][1] == name_parts[1]) {\n              for (let j = 0; j < migrationSummary[i][2].length; j++) {\n                  (selected[name] ? (violations[migrationSummary[i][2][j]] -= 1) : (violations[migrationSummary[i][2][j]] += 1))\n              }\n          }\n      }\n\n      sessionStorage.setItem(\"violations\", JSON.stringify(violations));\n      sessionStorage.setItem(\"selected\", JSON.stringify(selected));        \n\n      window.location.reload()\n    }\n\n    let addTab = (event) => {\n      //window.location = `${window.location.protocol}//${window.location.host}/mach2-viz/#/dualviz?labeling=${queryParameters.get(\"labeling\")}&labeling2=${queryParameters.get(\"labeling\")}`;\n      if (type === 'sumviz') {\n        insertParam(\"type\", \"triviz\")\n        setType('triviz')\n      } else {\n        insertParam(\"type\", \"dualviz\")\n        setType('dualviz')\n      }\n      insertParam(\"labeling2\", labeling)\n      setLabeling2(labeling)\n      setData2(wholeData[\"solutions\"].filter((item) => {return item[\"name\"] === labeling})[0]);\n      setMu2(sessionStorage.getItem(\"mu2\"));\n      setGamma2(sessionStorage.getItem(\"gamma2\"));\n    }\n\n    let closeTab = (tabIndex) => {\n      if (type === 'dualviz' || type === 'triviz') {\n        setType(type === 'dualviz' ? 'viz' : 'sumviz')\n        console.log(tabIndex)\n        if (tabIndex == 1) {\n          setData(data2)\n          setLabeling(labeling2)\n          setRotate(rotate2)\n          setTree(data2[\"tree\"])\n          setTreeLabeling(data2[\"labeling\"])\n          setMigration(data2[\"migration\"])\n        }\n        insertParam('type', 'viz')\n      } else {\n        window.location = `${window.location.protocol}//${window.location.host}/mach2-viz/#/`\n      }\n    }\n\n    useEffect(() => {\n      if (data2) {\n        setTree2(data2[\"tree\"])\n        setTreeLabeling2(data2[\"labeling\"])\n        setMigration2(data2[\"migration\"])\n      }\n    }, [data2])\n\n    useEffect(() => {\n      setMu2(sessionStorage.getItem(\"mu2\"));\n      setGamma2(sessionStorage.getItem(\"gamma2\"));\n    }, [tree2])\n\n    let gotoSummary = (event) => {\n      if (type === 'dualviz') {\n        setType('triviz');\n        insertParam('type', 'triviz')\n      } else {\n        setType('sumviz');\n        insertParam('type', 'sumviz')\n      }\n    }\n\n    let closeSummary = (event) => {\n      if (type === 'sumviz') {\n        setType('viz')\n        insertParam('type', 'viz')\n      } else {\n        setType('dualviz')\n        insertParam('type', 'dualviz')\n      }\n    }\n\n    let rotateFn = (event) => {\n      let rotated = queryParameters.get(\"rotated\") === \"true\";\n      insertParam(\"rotated\", !rotated);\n      setRotate(!rotated)\n    }\n\n    let rotateFn2 = (event) => {\n      let rotated2 = queryParameters.get(\"rotated2\") === \"true\";\n      insertParam(\"rotated2\", !rotated2);\n      setRotate2(!rotated2)\n    }\n\n    useEffect(() => {\n      document.addEventListener(\"keydown\", handleKeyPress);\n      setMu(sessionStorage.getItem(\"mu\"));\n      setGamma(sessionStorage.getItem(\"gamma\"));\n      setMu2(sessionStorage.getItem(\"mu2\"));\n      setGamma2(sessionStorage.getItem(\"gamma2\"));\n      setMuSum(sessionStorage.getItem(\"musum\"));\n      setGammaSum(sessionStorage.getItem(\"gammasum\"));\n    });\n\n    const [evtBus, setEvtBus] = useState({\n      listeners: [],\n      addListener(callback) {\n        this.listeners.push(callback);\n      },\n      removeListener(callback) {\n        this.listeners = this.listeners.filter(listener => listener !== callback);\n      },\n      fireEvent(eventName, eventData) {\n        this.listeners.forEach((listener) => {\n          listener(eventName, eventData);\n        });\n      },\n    });\n\n    const eventBus2 = {\n      listeners: [],\n      addListener(callback) {\n        this.listeners.push(callback);\n      },\n      removeListener(callback) {\n        this.listeners = this.listeners.filter(listener => listener !== callback);\n      },\n      fireEvent(eventName, eventData) {\n        this.listeners.forEach((listener) => {\n          listener(eventName, eventData);\n        });\n      },\n    };\n\n    return (\n      <div className=\"viz\">\n        {type !== 'sumviz' && type !== 'triviz' ? \n          <div className=\"panel tab_add2\" onClick={gotoSummary}><p className='addpanelp'><b>+</b></p></div>\n          : <></>}\n        {(type === 'sumviz' || type === 'triviz') ?\n          <div className={`panel info ${type === 'sumviz' ? 'one' : 'tri'}`}>\n            <div className=\"titlewrapper\">\n                <h3 className=\"viztitle\"><b>Summary</b></h3>\n                <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p>\n                <a onClick={closeSummary} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className=\"panel migration top left sum\">\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${muSum}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gammaSum}`}</p>\n                <MigrationSummary data={migrationSummary} coloring={coloring} selected={selected} evtbus={evtBus} title={wholeData['name']} setEvtBus={setEvtBus}/>\n            </div>\n          </div> :\n          <></>}\n        <div className={`panel info ${\n            type === 'dualviz' ? 'one' : \n            type === 'sumviz' ? 'one two' :\n            type === 'triviz' ? 'tri two' :\n            ''\n          }`}>\n          <div className=\"titlewrapper\">\n            <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n              <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange}>\n                {labelnames.map(l => \n                  {return (l === labeling) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                )}\n              </select>\n            </b></p></label>\n            <h3 className=\"viztitle\"><b>{data[\"name\"]}</b></h3>\n            {(type !== 'dualviz' && type !== 'triviz' && type !== 'sumviz') ?\n              <p className=\"titleelem end\"><b>Press [/] for help &nbsp;&nbsp;</b></p> :\n              <></>}\n            {type !== 'sumviz' ? \n              <Link onClick={closeTab.bind(null, 1)} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></Link>\n              : <></>}\n          </div>\n          <div className={coord_map === undefined ? \"leftcolumn nolegend\" : \"leftcolumn\"}>\n            <div className={`panel migration top ${(type === 'dualviz' || type === 'triviz') ? 'left' : ''}`}>\n              <p className=\"paneltitle\"><b>Migration Graph</b></p>\n              <p className=\"paneltitle mu\">{`\\u03BC: ${mu}`}</p>\n              <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma}`}</p>\n              <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn}>Rotate</button>\n              <Migration tree={tree} labeling={tree_labeling} coloring={coloring} migration={migration} evtbus={evtBus} rotated={rotate}/>\n            </div>\n            <div className={`panel migration ${(type === 'dualviz' || type === 'triviz') ? 'left': ''}`}>\n              <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n              <ClonalTree tree={tree} labeling={tree_labeling} coloring={coloring} evtbus={evtBus}/>\n            </div>\n          </div>\n        </div>\n        {(type == 'dualviz' || type == 'triviz') ? \n          <div className={`panel info ${type === 'dualviz' ? 'one two' : 'tri three'}`}>\n            <div className=\"titlewrapper\">\n                <label className=\"titleelem left\" for=\"labelings\"><p><b>Full Labeling:\n                <select name=\"labelings\" id=\"labelings\" onChange={handleLabelChange2}>\n                    {labelnames.map(l => \n                    {return (l === labeling2) ? <option value={l} selected>{l}</option> : <option value={l}>{l}</option>}\n                    )}\n                </select>\n                </b></p></label>\n                <h3 className=\"viztitle\"><b>{data2[\"name\"]}</b></h3>\n                <a onClick={closeTab.bind(null, 2)} style={{ textDecoration: 'none', color: 'black'}}><p className='abouttext viz'><b>[X]</b></p></a>\n            </div>\n            <div className={coord_map === undefined ? \"leftcolumn nolegend\" : \"leftcolumn\"}>\n              <div className={`panel migration top ${(type === 'dualviz' || type === 'triviz') ? 'left' : ''}`}>\n                <p className=\"paneltitle\"><b>Migration Graph</b></p>\n                <p className=\"paneltitle mu\">{`\\u03BC: ${mu2}`}</p>\n                <p className=\"paneltitle gamma\">{`\\u03B3: ${gamma2}`}</p>\n                <button type=\"button\" className=\"paneltitle button\" onClick={rotateFn2}>Rotate</button>\n                <Migration tree={tree2} labeling={tree_labeling2} coloring={coloring} migration={migration2} evtbus={type === 'dualviz' ? eventBus2 : evtBus} rightcol={true} rotated={rotate2}/>\n              </div>\n              <div className={`panel migration ${(type === 'dualviz' || type === 'triviz') ? 'left': ''}`}>\n                <p className=\"paneltitle\"><b>Clonal Tree</b></p>\n                <ClonalTree tree={tree2} labeling={tree_labeling2} coloring={coloring} evtbus={type === 'dualviz' ? eventBus2 : evtBus} rightcol={true}/>\n              </div>\n            </div>\n          </div> : \n          <></>}\n        {type !== 'dualviz' && type !== 'triviz' ?\n          <div className=\"panel tab_add\" onClick={addTab}><p className='addpanelp'><b>+</b></p></div>\n          : <></>\n        }\n      </div>\n    )\n}\n\nexport default Viz;","import React, { useState, useEffect, useContext } from 'react';\nimport ReactDOM from \"react-dom\";\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link\n  } from \"react-router-dom\";\n\nimport URLs from \"../utils/default_url.json\";\nimport download from \"../assets/download.png\";\n\nimport axios from 'axios'\nimport fileDownload from 'js-file-download'\n\nimport DefaultDict from \"../utils/DefaultDict.js\";\n\n// Import the patient sample datasets\nimport A7 from \"../samples/A7/A7.json\";\nimport A10 from \"../samples/A10/A10.json\";\nimport A22 from \"../samples/A22/A22.json\";\nimport A29 from \"../samples/A29/A29.json\";\nimport A31 from \"../samples/A31/A31.json\";\nimport A32 from \"../samples/A32/A32.json\";\nimport patient1 from \"../samples/patient1/patient1.json\";\nimport patient2 from \"../samples/patient2/patient2.json\";\nimport patient3 from \"../samples/patient3/patient3.json\";\nimport patient4 from \"../samples/patient4/patient4.json\";\nimport patient7 from \"../samples/patient7/patient7.json\";\nimport patient9 from \"../samples/patient9/patient9.json\";\nimport patient10 from \"../samples/patient10/patient10.json\";\nimport tracerx_res from \"../samples/tracerx_res/tracerx_res.json\";\nimport tracerx_res_old from \"../samples/tracerx_res_old/tracerx_old_all.json\";\nimport tracerx_res_new from \"../samples/tracerx_res_new/tracerx_new_all.json\";\n\n/** The home page for the visualizer\n * \n * @returns JSX/HTML\n */\nfunction Home() {\n    /** Download the json dataset when the icon is clicked\n     * \n     * @param {*} url (string) The url to download from \n     * @param {*} filename (string) The filename to alias as\n     */\n    let handleDownload = (url, filename) => {\n      axios.get(url, {\n        responseType: 'blob',\n      })\n      .then((res) => {\n        fileDownload(res.data, filename)\n      })\n    }\n\n    // Dictionary mapping dataset name to json object\n    var json_dict = {\n      \"A7\": A7,\n      \"A10\": A10,\n      \"A22\": A22,\n      \"A29\": A29,\n      \"A31\": A31,\n      \"A32\": A32,\n      \"patient1\": patient1,\n      \"patient2\": patient2,\n      \"patient3\": patient3,\n      \"patient4\": patient4,\n      \"patient7\": patient7,\n      \"patient9\": patient9,\n      \"patient10\": patient10,\n      \"tracerx_res\": tracerx_res,\n      \"tracerx_res_old\": tracerx_res_old,\n      \"tracerx_res_new\": tracerx_res_new\n    }\n\n    // Table values\n    var default_patients = [\"A7\", \"A10\", \"A22\", \"A29\", \"A31\", \"A32\", \"patient1\", \"patient2\", \"patient3\", \"patient4\", \"patient7\", \"patient9\", \"patient10\", \"tracerx_res\", \"tracerx_res_old\", \"tracerx_res_new\"]\n    var default_dirs = [\"hoadley_2016\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"gundem_2015\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"mcpherson_2016\", \"tracerx\", \"tracerx\", \"tracerx\"]\n    var div_elements = []\n    var which_color = true;\n    const color1 = \"#EBEBEB\";\n    const color2 = \"#A3A3A3\";\n\n    // TODO: Perhaps remove this since we're using a different filtration scheme\n    sessionStorage.setItem(\"selected\", JSON.stringify(new DefaultDict(0)));\n    sessionStorage.setItem(\"violations\", JSON.stringify(new DefaultDict(0)));\n    \n    // Construct div elements representing the table entries\n    for (let i = 0; i < default_patients.length; i++) {\n        var current_patient = default_patients[i];\n        var current_directory = default_dirs[i];\n        var current_color = (which_color ? color1 : color2)\n\n        var link = URLs[current_patient];\n\n        div_elements.push(<div className=\"patient-container\">\n          <div className=\"patientitem\" style={{ backgroundColor: current_color }}>\n              <p><b>{current_directory}</b></p>\n          </div>\n          <div className=\"patientitem\" style={{ backgroundColor: current_color }}>\n            <Link to={link} style={{ textDecoration: 'none', color: 'black'}} onClick={() => {sessionStorage.setItem(\"json_data\", JSON.stringify(json_dict[default_patients[i]]))}}>\n                  <p className='leftli'><b>{current_patient}</b></p>\n            </Link>\n            <img \n              className='rightli' \n              src={download}\n              onClick={() => handleDownload(`https://raw.githubusercontent.com/vikramr2/machina-viz/main/src/samples/${default_patients[i]}/${default_patients[i]}.json`, `${default_patients[i]}.json`)}\n            >\n            </img>\n          </div>\n        </div>)\n        which_color = !which_color;\n    }\n\n    /** TODO: Maybe change the name of this funciton?\n     * But this handles the file upload\n     * \n     * @param {*} e (obj) Event metadata\n     */\n    let handleChange = (e) => {\n      // Get the filename from the metadata\n      const reader = new FileReader();\n      const file = e.target.files[0];\n      let json_contents;\n  \n      reader.onload = function(readerEvt) {\n        // Load the json data from the file\n        let jsonString = readerEvt.target.result;\n        json_contents = jsonString;\n        const data = JSON.parse(json_contents);\n\n        // Fetch the first label to default to on viz\n        let labelnames = data[\"solutions\"].map((value, index) => {return value[\"name\"]});\n\n        // Store the data in session storage so that the viz route can pull the data\n        sessionStorage.setItem(\"json_data\", json_contents);\n  \n        // Update the window location to the viz route\n        window.location = window.location + `viz?labeling=${labelnames[0]}`;\n      }\n      // Read the file as a text\n      reader.readAsText(file);\n    }\n\n    return (\n        <div className='home'>\n            <div className='panel home'>\n                <h1><b>Welcome to MACH2!</b></h1>\n                <div className=\"aboutdir\"><Link to=\"about\" style={{ textDecoration: 'none', color: 'black'}}><h4 className='abouttext'>About</h4></Link></div>\n                <p><b>A lightweight visualizer for MACH2, <a href=\"https://www.nature.com/articles/s41588-018-0106-z\">MACHINA's</a> sequel.</b> Use this visualizer to examine a solution space for the parsimonious migration history problem and its respective summary for a given patient. Examples are provided below. You can also upload a JSON file to view a custom input. See the about page for more information.</p>\n                \n                <h3>Examples</h3>\n                <div className=\"patient-container\">\n                  <div className=\"patientitem\" style={{ backgroundColor: \"#A3A3A3\" }}>\n                      <p className='datasettitle'><b>Dataset</b></p>\n                  </div>\n                  <div className=\"patientitem\" style={{ backgroundColor: \"#A3A3A3\" }}>\n                    <Link to={link} style={{ textDecoration: 'none', color: 'black'}}>\n                      <p className='datasettitle'><b>Patient</b></p>\n                    </Link>\n                  </div>\n                </div>\n\n                <div className=\"panel example\">\n                      { \n                        div_elements.map(elem => (\n                          elem\n                        ))\n                      }\n              </div>\n            </div>\n            \n            <input \n              type=\"file\"\n              id=\"json_upload\" \n              name=\"json_upload\"\n              accept=\"application/JSON\"\n              onChange={handleChange}/>\n            <label for=\"json_upload\"><div id=\"addnew\" className=\"dot\"><h1 className=\"plus\">+</h1><span class=\"tooltiptext\"><b>Upload Patient JSON</b></span></div></label>\n        </div>\n    );\n}\n\nexport default Home;","import React, { useState, useEffect } from \"react\"\nimport './App.css';\n\nimport About from './components/About.js'\nimport Viz from './components/Viz.js'\nimport Home from './components/Home.js'\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\n\nimport { createBrowserHistory } from 'history';\n\n\nfunction App() {\n  const history = createBrowserHistory({\n    basename: '/mach2-viz/#' // Replace with your repository name\n  });\n\n  return (\n    <div className=\"App\">\n        <Switch>\n          <Route path=\"/about\">\n            <About/>\n          </Route>\n          <Route path=\"/viz\">\n            <Viz/>\n          </Route>\n          <Route path=\"/mach2-viz/about\">\n            <About/>\n          </Route>\n          <Route path=\"/mach2-viz/viz\">\n            <Viz/>\n          </Route>\n          <Route path=\"/mach2-viz\">\n            <Home/>\n          </Route>\n          <Route exact path=\"/\">\n            <Home/>\n          </Route>\n        </Switch>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { HashRouter as Router } from \"react-router-dom\";\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <Router basename=\"/mach2-viz\">\n      <App />\n    </Router>\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}